{"version":3,"sources":["assets/scripts/Modules/BattleModule/Data/Action.ts","assets/scripts/Modules/CoreModule/Managers/AlertManager.ts","assets/scripts/Modules/CoreModule/Components/AlertWindow.ts","assets/scripts/Utils/AnimationBridge.ts","assets/scripts/Scenes/SelectorScene/Components/Editor/AnimationPlayer.ts","assets/scripts/Modules/CoreModule/Managers/AssetBundleManager.ts","assets/scripts/Modules/CoreModule/Data/BaseConfig.ts","assets/scripts/Utils/BaseContext.ts","assets/scripts/Modules/CoreModule/Data/BaseData.ts","assets/scripts/Modules/CoreModule/Managers/BaseManager.ts","assets/scripts/Platforms/BasePlatform.ts","assets/scripts/Modules/CoreModule/Data/BaseRepository.ts","assets/scripts/Scenes/BaseScene.ts","assets/scripts/Modules/BattleModule/Components/BattleAnimationsController.ts","assets/scripts/Modules/BattleModule/BattleCommon.ts","assets/scripts/Modules/BattleModule/Configs/BattleConfig.ts","assets/scripts/Modules/BattleModule/Components/BattleDisplay.ts","assets/scripts/Modules/BattleModule/Managers/BattleManager.ts","assets/scripts/Modules/BattleModule/Utils/BattleProcessor.ts","assets/scripts/Modules/BattleModule/Components/Main/BattleRewardContainer.ts","assets/scripts/Modules/BattleModule/Components/Main/BattleRewardDisplay.ts","assets/scripts/Scenes/BattleScene.ts","assets/scripts/Modules/BattleModule/Components/BattlerDisplay.ts","assets/scripts/Modules/BattleModule/Data/Battler.ts","assets/scripts/Modules/BattleModule/Data/Battle.ts","assets/scripts/Modules/BattleModule/Components/Cultivate/BottomListHeroContainer.ts","assets/scripts/Modules/BattleModule/Components/IndependentController/ButtonFlash.ts","assets/scripts/Scenes/SelectorScene/Components/CanvasAdapter.ts","assets/scripts/Modules/BattleModule/Components/IndependentController/ClickAnimation.ts","assets/scripts/Modules/BattleModule/Utils/ColorAssembler.ts","assets/scripts/Modules/BattleModule/Components/Cultivate/Compositing/CompositingWindowDisplay.ts","assets/scripts/Modules/PlayerModule/Utils/ConditionProcessor.ts","assets/scripts/Modules/PlayerModule/Data/Condition.ts","assets/scripts/Modules/CoreModule/Managers/ConfigManager.ts","assets/scripts/Modules/CopyModule/CopyCommon.ts","assets/scripts/Modules/CopyModule/Managers/CopyManager.ts","assets/scripts/Modules/CopyModule/Data/Copy.ts","assets/scripts/Modules/CoreModule/Common/CoreCommon.ts","assets/scripts/Scenes/SelectorScene/Components/CreatedWindow.ts","assets/scripts/Modules/BattleModule/Components/Cultivate/CultivateSelectionGroup.ts","assets/scripts/Modules/BattleModule/Components/Cultivate/CultivateSelection.ts","assets/scripts/Modules/BattleModule/Components/Cultivate/CultivateWindowController.ts","assets/scripts/Modules/CoreModule/Utils/DataLoader.ts","assets/scripts/Modules/CoreModule/Managers/DataManager.ts","assets/scripts/Utils/DateUtils.ts","assets/scripts/Utils/DecoratorUtils.ts","assets/scripts/Modules/BattleModule/Components/IndependentController/DoublePicturesButton.ts","assets/scripts/Modules/CoreModule/Data/DynamicData.ts","assets/scripts/Modules/EconomicModule/Common/EconomicCommon.ts","assets/scripts/Modules/EconomicModule/Manager/EconomicManager.ts","assets/scripts/Modules/HeroModule/Common/EditorCommon.ts","assets/scripts/Modules/HeroModule/Managers/EditorManager.ts","assets/scripts/Modules/BattleModule/Data/Effect.ts","assets/scripts/Modules/CopyModule/Data/Enemy.ts","assets/scripts/Utils/GIFUtils.ts","assets/scripts/Modules/CoreModule/Managers/GameManager.ts","assets/scripts/Scenes/SelectorScene/Components/Editor/GlobalEditorCell.ts","assets/scripts/Scenes/SelectorScene/Components/Editor/GlobalEditorLine.ts","assets/scripts/Scenes/SelectorScene/Components/Editor/GlobalEditor.ts","assets/scripts/Modules/HeroModule/Common/HeroCommon.ts","assets/scripts/Modules/BattleModule/Components/Cultivate/Compositing/HeroCompositingContainer.ts","assets/scripts/Modules/BattleModule/Components/Cultivate/Compositing/HeroCompositingDisplay.ts","assets/scripts/Modules/BattleModule/Components/Hero/HeroGroupContainer.ts","assets/scripts/Modules/BattleModule/Components/Hero/HeroGroupDisplay.ts","assets/scripts/Modules/BattleModule/Components/Hero/HeroGroupHeroContainer.ts","assets/scripts/Modules/BattleModule/Data/HeroGroup.ts","assets/scripts/Modules/BattleModule/Components/Hero/HeroInBagContainer.ts","assets/scripts/Modules/BattleModule/Components/Hero/HeroInBagDisplay.ts","assets/scripts/Modules/BattleModule/Components/Hero/HeroInTeamContainer.ts","assets/scripts/Modules/BattleModule/Components/Hero/HeroInTeamDisplay.ts","assets/scripts/Modules/BattleModule/Components/Cultivate/HeroInfoDisplay.ts","assets/scripts/Modules/BattleModule/Components/Hero/HeroItemContainer.ts","assets/scripts/Modules/BattleModule/Components/Hero/HeroItemDisplay.ts","assets/scripts/Modules/HeroModule/Managers/HeroManager.ts","assets/scripts/Modules/BattleModule/Components/Hero/HeroPageController.ts","assets/scripts/Modules/BattleModule/Components/Cultivate/Compositing/HeroQualitySiftSelectionGroup.ts","assets/scripts/Modules/BattleModule/Components/Cultivate/Compositing/HeroQualitySiftSelection.ts","assets/scripts/Modules/BattleModule/Components/PVP/HeroSelectContainer.ts","assets/scripts/Modules/BattleModule/Components/PVP/HeroSelectDisplay.ts","assets/scripts/Modules/HeroModule/Configs/HeroSystemConfig.ts","assets/scripts/Modules/HeroModule/Data/HeroSystem.ts","assets/scripts/Scenes/SelectorScene/Components/ItemContainers/HeroTypeContainer.ts","assets/scripts/Scenes/SelectorScene/Components/ItemPrefabs/HeroTypeDisplay.ts","assets/scripts/Scenes/SelectorScene/Components/ItemContainers/HeroTypeSelectionGroup.ts","assets/scripts/Scenes/SelectorScene/Components/ItemPrefabs/HeroTypeSelection.ts","assets/scripts/Modules/HeroModule/Data/HeroType.ts","assets/scripts/Modules/BattleModule/Components/HeroWithAvatar.ts","assets/scripts/Modules/HeroModule/Data/Hero.ts","assets/scripts/Modules/BattleModule/Components/IndependentController/HitDamage.ts","assets/scripts/Modules/CoreModule/Managers/I18nManager.ts","assets/scripts/Scenes/SelectorScene/Components/Editor/ImportWindow.ts","assets/scripts/Modules/CoreModule/Components/ItemContainer.ts","assets/scripts/Modules/CoreModule/Components/ItemDisplay.ts","assets/scripts/Modules/BattleModule/Components/Job/JobContainer.ts","assets/scripts/Modules/BattleModule/Components/Job/JobDisplay.ts","assets/scripts/Modules/EconomicModule/Data/Job.ts","assets/scripts/Modules/CoreModule/Components/LanguageSwitch.ts","assets/scripts/Modules/CoreModule/Managers/LoadingManager.ts","assets/scripts/Modules/CoreModule/Components/LoadingMask.ts","assets/scripts/Modules/CoreModule/Components/LocalizedLabel.ts","assets/scripts/Modules/CoreModule/Components/LocalizedSprite.ts","assets/scripts/Modules/BattleModule/Components/Main/MainBattleDisplay.ts","assets/scripts/Modules/BattleModule/Components/MainMenu/MainMenuController.ts","assets/scripts/Modules/BattleModule/Components/MainMenu/MainMenuItemSelectionGroup.ts","assets/scripts/Modules/BattleModule/Components/MainMenu/MainMenuItemSelection.ts","assets/scripts/Utils/MathUtils.ts","assets/scripts/Modules/CoreModule/Utils/MessageQueue.ts","assets/scripts/Modules/EconomicModule/Utils/MoneyConditionProcessor.ts","assets/scripts/Modules/EconomicModule/Utils/MoneyRewardProcessor.ts","assets/scripts/Modules/BattleModule/Data/MotionGroup.ts","assets/scripts/Modules/BattleModule/Utils/MotionProcessor.ts","assets/scripts/Modules/BattleModule/Data/Motion.ts","assets/scripts/Scenes/BattleScene/Components/MyTeamFrame.ts","assets/scripts/Modules/NFTModule/Common/NFTCommon.ts","assets/scripts/Modules/NFTModule/Utils/NFTCreator.ts","assets/scripts/Modules/NFTModule/Managers/NFTManager.ts","assets/scripts/Modules/CoreModule/Managers/NetworkManager.ts","assets/scripts/Utils/NumberUtils.ts","assets/scripts/Modules/BattleModule/Components/PVP/PVPBattleDisplay.ts","assets/scripts/Modules/BattleModule/Components/PVP/PVPBattlerState.ts","assets/scripts/Modules/BattleModule/Components/PVP/PVPRoomDisplay.ts","assets/scripts/Modules/BattleModule/Data/PVPRoom.ts","assets/scripts/Modules/BattleModule/Components/PVP/PVPWindowController.ts","assets/scripts/Modules/CoreModule/Utils/ParamCodec.ts","assets/scripts/Modules/HeroModule/Data/Param.ts","assets/scripts/Scenes/SelectorScene/Components/ItemContainers/PartColorsContainer.ts","assets/scripts/Modules/HeroModule/Configs/PartConfig.ts","assets/scripts/Modules/HeroModule/Data/PartInfo.ts","assets/scripts/Modules/HeroModule/Managers/PartManager.ts","assets/scripts/Scenes/SelectorScene/Components/ItemPrefabs/PartScaler.ts","assets/scripts/Scenes/SelectorScene/Components/ItemContainers/PartTypeContainer.ts","assets/scripts/Scenes/SelectorScene/Components/ItemPrefabs/PartTypeDisplay.ts","assets/scripts/Scenes/SelectorScene/Components/ItemContainers/PartTypeSelectionGroup.ts","assets/scripts/Scenes/SelectorScene/Components/ItemPrefabs/PartTypeSelection.ts","assets/scripts/Modules/HeroModule/Data/PartType.ts","assets/scripts/Scenes/SelectorScene/Components/ItemContainers/PartsContainer.ts","assets/scripts/Scenes/SelectorScene/Components/ItemPrefabs/PartsDisplay.ts","assets/scripts/Scenes/SelectorScene/Components/ItemContainers/PartsSelectionGroup.ts","assets/scripts/Scenes/SelectorScene/Components/ItemPrefabs/PartsSelection.ts","assets/scripts/Modules/HeroModule/Data/Part.ts","assets/scripts/Modules/CoreModule/Managers/PlatformManager.ts","assets/scripts/Modules/BattleModule/Data/PlayerBattle.ts","assets/scripts/Modules/BattleModule/Components/PVP/PlayerCardContainer.ts","assets/scripts/Modules/BattleModule/Components/PVP/PlayerCardDisplay.ts","assets/scripts/Modules/PlayerModule/Common/PlayerCommon.ts","assets/scripts/Modules/CopyModule/Data/PlayerCopy.ts","assets/scripts/Modules/BattleModule/Components/Job/PlayerInfoDisplay.ts","assets/scripts/Modules/EconomicModule/Data/PlayerJob.ts","assets/scripts/Modules/PlayerModule/Managers/PlayerManager.ts","assets/scripts/Modules/EconomicModule/Data/PlayerMoney.ts","assets/scripts/Modules/RankModule/Data/PlayerRank.ts","assets/scripts/Modules/PlayerModule/Data/Player.ts","assets/scripts/Scenes/SelectorScene/Components/ItemPrefabs/PreviewPictureDisplay.ts","assets/scripts/Utils/PromiseUtils.ts","assets/scripts/Modules/HeroModule/Data/Quality.ts","assets/scripts/Modules/BattleModule/Components/IndependentController/RadiusMask.ts","assets/scripts/Modules/BattleModule/Components/IndependentController/RandomAnimation.ts","assets/scripts/Modules/RankModule/Common/RankCommon.ts","assets/scripts/Modules/BattleModule/Components/PVP/RankItemContainer.ts","assets/scripts/Modules/BattleModule/Components/PVP/RankItemDisplay.ts","assets/scripts/Modules/RankModule/Data/RankRecord.ts","assets/scripts/Modules/BattleModule/Utils/ResultProcessor.ts","assets/scripts/Modules/BattleModule/Data/Result.ts","assets/scripts/Modules/PlayerModule/Utils/RewardProcessor.ts","assets/scripts/Modules/PlayerModule/Data/Reward.ts","assets/scripts/Modules/CoreModule/Managers/SceneManager.ts","assets/scripts/Modules/CoreModule/Utils/ScrollviewFilter.ts","assets/scripts/Modules/CoreModule/Components/SelectableGroup.ts","assets/scripts/Modules/CoreModule/Components/SelectableObject.ts","assets/scripts/Modules/BattleModule/Components/PVP/SelectedHeroDisplay.ts","assets/scripts/Scenes/SelectorScene/SelectorScene.ts","assets/scripts/Modules/BattleModule/Components/SettlementWindowController.ts","assets/scripts/Scenes/SelectorScene/Components/Editor/SingleEditor.ts","assets/scripts/Modules/CoreModule/Utils/SingletonUtils.ts","assets/scripts/Utils/SkeletonAnimationBridge.ts","assets/scripts/Modules/BattleModule/Components/PVP/SkillItemContainer.ts","assets/scripts/Modules/BattleModule/Components/PVP/SkillItemDisplay.ts","assets/scripts/Modules/HeroModule/Data/Skill.ts","assets/scripts/Modules/BattleModule/Components/Main/SpeedButtonController.ts","assets/scripts/Utils/SpineUtils.ts","assets/scripts/Modules/BattleModule/Components/StageProgressController.ts","assets/scripts/Modules/BattleModule/Components/Cultivate/StarUp/StarUpWindowDisplay.ts","assets/scripts/Modules/CoreModule/Data/StaticData.ts","assets/scripts/Modules/BattleModule/Components/Cultivate/Summon/SummonWindowDisplay.ts","assets/scripts/Test/TestAutoProfit.ts","assets/scripts/Test/TestGetHero.ts","assets/scripts/Test/TestHeroItem.ts","assets/scripts/Platforms/TestPlatform.ts","assets/scripts/Test/TestSpine.ts","assets/scripts/Modules/BattleModule/Data/Trait.ts","assets/scripts/Utils/TransformUtils.ts","assets/scripts/Utils/TypeUtils.ts","assets/scripts/Modules/BattleModule/Components/Cultivate/Upgrade/UpgradeWindowDisplay.ts","assets/scripts/Modules/BattleModule/Utils/Vec1.ts","assets/scripts/Scenes/SelectorScene/Components/VideoAutoPlay.ts","assets/scripts/Scenes/SelectorScene/Components/WalletController.ts","assets/scripts/Utils/gifshot.js"],"names":["BaseData_1","require","Result_1","BattlerInfo","_super","index","parent","_this","call","this","camp","pos","action","__extends","Object","defineProperty","prototype","get","_a","battle","getBattler","getOpponents","create","battler","res","__decorate","field","BaseData","exports","Action","time","setSubject","subject","setTarget","target","setSkill","skillInfo","_skillInfo","skillId","skill","subjectBattler","skills","find","s","apply","use","makeResult","Number","Result","BaseManager_1","alertMgr","getManager","AlertManager","catchAsError","throwFunc","detail","obj","key","desc","oriFunc","value","p","_i","arguments","length","sent","console","error","e","e_1","Error","data","handleError","objOrUseThrow","useThrow","process","e_2","AlertDialogType","GameError","code","errMsg","alertQueue","handled","status","title","I18nManager_1","i18nMgr","makeStr","dKey","alert","OK","then","message","type","Promise","resolve","task","AlertTask","push","hasAlert","popAlertTask","splice","manager","BaseManager","AlertResult","promiseResolve","feedback","result","ccclass","cc","_decorator","Label","property","Button","Node","AlertManager_1","Layout","AlertWindow","update","isShowing","currentTask","show","titleLabel","string","messageLabel","setupType","window","active","dismiss","Prompt","buttonGroup","okButton","node","cancelButton","OKCancel","getComponentsInChildren","forEach","val","updateLayout","btnOKClicked","btnCancelClicked","CANCEL","backgroundClicked","Component","default","requireComponent","Animation","menu","AnimationBridge","animation","start","getComponent","play","PreviewPictureDisplay_1","Skeleton","sp","AnimationPlayer","skeleton","aniName","clearTrack","setAnimation","addAnimation","DefaultStand","CoreCommon_1","LoadingManager_1","BundleName","Data","Sprites","assetMgr","AssetBundleManager","bundlePool","assetPool","initializeBundles","name","log","_loadBundle","loadBundle","__awaiter","_b","_loadBundlePromise","assetManager","err","bundle","loadAsset","bundleName","assetPath","_getAssetKey","_loadAsset","path","_loadAssetPromise","load","warn","showLoading","CoreLoading","GetAsset","ConfigManager_1","config","clazz","configMgr","registerConfig","BaseConfig","BaseContext","contents","ori","contentName","remove","instance","AssetBundleManager_1","DataLoader_1","pkType","String","typeOrObj","isDesc","constructor","oType","setting","DataLoader","getSetting","properties","assetField","assetFields","dataPK","isLoaded","_loadTasks","onCreated","loadTasks","toJSON","convert","clone","deep","assign","addLoadTask","loadAssetToField","regRes","reg","exec","replace","_c","GameData","_id","toString","SingletonUtils_1","ManagerContext","dt","c","singleton","managerContext","getSingleton","managerValue","managerGetter","updateContext","deltaTime","PlatformManager_1","UserInfoDesc","MaxAdsDayCount","AdsUnitId","BasePlatform","adsEnable","adsCheckCount","initAds","getUserData","getOpenid","openid","getUserInfo","userInfo","loadAds","doLoadAds","adsData","onLoad","showAds","pendingAds","doShowAds","adsCheckTime","check","MiniGamePlatform","adsObject","createAdsObject","bind","onClose","offClose","isEnded","platform","platformMgr","registerPlatform","BaseContext_1","DataManager_1","RepositoryContext","repositoryContext","throwMessage","throwFuncOrErrMsg","repository","getRepository","filterKeys","keys","DefaultThrowFunc","BaseRepository","idMap","processFuncs","dataMgr","getDataList","doc","id","getDataById","filter","list","item","every","findOne","id_1","res_1","getOne","repo","getById","count","exist","ensure","ensureNot","proto","getOwnPropertyNames","fName","processFunc","newFunc","getNewFunc","getKeysFromName","startsWith","getFindOneFunc","getFindFunc","getGetOneFunc","getCountFunc","getExistFunc","getEnsureFunc","getEnsureNotFunc","analyseByClause","split","makeFilter","i","convertKey","charAt","toLowerCase","slice","__spreadArrays","getThrowFunc","funcs","SceneManager_1","NFTManager_1","PlayerManager_1","BaseScene","sceneMgr","curScene","onDestroy","Web3Enable","nftMgr","init","autoConnect","playerMgr","autoLogin","Animations","BattleScene_1","Prefab","instantiate","BattleAnimationsController","animationPrefabs","animations","speeds","speed","battleScene","battleSpeed","a","getAnimationState","defaultClip","isPlaying","destroy","posX","posY","ani","x","y","scaleX","BattleThrow","test","BattleInterface","StartMainBattle","__generator","StartMainBattleAction","EndMainBattle","BoostMainBattle","GetPVPPlayerCount","GetPVPPlayers","StartPVP","StartPVPAction","SkipPVP","BoostPVP","EndPVP","StartCopy","BuyBattleChance","StartTest","NextTest","EndTest","post","BaseConfig_1","BattleConfig","hit","defaultBase","baseHitRate","float","crit","minRate","damageRate","restraint","rates","ItemDisplay_1","BattleAnimationsController_1","BattleDisplay","battlerNodes","battlers","n","BattlerDisplay_1","b","getDisplay","info","refresh","clearItems","addItem","updateAnimationSpeed","updateBattleAnimation","timeScale","times","getCurrentAnimationTimes","getCurrentAnimations","playNormalAnimation","ItemDisplay","battleMgr","BattleManager","battles","startMainBattle","BattleCommon_1","iRes","Battle_1","Battle","isEntering","enter","getBattleNFTs","startBattle","startMainFirstAction","battleId","nextAction","Action_1","addAction","nextMainBattle","startCopy","copyId","processor","BattleProcessor_1","createProcessor","isHero","battlers_1","HeroManager_1","heroMgr","getOneFromServer","nftId","startPVPBattle","selfNftId","roomId","enemyNftId","startPVPFirstAction","Battler_1","PromiseUtils_1","Copy_1","PlayerCopy_1","SelfCamp","PlayerCamp","battleProcessor","BattleProcessor","processorSettings","onActionStartListener","onActionStart","onActionEndListener","onActionEnd","onBattleEndListener","w","onBattleEnd","winner","onStarted","terminate","onTerminated","processRewards","rewards","isResult","gold","campBonusParam","BonusParamType","Gold","invoke","updateBattle","printBattle","BattleState","state","elapsedTime","actionTime","BattlerState","hp","motions","actions","MainBattleProcessor","copyRepo","main","level","calcRewards","isWin","isFirst","PromiseUtils","waitForRetry","resultBattle","setActionTime","pCopy","getPlayerData","PlayerCopy","mainCopy","next","isLose","prev","BattleType","Main","RoundBattleProcessor","CopyBattleProcessor","nextRound","Copy","BossBattleProcessor","Boss","PVPBattleProcessor","PVP","ItemContainer_1","BattleRewardContainer","coldDownTime","onItemsChanged","items","itemsComponents","delayTime","ItemContainer","Sprite","NumberUtils_1","BattleRewardDisplay","icon","animationTime","timer","updateNodeAnimation","onItemChanged","updateLabels","resetTimers","opacity","Math","max","scale","min","autoUnitConvert","BaseScene_1","CopyManager_1","BattleManager_1","BattleScene","heroesInTeam","battleEnded","myTeamFrameNode","cultivateWindowNode","settlementWindowNode","mainBattleNode","pvpBattleNode","currentPVPRoomIndex","roomSelected","currentTargetSelect","currentPVPSelect","heroSelected","loading","connect","setSingleComponents","Date","now","copyMgr","getMainPlayerCopySettings","speedUpTime","mainBattle","myTeamFrame","cultivateWindow","settlementWindow","pvpBattle","setItem","undefined","battle_1","endPVPBattle","waitForLogin","waitForDataLoad","Vec2","ProgressBar","Vec1_1","HitDamage_1","SpineUtils_1","BattlerDisplay","heroScale","hpBar","shadowNode","itemList","set","setPosition","Vec1","skeletonNode","angle","scaleY","setScale","color","oriPos","oriAngle","oriScale","flip","drawSkeleton","entity","parts","temp","addComponent","hero","HeroSkeleton","getCacheOneFromServer","heroTypeId","part","addPart","skeletonData","updateTranslate","updateColor","updateOpacity","updateAnimation","updateResult","sizeFilter","updateHp","updateItemList","sPos","convertPosition","startPos","tPos","targetPos","curPos","lerp","posRate","z","shakePos","offset","origin","add","targetDisplay","Idle","Dead","updateNormalAnimation","anim","normalAnimationTimes","normalAnimations","height","loop","clearTracks","hpDamage","showDamage","component","setValue","isCritical","setType","HitType","Critical","isMiss","Miss","width","progress","misc","mhp","isDead","shift","Color","MathUtils_1","MotionProcessor_1","Skill_1","MotionGroup_1","Enemy_1","SkillInfo","useCount","boostCount","lastTime","skillRepo","boostCost","freezeTime","effects","map","applyLevel","traits","t","boostConditions","Condition_1","ConditionGroup","cGte","ConditionType","frozenTime","boost","isUsable","testData","Battler","params","bonusParams","Hidden","ZERO","ONE","WHITE","_normalAnimations","_normalAnimationTimes","motionProcessors","preparingMotion","_animation","refreshEntity","enemyId","enemy","enemyRepo","Trait_1","TraitGroup","Entering","Acting","Frozen","Dying","battleLevel","isEnemy","enemyLevel","param","Param_1","ParamType","ATK","DEF","AVO","bonusParam","traitBonusParam","TraitType","BonusParam","sum","CP","CPB","HID","POW","AGI","INT","POWB","AGIB","INTB","CRI","DMG","ATKB","CRIB","DMGB","EVA","DEFB","AVOB","EVAB","MHP","SPD","HIT","MHPB","SPDB","HITB","AB1","AB2","AB3","AB4","BP","BPB","addHP","refreshHp","resetHp","judgeDie","isDying","isHPDead","die","addMotion","DieMotionGroupId","onDie","onDead","enterNextBattler","isHidden","onEntered","updateEntering","motion","EnemyType","BossEnterMotionGroupId","EnterMotionGroupId","isIdle","inputAction","generateTarget","generateSkill","MathUtils","randomPick","opponents","invokeAction","canInvokeAction","subjectMotionId","PartAttackId","weapon","weaponPart","attackMotionId","AttackMotionGroupId","_result","processResult","hpRecover","hpDrain","applyResult","canApplyResult","showResult","targetMotionId","onResultApply","onResultEnd","played","motionEndTime","onStart","onFinish","motionGroupRepo","playMotion","m","scheduleMotions","onMotionStart","startTime","endTime","playType","totalEndTime","updateMotions","isCurMotionFinished","onMotionFinish","refreshParams","battleParams","clamp","normalAttack","sInfo","Reward_1","DynamicData_1","EnemyCamp","MainIndex","BattleResult","Reward","inputtingBattlers","inputIndex","battleAnimations","battleAnimationTimes","NotStarted","Starting","Ending","Ended","isRunning","updateProgress","isStarting","isAllBattlersIdle","isNextRound","getBattlers","inputtingBattler","at","generateInputtingBattlers","inputtingBattlersGenerator","getNextBattler","getCampBattlers","getCampAllBattlers","isCampDead","reduce","isMotionsFinished","addBattler","judgeWinner","updateBattlers","actionOrSubject","sort","a1","a2","updateActions","curAction","isActing","isEnding","battler1","battler2","battler3","Boolean","DynamicData","EventHandler","BottomListHeroContainer","cultivateController","totalHeroes","page","heroFrame","setup","acc","player","account","getListFromServer","h","ownerAccount","onPageChange","updateNodes","findIndex","currentHero","event","handler","customEventData","clickEvents","nextPage","lastPage","floor","setItems","onItemClicked","refreshHero","ButtonFlash","button","sprite","on","EventType","TOUCH_START","lightOn","TOUCH_CANCEL","lightOff","TOUCH_END","dstBlendFactor","macro","ONE_MINUS_SRC_ALPHA","Widget","SelectorScene_1","CanvasAdapter","canvas","previewUI","selectUI","createUI","descriptionUI","fixed","windowWidth","isDebug","testWidth","selectorScene","editorMode","top","windowSize","document","documentElement","clientWidth","getHeightByWidth","isAlignLeft","left","right","isAlignHorizontalCenter","horizontalCenter","Vec3","ClickAnimation","clickObj","isLoad","click","_touchListener","setSwallowTouches","position","setTimeout","executeInEditMode","director","RenderComponent","Director","ColorAssembler","colors","onEnable","once","EVENT_AFTER_DRAW","updateColors","onDisable","off","FLAG_COLOR","cmp","_assembler","uintVerts","_renderData","uintVDatas","floatsPerVert","colorOffset","l","HeroInfoDisplay_1","PlayerMoney_1","HeroCompositingDisplay_1","CompositingWindowDisplay","heroInfo","mainHero","secondHero","priceValues","balanceValues","updatePictures","PlayerMoney","token","onHeroChange","selectHero","deselectMainHero","deselectSecondHero","compositingBtn","conditionProcessor","ConditionProcessor","condition","compare","consumable","judge","preprocess","pValue","playerValue","consume","doConsume","FuncConditionProcessor","jFunc","Func","cEq","Condition","eq","cNeq","neq","gte","cGt","gt","cLte","lte","cLt","lt","cFun","tFunc","fun","ConditionProcessor_1","conditions","conds","cond","curCond","processors","processors_1","processors_2","processors_3","Diamond","Medal","Token","Fragment","ConfigManager","configs","_initializeData","CoreInterface","GetConfig","cache","getConfigCache","CopyInterface","AdjustHeroes","CopyManager","getMainPlayerCopy","mainSetting","getPlayerCopy","CopyType","BaseRepository_1","StaticData_1","SpriteFrame","DefaultMaxRound","CopyLevel","mapIdx","enemyIds","firstRewards","winRewards","loseRewards","copy","enemies","eid","win","first","RewardGroup","r","pictureName","maxRound","maxLevel","levels","difficulty","StaticData","CopyRepo","getByType","maxValue","showImmediately","GameLoading","p1","p2","p3","p4","opt","makeInterfaceOption","NetworkManager_1","networkMgr","request","Interface","d","method","hostOrRoute","routeOrLoading","loadingOrUseToken","useEncrypt","route","host","useToken","CoreThrow","SystemError","Default","Request","GetData","UpdateToken","CreatedWindow","picture","light","frame","tips","sf","tipContents","setPicture","base64","img","Image","src","self","onload","texture","Texture2D","initWithElement","handleLoadedTexture","spriteFrame","setQuality","quality","idx","shut","jump","location","href","SelectableGroup_1","CultivateSelectionGroup","SelectableGroup","SelectableObject_1","CultivateSelection","labelNode","redPoint","pictures","controller","onDeselected","onSelected","onSelectionCardChange","select","SelectableObject","CultivateSelection_1","CultivateSelectionGroup_1","CultivateWindowController","selectionCards","selectionGroup","outNodes","inNodes","initSelectionGroup","selectableGroup","addElement","selected","isSelected","open","quit","JsonAsset","isChildClassOf","js","TypeUtils_1","getMetaData","occasions","getDefault","getProperties","getDataPK","getAssetFields","loadProp","all","loadFromAssetBundle","loadFromJSON","json","prop","pType","loadType","asset","Array","ensureType","eType_1","isData","typeOrData","Function","convertProp","keys_1","convertType","DataManager","waitFor","loadingProgress","database","_initializeDatabase","_d","registerData","getData","dataKey","getDataByIndex","getDataDict","dict","values","getDataName","allData","concat","DateUtils","time2DateStr","date","getFullYear","getMonth","padStart","getDate","time2Str","getHours","getMinutes","getSeconds","time2StrInFile","sec2Str","sec","date2DayStart","setHours","isToday","dayDiff","date1","date2","NEGATIVE_INFINITY","POSITIVE_INFINITY","getTime","DayTime","oriFun","NewClass","interactable","EconomicThrow","NotEnoughMoney","NotEnoughFragment","NotEnoughReturn","CanNotUnlockJob","JobAlreadyUnlocked","JobNotUnlocked","ReachJobMaxLevel","NotJobProfitTime","UnlockJobError","UpgradeJobError","ProfitJobError","EconomicInterface","UnlockJob","UpgradeJob","ProfitJob","EconomicCommon_1","economicMgr","EconomicManager","playerJob","jobItems","isAutoProfit","profitAutoCheck","profit","jobItem","j","jobId","profitConditions","profitRewards","upgrade","curLevel","unlockConditions","upgradeConditions","EditorInterface","PushConfig","PullConfig","SaveConfig","RecalcConfig","ImportParts","FileType","PartConfig_1","EditorCommon_1","DateUtils_1","editorMgr","EditorManager","changes","_config","getMapValue","cKey","id1","id2","default_","setMapValue","getPHtScale","ptId","fhtId","htId","pHtScale","getPtBptScale","pOriId","bpOriId","getPtBptOffset","getPtBptHidden","getClothes6Problem","hpOriId","getWeapon3Problem","getFootOffset","bodyId","footOffset","setPHtScale","setPtBptScale","setPtBptOffset","setPtBptHidden","setClothes6Problem","setWeapon3Problem","setFootOffset","getConfig","setConfig","changePtBptScale","bptId","addChange","changePtBptOffset","changePHtScale","chtId","changePtBptHidden","changeClothes6Problem","changeWeapon3Problem","changeFootOffset","getKey","join","getChange","changeOrKey","cKey_1","change","oldChange","getMergeVal","old","new_","resetChange","exportAll","str","JSON","stringify","saveForBrowser","copyToClipboard","export","input","createElement","body","appendChild","setAttribute","execCommand","removeChild","import","openLocalFile","file","readLocalFile","Text","parse","pull","textToWrite","fileNameToSaveAs","sys","isBrowser","textFileAsBlob","Blob","downloadLink","download","innerHTML","webkitURL","createObjectURL","URL","style","display","accept","inputEl","getElementById","onchange","files","readType","reader","FileReader","readyState","DONE","DataUrl","readAsDataURL","readAsText","Binary","readAsBinaryString","ArrayBuffer","readAsArrayBuffer","base64ToTexture2D","callback","onerror","base64ToSpriteFrame","newframe","EffectType","LevelSetting","Effect","percent","None","levelSettings","ls","SkeletonData","Hero_1","Enemy","Normal","RestraintType","Red","skeletonName","score","_battleParams","paramRepo","k","EnemyRepo","gifshot","GIFUtils","makeGIF","images","passedOptions","getSelectedOptions","image","made","gifWidth","gifHeight","interval","frameDuration","sampleInterval","numWorkers","isOutOfDate","Duration","isNeedUpdate","UpdateDuration","invalid","gameMgr","GameManager","lastCheckUpdToken","needUpdateToken","checkUpdateToken","getToken","setToken","updateToken","finally","Slider","EditBox","EditorManager_1","GlobalEditorCell","isTitle","slider","edit","line","globalEditor","singleEditor","partType","firstHeroType","drawTitle","drawValue","getDisplayName","toFixed","editable","isBody","curPart","basePart","cPtId","partTypeId","cHtId","cBhtId","preview","GREEN","textLabel","partsContainer","reset","onScaleSlide","rate","onEdit","num","isNaN","GlobalEditorCell_1","HeroType_1","GlobalEditorLine","cellContainer","cells","editPrefab","titlePrefab","cellCreated","refreshCells","createCells","heroTypeRepo","ht","createCell","heroType","prefab","cell","PartsContainer_1","PartTypeContainer_1","PartType_1","GlobalEditorLine_1","GlobalEditor","partTypeContainer","lineContainer","lines","partTypeRepo","createLines","createLine","HeroInterface","SyncHero","CreateHero","GetHero","GetHeroCount","GetHeroes","UpgradeLevel","BreakLevel","UpgradeStar","UpgradeStrengthen","RefreshAllRank","EmptyCache","ScrollviewFilter_1","HeroQualitySiftSelectionGroup_1","HeroQualitySiftSelection_1","CompositingWindowDisplay_1","HeroCompositingContainer","qualitySelections","compositing","container","onSelectionChange","nodes","ScrollviewFilter","currentSelection","HeroWithAvatar_1","HeroCompositingDisplay","nameLabel","qualitySprite","qualityPictures","moreInfoNode","levelLabel","starNodes","selectedNode","fightingNode","updateMoreInfo","star","HeroGroup_1","HeroGroupContainer","currentGroupType","HeroGroupType","RESTRAINT","groupHeroes","heroes","groupBy","groups","maxIdx","STAR","QUALITY","HeroGroup","setHeroGroupType","parseInt","Quality_1","HeroGroupHeroContainer_1","HeroGroupDisplay","stars","restraintIcons","setTag","heroContainer","starsNode","iconNode","tagLabel","QualityType","HeroGroupHeroContainer","modifyOnClickEvents","btn","getComponentInChildren","clickEventHandler","onHeroClicked","addTeamMember","groupValue","HeroInBagContainer","currentRace","onHeroRaceChange","setHeroBagFilter","race","HeroInBagDisplay","fragmentLabel","qualityBackground","fightingTips","onAvatarClick","HeroInTeamContainer","onTeamHeroClicked","removeTeamMember","HeroInTeamDisplay","qualityLabel","qualityData","shortName","HeroInfoDisplay","qualityStrings","starSprites","restraintSprite","heroSkeleton","starPictures","restraintPictures","size","playAnimation","HeroItemContainer","HeroItemDisplay","attackLabel","defenseLabel","healthLabel","upgradeValueLabel","upgradeTipsLabel","scissorsIcon","upgradeIcon","upgradeNode","upgradePicture","upgradeButton","starLayout","scissorsPictures","buttonPictures","upgradeIcons","HeroItemDisplay_1","atk","def","isMax","breakEnable","break","costs","diamond","enable","paddingLeft","leftPending","spacingX","upgradeBtn","HeroCommon_1","PageSize","HeroManager","serverKey","bt1","bt2","getCacheOne","getNFTDetail","getList","getCacheList","getCount","cnt","maxPage","ceil","createCount","getListWithPage","getCacheListWithPage","getMyNFTList","getNFTCount","getOrCreateCacheList","tokenId","Hero","seriesId","DefaultBt1","gameId","DefaultBt2","chainId","tokenName","avatarUrl","tokenUrl","UR","price","convertPrice","currentPrice","creatorAccount","createAddress","ownerAddress","addedParams","convertParams","partSettings","convertComponentIds","componentIds","bodyPart","rawData","extra","cidsStr","cid","PartSetting","nftMakeId2PartId","getLastNFT","hash","getLastestNFT","synchronizeAllHeroes","addFromServer","_getOneFromServer","getCacheListFromServer","getCountFromServer","getListWithPageFromServer","_getListFromServer","getCacheListWithPageFromServer","_getCountFromServer","getOrCreateCacheListFromServer","strengthen","starUp","HeroPageController","pages","titles","onStateChange","backBtn","teamBtn","bagBtn","HeroQualitySiftSelectionGroup","LabelOutline","HeroQualitySiftSelection","outline","HeroSelectContainer","HeroSelectDisplay","selectNode","selectPicture","selectButton","selectFrame","HeroSelectDisplay_1","selectBtn","HeroSystemConfig","paramCalc","HeroSystemConfig_1","HeroSystem","minLevel","isMin","calc","paramId","affectParams","includes","doCalc","ConfigurableHeroSystem","systemName","cost","formula","eval","LevelData","curMaxLevel","defaultMax","breakLevel","BreakData","heroLevel","StrengthenData","StarData","costTable","paramTable","paramConfig","costConfig","HeroTypeDisplay_1","HeroTypeSelection_1","HeroTypeSelectionGroup_1","HeroTypeContainer","updateSelectionGroup","selection","onSelectChanged","currentHeroType","onHeroTypeChange","onTypeChange","HeroTypeDisplay","label","background","HeroTypeSelectionGroup","HeroTypeSelection","HeroRace","Part_1","HeroType","Race0","defaultParts","defaultSkeletonName","createEnable","getDefaultParts","partRepo","indexOf","HeroTypeRepo","HeroWithAvatar","avatar","avatarHeight","avatarWidth","avatarOffsetX","avatarOffsetY","drawAvatar","bone","findBone","updateWorldTransform","offsetX","worldX","offsetY","worldY","slot","findSlot","getAttachment","HeroSystem_1","HeroState","SuitPattern","_part","partId","DefaultChainId","variation","skillIds","suitPattern","NotCreated","initHeroSystems","defaultSkeleton","_parts","ps","special","SpecialPartType","Body","Weapon","qualityRepo","battlePoint","_heroSystems","bonus","heroSystems","baseParam","isPercent","round","base","pow","agi","int","partInfos","randomString","createRandomQuality","Font","HitDamage","speedX","speedY","accelerationY","scaleSpeed","disappearSpeed","maxScale","atlas","miss","updateScale","updatePosition","setRange","rx","random","ry","font","getLanguage","Languages","I18nManager","curLanguage","registeredLabels","registeredSprites","loadTranslation","translation","tag","tr","ts","spriteName","loadSpriteFrame","registerLabel","unregisterLabel","registerSprite","unregisterSprite","setLanguage","language","updateUIs","getCurrentLanguage","updateText","updateSprite","ImportWindow","importInput","close","text","itemCount","isInclude","refreshComponents","createItemDisplay","onItemDisplayCreated","Job_1","PlayerJob_1","EconomicManager_1","JobContainer","PlayerJob","jobs","jobRepo","job","JobDisplay","profitLabel","profitLabel2","upgradeLabel","upgradeTips","timerLabel","numberLabel","infoNode","profitNode","autoIconNode","iconFrameNode","progressBar","levelProgress","levelUpAnimation","iconSprite","lastProfitTime","drawNodes","drawLabels","drawPictures","drawIcon","auto","upgradeCosts","isLocked","restSecond","restSecondRate","profitBtn","updateDraw","Job","unlockParams","profitParams","upgradeParams","upgradeGold","JobRepo","Toggle","LanguageSwitch","toggles","langIdx","onClick","isChecked","languageLabel","setWindowVisible","visible","langSwitchWindow","loadingMgr","LoadingManager","settingOrObj","detailOrKey","hasSetting","startLoading","finish","blockLoading","mgr","isBlocked","peekLoadingInfo","peekLatestLoadingInfo","LoadingState","loadingInfo","pushLoadingInfo","LoadingInfo","popLatestLoadingInfo","pop","currentValue","getTotalTime","NOT_STARTED","markFinished","updateLoadingText","updateReminder","LOADING","FINISHED","markStarted","BlockInputEvents","LoadingMask","isNotStarted","loadingLabel","blockInput","isFinished","unblockInput","tmp","detailLabel","inputBlocker","enabled","LocalizedLabel","prevRawText","prevLocalizedText","lateUpdate","LocalizedSprite","SpriteName","test33","BattleDisplay_1","StageProgressController_1","MainBattleDisplay","mapName","progressContainer","progressPrefab","backgroundSprite","currentLevel","initProgress","displayName","setMap","updateStageProgress","nextStage","lastStage","enemyIndex","stageIndex","mapPicture","MainMenuItemSelectionGroup_1","MainMenuItemSelection_1","MainMenuController","backgroundSprites","iconSprites","textNodes","playerWindows","backgroundSelect","iconSelect","backgroundUnselect","iconUnselect","redPointTips","selections","updateTips","bg","ic","MainMenuItemSelectionGroup","MainMenuItemSelection","len","chars","maxPos","array","randomPickMany","repeat","randomByRate","MessageQueue","registerListener","queue","addEventListener","MoneyConditionProcessor","pMoney","gain","GoldConditionProcessor","DiamondConditionProcessor","MedalConditionProcessor","FragmentConditionProcessor","ReturnTimeConditionProcessor","pJob","returnTimes","ReturnTime","RewardProcessor_1","MoneyRewardProcessor","RewardProcessor","GoldRewardProcessor","rewardProcessor","RewardType","DiamondRewardProcessor","MedalRewardProcessor","FragmentRewardProcessor","Motion_1","HurtMotionGroupId","SkillMotionGroupId","RecoverMotionGroupId","MotionGroup","Motion","MotionGroupRepo","attack","hurt","recover","DecoratorUtils_1","v2","motionProcessor","MotionProcessor","targetBattler","totalProgress","duration","wait","totalDuration","motionTarget","tType","TargetType","Self","Subject","Target","isStarted","isElapsedStarted","isElapsedEnded","end","isElapsedFinished","onProgress","onEnd","TranslateProcessor","propKey","setupStartVal","setupTargetVal","startVal","targetVal","delta","TranslateType","Delta","Value","Origin","oriVal","MoveProcessor","MotionType","Move","ScaleProcessor","Scale","RotateProcessor","Rotate","JumpProcessor","Jump","ApplyResultProcessor","ApplyResult","ShowResultProcessor","ShowResult","CharAniProcessor","realDuration","getRuntimeData","PlayCharAni","ShakeProcessor","tt","range","sin","PI","Shake","ShineProcessor","realColor","fromHEX","colorCode","Shine","FadeOutProcessor","FadeOut","PlayBattleAniProcessor","PlayBattleAni","PlayNormalAniProcessor","PlayNormalAni","AniOrigin","HeroInTeamContainer_1","HeroGroupContainer_1","CopyCommon_1","MyTeamFrame","heroesInTeamContainer","heroGroupContainer","refreshTeam","getHeroesInTeam","cfg","nftIds","teamHeroNftIds","makeNewTeam","copyType","NFTThrow","Web3InitError","NicknameError","PartStockError","NFTStockError","NFTExistError","TransactionError","NFTCreateError","NFTLoading","Web3Init","CreateNFT","NFTInterface","UploadImgInterface","Testing","NFTCommon_1","NFTCreator","_partIds","calcPrice","getPrice","getNFTPrice","partIds","checkNFT","regular","payForGameToken","getTotalSupply","totalSupply","payForIt","searchHash","checkAccount","defaultAccount","uploadImage","gif","getGIFFormData","binary","atob","bits","Uint8Array","charCodeAt","File","FormData","append","chainType","url","createNFT","MessageQueue_1","NFTManager","DefaultChainType","DefaultWalletType","DefaultTokenType","NFTTestServerPath","NFTServerPath","nftMakeId","getByNftMakeId","partId2NftMakeId","PartTypeIdOffset","walletType","scripts","waitForInit","objOrDefault","args","reject","initialized","tokenType","initialize","loadScripts","setupLanguage","createWeb3","scripts_1","script","loadScript","head","children","lang","w3","getWeb3Lib","updateMessage","processMessage","nftData","dataRes","inviteAddress","address","getEnoughStock","componentId","getPartsStock","getFilterComponentStock","notUniqueParts","filterUniqueComponent","getAllNFTList","pageNum","pageSize","getALLNFTList","getTokenExtraView","imgUrl","dataRej","checkPaySymbol","symbolInfo","symbolName","NFTMAKECreateNFTProgress","getPartList","ct","getNFTComponent","getUserNFTCount","getNFTBalance","getNftCount","limitCreateCount","restCount","getLastestCreateNFT","baseimgurl","basegiffile","NFTMAKECreateimg","getGasPrice","getUSTDBalance","getBalanceOf","getBNBBalance","getBalance","getAllowance","searchTotalSupply","substr","NFTMAKEDisconnect","login","nickname","amount","walletAddress","formData","imgurl","ParamCodec_1","Host","options","_loadingSetting","requestErrorHandler","interface_","registerErrorHandler","RequestErrorHandler","funcDict","register","func","getHandler","handle","errorData","NetworkManager","errorHandler","dataStr","makeQueryParam","isGet","xhr","loader","getXMLHttpRequest","setRequestHeader","GameManager_1","getRequestPromise","loadingSetting","onreadystatechange","decoded","response","responseText","ParamCodec","decode","errData","send","convertParam","lastIndexOf","encodeURIComponent","oriUC","NumberUtils","oriNumber_toString","radix","units","PVPBattlerState_1","PVPBattleDisplay","isSettled","battlerStates","selfBattler","opponentBattler","setupHeroes","judgeCopySettlement","PVPBattlerState","heroLevelLabel","heroAvatarSkeleton","heroQualitySprite","heroRestraintSprite","heroQualityPictures","heroRestraintPictures","heroHpProgressBar","heroHpLabel","updateHpBars","reverse","PVPRoomDisplay","levelFrame","levelValue","tips1","tips2","lock","iconPictures","framePictures","onIndexChange","setIndex","DefaultRoomPlayerCount","PVPRoom","levelRange","rankRange","playerCount","pvpRoomRepo","PVPRoomRepo","PlayerBattle_1","SkillItemContainer_1","PVPWindowController","roomsSelectNode","playersSelectNode","heroesSelectNode","rankNode","skillNode","battleChanceNode","battleChance","fighting","heroSelecting","pvpBtn","drawBattleChance","PlayerBattle","rankBtn","confirmRoomBtn","confirmBattleBtn","refreshBtn","encode","perms","arr","TextEncoder","seed","charset","ch","nextInt","hi","shuffleByte","lo","coded","fromCharCode","deshuffleByte","buf","TextDecoder","nextPermutation","bt","pm","bts","array2byte","un","nums","swap","Param","ParamRepo","getByAttr","PartsDisplay_1","PartsSelectionGroup_1","PartsSelection_1","PartManager_1","PartColorsContainer","partScaler","currentPartType","makeSelectionGroup","getElementAt","setHeroType","partMgr","onSelectCancel","reselect","last","PartConfig","slotOrders","slotNameMap","ptBptScale","ptBptOffset","ptBptHidden","clothes6Problem","weapon3Problem","PartInfo","stock","PartInfo_1","PartManager","findByPartTypeId","toPartInfo","isValid","pid","prices","PartColorsContainer_1","PartScaler","partTypeName","scaleBar","basePartType","findPart","getPartSetting","partSetting","drawScale","PartTypeDisplay_1","PartTypeSelectionGroup_1","PartTypeSelection_1","PartTypeContainer","includeBackground","relative","isBackground","curSel","relSelGroup","optional","PartTypeDisplay","bottomLine","PartTypeSelectionGroup","PartTypeSelection","PartType","baseTypeId","slotNames","Head","Clothes","Foot","Background","findByBaseTypeId","PartTypeRepo","getBySpecial","rootPartTypes","PartsContainer","currentTotalParts","calcScale","partsChanged","onPartsChanged","lastSelection","oriId","deselect","last_1","backgroundPart","switchColorSelector","removePart","PartsDisplay","padding","editor","ban","drawPicture","drawBan","drawEditorInfo","filterPicture","PartsSelectionGroup","PartsSelection","selectedIndex","toggleSelection","Part","isEmpty","containCts","_slotNames","_boneNames","_picture","loadPicture","allPictures","_allPicture","loadAllPictures","names","orders","Map","_skeleton","loadSkeleton","getSlotNames","pt","SpineUtils","getBoneNames","PartRepo","findByHeroTypeId","getByPartTypeId","findByTypes","getPlatformType","DESKTOP_BROWSER","MOBILE_BROWSER","ANDROID","PlatformManager","getPlatform","platformClasses","platforms","ctor","Player_1","RoomNFTInfo","PlayerBattleItem","battleData","refreshCount","getRoomData","battleBuyCosts","buyBattleChance","finishPVPBattle","oppos","o","refreshBuyCosts","buyRefreshCount","refreshPVP","bd","playerData","PlayerData","PlayerCardDisplay_1","ScrollView","PlayerCardContainer","currentDisplayRoomId","roomInfos","nfts","nft","scrollToLeft","PlayerCardDisplay","powerLabel","qualityIcon","drawHero","PlayerInterface","Login","Logout","GetInfo","EditInfo","PlayerCopyItem","PlayerCopySetting","force","copies","settings","playerInfoDisplay","playerName","stableCoin","heroInfoNode","money","PlayerJobItem","profitCount","unlockCosts","unlockGold","unlockReturnTime","isValidProfitTime","_icon","loadIcon","autoProfitTime","PlayerManager","registerPlayerData","playerDataClasses","needLogin","wallet","PlayerCommon_1","Player","setAllPlayerData","localStorage","getItem","getPlayerDataName","getPlayerDataClass","refreshPlayerData","setPlayerData","fragment","medal","gainGold","gainDiamond","gainFragment","gainMedal","PlayerRank","PlayerState","uuid","logout","NFTCreator_1","CreatedWindow_1","Camera","RenderTexture","GIFUtils_1","DefaultAttack","PreviewPictureDisplay","heroName","lastCount","createdWindow","heroBackground","_partsChanged","skeletonSize","camera","winSize","targetSize","recording","initScreenShot","parts_1","refreshHeroType","refreshAnimation","refreshHeroBackground","refreshPrice","setHeroTypeId","randomParts","roots","roots_1","root","subs","subPartTypes","subs_1","sub","shot","xRate","yRate","startRecording","recordingTime","findAnimation","nftPartIds","creator_1","initWithSize","DepthStencilFormat","RB_FMT_S8","targetTexture","render","readPixels","canvasTemp","ctxTemp","getContext","rowBytes","row","srow","imageData","createImageData","putImageData","ctx","drawImage","toDataURL","downloadScreenShot","maxTimes","mode","check_","success","fail","clearInterval","handle_1","setInterval","waitForResult","promise","maxWaitTime","useReject","catch","maxRetryTimes","retryTimes","retry","retryColdDownTime","funcWrapper","before","after","Quality","N","QualityRepo","R","sr","SR","ssr","SSR","ur","disallowMultiple","ENABLE_WEBGL_ANTIALIAS","RadiusMask","_radius","mask","updateMask","Mask","radius","onDraw","_updateGraphics","Type","RECT","graphics","_graphics","clear","anchorX","anchorY","roundRect","game","renderType","RENDER_TYPE_CANVAS","stroke","fill","tooltip","RandomAnimation","timeOffset","timeOffsetAdd","xOffset","yOffset","speedUp","resetPositionEveryLoop","centerX","centerY","resetPosition","sample","stop","RankInterface","GetPVPRank","RankCommon_1","RankItemContainer","rank","RankItemDisplay","rankLabel","rankSprite","rankPictures","fightBtn","RankTypes","RankItem","RankRecord","createdAt","ResultProcessor","doProcess","point","reward","CACHE_KEY","SceneManager","getOrCreateCache","targets","findSceneSingletonTarget","singletonComponent","oriStart","oriOnDestroy","scene","singletonTarget","spacing","minLength","step","scroll","content","scrollToTop","allowNoSelection","elements","removeElement","newIdx","selectSelf","deselectSelf","removeSelf","SelectedHeroDisplay","coinLabel","playerInfoNode","onHeroChanged","GlobalEditor_1","SingleEditor_1","SelectorScene","enterGame","loadScene","exportAllConfigs","importConfigs","exportConfigs","pushConfigs","pullConfigs","toggleGlobalEditor","BattleRewardContainer_1","SettlementWindowController","TransformUtils_1","SingleEditor","curPartDisplay","basePartDisplay","scaleNode","scaleValue","xNode","xBar","xValue","yNode","yBar","yValue","footXNode","footXBar","footXValue","footYNode","footYBar","footYValue","applyButton","clothes6Button","weapon3Button","keyTimes","footMode","addKeyListeners","systemEvent","SystemEvent","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","touchNode","onTouchStart","foot","headPart","footPart","drawParts","drawScaleOffset","drawFootOffset","drawOthers","drawOffsetBar","isClothes","isWeapon","setOffset","setX","setY","setFootX","setFootY","toggleSlot","hidden","toggleClothes6","clothes6","toggleWeapon3","weapon3","processDir","dir","KEY","down","up","applySameHeroType","curBp","bhtId","bp","curBp2_1","bhtId2","bptId2","curHp_1","hhtId","hptId","onScaleEdit","onXSlide","onXEdit","onYSlide","onYEdit","onFootXSlide","onFootXEdit","onFootYSlide","onFootYEdit","keyCode","convertKeyCode","skNode","skPos","getWorldPosition2","loc","currentTouch","getLocation","multiply","names_1","slotTouchTest","SingletonContext","SingletonUtils","context","oriOnLoad_1","oriOnDestroy_1","singletonValue","singletonGetter","SkeletonAnimationBridge","SkeletonAnimationBridge_1","createCallback","startCallback","SkeletonAnimationName","SkillItemContainer","updateSkills","SkillItemDisplay","boostCostLabel","boostTipsLabel","infoLabel","coldTimeLabel","boostButton","coldTimeBar","canBoost","Effect_1","NormalAttackId","Skill","mainParam","targetType","Enemies","targetCount","isPassive","mustHit","subjectMotion","targetMotion","Trait","SkillRepo","SpeedButtonController","speedUpProgress","tipsLabel","toTime","Slot","spine","SlotData","Bone","RegionAttachment","oriUpdateWorldTransformWith","updateWorldTransformWith","rotation","shearX","shearY","scaleX2","scaleY2","sk","tmpSk","_partSettings","drawing","_heroTypeId","removeExclusionParts","removeNotExistParts","adjustDrawOrder","sName","setAttachment","partTypeOrId","drawOrder","cht","bpt","calcOffset","calcHidden","calcClothes6","calcWeapon3","calcFootOffset","isFoot","rParts_1","rPart","sPart","boneOrName","findAllChildren","child","applyBone","tBoneOrAssign","tBone","sBone","assignBone","transformBone","slotOrName","applySlot","tSlot","assignSlot","slotName","lLoc","worldToLocal","attach","aLoc","dist","sqrt","newRad","atan","newLoc","cos","aw","ah","att","region","changeTexture2DToRegion","getTexture","adjustSkeleton","partOrEditorMode","rParts","rParts_2","drawPart","subs_2","visNames","boneNames","attachments","attachment","w1","w6","isW1","isW6","sw6Bone","sw1Bone","sw3Bone","sw6Slot","sw1Slot","sw3Slot","w6Bone","w1Bone","w3Bone","w6Slot","w1Slot","w3Slot","c6","c4","isC6","isC1","sc6Bone","sc1Bone","sc6Slot","sc1Slot","c6Bone","c1Bone","c6Slot","c1Slot","getSlotName","targetSlot","setToSetupPose","judgeDrawOrder","sOrder","sSlot","order","getSkeleton","downMax","upMin","tmpSlot","copySlotToSkeleton","createSlot","slots","copySlot","scaleAttachment","updateAttachmentOffset","regionScaleX","originalWidth","regionScaleY","originalHeight","localX","localY","localX2","localY2","radians","localXCos","localXSin","localYCos","localYSin","localX2Cos","localX2Sin","localY2Cos","localY2Sin","OX1","OY1","OX2","OY2","OX3","OY3","OX4","OY4","getBoneName","boneDataWorldPos","findBoneParent","sParent","targetBone","copyBoneToSkeleton","replaceBone","parentInfo","copyBone","cBone","bones","sortBone","tc","source","pHeroType","skeletonTexture","setRealTexture","TextureAtlasPage","uWrap","TextureWrap","ClampToEdge","vWrap","setWraps","TextureAtlasRegion","rotate","u","v","u2","StageProgressController","isCurrent","updateNode","updateEnemies","currentPosition","abs","StarUpWindowDisplay","currentStarSprites","nextStarSprites","tipsValue","skillPictureNodes","skillLevelNodes","starUpNode","starUpSprite","starUpButton","upgradePictures","pDiamond","starUpBtn","languageKey","SummonWindowDisplay","stablePrice","USTDValues","USTDBalance","HCTValues","HCTBalance","pricePercent","priceSlider","summonBtn","TestAutoProfit","addTime","TestGetHero","shouldUpdate","trySynchronize","testBattle","testCopy","testHit","hitNode","testRealBattle","testRefreshRank","TestHeroItem","scissorsType","TestHeroItem_1","getRealUpgrade","getRealAttack","getRealDefense","getRealHealth","BasePlatform_1","TestPlatform","TestSpine","pic1","pic2","out","doImport","getPosition","color1","CreateRegion","color2","prod","TransformUtil","convertToWorldSpaceAR","getWorldPosition3","getNodePosition2","worldPos","convertToNodeSpaceAR","_res","UpgradeWindowDisplay","contentSelectCards","selectCardsPictures","heroProperty","heroGrow","skillsNode","defenceLabel","atkSpeedLabel","criticalLabel","evasionLabel","skillNames","skillLevels","skillDescriptions","medalLabel","upgradeSprite","spd","cri","eva","showHeroProperty","showHeroGrow","ValueType","EPSILON","_x","mag","magSqr","lengthSqr","subSelf","subtract","mulSelf","multiplyScalar","divSelf","divide","scaleSelf","negSelf","negate","vector","mul","div","neg","scaleAndAdd","distance","squaredDistance","inverse","inverseSafe","normalize","dot","transformMat3","mat","transformMat4","strictEquals","equals","epsilon","toArray","ofs","fromArray","newValue","other","fuzzyEquals","variance","to","ratio","clampf","min_inclusive","max_inclusive","addSelf","cross","normalizeSelf","invsqrt","magSqr1","magSqr2","theta","acos","signAngle","rotateSelf","project","maxAxis","squaredMagnitude","ONE_R","ZERO_R","RIGHT_R","RIGHT","VideoPlayer","VideoAutoPlay","replay","WalletController","USTD","navigator","btoa","getUserMedia","utils","mozURL","msURL","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","requestTimeout","delay","noop","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","output","chr1","chr2","chr3","enc1","enc2","enc3","enc4","isObject","isEmptyObject","isArray","isFunction","isElement","elem","nodeType","isString","isSupported","el","webworkers","Worker","blob","Uint32Array","videoCodecs","testEl","supportObj","mp4","h264","ogv","ogg","webm","canPlayType","each","collection","hasOwnProperty","mergeOptions","defaultOptions","userOptions","newObj","currentUserOption","setCSSAttr","attr","parentNode","createWebWorker","objectUrl","worker","getExtension","getFontSize","resizeFont","fontSize","containerWidth","minFontSize","span","textIndent","visibility","offsetWidth","webWorkerError","utils$2","freeze","validate","skipObj","errorObj","validators","indece","currentValidator","errorCode","errorMsg","messages","error$2","numFrames","keepCameraOn","video","webcamVideoElement","cameraStream","fontWeight","fontFamily","fontColor","textAlign","textBaseline","textXCoordinate","textYCoordinate","progressCallback","completeCallback","saveRenderingContexts","savedRenderingContexts","showFrameText","crossOrigin","waterMark","waterMarkHeight","waterMarkWidth","waterMarkXCoordinate","waterMarkYCoordinate","defaultOptions$2","isWebCamGIFSupported","NeuQuant","alphadec","thepicture","lengthcount","samplefac","network","netsize","prime1","prime2","prime3","prime4","minpicturebytes","maxnetpos","netbiasshift","ncycles","intbiasshift","intbias","gammashift","betashift","beta","betagamma","radiusbiasshift","initradius","radiusdec","initalpha","radbias","alpharadbias","alphabiasshift","netindex","bias","freq","radpower","colorMap","inxbuild","smallpos","smallval","q","previouscol","startpos","learn","g","rad","alpha","samplepixels","pix","lim","altersingle","contest","alterneigh","unbiasnet","alphaMult","biasdist","betafreq","bestpos","bestbiaspos","bestd","bestbiasd","thepic","best","workerCode","onmessage","ev","workerMethods","run","postMessage","dataToRGB","rgb","componentizedPaletteToArray","paletteRGB","paletteArray","processFrameWithQuantizer","rgbComponents","nq","numberPixels","indexedPixels","pixels","palette","_frame","gifWriter","gopts","loop_count","global_palette","check_palette_and_num_colors","num_colors","ended","GifWriterOutputLZWCodeStream","min_code_size","index_stream","cur_subblock","clear_code","code_mask","eoi_code","next_code","cur_code_size","cur_shift","cur","emit_bytes_to_buffer","bit_block_size","emit_code","ib_code","code_table","il","cur_key","cur_code","addFrame","indexed_pixels","opts","using_local_palette","disposal","use_transparency","transparent_index","transparent","noop$2","AnimatedGIF","frames","numRenderedFrames","onRenderCompleteCallback","onRenderProgressCallback","workers","availableWorkers","generatingGIF","initializeWebWorkers","getBase64GIF","animatedGifInstance","existingImages","imagesLength","window.URL","loadedImages","loadedImagesLength","tempImage","ag","addLoadedImagesToGif","loadedImage","currentImage","processFrameWorkerCode","webWorkerObj","webWorker","workerError","getWorker","freeWorker","byteMap","bufferToString","buffer","numberValues","onFrameFinished","hasExistingImages","allDone","beingProcessed","done","generateGIF","processNextFrame","processFrame","AnimatedGifContext","_options","startRendering","gifOptions","gifWriter$$1","iterator","framePalette","setRepeat","element","gifshotOptions","frameText","_gifshotOptions","textToUse","fillStyle","fillText","getImageData","addFrameImageData","imageDataArray","dithering","onRenderProgress","isRendering","destroyWorkers","workerObj","revokeObjectURL","noop$3","screenShot","getGIF","crop","videoElement","videoHeight","videoWidth","waitBetweenFrames","renderingContextsToSave","pendingFrames","sourceX","scaledWidth","sourceWidth","sourceY","scaledHeight","sourceHeight","captureFrames","captureSingleFrame","framesLeft","finishCapture","drawVideo","capture","currentTime","getCropDimensions","videoStream","loadedData","defaultVideoDimensions","findVideoSize","findVideoSizeMethod","attempts","completedCallback","removeEventListener","onStreamingTimeout","stream","existingVideo","streamedCallback","mozSrcObject","srcObject","checkLoadedData","startStreaming","errorCallback","streamed","completed","lastCameraStream","autoplay","muted","startVideoStreaming","timeoutLength","timeout","originalCallback","noGetUserMediaSupportTimeout","clearTimeout","stopVideoStreaming","_obj","cameraStreamTracks","getTracks","hasCameraStreamTracks","firstCameraStreamTrack","pause","createAndGetGIF","cropDimensions","videoType","videoSrc","existingWebcam","createGIF","API","takeSnapShot","mergedOptions","isExistingVideoGIFSupported","codecs","hasValidCodec","currentCodec","isExistingImagesGIFSupported","VERSION","define","amd","module"],"mappings":"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","sourcesContent":["import {BaseData, field, PK, pkType} from \"../../CoreModule/Data/BaseData\";\r\nimport {Result} from \"./Result\";\r\nimport {Battle} from \"./Battle\";\r\nimport {NormalAttackId, Skill, skillRepo} from \"../../HeroModule/Data/Skill\";\r\nimport {Battler, SkillInfo} from \"./Battler\";\r\nimport {BattleConfig} from \"../Configs/BattleConfig\";\r\nimport {configMgr} from \"../../CoreModule/Managers/ConfigManager\";\r\nimport {MathUtils} from \"../../../Utils/MathUtils\";\r\n\r\nexport interface IBattlerInfo {\r\n\tcamp: number; // 阵营\r\n\tpos: number; // 索引\r\n\tbattler: Battler;\r\n\topponents: Battler[];\r\n}\r\n\r\nexport class BattlerInfo extends BaseData implements IBattlerInfo {\r\n\t@field\r\n\tpublic camp: number = 0; // 阵营\r\n\t@field\r\n\tpublic pos: number = 0; // 索引\r\n\r\n\tpublic action?: Action;\r\n\r\n\tconstructor(index, parent) {\r\n\t\tsuper(index);\r\n\t\tthis.action = parent;\r\n\t}\r\n\r\n\tpublic get battle() { return this.action?.battle; }\r\n\tpublic get battler() { return this.battle?.getBattler(this); }\r\n\tpublic get opponents() { return this.battle?.getOpponents(this); }\r\n\r\n\t/**\r\n\t * 创建\r\n\t * @param action\r\n\t * @param battler\r\n\t */\r\n\tpublic static create(action: Action, battler: IBattlerInfo) {\r\n\t\tconst res = new BattlerInfo(null, action);\r\n\t\tres.camp = battler.camp;\r\n\t\tres.pos = battler.pos;\r\n\t\treturn res;\r\n\t}\r\n\r\n}\r\n\r\nexport class Action extends BaseData {\r\n\r\n\t@field\r\n\tpublic time: number = 0;\r\n\t@field(BattlerInfo)\r\n\tpublic subject: BattlerInfo; // 主体（发起方）\r\n\t@field(BattlerInfo)\r\n\tpublic target: BattlerInfo; // 目标\r\n\t@field(Number)\r\n\tpublic skillId: number; // 技能索引\r\n\t@field(Result)\r\n\tpublic result: Result; // 行动结果\r\n\r\n\tpublic battle: Battle = null;\r\n\r\n\t// region 初始化\r\n\r\n\tconstructor(index, parent) {\r\n\t\tsuper(index);\r\n\t\tthis.battle = parent;\r\n\t}\r\n\r\n\tpublic setSubject(battler: IBattlerInfo) {\r\n\t\tthis.subject = BattlerInfo.create(this, battler);\r\n\t}\r\n\tpublic setTarget(battler: IBattlerInfo) {\r\n\t\tthis.target = BattlerInfo.create(this, battler);\r\n\t}\r\n\tpublic setSkill(skillInfo: SkillInfo) {\r\n\t\tthis._skillInfo = skillInfo;\r\n\t\tthis.skillId = skillInfo.skillId;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 属性\r\n\r\n\tpublic get subjectBattler() {\r\n\t\treturn this.battle.getBattler(this.subject);\r\n\t}\r\n\tpublic get targetBattler() {\r\n\t\treturn this.battle.getBattler(this.target);\r\n\t}\r\n\r\n\tpublic get skill() { return this.skillInfo.skill; }\r\n\r\n\tprivate _skillInfo: SkillInfo;\r\n\tpublic get skillInfo() {\r\n\t\treturn this._skillInfo ||= this.subjectBattler\r\n\t\t\t.skills.find(s => s.skillId == this.skillId);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 操作\r\n\r\n\t/**\r\n\t * 使用\r\n\t */\r\n\tpublic apply() {\r\n\t\tthis.skillInfo.use();\r\n\t}\r\n\r\n\t/**\r\n\t * TODO: 计算结果\r\n\t */\r\n\tpublic makeResult() {}\r\n\r\n\t// endregion\r\n\r\n}\r\n","import {BaseManager, getManager, manager} from \"./BaseManager\";\r\n\r\nexport function alertMgr(): AlertManager {\r\n\treturn getManager(AlertManager);\r\n}\r\n\r\nexport interface ErrorData {\r\n\tstatus?: number\r\n\tcode?: number\r\n\terrMsg?: string\r\n\tdetail?: string\r\n\tdata?: any\r\n\thandled?: boolean\r\n}\r\n\r\n/**\r\n * 将函数内捕捉到的异常都转化为throwFunc所抛出的异常类型（可配置detail）\r\n * 如果捕捉到的异常是自定义异常（GameError），不转化，直接抛出，否则拦截并转换\r\n * 如果捕捉到的异常是字符串，直接将其作为detail（不指定detail的情况下）\r\n * @param throwFunc\r\n * @param detail\r\n */\r\nexport function catchAsError(throwFunc: Function, detail?: string) {\r\n\treturn (obj, key, desc) => {\r\n\t\tconst oriFunc = desc.value;\r\n\t\tdesc.value = async function (...p) {\r\n\t\t\ttry {\r\n\t\t\t\treturn await oriFunc.apply(this, p);\r\n\t\t\t} catch (e) { // {detail: string, data: string}\r\n\t\t\t\tconsole.error(\"Catch\", {e});\r\n\r\n\t\t\t\tif (e instanceof Error && e[\"code\"]) throw e;\r\n\r\n\t\t\t\tdetail ||= typeof e == \"string\" ? e : e?.detail;\r\n\t\t\t\tconst data = e?.data || e;\r\n\r\n\t\t\t\tthrowFunc(detail, data);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * 处理异常注解（参数可选）\r\n * @param objOrUseThrow 处理后是否继续往外抛出异常，默认不抛出\r\n * @param key\r\n * @param desc\r\n */\r\nexport function handleError(\r\n\tobjOrUseThrow: any | boolean, key?: string, desc?: any): any {\r\n\r\n\tlet useThrow = false;\r\n\tconst process = (obj, key, desc) => {\r\n\t\tconst oriFunc = desc.value;\r\n\t\tdesc.value = async function(...p) {\r\n\t\t\ttry {\r\n\t\t\t\treturn await oriFunc.apply(this, p);\r\n\t\t\t} catch (e) {\r\n\t\t\t\talertMgr().handleError(e);\r\n\t\t\t\tif (useThrow) throw e;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (typeof objOrUseThrow == \"boolean\") {\r\n\t\tuseThrow = objOrUseThrow;\r\n\t\treturn process;\r\n\t}\r\n\tprocess(objOrUseThrow, key, desc);\r\n}\r\n\r\nexport class GameError extends Error implements ErrorData {\r\n\r\n\tpublic code: number;\r\n\tpublic errMsg: string;\r\n\tpublic detail: string;\r\n\tpublic data: any;\r\n\tpublic handled?: boolean;\r\n\r\n\tconstructor(code: number, errMsg: string,\r\n\t\t\t\t\t\t\tdetail?: string, data?: any) {\r\n\t\tsuper(code + \": \" + errMsg);\r\n\r\n\t\tthis.code = code;\r\n\t\tthis.errMsg = errMsg;\r\n\t\tthis.detail = detail;\r\n\t\tthis.data = data;\r\n\t}\r\n}\r\n\r\nexport enum AlertDialogType {\r\n\tPrompt,\r\n\tOK,\r\n\tOKCancel,\r\n}\r\n\r\nexport interface AlertOptions {\r\n\ttitle?: string;\r\n\tmessage?: string;\r\n\ttype?: AlertDialogType;\r\n}\r\n\r\n@manager\r\nclass AlertManager extends BaseManager {\r\n\r\n\talertQueue: AlertTask[] = [];\r\n\r\n\tpublic handleError(error: ErrorData) {\r\n\t\tif (error.handled) return;\r\n\t\terror.handled = true;\r\n\r\n\t\t// Title约定：默认使用翻译的文本，无翻译文本才用error.errMsg\r\n\t\tconst key = \"ERR\" + (error.status ?\r\n\t\t\terror.status + \"_\" : \"\") + error.code;\r\n\t\tconst title = i18nMgr().makeStr(key, error.errMsg);\r\n\r\n\t\t// const exist = !!i18nMgr().getKey(key);\r\n\t\t// const title = exist ? `\\\\L[${key}]` : error.errMsg;\r\n\r\n\t\t// Detail约定：优先使用setting的detail，再看是否有翻译文本，如果没有就用空值\r\n\t\tconst dKey = key + \"_DETAIL\";\r\n\t\tconst detail = error.detail || i18nMgr().makeStr(dKey);\r\n\r\n\t\t// const dExist = !!i18nMgr().getKey(dKey);\r\n\t\t// const detail = error.detail || (dExist ? `\\\\L[${dKey}]` : \"\");\r\n\r\n\t\tconsole.error(\"Handled error: \", {error, title, detail});\r\n\r\n\t\tthis.alert(title, detail, AlertDialogType.OK).then();\r\n\t}\r\n\r\n\t/**\r\n\t * 唤起AlertWindow\r\n\t */\r\n\tpublic alert(title: string | AlertOptions,\r\n\t\t\t\t\t\t\t message?: string, type?: AlertDialogType): Promise<AlertResult> {\r\n\t\tif (typeof title !== \"string\")\r\n\t\t\treturn this.alert(title.title, title.message, title.type);\r\n\r\n\t\treturn new Promise<AlertResult>((resolve) => {\r\n\t\t\tlet task = new AlertTask(title, message, type, resolve);\r\n\t\t\tthis.alertQueue.push(task);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * 不要调用\r\n\t */\r\n\tpublic hasAlert(): boolean {\r\n\t\treturn this.alertQueue.length > 0;\r\n\t}\r\n\r\n\t/**\r\n\t * 不要调用\r\n\t */\r\n\tpublic popAlertTask(): AlertTask {\r\n\t\tif (this.alertQueue.length == 0) return null;\r\n\t\tlet task = this.alertQueue[0];\r\n\t\tthis.alertQueue.splice(0, 1);\r\n\t\treturn task;\r\n\t}\r\n}\r\n\r\nexport enum AlertResult {\r\n\tOK,\r\n\tCANCEL\r\n}\r\n\r\nexport class AlertTask implements AlertOptions {\r\n\r\n\ttitle: string;\r\n\tmessage: string;\r\n\ttype: AlertDialogType;\r\n\r\n\tprivate readonly promiseResolve: (value: AlertResult) => void;\r\n\r\n\tconstructor(title: string, message: string, type: AlertDialogType, resolve: (value: AlertResult) => void) {\r\n\t\tthis.title = title;\r\n\t\tthis.message = message;\r\n\t\tthis.type = type;\r\n\t\tthis.promiseResolve = resolve;\r\n\t}\r\n\r\n\tpublic feedback(result: AlertResult): void {\r\n\t\tthis.promiseResolve(result);\r\n\t}\r\n}\r\n\r\nimport {i18nMgr} from \"./I18nManager\";\r\nimport {InterfaceOptions} from \"./NetworkManager\";\r\n","import ccclass = cc._decorator.ccclass;\r\nimport Label = cc.Label;\r\nimport property = cc._decorator.property;\r\nimport Button = cc.Button;\r\nimport Node = cc.Node;\r\nimport {AlertDialogType, alertMgr, AlertResult, AlertTask} from \"../Managers/AlertManager\";\r\nimport Layout = cc.Layout;\r\n\r\n\r\n@ccclass\r\nexport default class AlertWindow extends cc.Component {\r\n\r\n    @property(Node)\r\n    window: Node;\r\n\r\n    @property(Label)\r\n    titleLabel: Label;\r\n\r\n    @property(Label)\r\n    messageLabel: Label;\r\n\r\n    @property(Node)\r\n    buttonGroup: Node;\r\n\r\n    @property(Button)\r\n    okButton: Button;\r\n\r\n    @property(Button)\r\n    cancelButton: Button;\r\n\r\n    currentTask: AlertTask;\r\n\r\n    update(dt: number) {\r\n        if (alertMgr().hasAlert() && !this.isShowing()) {\r\n            this.currentTask = alertMgr().popAlertTask();\r\n            this.show();\r\n            this.titleLabel.string = this.currentTask.title;\r\n            this.messageLabel.string = this.currentTask.message;\r\n            this.setupType(this.currentTask.type);\r\n        }\r\n    }\r\n\r\n    private show() {\r\n        this.window.active = true;\r\n    }\r\n\r\n    private dismiss() {\r\n        this.window.active = false;\r\n    }\r\n\r\n    private isShowing() {\r\n        return this.window.active;\r\n    }\r\n\r\n    private setupType(type: AlertDialogType) {\r\n        switch (type) {\r\n            case AlertDialogType.Prompt:\r\n                this.buttonGroup.active = false;\r\n                break;\r\n            case AlertDialogType.OK:\r\n                this.buttonGroup.active = true;\r\n                this.okButton.node.active = true;\r\n                this.cancelButton.node.active = false;\r\n                break;\r\n            case AlertDialogType.OKCancel:\r\n                this.buttonGroup.active = true;\r\n                this.okButton.node.active = true;\r\n                this.cancelButton.node.active = true;\r\n                break;\r\n        }\r\n\r\n        //即使这样更新还是会有布局延迟，考虑后续会加窗口动画，可以通过短暂透明掩盖闪烁\r\n        this.window.getComponentsInChildren(Layout).forEach(val => {\r\n            val.updateLayout();\r\n        });\r\n    }\r\n\r\n\r\n    //////////////////按钮回调开始///////////////////////\r\n    btnOKClicked() {\r\n        this.currentTask.feedback(AlertResult.OK);\r\n        this.dismiss();\r\n    }\r\n\r\n    btnCancelClicked() {\r\n        this.currentTask.feedback(AlertResult.CANCEL);\r\n        this.dismiss();\r\n    }\r\n\r\n    backgroundClicked() {\r\n        if (this.currentTask.type == AlertDialogType.Prompt) {\r\n            this.dismiss();\r\n            this.currentTask.feedback(AlertResult.OK);\r\n        }\r\n    }\r\n\r\n    ////////////////////按钮回调结束////////////////////////\r\n}\r\n","import requireComponent = cc._decorator.requireComponent;\r\nimport Animation = cc.Animation;\r\nimport menu = cc._decorator.menu;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\n@requireComponent(Animation)\r\n@menu(\"其他组件/原生动画封装\")\r\nexport default class AnimationBridge extends cc.Component {\r\n\r\n    animation: Animation = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n        this.animation = this.getComponent(Animation);\r\n    }\r\n\r\n    // update (dt) {}\r\n\r\n    play() {\r\n        this.animation.play();\r\n    }\r\n}\r\n","import {ItemDisplay} from \"../../../../Modules/CoreModule/Components/ItemDisplay\";\r\nimport Label = cc.Label;\r\nimport Node = cc.Node;\r\nimport {PartInfo} from \"../../../../Modules/HeroModule/Data/PartInfo\";\r\nimport {selectorScene} from \"../../SelectorScene\";\r\nimport PartsDisplay from \"../ItemPrefabs/PartsDisplay\";\r\nimport PreviewPictureDisplay, {DefaultStand} from \"../ItemPrefabs/PreviewPictureDisplay\";\r\nimport {configMgr} from \"../../../../Modules/CoreModule/Managers/ConfigManager\";\r\nimport PartConfig from \"../../../../Modules/HeroModule/Configs/PartConfig\";\r\nimport Slider = cc.Slider;\r\nimport PartsContainer from \"../ItemContainers/PartsContainer\";\r\nimport EditBox = cc.EditBox;\r\nimport Component = cc.Component;\r\nimport {DataLoader} from \"../../../../Modules/CoreModule/Utils/DataLoader\";\r\nimport {AlertDialogType, alertMgr} from \"../../../../Modules/CoreModule/Managers/AlertManager\";\r\nimport Skeleton = sp.Skeleton;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class AnimationPlayer extends Component {\r\n\r\n\t@property(Skeleton)\r\n\tskeleton: Skeleton = null;\r\n\t@property\r\n\taniName: string = \"\";\r\n\r\n\t// region 操作\r\n\r\n\tpublic play() {\r\n\t\tthis.skeleton.clearTrack(0)\r\n\t\tthis.skeleton.setAnimation(0, this.aniName, false);\r\n\t\tthis.skeleton.addAnimation(0, DefaultStand, true);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n","\r\nimport {BaseManager, getManager, manager} from \"./BaseManager\";\r\nimport {CoreLoading} from \"../Common/CoreCommon\";\r\nimport {showLoading} from \"./LoadingManager\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\n\r\n// export type AssetType<T extends cc.Asset> = typeof cc.Asset; // __private.cocos_core_asset_manager_shared_AssetType<T>;\r\n\r\nexport const BundleName = {\r\n\tData: \"data\",\r\n\t// Prefabs: \"prefabs\",\r\n\tSprites: \"sprites\"\r\n}\r\n\r\nexport function assetMgr() : AssetBundleManager {\r\n\treturn getManager(AssetBundleManager);\r\n}\r\n\r\n@manager\r\nclass AssetBundleManager extends BaseManager {\r\n\r\n\tprivate bundlePool = {};\r\n\tprivate assetPool = {};\r\n\r\n\t/**\r\n\t * 初始化\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.initializeBundles();\r\n\t}\r\n\tprivate initializeBundles() {\r\n\t\tfor (const key in BundleName) {\r\n\t\t\tconst name = BundleName[key];\r\n\r\n\t\t\tconsole.log(\"Loading Bundle: \", key, \" -> \", name);\r\n\t\t\tthis._loadBundle(name).then();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 获取Bundle实例\r\n\t */\r\n\t@showLoading(CoreLoading.GetAsset)\r\n\tpublic async loadBundle(name: string) :\r\n\t\tPromise<cc.AssetManager.Bundle> {\r\n\t\treturn this.bundlePool[name] || await this._loadBundle(name);\r\n\t}\r\n\tprivate async _loadBundle(name: string) {\r\n\t\treturn await this._loadBundlePromise(name);\r\n\t}\r\n\tprivate _loadBundlePromise(name: string) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tcc.assetManager.loadBundle(name, (err, bundle) => {\r\n\t\t\t\tif (err) {\r\n\t\t\t\t\tconsole.error(\"Load Bundle: \", name, \" ERROR! \", err);\r\n\t\t\t\t\t// reject(err);\r\n\t\t\t\t\tresolve(null);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"Load Bundle: \", name, \" FINISHED! \", bundle);\r\n\t\t\t\t\tresolve(this.bundlePool[name] = bundle);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * 获取资源实例\r\n\t */\r\n\t@showLoading(CoreLoading.GetAsset)\r\n\tpublic async loadAsset<T extends cc.Asset>(\r\n\t\ttype: Constructor<T>, bundleName: string, assetPath: string) : Promise<T> {\r\n\r\n\t\tconst bundle = await this.loadBundle(bundleName);\r\n\t\tif (!bundle) return null;\r\n\r\n\t\tconst key = this._getAssetKey(bundle, assetPath);\r\n\t\treturn this.assetPool[key] ||\r\n\t\t\tawait this._loadAsset(type, bundle, assetPath);\r\n\t}\r\n\tprivate _getAssetKey(bundle: cc.AssetManager.Bundle, path: string) {\r\n\t\treturn bundle.name + \".\" + path;\r\n\t}\r\n\tprivate async _loadAsset<T extends cc.Asset>(\r\n\t\ttype: Constructor<T>, bundle: cc.AssetManager.Bundle, path: string) : Promise<T> {\r\n\t\treturn await this._loadAssetPromise(type, bundle, path);\r\n\t}\r\n\tprivate _loadAssetPromise<T extends cc.Asset>(\r\n\t\ttype: Constructor<T>, bundle: cc.AssetManager.Bundle, path: string) : Promise<T> {\r\n\r\n\t\treturn new Promise<T>((resolve, reject) => {\r\n\t\t\t// @ts-ignore\r\n\t\t\tbundle.load<T>(path, type, (err, res) => {\r\n\t\t\t\tif (err) {\r\n\t\t\t\t\tconsole.warn(\"Load Asset: \", bundle, \" -> \", path, \" ERROR! \", err);\r\n\t\t\t\t\t// reject(err);\r\n\t\t\t\t\tresolve(null);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"Load Asset: \", bundle, \" -> \", path, \" FINISHED! \", res);\r\n\t\t\t\t\tlet key = this._getAssetKey(bundle, path);\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tresolve(this.assetPool[key] = res);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n}\r\n","import {BaseData} from \"./BaseData\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {configMgr} from \"../Managers/ConfigManager\";\r\n\r\nexport function config<T extends BaseConfig>(name: string) {\r\n\treturn (clazz: Constructor<T>) => {\r\n\t\tconfigMgr().registerConfig(clazz, name);\r\n\t}\r\n}\r\n\r\n/**\r\n * 基础配置数据\r\n */\r\nexport abstract class BaseConfig extends BaseData {}\r\n","\r\nexport type Constructor<T = {}> = new (...args: any[]) => T;\r\n\r\nexport abstract class BaseContext<T = any> {\r\n\r\n\tpublic contents = [];\r\n\r\n\tpublic abstract get contentName() : string;\r\n\r\n\tpublic create<T2 extends T>(clazz: Constructor<T2>, value: T2) {\r\n\t\tconst ori = this.find(clazz);\r\n\t\tif (!ori) this.contents.push({clazz, value});\r\n\t\telse ori.value = value;\r\n\r\n\t\tconsole.log(`[${this.contentName} ADD]`, {clazz, value});\r\n\t}\r\n\tpublic remove<T2 extends T>(clazz: Constructor<T2>) {\r\n\t\tconst ori = this.find(clazz);\r\n\t\tif (ori) ori.value = null;\r\n\r\n\t\tconsole.log(`[${this.contentName} REMOVE]`, {clazz});\r\n\t}\r\n\tpublic instance<T2 extends T>(clazz: Constructor<T2>) : T2 {\r\n\t\tif (!clazz) return null;\r\n\r\n\t\tconst res = this.find(clazz)?.value;\r\n\t\tif (!res) console.warn(`[${this.contentName} GET MISS]`, {clazz, res});\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tprivate find<T2 extends T>(clazz: Constructor<T2>):\r\n\t\t{clazz: Constructor<T2>, value: T2} {\r\n\t\treturn this.contents.find(s => s.clazz == clazz);\r\n\t}\r\n\r\n\t// public create<T2 extends T>(\r\n\t// \tclazz: Constructor<T2>){\r\n\t// \tif (clazz) this.contents[clazz.name] = new clazz();\r\n\t//\r\n\t// \tconsole.error(\"[\" + this.contentName() + \" CREATE] \", {clazz, this: this});\r\n\t// }\r\n\t//\r\n\t// public instance<T2 extends T>(\r\n\t// \tclazz: Constructor<T2> | string) : T2 {\r\n\t// \tif (!clazz) return null;\r\n\t//\r\n\t// \tconst res = typeof clazz == 'string' ?\r\n\t// \t\tthis.contents[clazz] : this.instance(clazz.name);\r\n\t//\r\n\t// \tif (!res)\r\n\t// \t\tconsole.error(\"[\" + this.contentName() + \" GET] \",\r\n\t// \t\t\t{clazz, res, this: this});\r\n\t//\r\n\t// \treturn res;\r\n\t// }\r\n}\r\n\r\n","import Asset = cc.Asset;\r\n\r\nimport {assetMgr} from \"../Managers/AssetBundleManager\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {DataLoader} from \"../Utils/DataLoader\";\r\n\r\nexport function pkType() {\r\n\treturn String;\r\n}\r\nexport type PK = string;\r\n\r\n/**\r\n * 需要序列化的字段\r\n */\r\nexport function field<T>(\r\n\ttypeOrObj?: Constructor<T> | Constructor<T>[] | Object, key?: string): any {\r\n\r\n\t// 根据参数判断是否本身就是一个修饰器\r\n\tconst isDesc = key && (typeof typeOrObj !== 'function');\r\n\t// 获取真实的type\r\n\tlet type = isDesc ? typeOrObj[key]?.constructor : typeOrObj;\r\n\r\n\tconst process = (obj: any, key: string) => {\r\n\t\tconst oType = obj.constructor;\r\n\t\tconst setting = DataLoader.getSetting(oType);\r\n\t\tsetting.default = new oType();\r\n\t\tsetting.properties[key] = {\r\n\t\t\ttype, default: setting.default[key]\r\n\t\t}\r\n\t}\r\n\r\n\tif (isDesc) process(typeOrObj, key);\r\n\telse return process;\r\n\r\n\t// const process = (obj: Object, key: string) => {\r\n\t// \tconst cache = DataLoader.getOrCreateCache(obj);\r\n\t//\r\n\t// \tcache.proto.properties[key] = {\r\n\t// \t\ttype, default: DataLoader.getDefaultValue(obj, key)\r\n\t// \t}\r\n\t// }\r\n\t//\r\n\t// if (key && typeof type !== 'function') {\r\n\t// \tconst obj = type;\r\n\t// \ttype = obj[key]?.constructor;\r\n\t// \tprocess(obj, key);\r\n\t// } else return process;\r\n}\r\n\r\n/**\r\n * 需要序列化的资源字段\r\n */\r\nexport function assetField<T extends Asset>(\r\n\ttype: Constructor<T>, bundleName: string, assetPath: string) {\r\n\r\n\treturn (obj, key) => {\r\n\t\tconst setting = DataLoader.getSetting(obj.constructor)\r\n\t\tsetting.assetFields[key] = {\r\n\t\t\ttype, bundleName, assetPath\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * 业务主键\r\n */\r\nexport function dataPK(obj: any, key: string) {\r\n\tconst clazz = obj.constructor;\r\n\tconst setting = DataLoader.getSetting(clazz);\r\n\tif (setting.dataPK)\r\n\t\tthrow `${clazz.name}重复定义主键！！已有主键：${setting.dataPK}，第二次注明的主键：${key}`;\r\n\tsetting.dataPK = key;\r\n}\r\n\r\nexport class BaseData {\r\n\r\n\tpublic index: number = -1; // 下标（非必要）\r\n\tpublic isLoaded: boolean = false; // 是否加载完毕\r\n\r\n\tprivate _loadTasks: Promise<Asset>[] = [];\r\n\r\n\tconstructor(index = null) {\r\n\t\tthis.index = index;\r\n\t}\r\n\r\n\tpublic onCreated() {}\r\n\r\n\tpublic loadTasks(): Promise<Asset>[] { return this._loadTasks; }\r\n\r\n\tpublic toJSON() { return DataLoader.convert(this); }\r\n\r\n\t/**\r\n\t * 克隆\r\n\t */\r\n\tpublic clone(deep = false): this {\r\n\t\t// @ts-ignore\r\n\t\tconst type: Constructor<any> = this.constructor;\r\n\t\treturn deep ? DataLoader.load(type, DataLoader.convert(this)) :\r\n\t\t\tObject.assign(new type(), this);\r\n\t}\r\n\r\n\t/**\r\n\t * 添加读取任务\r\n\t */\r\n\tpublic addLoadTask<T extends Asset>(type: Constructor<T>,\r\n\t\tkey: string, bundleName: string, assetPath: string) {\r\n\t\tthis._loadTasks.push(this.loadAssetToField(\r\n\t\t\ttype, key, bundleName, assetPath))\r\n\t}\r\n\r\n\tprivate async loadAssetToField<T extends Asset>(type: Constructor<T>,\r\n\t\tkey: string, bundleName: string, assetPath: string) {\r\n\t\tconst reg = /\\${(.+?)}/g;\r\n\t\tconst regRes = reg.exec(assetPath)\r\n\t\t// const replaceReg = new RegExp(regRes[0], 'g');\r\n\t\tconst name = this[regRes[1]];\r\n\r\n\t\tif (name) assetPath = assetPath.replace(reg, name);\r\n\r\n\t\treturn this[key] = await assetMgr().loadAsset<T>(type, bundleName, assetPath);\r\n\t}\r\n}\r\n\r\nexport class GameData extends BaseData {\r\n\r\n\t@field(pkType())\r\n\tpublic _id: PK = null;\r\n\t// @field(Number)\r\n\t// public id?: number\r\n\r\n\t/**\r\n\t * 业务主键\r\n\t */\r\n\tpublic get dataId(): string | number {\r\n\t\treturn this._id.toString();\r\n\t}\r\n}\r\n","\r\nimport {getSingleton, singleton} from \"../Utils/SingletonUtils\";\r\nimport {BaseContext, Constructor} from \"../../../Utils/BaseContext\";\r\n\r\n@singleton\r\nexport class ManagerContext extends BaseContext {\r\n\r\n\tget contentName(): string { return \"Manager\"; }\r\n\r\n\tpublic update(dt: number) {\r\n\t\tthis.contents.forEach(c => c.value?.update(dt));\r\n\t}\r\n\r\n}\r\n\r\nexport function manager<T extends BaseManager>(\r\n\tclazz: Constructor<T>) {\r\n\tmanagerContext().create(clazz, new clazz());\r\n\treturn clazz;\r\n}\r\n\r\nexport function managerValue<T extends BaseManager>(\r\n\tclazz: Constructor<T>) {\r\n\treturn (target, key) => {\r\n\t\tconsole.log(\"[USE] \", {clazz, target, key});\r\n\t\ttarget[key] = getManager(clazz);\r\n\t};\r\n}\r\nexport function managerGetter<T extends BaseManager>(\r\n\tclazz: Constructor<T>) {\r\n\treturn (target, key, desc) => {\r\n\t\tdesc.value = () : T =>\r\n\t\t\ttarget[key+'_CACHE'] ||= getManager(clazz)\r\n\t};\r\n}\r\n\r\nfunction managerContext() {\r\n\treturn getSingleton(ManagerContext);\r\n}\r\n\r\nexport function getManager<T extends BaseManager>(\r\n\tclazz: Constructor<T>) {\r\n\treturn managerContext().instance(clazz);\r\n}\r\n\r\nexport function updateContext(dt: number) {\r\n\tmanagerContext().update(dt);\r\n}\r\n\r\nexport abstract class BaseManager {\r\n\r\n\tprotected deltaTime = -1;\r\n\r\n\tpublic update(dt: number) {\r\n\t\tthis.deltaTime = dt;\r\n\t}\r\n\r\n}\r\n","import {Platform, platformMgr} from \"../Modules/CoreModule/Managers/PlatformManager\";\r\nimport {Constructor} from \"../Utils/BaseContext\";\r\n\r\n// 个人信息用途\r\nexport const UserInfoDesc = \"个人信息仅用于排行榜展示\";\r\n// 广告每日次数\r\nexport const MaxAdsDayCount = 15;\r\n// 广告UnitID\r\nexport const AdsUnitId = 'fruit';\r\n\r\nexport abstract class BasePlatform {\r\n\r\n\tpublic type: Platform;\r\n\r\n\tprotected constructor(type: Platform) {\r\n\t\tthis.type = type;\r\n\t\tthis.initAds();\r\n\t}\r\n\r\n\t// region 用户信息\r\n\r\n\t/**\r\n\t * 获取用户数据\r\n\t */\r\n\tpublic async getUserData() {\r\n\t\treturn {\r\n\t\t\ttype: this.type,\r\n\t\t\topenid: await this.getOpenid(),\r\n\t\t\tuserInfo: await this.getUserInfo()\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 获取Openid\r\n\t */\r\n\tpublic abstract getOpenid() : Promise<string>;\r\n\r\n\t/**\r\n\t * 获取用户信息\r\n\t */\r\n\tpublic abstract getUserInfo() : Promise<any>;\r\n\r\n\t// endregion\r\n\r\n\t// region 好友系统\r\n\r\n\t// endregion\r\n\r\n\t// region 广告系统\r\n\r\n\t// TODO: 封装后的代码还需要再次测试\r\n\r\n\t// protected tryCount: number = 0; // 重试次数\r\n\tprotected adsEnable: boolean = false; // 广告是否可用\r\n\r\n\tprotected adsData; // 广告数据\r\n\tprotected adsObject; // 广告对象\r\n\r\n\tpublic adsCheckCount = 5; // 最大尝试次数\r\n\r\n\t// public adsCheckInterval = 500; // 广告检测间隔\r\n\t// public adsMaxCheckTime = 5000; // 广告检测最大时间\r\n\r\n\t/**\r\n\t * 初始化广告\r\n\t */\r\n\tprotected initAds() {\r\n\t\tthis.loadAds().then();\r\n\t}\r\n\r\n\t/**\r\n\t * 拉取一次广告\r\n\t */\r\n\tprotected async loadAds() {\r\n\t\t// 只读取一次\r\n\t\ttry {\r\n\t\t\tthis.adsData = await this.doLoadAds();\r\n\t\t\tconsole.log(\"loadAds: Success: \", this.adsData);\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(\"loadAds: Error: \", e);\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\ttry {\r\n\t\t\t// 调用doLoadAds函数，如果报错会进入catch\r\n\t\t\tthis.adsData = await this.doLoadAds();\r\n\t\t} catch (e) { // 使用同步写法，不用.catch()\r\n\t\t\tconsole.error(\"loadAds: Error: \", e);\r\n\t\t\tif (this.tryCount++ < MaxAdsRetryCount)\r\n\t\t\t\tawait this.loadAds();\r\n\t\t\telse this.tryCount = 0;\r\n\t\t}\r\n\t\t*/\r\n\t}\r\n\r\n\tprotected async doLoadAds(): Promise<any> {\r\n\t\tthis.onLoad();\r\n\t\treturn {};\r\n\t}\r\n\r\n\tprotected onLoad() {\r\n\t\tthis.adsEnable = true;\r\n\t}\r\n\r\n\t/**\r\n\t * 显示广告\r\n\t * 如果暂时无法显示，将会自动手动获取，直到可以显示为止\r\n\t * 如果失败次数超过限制，抛出异常\r\n\t */\r\n\tpublic async showAds() : Promise<boolean> {\r\n\t\tconst res = await this.pendingAds();\r\n\t\tif (!res) throw new Error(\"暂无广告可用\");\r\n\t\treturn await this.doShowAds();\r\n\t}\r\n\r\n\tprivate pendingAds() : Promise<boolean> {\r\n\t\treturn new Promise<boolean>((resolve => {\r\n\t\t\tlet adsCheckTime = 0;\r\n\t\t\tconst check = async () => {\r\n\t\t\t\t// 先尝试读取广告\r\n\t\t\t\tawait this.loadAds();\r\n\r\n\t\t\t\t// 如果广告已经可以用了 或者 广告检查次数超过了\r\n\t\t\t\tif (this.adsEnable ||\r\n\t\t\t\t\t++adsCheckTime >= this.adsCheckCount)\r\n\t\t\t\t\tresolve(this.adsEnable); // 返回当前可用结果\r\n\r\n\t\t\t\t// 否则，再次尝试获取并检查\r\n\t\t\t\telse check().then();\r\n\t\t\t}\r\n\t\t\tcheck().then();\r\n\t\t}));\r\n\t}\r\n\r\n\tprotected async doShowAds() : Promise<boolean> {\r\n\t\tthis.adsEnable = false;\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n\r\nexport abstract class MiniGamePlatform extends BasePlatform {\r\n\r\n\t// region 广告\r\n\r\n\tprotected abstract createAdsObject(adUnitId);\r\n\r\n\tprotected initAds() {\r\n\t\tthis.adsObject = this.createAdsObject(AdsUnitId);\r\n\t\tthis.adsObject.onLoad(this.onLoad.bind(this));\r\n\t\t// this.adsObject.onError(() => this.tryCount++);\r\n\t\tthis.loadAds().then();\r\n\r\n\t}\r\n\r\n\t/*\r\n\t// 手动拉取广告\r\n\tprivate async loadAds() {\r\n\t\tthis.adsEnable = false;\r\n\t\ttry {\r\n\t\t\tthis.adsData = await this.adsObject.load();\r\n\t\t\tconsole.log(\"loadAds: Success: \", this.adsData);\r\n\t\t} catch (e) { // 使用同步写法，不用.catch()\r\n\t\t\tconsole.error(\"loadAds: Error: \", e);\r\n\t\t\tthis.tryCount < MaxAdsRetryCount ?\r\n\t\t\t\tthis.loadAds() : this.tryCount = 0;\r\n\t\t}\r\n\t}\r\n\t*/\r\n\r\n\tprotected async doLoadAds(): Promise<any> {\r\n\t\tthis.adsEnable = false;\r\n\t\treturn await this.adsObject.load();\r\n\t}\r\n\r\n\tprotected async doShowAds(): Promise<boolean> {\r\n\t\tif (!await super.doShowAds()) return false;\r\n\r\n\t\tawait this.adsObject.show();\r\n\r\n\t\treturn await new Promise<boolean>(((resolve, reject) => {\r\n\t\t\tthis.adsObject.onClose(res => {\r\n\t\t\t\tthis.adsObject.offClose();\r\n\t\t\t\tresolve(res && res.isEnded || !res);\r\n\t\t\t});\r\n\t\t}))\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n\r\nexport function platform(type: Platform) {\r\n\treturn <T extends BasePlatform>(clazz: Constructor<T>) => {\r\n\t\tplatformMgr().registerPlatform(type, clazz);\r\n\t\treturn clazz;\r\n\t}\r\n}\r\n","import {BaseContext, Constructor} from \"../../../Utils/BaseContext\";\r\nimport {getSingleton, singleton} from \"../Utils/SingletonUtils\";\r\nimport {GameData, PK} from \"./BaseData\";\r\nimport {dataMgr} from \"../Managers/DataManager\";\r\nimport {StaticData} from \"./StaticData\";\r\n\r\n@singleton\r\nexport class RepositoryContext extends BaseContext<BaseRepository<any>> {\r\n\r\n\tget contentName(): string { return \"Repository\"; }\r\n\r\n}\r\n\r\nfunction repositoryContext() {\r\n\treturn getSingleton(RepositoryContext);\r\n}\r\n\r\nexport function repository<T extends BaseRepository<any>>(\r\n\tclazz: Constructor<T>) {\r\n\trepositoryContext().create(clazz, new clazz());\r\n\treturn clazz;\r\n}\r\n\r\nexport function getRepository<T extends BaseRepository<any>>(\r\n\tclazz: Constructor<T>) {\r\n\treturn repositoryContext().instance(clazz);\r\n}\r\n\r\nexport function filterKeys<T = any>(...keys: (keyof T)[]) {\r\n\treturn (obj, key, desc) => {\r\n\t\tconst clazz = obj.constructor;\r\n\t\tclazz[\"defaultKeys\"] ||= {};\r\n\r\n\t\tclazz[\"defaultKeys\"][key] = keys;\r\n\t}\r\n}\r\n\r\nexport function throwMessage(\r\n\tthrowFuncOrErrMsg: Function | string, detail?: string) {\r\n\treturn (obj, key, desc) => {\r\n\t\tconst clazz = obj.constructor;\r\n\t\tclazz[\"throwFuncs\"] ||= {};\r\n\r\n\t\tclazz[\"throwFuncs\"][key] = () => {\r\n\t\t\tif (typeof throwFuncOrErrMsg == \"string\")\r\n\t\t\t\tthrow throwFuncOrErrMsg;\r\n\t\t\telse\r\n\t\t\t\tthrowFuncOrErrMsg(detail);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport type AutoMatchType = \"find\" | \"findOne\" |\r\n\t\"get\" | \"getOne\" | \"exist\" | \"count\" | \"ensure\" | \"ensureNot\";\r\n\r\nexport const DefaultThrowFunc = (data) => {\r\n\tconsole.error(data);\r\n\tthrow \"Ensure/Get Error!\"\r\n};\r\n\r\nexport type F<T extends GameData> = Partial<T>;\r\n\r\nexport abstract class BaseRepository<T extends StaticData> {\r\n\r\n\tpublic abstract get clazz(): Constructor<T>;\r\n\r\n\tprivate idMap: {[T: number]: string} = {};\r\n\r\n\t// TODO: 做一个getById的缓存功能\r\n\r\n\tconstructor() {\r\n\t\tthis.processFuncs();\r\n\t}\r\n\r\n\t// region 预设函数\r\n\r\n\tpublic get list() {\r\n\t\treturn dataMgr().getDataList(this.clazz);\r\n\t}\r\n\r\n\tpublic doc(id: PK) {\r\n\t\treturn dataMgr().getDataById(this.clazz, id);\r\n\t}\r\n\r\n\tpublic find(filter: F<T> = {}) {\r\n\t\tconst keys = Object.keys(filter);\r\n\t\tif (keys.length <= 0) return this.list;\r\n\t\treturn this.list.filter(item =>\r\n\t\t\tkeys.every(key => item[key] == filter[key])\r\n\t\t);\r\n\t}\r\n\tpublic findOne(filter: F<T> = {}) {\r\n\t\tconst keys = Object.keys(filter);\r\n\t\tif (keys.length <= 0) return this.list[0];\r\n\t\tif (\"id\" in filter) { // 如果存在业务主键\r\n\t\t\tconst id = filter.id;\r\n\t\t\tconst _id = this.idMap[id] ||=\r\n\t\t\t\tthis.list.find(item => item.id == id)._id;\r\n\t\t\tconst res = this.doc(_id);\r\n\t\t\treturn keys.every(key => res[key] == filter[key]) ? res : null;\r\n\t\t}\r\n\t\treturn this.list.find(item =>\r\n\t\t\tkeys.every(key => item[key] == filter[key])\r\n\t\t);\r\n\t}\r\n\r\n\tpublic getOne(filter: F<T> = {},\r\n\t\t\t\t\t\t\t\t\t\t\tthrowFunc: Function = DefaultThrowFunc) {\r\n\t\tconst res = this.findOne(filter);\r\n\t\t// 找不到，抛出异常。如果没有用throwMessage修饰，需要在外部通过catchAsError接收\r\n\t\tif (res == null) throwFunc({repo: this, filter});\r\n\t\treturn res;\r\n\t}\r\n\t@throwMessage(\"找不到指定ID的数据\")\r\n\tpublic getById(id: number) {\r\n\t\treturn this.getOne({id} as any);\r\n\t}\r\n\r\n\tpublic count(filter: F<T> = {}) {\r\n\t\treturn this.find(filter).length;\r\n\t}\r\n\tpublic exist(filter: F<T> = {}) {\r\n\t\treturn this.count(filter) > 0;\r\n\t}\r\n\r\n\tpublic ensure(filter: F<T> = {},\r\n\t\t\t\t\t\t\t\tthrowFunc: Function = DefaultThrowFunc) {\r\n\t\tif (!this.findOne(filter)) throwFunc({repo: this, filter});\r\n\t}\r\n\tpublic ensureNot(filter: F<T> = {},\r\n\t\t\t\t\t\t\t\t\t throwFunc: Function = DefaultThrowFunc) {\r\n\t\tif (this.findOne(filter)) throwFunc({repo: this, filter});\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\tprivate processFuncs() {\r\n\t\tconst proto = this.constructor.prototype;\r\n\t\tconst fNames = Object.getOwnPropertyNames(proto);\r\n\r\n\t\tfNames.forEach(fName => this.processFunc(fName));\r\n\t}\r\n\r\n\t/**\r\n\t * 处理函数\r\n\t */\r\n\tprivate processFunc(name: string) {\r\n\t\tconst newFunc = this.getNewFunc(name);\r\n\t\tnewFunc && (this[name] = newFunc);\r\n\t}\r\n\r\n\tprivate getNewFunc(name: string) {\r\n\t\t// 获取需要查询的键\r\n\t\tconst keys = this.getKeysFromName(name);\r\n\r\n\t\t// 根据指定条件查询\r\n\t\tif (name.startsWith(\"findOne\")) // 查找一个\r\n\t\t\treturn this.getFindOneFunc(name, keys);\r\n\t\tif (name.startsWith(\"find\")) // 查找多个\r\n\t\t\treturn this.getFindFunc(name, keys);\r\n\t\tif (name.startsWith(\"get\")) // 查找一个，查不到会报错\r\n\t\t\treturn this.getGetOneFunc(name, keys);\r\n\r\n\t\tif (name.startsWith(\"count\")) // 计数\r\n\t\t\treturn this.getCountFunc(name, keys);\r\n\t\tif (name.startsWith(\"exist\")) // 是否存在\r\n\t\t\treturn this.getExistFunc(name, keys);\r\n\r\n\t\tif (name.startsWith(\"ensure\")) // 确保存在，不存在会报错\r\n\t\t\treturn this.getEnsureFunc(name, keys);\r\n\t\tif (name.startsWith(\"ensureNot\")) // 确保不存在，不存在会报错\r\n\t\t\treturn this.getEnsureNotFunc(name, keys);\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate getKeysFromName(name) {\r\n\t\tconst keys = this.constructor[\"defaultKeys\"];\r\n\t\tconst res = keys ? keys[name] : null;\r\n\t\treturn res || this.analyseByClause(name);\r\n\t}\r\n\tprivate analyseByClause(name: string) {\r\n\t\tconst strs = name.split(\"By\");\r\n\t\treturn strs[1]?.split(\"And\") || [];\r\n\t}\r\n\tprivate makeFilter(keys: string[], ...p) {\r\n\t\tconst res = {};\r\n\t\tkeys.forEach((key, i) =>\r\n\t\t\tres[this.convertKey(key)] = p[i]);\r\n\t\treturn res as F<T>;\r\n\t}\r\n\tprivate convertKey(key) {\r\n\t\treturn key.charAt(0).toLowerCase() + key.slice(1);\r\n\t}\r\n\r\n\tprivate getFindFunc(name, keys) {\r\n\t\treturn (...p) => this.find(this.makeFilter(keys, ...p));\r\n\t}\r\n\tprivate getFindOneFunc(name, keys) {\r\n\t\treturn (...p) => this.findOne(this.makeFilter(keys, ...p));\r\n\t}\r\n\tprivate getGetOneFunc(name, keys) {\r\n\t\tconst throwFunc = this.getThrowFunc(name);\r\n\t\treturn (...p) => this.getOne(\r\n\t\t\tthis.makeFilter(keys, ...p), throwFunc);\r\n\t}\r\n\r\n\tprivate getCountFunc(name, keys) {\r\n\t\treturn (...p) => this.count(this.makeFilter(keys, ...p));\r\n\t}\r\n\tprivate getExistFunc(name, keys) {\r\n\t\treturn (...p) => this.exist(this.makeFilter(keys, ...p));\r\n\t}\r\n\r\n\tprivate getEnsureFunc(name, keys) {\r\n\t\tconst throwFunc = this.getThrowFunc(name);\r\n\t\treturn (...p) => this.ensure(\r\n\t\t\tthis.makeFilter(keys, ...p), throwFunc);\r\n\t}\r\n\tprivate getEnsureNotFunc(name, keys) {\r\n\t\tconst throwFunc = this.getThrowFunc(name);\r\n\t\treturn (...p) => this.ensureNot(\r\n\t\t\tthis.makeFilter(keys, ...p), throwFunc);\r\n\t}\r\n\r\n\tprivate getThrowFunc(name): Function {\r\n\t\tconst funcs = this.constructor[\"throwFuncs\"];\r\n\t\tconst res = funcs ? funcs[name] : null;\r\n\t\treturn res || (() => {throw null});\r\n\t}\r\n\r\n}\r\n","\r\nimport { updateContext} from \"../Modules/CoreModule/Managers/BaseManager\";\r\nimport Component = cc.Component;\r\nimport {curScene, sceneMgr} from \"../Modules/CoreModule/Managers/SceneManager\";\r\nimport {nftMgr, Web3Enable} from \"../Modules/NFTModule/Managers/NFTManager\";\r\nimport {playerMgr} from \"../Modules/PlayerModule/Managers/PlayerManager\";\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nexport abstract class BaseScene extends Component {\r\n\r\n\tprotected onLoad() {\r\n\t\tsceneMgr().curScene = this;\r\n\t}\r\n\tprotected onDestroy() {\r\n\t\tsceneMgr().curScene = null;\r\n\t}\r\n\r\n\tprotected get autoConnect() { return true; }\r\n\r\n\tprotected start() {\r\n\t\tif (Web3Enable) nftMgr().init(this.autoConnect).then();\r\n\t\telse playerMgr().autoLogin().then();\r\n\t}\r\n\r\n\tupdate(dt: number) {\r\n\t\tupdateContext(dt);\r\n\t}\r\n\r\n}\r\n\r\n\r\n","import Animation = cc.Animation;\r\nimport {battleScene} from \"../../../Scenes/BattleScene\";\r\nimport Prefab = cc.Prefab;\r\nimport instantiate = cc.instantiate;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BattleAnimationsController extends cc.Component {\r\n\r\n    @property([Prefab])\r\n    animationPrefabs: Prefab[] = [];\r\n\r\n    private animations: Animation[] = [];\r\n    private speeds: number[] = [];\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n        // this.animations.forEach(a => this.speeds.push(1));\r\n    }\r\n\r\n    update (dt) {\r\n        let speed = battleScene().battleSpeed;\r\n        this.animations.forEach((a, i) => {\r\n            a.getAnimationState(a.defaultClip.name).speed = speed * this.speeds[i];\r\n            if (!a.getAnimationState(a.defaultClip.name).isPlaying) {\r\n                a.node.destroy();\r\n                this.animations.splice(i, 1);\r\n                this.speeds.splice(i, 1);\r\n            }\r\n        })\r\n    }\r\n\r\n    play(name: string, time: number = 0, posX: number = 0, posY: number = 0, camp: number = 0) {\r\n        if (!this.animationPrefabs[Animations[name]]) return;\r\n        let node = instantiate(this.animationPrefabs[Animations[name]]);\r\n        node.parent = this.node;\r\n        let ani = node.getComponent(Animation);\r\n        this.animations.push(ani);\r\n        this.speeds.push(time > 0 ? ani.defaultClip[\"_duration\"] / time : 1);\r\n        ani.node.x = posX; ani.node.y = posY;\r\n        ani.node.scaleX *= camp == 0 ? 1 : -1;\r\n        ani.play();\r\n    }\r\n}\r\n\r\nenum Animations {\r\n    bossComing = 0,\r\n    attack,\r\n    death,\r\n    recover,\r\n    lightingSelf,\r\n    lightingTarget\r\n}\r\n","import {error, loading, post} from \"../CoreModule/Common/CoreCommon\";\r\n\r\nexport class BattleThrow {\r\n\t@error(1,\"\") test() {}\r\n}\r\n\r\nexport class BattleInterface {\r\n\r\n\t@post(\"/battle/main/start\") static async StartMainBattle(d?): Promise<any> {}\r\n\t@post(\"/battle/main/action\") static async StartMainBattleAction(d?): Promise<any> {}\r\n\t@post(\"/battle/main/end\") static async EndMainBattle(d?): Promise<any> {}\r\n\t@post(\"/battle/main/boost\") static async BoostMainBattle(d?): Promise<any> {}\r\n\t@post(\"/battle/pvp/player_count\") static async GetPVPPlayerCount(d?): Promise<any> {}\r\n\t@post(\"/battle/pvp/get_player\") static async GetPVPPlayers(d?): Promise<any> {}\r\n\t@post(\"/battle/pvp/start\") static async StartPVP(d?): Promise<any> {}\r\n\t@post(\"/battle/pvp/action\") static async StartPVPAction(d?): Promise<any> {}\r\n\t@post(\"/battle/pvp/skip\") static async SkipPVP(d?): Promise<any> {}\r\n\t@post(\"/battle/pvp/boost\") static async BoostPVP(d?): Promise<any> {}\r\n\t@post(\"/battle/pvp/end\") static async EndPVP(d?): Promise<any> {}\r\n\t@post(\"/battle/copy/start\") static async StartCopy(d?): Promise<any> {}\r\n\t@post(\"/battle/copy/buy_battle_chance\") static async BuyBattleChance(d?): Promise<any> {}\r\n\r\n\t// region 测试接口\r\n\r\n\t@post(\"/battle/test/start\") static async StartTest(d?): Promise<any> {}\r\n\t@post(\"/battle/test/next\") static async NextTest(d?): Promise<any> {}\r\n\t@post(\"/battle/test/end\") static async EndTest(d?): Promise<any> {}\r\n\r\n\t// endregion\r\n\r\n}\r\n","import {BaseConfig, config} from \"../../CoreModule/Data/BaseConfig\";\r\nimport {field} from \"../../CoreModule/Data/BaseData\";\r\n\r\n@config(\"BattleConfig\")\r\nexport class BattleConfig extends BaseConfig {\r\n\r\n\t@field // 命中判定参数\r\n\thit = {\r\n\t\tdefaultBase: 0.1,\r\n\t\tbaseHitRate: 0.97,\r\n\t\tfloat: [0.9, 1.1]\r\n\t}\r\n\t@field // 暴击判定参数\r\n\tcrit = {\r\n\t\tminRate: 0.03,\r\n\t\tdamageRate: 2,\r\n\t}\r\n\t@field\r\n\trestraint = {\r\n\t\t// 克制时伤害, 普通伤害, 被克制伤害\r\n\t\trates: [1, 4, 0.5]\r\n\t}\r\n}\r\n","import {ItemDisplay} from \"../../CoreModule/Components/ItemDisplay\";\r\nimport BattleAnimationsController from \"./BattleAnimationsController\";\r\nimport Node = cc.Node;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nexport type BattleState = 'not_started' | 'preparing' | 'running' | 'finished';\r\n\r\n@ccclass\r\nexport default class BattleDisplay extends ItemDisplay<Battle> {\r\n\r\n\t@property([Node])\r\n\tpublic battlerNodes: Node[] = [\r\n\t\tnull, null, null, null\r\n\t];\r\n\r\n\tprotected battlers: BattlerDisplay[] = [];\r\n\r\n\tstart() {\r\n\t\tsuper.start();\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tthis.battlerNodes.forEach(n => this.battlers.push(\r\n\t\t\tn.getComponent(BattlerDisplay)));\r\n\t\tthis.battlers.forEach(b => b.battle = this);\r\n\r\n\t\tconsole.log(\"BattleDisplay onLoad\", this, this.battlerNodes, this.battlers)\r\n\t}\r\n\r\n\t// region 数据控制\r\n\r\n\t/**\r\n\t * 获取战斗者展示组件\r\n\t */\r\n\tpublic getDisplay(info) {\r\n\t\treturn info && this.battlers.find(\r\n\t\t\tb => b.camp == info.camp && b.index == info.pos);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 界面绘制\r\n\r\n\trefresh() {\r\n\t\tsuper.refresh();\r\n\t\tconsole.log(\"BattleDisplay refresh\", this, this.item)\r\n\t\tthis.battlers.forEach(b => b.clearItems());\r\n\t\tthis.item.battlers.forEach(b => this.getDisplay(b)?.addItem(b));\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 更新控制\r\n\r\n\tprotected update(dt: number) {\r\n\t\tif (!this.item) return;\r\n        this.updateAnimationSpeed();\r\n\t\tthis.updateBattleAnimation();\r\n\t}\r\n\r\n\tupdateAnimationSpeed() {\r\n\t\tthis.battlers.forEach(b => b.skeleton.timeScale = battleScene().battleSpeed);\r\n\t}\r\n\r\n\tupdateBattleAnimation() {\r\n\t\tlet times = this.item.getCurrentAnimationTimes();\r\n\t\tthis.item.getCurrentAnimations().forEach((a, i) => this.animation.play(a, times[i]));\r\n\t}\r\n\r\n\tplayNormalAnimation(name: string, time: number, posX: number, posY: number, camp: number) {\r\n\t\tthis.animation.play(name, time, posX, posY, camp);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 战斗动画控制\r\n\r\n\t@property(BattleAnimationsController)\r\n\tanimation: BattleAnimationsController = null;\r\n\r\n\t// endregion\r\n\r\n}\r\n\r\nimport {Battle} from \"../Data/Battle\";\r\nimport {battleScene} from \"../../../Scenes/BattleScene\";\r\nimport BattlerDisplay from \"./BattlerDisplay\";\r\n","import {BaseManager, getManager, manager} from \"../../CoreModule/Managers/BaseManager\";\r\n\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {DataLoader} from \"../../CoreModule/Utils/DataLoader\";\r\n\r\nexport function battleMgr() {\r\n\treturn getManager(BattleManager);\r\n}\r\n\r\n@manager\r\nexport class BattleManager extends BaseManager {\r\n\r\n\t/**\r\n\t * 当前战斗\r\n\t */\r\n\tpublic battles: BattleProcessor[] = [];\r\n\r\n\t/**\r\n\t * 开始闯关战斗\r\n\t */\r\n\tpublic async startMainBattle() {\r\n\t\tlet iRes = await BattleInterface.StartMainBattle();\r\n\t\tconst res = DataLoader.load(Battle, iRes[\"battle\"]);\r\n\t\tres.battlers.forEach(b => b.isEntering && b.enter());\r\n\r\n\t\tawait this.getBattleNFTs(res);\r\n\r\n\t\tconst processor = this.startBattle(res);\r\n\t\tprocessor.start();\r\n\r\n\t\t// 异步操作\r\n\t\tbattleMgr().startMainFirstAction(res).then()\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 开启闯关的第一个行动\r\n\t */\r\n\tpublic async startMainFirstAction(battle: Battle) {\r\n\t\tconst res = await BattleInterface.StartMainBattleAction({\r\n\t\t\tbattleId: battle.battleId });\r\n\t\tconst nextAction = DataLoader.load(Action, res[\"action\"]);\r\n\r\n\t\tbattle.addAction(nextAction);\r\n\t}\r\n\r\n\tpublic async nextMainBattle() {\r\n\r\n\t}\r\n\r\n\tpublic async startCopy() {\r\n\t\tlet iRes = await BattleInterface.StartCopy({copyId: 11});\r\n\t\tconst res = DataLoader.load(Battle, iRes[\"battle\"]);\r\n\t\tres.battlers.forEach(b => b.isEntering && b.enter());\r\n\r\n\t\tconst processor = this.startBattle(res);\r\n\t\tprocessor.start();\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tpublic test(battle) {\r\n\t\tconst processor = this.startBattle(battle);\r\n\t\tprocessor.start();\r\n\t}\r\n\r\n\tprivate startBattle(battle: Battle) {\r\n\t\tconst processor = createProcessor(battle);\r\n\t\tthis.battles.push(processor);\r\n\t\treturn processor;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取战斗的NFT列表\r\n\t */\r\n\tpublic async getBattleNFTs(battle: Battle) {\r\n\t\tconst battlers = battle.battlers.filter(b => b.isHero);\r\n\t\tfor (const battler of battlers) {\r\n\t\t\tawait heroMgr().getOneFromServer(battler.nftId);\r\n\t\t\tbattler.refresh();\r\n\t\t}\r\n\t}\r\n\r\n\tupdate(dt: number) {\r\n\t\tsuper.update(dt);\r\n\t\tthis.battles.forEach(b => b.update(dt * battleScene().battleSpeed));\r\n\t}\r\n\r\n\t// region pvp战斗控制\r\n\r\n\tpublic async startPVPBattle(selfNftId: string, roomId: number, enemyNftId: string) {\r\n\t\tlet iRes = await BattleInterface.StartPVP({selfNftId: selfNftId, roomId: roomId, enemyNftId: enemyNftId});\r\n\t\tconst res = DataLoader.load(Battle, iRes[\"battle\"]);\r\n\t\tres.battlers.forEach(b => b.isEntering && b.enter());\r\n\r\n\t\tawait this.getBattleNFTs(res);\r\n\r\n\t\tconst processor = this.startBattle(res);\r\n\t\tprocessor.start();\r\n\r\n\t\t// 异步操作\r\n\t\tbattleMgr().startPVPFirstAction(res).then()\r\n\t\treturn res;\r\n\t}\r\n\r\n\tprivate async startPVPFirstAction(battle: Battle) {\r\n\t\tconsole.log(123456);\r\n\t\tconst res = await BattleInterface.StartPVPAction({\r\n\t\t\tbattleId: battle.battleId });\r\n\t\tconst nextAction = DataLoader.load(Action, res[\"action\"]);\r\n\r\n\t\tbattle.addAction(nextAction);\r\n\t}\r\n\r\n\t// endregion\r\n}\r\n\r\nimport {BattleProcessor, createProcessor} from \"../Utils/BattleProcessor\";\r\nimport {BattleInterface} from \"../BattleCommon\";\r\nimport {Battle} from \"../Data/Battle\";\r\nimport {Action} from \"../Data/Action\";\r\nimport {battleScene} from \"../../../Scenes/BattleScene\";\r\nimport {heroMgr} from \"../../HeroModule/Managers/HeroManager\";\r\n","import {Action} from \"../Data/Action\";\r\nimport {Battle, BattleState, BattleType, PlayerCamp} from \"../Data/Battle\";\r\nimport {BattleInterface} from \"../BattleCommon\";\r\nimport {DataLoader} from \"../../CoreModule/Utils/DataLoader\";\r\nimport {BattlerState, BonusParamType} from \"../Data/Battler\";\r\nimport {PromiseUtils} from \"../../../Utils/PromiseUtils\";\r\nimport {copyMgr} from \"../../CopyModule/Managers/CopyManager\";\r\nimport {copyRepo} from \"../../CopyModule/Data/Copy\";\r\nimport {playerMgr} from \"../../PlayerModule/Managers/PlayerManager\";\r\nimport {PlayerCopy} from \"../../CopyModule/Data/PlayerCopy\";\r\nimport {RewardGroup} from \"../../PlayerModule/Data/Reward\";\r\n\r\nconst SelfCamp = PlayerCamp; // 自身阵营\r\n\r\nexport function battleProcessor(type: BattleType) {\r\n\treturn (clazz) => {\r\n\t\tBattleProcessor.processorSettings[type] = clazz;\r\n\t}\r\n}\r\n\r\nexport function createProcessor(battle: Battle): BattleProcessor {\r\n\tconst clazz = BattleProcessor.processorSettings[battle.type];\r\n\treturn clazz ? new clazz(battle) : null;\r\n}\r\n\r\n/**\r\n * 战斗处理器\r\n */\r\nexport abstract class BattleProcessor {\r\n\r\n\tpublic static processorSettings = {};\r\n\r\n\tpublic battle: Battle;\r\n\tpublic resultBattle: Battle;\r\n\r\n\t/**\r\n\t * 胜负结果\r\n\t */\r\n\tpublic get isResult() { return this.battle.winner >= 0; }\r\n\tpublic get isWin() { return this.battle.winner == SelfCamp; }\r\n\tpublic get isLose() { return this.battle.winner == 1 - SelfCamp; }\r\n\r\n\tprotected constructor(battle: Battle) {\r\n\t\tthis.battle = battle;\r\n\r\n\t\tthis.battle.onActionStartListener =\r\n\t\t\ta => this.onActionStart(a);\r\n\t\tthis.battle.onActionEndListener =\r\n\t\t\ta => this.onActionEnd(a);\r\n\t\tthis.battle.onBattleEndListener =\r\n\t\t\tw => this.onBattleEnd(w);\r\n\t}\r\n\r\n\t// region 流程控制\r\n\r\n\t/**\r\n\t * 开始\r\n\t */\r\n\tpublic start() {\r\n\t\tthis.battle.start();\r\n\r\n\t\tthis.onStarted();\r\n\t}\r\n\r\n\t/**\r\n\t * 结束\r\n\t */\r\n\tpublic terminate() {\r\n\t\tthis.battle.terminate();\r\n\r\n\t\tthis.onTerminated();\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 回调控制\r\n\r\n\t/**\r\n\t * 开始回调\r\n\t */\r\n\tprotected onStarted() { }\r\n\r\n\t/**\r\n\t * 结束回调\r\n\t */\r\n\tprotected onTerminated() {\r\n\t\tthis.processRewards();\r\n\t}\r\n\r\n\t/**\r\n\t * 行动产生回调\r\n\t */\r\n\tprotected onActionStart(action: Action) { }\r\n\r\n\t/**\r\n\t * 行动结束回调\r\n\t */\r\n\tprotected onActionEnd(action: Action) { }\r\n\r\n\t/**\r\n\t * 战斗结束回调\r\n\t */\r\n\tprotected onBattleEnd(winner) { }\r\n\r\n\t// endregion\r\n\r\n\t// region 奖励控制\r\n\r\n\t/**\r\n\t * 奖励\r\n\t */\r\n\tpublic rewards(): RewardGroup { return null; }\r\n\r\n\t/**\r\n\t * 处理奖励\r\n\t */\r\n\tpublic processRewards() {\r\n\t\tif (!this.isResult) return;\r\n\t\tconst rewards = this.rewards();\r\n\t\tif (!rewards) return;\r\n\t\t// 处理金币加成\r\n\t\trewards.gold.value *= this.battle.campBonusParam(\r\n\t\t\tSelfCamp, BonusParamType.Gold);\r\n\t\trewards.invoke();\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\r\n\t// region 更新\r\n\r\n\t// endregion\r\n\r\n\tpublic update(dt) {\r\n\t\tthis.updateBattle(dt);\r\n\t}\r\n\r\n\tprotected updateBattle(dt) {\r\n\t\tthis.battle.update(dt);\r\n\t\t// this.printBattle();\r\n\t}\r\n\r\n\tpublic printBattle() {\r\n\t\tconsole.log(`=== Battle ${this.battle.battleId} ===`);\r\n\t\tconsole.log(\"state: \", BattleState[this.battle.state]);\r\n\t\tconsole.log(\r\n\t\t\t\"elapsedTime: \", this.battle.elapsedTime,\r\n\t\t\t\"actionTime: \", this.battle.actionTime);\r\n\r\n\t\tconsole.log(\"== battlers ==\");\r\n\t\tconsole.log(\"camp\", \"pos\", \"state\", \"hp\", \"action\", \"motions\");\r\n\t\tthis.battle.battlers.forEach(b =>\r\n\t\t\tconsole.log(b.camp, b.pos, BattlerState[b.state], b.hp, b.action, b.motions)\r\n\t\t)\r\n\r\n\t\tconsole.log(\"== actions ==\");\r\n\t\tconsole.log(\"time\", \"subject\", \"target\", \"skillId\");\r\n\t\tthis.battle.actions.forEach(a =>\r\n\t\t\tconsole.log(a.time, a.subject, a.target, a.skillId)\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * 回合制战斗处理\r\n */\r\nabstract class RoundBattleProcessor extends BattleProcessor {\r\n\r\n\t/**\r\n\t * 回合\r\n\t */\r\n\tpublic get round() { return this.battle.actionTime; }\r\n\r\n\t/**\r\n\t * 是否进入下一回合\r\n\t */\r\n\t// protected isNextRound() {\r\n\t// \t// 如果经过上一次的update后，当前Action为空\r\n\t// \treturn !this.battle.curAction;\r\n\t// }\r\n\r\n\tprotected updateBattle(dt: number) {\r\n\t\t// const next = this.isNextRound();\r\n\t\tsuper.updateBattle(dt);\r\n\t}\r\n\r\n}\r\n\r\n@battleProcessor(BattleType.Main)\r\nexport class MainBattleProcessor extends RoundBattleProcessor {\r\n\r\n\t/**\r\n\t * 奖励\r\n\t */\r\n\tpublic rewards() {\r\n\t\tconst copy = copyRepo().main();\r\n\t\tconst level = copy.level(this.battle.level);\r\n\t\treturn level.calcRewards(this.isWin, this.battle.isFirst);\r\n\t}\r\n\r\n\tprotected async onActionEnd(action: Action) {\r\n\t\tsuper.onActionEnd(action);\r\n\r\n\t\t// 测试\r\n\t\t// const res = await BattleInterface.NextTest({battleId: this.battle.battleId});\r\n\t\tconst res = await PromiseUtils.waitForRetry(() => BattleInterface.StartMainBattleAction({battleId: this.battle.battleId}));\r\n\t\tthis.resultBattle = DataLoader.load(Battle, res[\"battle\"]);\r\n\t\tconst nextAction = DataLoader.load(Action, res[\"action\"]);\r\n\r\n\t\tthis.battle.setActionTime(this.resultBattle.actionTime);\r\n\t\tthis.battle.addAction(nextAction);\r\n\r\n\t\t// TODO: 暂时注释掉，后续需要添加同步Battle数据的函数\r\n\t\t// const res = await networkMgr().request(\r\n\t\t// \tBattleInterface.StartMainBattleAction, { action });\r\n\t\t// this.resultBattle = DataLoader.load(Battle, res[\"battle\"]);\r\n\t}\r\n\r\n\tprotected async onBattleEnd(winner) {\r\n\t\tsuper.onBattleEnd(winner);\r\n\r\n\t\t// 测试\r\n\t\tconst res = await BattleInterface.EndMainBattle({battleId: this.battle.battleId});\r\n\t\t// copyMgr().getMainPlayerCopy().curLevel++;\r\n\t\t// copyMgr().getMainPlayerCopy().maxLevel =\r\n\t\t// \tMath.max(copyMgr().getMainPlayerCopy().curLevel, copyMgr().getMainPlayerCopy().maxLevel);\r\n\t\tthis.resultBattle = DataLoader.load(Battle, res[\"battle\"]);\r\n\t\tthis.terminate();\r\n\t}\r\n\r\n\t/**\r\n\t * 完全结束回调\r\n\t */\r\n\tprotected onTerminated() {\r\n\t\tsuper.onTerminated();\r\n\t\tconst pCopy = playerMgr().getPlayerData(PlayerCopy);\r\n\t\tif (this.isWin) pCopy.mainCopy().next();\r\n\t\tif (this.isLose) pCopy.mainCopy().prev();\r\n\t}\r\n}\r\n\r\n@battleProcessor(BattleType.Copy)\r\nexport class CopyBattleProcessor extends BattleProcessor {\r\n\tprotected onActionEnd(action: Action) {\r\n\t\tsuper.onActionEnd(action);\r\n\t\tif (this.battle.actions.find(a => a.time == action.time))\r\n\t\t\tthis.battle.nextRound();\r\n\t}\r\n}\r\n\r\n@battleProcessor(BattleType.Boss)\r\nexport class BossBattleProcessor extends CopyBattleProcessor {\r\n\r\n}\r\n\r\n@battleProcessor(BattleType.PVP)\r\nexport class PVPBattleProcessor extends BattleProcessor {\r\n\r\n\tprotected async onActionEnd(action: Action) {\r\n\t\tsuper.onActionEnd(action);\r\n\r\n\t\tconst res = await PromiseUtils.waitForRetry(() => BattleInterface.StartPVPAction({battleId: this.battle.battleId}));\r\n\t\tthis.resultBattle = DataLoader.load(Battle, res[\"battle\"]);\r\n\t\tconst nextAction = DataLoader.load(Action, res[\"action\"]);\r\n\r\n\t\tthis.battle.setActionTime(this.resultBattle.actionTime);\r\n\t\tthis.battle.addAction(nextAction);\r\n\r\n\t}\r\n\r\n\tprotected async onBattleEnd(winner) {\r\n\t\tsuper.onBattleEnd(winner);\r\n\r\n\t\tconst res = await BattleInterface.EndPVP({battleId: this.battle.battleId});\r\n\t\tthis.resultBattle = DataLoader.load(Battle, res[\"battle\"]);\r\n\t\tthis.terminate();\r\n\t}\r\n\r\n\t/**\r\n\t * 完全结束回调\r\n\t */\r\n\tprotected onTerminated() {\r\n\t\tsuper.onTerminated();\r\n\r\n\t}\r\n\r\n}\r\n\r\n","import {ItemContainer} from \"../../../CoreModule/Components/ItemContainer\";\r\nimport {Reward} from \"../../../PlayerModule/Data/Reward\";\r\nimport BattleRewardDisplay from \"./BattleRewardDisplay\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BattleRewardContainer extends ItemContainer<Reward, BattleRewardDisplay> {\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    @property(Number)\r\n    coldDownTime: number = 0.1;\r\n\r\n    // update (dt) {}\r\n    onItemsChanged() {\r\n        super.onItemsChanged();\r\n        this.items.forEach((e, i) => {\r\n            this.itemsComponents[i].delayTime = this.coldDownTime * (i + 1);\r\n        });\r\n    }\r\n\r\n}\r\n","import {ItemDisplay} from \"../../../CoreModule/Components/ItemDisplay\";\r\nimport {Reward} from \"../../../PlayerModule/Data/Reward\";\r\nimport Sprite = cc.Sprite;\r\nimport Label = cc.Label;\r\nimport {autoUnitConvert} from \"../../../../Utils/NumberUtils\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BattleRewardDisplay extends ItemDisplay<Reward> {\r\n\r\n    @property(Sprite)\r\n    icon: Sprite = null;\r\n    @property(Label)\r\n    value: Label = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    update (dt) {\r\n        this.updateNodeAnimation(dt);\r\n    }\r\n\r\n    protected onItemChanged() {\r\n        super.onItemChanged();\r\n        this.updateLabels();\r\n        this.resetTimers();\r\n    }\r\n\r\n    @autoUnitConvert\r\n    updateLabels() {\r\n        this.value.string = this.item.value.toString();\r\n    }\r\n\r\n    @property(Number)\r\n    animationTime: number = 0.2;\r\n\r\n    delayTime: number = 0;\r\n    timer: number = 0;\r\n\r\n    updateNodeAnimation(dt: number) {\r\n        if (this.timer < this.delayTime + this.animationTime) {\r\n            this.node.opacity = Math.max(0, 255 * (this.timer - this.delayTime) / this.animationTime);\r\n            this.node.scale = Math.min(1.2, 1.2 - 0.2 * (this.timer - this.delayTime) / this.animationTime);\r\n            this.timer += dt;\r\n            return;\r\n        }\r\n        this.node.opacity = 255;\r\n        this.node.scale = 1;\r\n    }\r\n\r\n    resetTimers() {\r\n        this.timer = 0;\r\n    }\r\n\r\n}\r\n","import {getSingleton, singleton} from \"../Modules/CoreModule/Utils/SingletonUtils\";\r\nimport {BaseScene} from \"./BaseScene\";\r\nimport {Hero} from \"../Modules/HeroModule/Data/Hero\";\r\nimport Node = cc.Node;\r\nimport CultivateWindowController from \"../Modules/BattleModule/Components/Cultivate/CultivateWindowController\";\r\nimport SettlementWindowController from \"../Modules/BattleModule/Components/SettlementWindowController\";\r\nimport MyTeamFrame from \"./BattleScene/Components/MyTeamFrame\";\r\nimport {copyMgr} from \"../Modules/CopyModule/Managers/CopyManager\";\r\nimport {playerMgr, waitForLogin} from \"../Modules/PlayerModule/Managers/PlayerManager\";\r\nimport {waitForDataLoad} from \"../Modules/CoreModule/Managers/DataManager\";\r\nimport {battleMgr} from \"../Modules/BattleModule/Managers/BattleManager\";\r\nimport {RoomNFTInfo} from \"../Modules/BattleModule/Components/PVP/PlayerCardDisplay\";\r\nimport MainBattleDisplay from \"../Modules/BattleModule/Components/Main/MainBattleDisplay\";\r\nimport {nftMgr, Web3Enable} from \"../Modules/NFTModule/Managers/NFTManager\";\r\nimport PVPBattleDisplay from \"../Modules/BattleModule/Components/PVP/PVPBattleDisplay\";\r\nimport Prefab = cc.Prefab;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nexport function battleScene() {\r\n\treturn getSingleton(BattleScene);\r\n}\r\n\r\n@ccclass\r\n@singleton\r\nexport default class BattleScene extends BaseScene {\r\n\r\n\theroesInTeam: Hero[] = [];\r\n\tbattleSpeed: number = 1;\r\n\r\n\tprotected onLoad() {\r\n\t\tsuper.onLoad();\r\n\t}\r\n\r\n\tstart() {\r\n\t\tsuper.start();\r\n\t\tif (Web3Enable) nftMgr().connect().then();\r\n\t\tthis.setSingleComponents();\r\n\t\tthis.startMainBattle().then();\r\n\t}\r\n\r\n\tupdate(dt) {\r\n\t\tsuper.update(dt);\r\n\t\tthis.battleSpeed = Date.now() < copyMgr().getMainPlayerCopySettings()?.speedUpTime ? 2 : 1;\r\n\t\tif (this.mainBattle.item?.isEnded && !this.battleEnded)\r\n\t\t\tthis.nextMainBattle();\r\n\t\t// console.log(\"progress\", dataMgr().loadingProgress());\r\n\t}\r\n\r\n\tsetSingleComponents() {\r\n\t\tthis.myTeamFrame = this.myTeamFrameNode.getComponent(\"MyTeamFrame\");\r\n\t\tthis.cultivateWindow = this.cultivateWindowNode.getComponent(\"CultivateWindowController\");\r\n\t\tthis.settlementWindow = this.settlementWindowNode.getComponent(\"SettlementWindowController\");\r\n\t\tthis.mainBattle = this.mainBattleNode.getComponent(\"MainBattleDisplay\");\r\n\t\tthis.pvpBattle = this.pvpBattleNode.getComponent(\"PVPBattleDisplay\");\r\n\t}\r\n\r\n\t@waitForLogin\r\n\t@waitForDataLoad\r\n\tasync startMainBattle() {\r\n\t\tconst battle = await battleMgr().startMainBattle();\r\n\t\tthis.mainBattle.setItem(battle);\r\n\t}\r\n\r\n\tprivate battleEnded: boolean = false;\r\n\r\n\tnextMainBattle() {\r\n\t\tthis.battleEnded = true;\r\n\t\tbattleMgr().startMainBattle().then(battle => {\r\n\t\t\tthis.mainBattle.setItem(battle);\r\n\t\t\tthis.battleEnded = false;\r\n\t\t})\r\n\t}\r\n\r\n\t@property(Node)\r\n\tmyTeamFrameNode: Node = null;\r\n\t@property(Node)\r\n\tcultivateWindowNode: Node = null;\r\n\t@property(Node)\r\n\tsettlementWindowNode: Node = null;\r\n\t@property(Node)\r\n\tmainBattleNode: Node = null;\r\n\t@property(Node)\r\n\tpvpBattleNode: Node = null;\r\n\r\n\tmyTeamFrame: MyTeamFrame;\r\n\tcultivateWindow: CultivateWindowController;\r\n\tsettlementWindow: SettlementWindowController;\r\n\tmainBattle: MainBattleDisplay;\r\n\tpvpBattle: PVPBattleDisplay;\r\n\r\n\t// region PVP相关控制\r\n\r\n\tcurrentPVPRoomIndex: number = -1; // 当前选择的房间编号\r\n\troomSelected: boolean = false; // 已选择房间\r\n\tcurrentTargetSelect: RoomNFTInfo = null; // 当前选择的挑战对象\r\n\tcurrentPVPSelect: Hero = null; // 当前上阵英雄\r\n\theroSelected: boolean = false; // 已上阵英雄（实际上就是告诉中间信息框该展示玩家信息还是英雄信息，因为根据新给出的设计始终存在一个上阵的英雄）\r\n\r\n\tasync startPVPBattle(target: string = undefined) {\r\n\t\tif (target) {\r\n\t\t\tconst battle = await battleMgr().startPVPBattle(\r\n\t\t\t\tthis.currentPVPSelect.nftId, -1, target);\r\n\t\t\tthis.pvpBattleNode.active = true;\r\n\t\t\tthis.pvpBattle.setItem(battle);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!this.currentPVPSelect.nftId ||\r\n\t\t\tthis.currentPVPRoomIndex < 0 ||\r\n\t\t\t!this.currentTargetSelect.nftId) return;\r\n\t\tconst battle = await battleMgr().startPVPBattle(\r\n\t\t\tthis.currentPVPSelect.nftId,\r\n\t\t\tthis.currentPVPRoomIndex,\r\n\t\t\tthis.currentTargetSelect.nftId);\r\n\t\tthis.pvpBattleNode.active = true;\r\n\t\tthis.pvpBattle.setItem(battle);\r\n\t}\r\n\r\n\tendPVPBattle() {\r\n\t\tthis.pvpBattle.setItem(null);\r\n\t\tthis.pvpBattleNode.active = false;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t@property(Prefab)\r\n\tloading: Prefab = null;\r\n\r\n}\r\n","import Skeleton = sp.Skeleton;\r\nimport Animation = cc.Animation;\r\nimport Vec2 = cc.Vec2;\r\nimport Node = cc.Node;\r\nimport Color = cc.Color;\r\nimport Prefab = cc.Prefab;\r\nimport ProgressBar = cc.ProgressBar;\r\nimport {ItemDisplay} from \"../../CoreModule/Components/ItemDisplay\";\r\nimport {Vec1} from \"../Utils/Vec1\";\r\nimport HitDamage, {HitType} from \"./IndependentController/HitDamage\";\r\nimport {HeroSkeleton} from \"../../../Utils/SpineUtils\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n// export type BattlerState = 'hidden' | 'idle' | 'playing' | 'dead';\r\n\r\nconst MaxElapsedTime = 99999;\r\n\r\n@ccclass\r\nexport default class BattlerDisplay extends ItemDisplay<Battler> {\r\n\r\n\t@property\r\n\tpublic camp: number = 0;\r\n\t@property\r\n\tpublic index: number = 0;\r\n\t@property\r\n\tpublic heroScale: number = 0.2;\r\n\r\n\t// @property(Node)\r\n\t// public scaleNode: Node;\r\n\r\n\t@property(Node)\r\n\tpublic skeletonNode: Node;\r\n\r\n\t@property(Skeleton)\r\n\tpublic skeleton: Skeleton = null;\r\n\t@property(Animation)\r\n\tpublic animation: Animation = null;\r\n\r\n\t@property(ProgressBar)\r\n\tpublic hpBar: ProgressBar = null;\r\n\r\n\t@property(Node)\r\n\tpublic shadowNode: Node = null;\r\n\r\n\tpublic battle;\r\n\r\n\tpublic oriPos: Vec2;\r\n\tpublic oriAngle: Vec1;\r\n\tpublic oriScale: Vec2;\r\n\r\n\tpublic get pos() { return new Vec2(this.node.x, this.node.y); }\r\n\tpublic set pos(val: Vec2) { this.node.setPosition(val); }\r\n\tpublic get angle() { return new Vec1(this.skeletonNode.angle); }\r\n\tpublic set angle(val: Vec1) { this.skeletonNode.angle = val.x; }\r\n\tpublic get scale() { return new Vec2(this.skeletonNode.scaleX, this.skeletonNode.scaleY); }\r\n\tpublic set scale(val: Vec2) { this.skeletonNode.setScale(val); }\r\n\tpublic get color() { return this.skeletonNode.color; }\r\n\tpublic set color(val: Color) { this.skeletonNode.color = val; }\r\n\r\n\t/**\r\n\t * 是否翻转显示\r\n\t */\r\n\tpublic get flip() { return this.camp == 1; }\r\n\r\n\t// region 初始化\r\n\r\n\tprotected start() {\r\n\t\tthis.oriPos = new Vec2(this.node.x, this.node.y);\r\n\t\tthis.oriAngle = new Vec1(this.node.angle);\r\n\t\tthis.oriScale = new Vec2(this.node.scaleX, this.node.scaleY)\r\n\r\n\t\t// 处理水平翻转\r\n\t\tthis.node.scaleX = this.flip ? 1 : -1;\r\n\t}\r\n\r\n\tpublic refresh() {\r\n\t\tsuper.refresh();\r\n\t\tthis.drawSkeleton(this.item.entity);\r\n\t}\r\n\r\n\tprivate drawSkeleton(entity: IEntity){\r\n\t\tif (!entity.parts) {\r\n\t\t\tthis.skeleton.skeletonData = entity.skeleton;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet node = new Node('node');\r\n\t\tlet temp = node.addComponent(Skeleton);\r\n\t\tlet hero = new HeroSkeleton(this.skeleton, temp, heroMgr().getCacheOneFromServer(entity.nftId).heroTypeId);\r\n\t\tentity.parts.forEach(part => { hero.addPart(part); });\r\n\t\thero.refresh().then(res => node.destroy());\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 数据获取\r\n\r\n\t/**\r\n\t * 在行动中，获取双方的Display\r\n\t */\r\n\tpublic get subjectDisplay() {\r\n\t\treturn this.battle.getDisplay(this.item.subject);\r\n\t}\r\n\tpublic get targetDisplay() {\r\n\t\treturn this.battle.getDisplay(this.item.target);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 更新\r\n\r\n\t/**\r\n\t * 更新\r\n\t */\r\n\tprotected update(dt: number) {\r\n\t\tif (!this.item) return;\r\n\t\tthis.updateTranslate();\r\n\t\tthis.updateColor();\r\n\t\tthis.updateOpacity();\r\n\t\tthis.updateAnimation();\r\n\t\tthis.updateResult();\r\n\t\tthis.sizeFilter();\r\n\t\tthis.updateHp();\r\n\t\tthis.updateItemList();\r\n\t}\r\n\r\n\t/**\r\n\t * 更新变换\r\n\t */\r\n\tprivate updateTranslate() {\r\n\t\tthis.scale = this.item.scale;\r\n\t\tthis.angle = this.item.angle;\r\n\r\n\t\t// 更新位置\r\n\t\tconst sPos = this.convertPosition(this.item.startPos);\r\n\t\tconst tPos = this.convertPosition(this.item.targetPos);\r\n\t\tconst curPos: Vec2 = new Vec2();\r\n\r\n\t\tVec2.lerp(curPos, sPos, tPos, this.item.posRate.x);\r\n\t\tcurPos.y += this.item.z;\r\n\r\n\t\t// 附加抖动效果\r\n\t\tcurPos.x += this.item.shakePos.x;\r\n\t\tcurPos.y += this.item.shakePos.y;\r\n\r\n\t\tthis.pos = curPos;\r\n\t}\r\n\tprivate convertPosition(pos: Position) {\r\n\t\tconst offset = pos.offset.clone();\r\n\t\tif (this.flip) offset.x = -offset.x;\r\n\r\n\t\tif (pos.origin == \"self\")\r\n\t\t\treturn this.oriPos.clone().add(offset);\r\n\t\tif (pos.origin == \"target\" && this.targetDisplay)\r\n\t\t\treturn this.targetDisplay.oriPos.clone().add(offset);\r\n\r\n\t\treturn pos.offset;\r\n\t}\r\n\r\n\t/**\r\n\t * 更新颜色\r\n\t * @private\r\n\t */\r\n\tprivate updateColor() {\r\n\t\tthis.color = this.item.color;\r\n\t}\r\n\r\n\t/**\r\n\t * 更新透明度\r\n\t * @private\r\n\t */\r\n\tprivate updateOpacity() {\r\n\t\tthis.skeletonNode.opacity = this.item.opacity;\r\n\t\tthis.shadowNode.opacity = this.item.opacity;\r\n\t\tif (this.hpBar) this.hpBar.node.opacity = this.item.opacity;\r\n\t}\r\n\r\n\t/**\r\n\t * TODO: 更新动画\r\n\t * @private\r\n\t */\r\n\tprivate updateAnimation() {\r\n\t\tswitch (this.item.state) {\r\n\t\t\tcase BattlerState.Idle:\r\n\t\t\t\tif (this.skeleton.animation == \"stand\") return;\r\n\t\t\t\tthis.setAnimation(\"stand\", true);\r\n\t\t\t\treturn;\r\n\t\t\tcase BattlerState.Dead:\r\n\t\t\t\tthis.setAnimation(null, false);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.updateNormalAnimation();\r\n\t\tlet anim = this.item.animation;\r\n\t\tif (!anim) return;\r\n\t\tthis.setAnimation(anim);\r\n\t}\r\n\r\n\tprivate updateNormalAnimation() {\r\n\t\tlet times = this.item.normalAnimationTimes;\r\n\t\tthis.item.normalAnimations.forEach((a, i) =>\r\n\t\t\tthis.battle.playNormalAnimation(a, times[i],\r\n\t\t\t\tthis.node.x + this.skeletonNode.x,\r\n\t\t\t\tthis.node.y + this.skeletonNode.y + this.skeletonNode.height * this.heroScale / 2,\r\n\t\t\t\t\t  this.camp));\r\n\t}\r\n\r\n\tprivate setAnimation(name: string, loop: boolean = false){\r\n\t\tthis.skeleton.clearTracks();\r\n\t\tif (!name) return;\r\n\t\tthis.skeleton.setAnimation(0, name, loop);\r\n\t}\r\n\r\n\t@property(Prefab)\r\n\tpublic hit: Prefab = null;\r\n\r\n\t/**\r\n\t * TODO: 更新结果显示\r\n\t * @private\r\n\t */\r\n\tprivate updateResult() {\r\n\t\tlet result = this.item.result;\r\n\t\tif (!result) return;\r\n\t\tif(result.hpDamage >= 0)\r\n\t\t\tthis.showDamage(result);\r\n\t}\r\n\r\n\tprivate showDamage(result: Result){\r\n\t\tlet node = cc.instantiate(this.hit);\r\n\t\tnode.parent = this.node.parent;\r\n\t\tlet component = node.getComponent(HitDamage);\r\n\t\tcomponent.setValue(result.hpDamage);\r\n\t\tif (result.isCritical) component.setType(HitType.Critical);\r\n\t\tif (result.isMiss) component.setType(HitType.Miss);\r\n\t\tcomponent.setPosition(this.node.x + this.skeletonNode.x, this.node.y + this.skeletonNode.y + this.skeletonNode.height * this.heroScale);\r\n\t\t// component.setRange(this.skeletonNode.width * this.heroScale * 0.7, this.skeletonNode.height * this.heroScale * 0.7);\r\n\t}\r\n\r\n\t/**\r\n\t * 尺寸适配\r\n\t * @private\r\n\t */\r\n\tprivate sizeFilter() {\r\n\t\tthis.skeleton.node.scaleX = this.heroScale;\r\n\t\tthis.skeleton.node.scaleY = this.heroScale;\r\n\t\tthis.skeleton.node.y = - this.skeleton.node.height * this.heroScale / 3;\r\n\t\tif (this.shadowNode) {\r\n\t\t\tthis.shadowNode.active = true;\r\n\t\t\tthis.shadowNode.y = - this.skeleton.node.height * this.heroScale / 3;\r\n\t\t\tthis.shadowNode.scale = this.skeleton.node.height * this.heroScale / this.shadowNode.width / 2;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 更新血条\r\n\t * @private\r\n\t */\r\n\tprivate updateHp() {\r\n\t\tif (!this.hpBar) return;\r\n\t\tif (!this.skeleton.skeletonData) {\r\n\t\t\tthis.hpBar.node.active = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.hpBar.node.y = 20 + this.skeletonNode.height / 2 * this.skeletonNode.scaleY;\r\n\t\tthis.hpBar.node.active = true;\r\n\t\tthis.hpBar.node.scaleX = this.flip ? 1 : -1;\r\n\t\tthis.hpBar.progress = cc.misc.lerp(this.hpBar.progress, this.item.hp / this.item.mhp, 0.1);\r\n\t}\r\n\r\n\tprivate itemList: Battler[] = [];\r\n\r\n\tprivate updateItemList() {\r\n\t\tif (this.item.isDead) {\r\n\t\t\tthis.itemList.shift();\r\n\t\t\tif (this.itemList[0])\r\n\t\t\t\tthis.setItem(this.itemList[0]);\r\n\t\t}\r\n\t}\r\n\r\n\taddItem(battler: Battler) {\r\n\t\tthis.node.active = true;\r\n\t\tthis.itemList.push(battler);\r\n\t\tif (this.itemList.length == 1) this.setItem(battler);\r\n\t}\r\n\r\n\tclearItems() {\r\n\t\tthis.itemList = [];\r\n\t\tthis.node.active = false;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n\r\nimport {heroMgr} from \"../../HeroModule/Managers/HeroManager\";\r\nimport {Battler, BattlerState, IEntity, Position} from \"../Data/Battler\";\r\nimport {Result} from \"../Data/Result\";\r\n\r\n// import BattleDisplay from \"./BattleDisplay\";\r\n","import {BaseData, field, PK, pkType} from \"../../CoreModule/Data/BaseData\";\r\nimport SkeletonData = sp.SkeletonData;\r\nimport Vec2 = cc.Vec2;\r\nimport Color = cc.Color;\r\n\r\nimport {Action, IBattlerInfo} from \"./Action\";\r\nimport {MathUtils} from \"../../../Utils/MathUtils\";\r\nimport {createProcessor, MotionProcessor} from \"../Utils/MotionProcessor\";\r\nimport {Vec1} from \"../Utils/Vec1\";\r\nimport {Result} from \"./Result\";\r\nimport {Part} from \"../../HeroModule/Data/Part\";\r\n\r\nimport {Battle} from \"./Battle\";\r\nimport {PartAttackId, Skill, skillRepo} from \"../../HeroModule/Data/Skill\";\r\nimport {\r\n\tAttackMotionGroupId, BossEnterMotionGroupId,\r\n\tDieMotionGroupId,\r\n\tEnterMotionGroupId,\r\n\tMotionGroup,\r\n\tmotionGroupRepo\r\n} from \"./MotionGroup\";\r\nimport {Enemy, enemyRepo, EnemyType} from \"../../CopyModule/Data/Enemy\";\r\n\r\nexport enum BonusParamType {\r\n\tATK = 1, DEF, Gold, AVO\r\n}\r\n\r\nexport interface IEntity {\r\n\tnftId?: string\r\n\tid?: number\r\n\r\n\tbattleLevel: number\r\n\tbattleParams: number[];\r\n\r\n\trestraint: RestraintType;\r\n\r\n\tparts?: Part[];\r\n\tskeleton: SkeletonData;\r\n}\r\n\r\nexport enum BattlerState {\r\n\tHidden, // 隐藏状态\r\n\tEntering, // 进场状态\r\n\tIdle, // 空闲\r\n\tActing, // 行动中\r\n\tFrozen, // 冻结中（被攻击）\r\n\tDying, // 死亡中\r\n\tDead // 死亡\r\n}\r\n\r\ntype PositionOriginType = \"self\" | \"target\";\r\n\r\nexport type Position = {\r\n\torigin: PositionOriginType;\r\n\toffset: Vec2;\r\n}\r\n\r\ntype MotionInfo = {\r\n\tmotion: MotionGroup\r\n\taction?: Action\r\n\tisResult?: boolean\r\n\tplayed?: boolean\r\n\tonStart?: Function\r\n\tonFinish?: Function\r\n}\r\n\r\nconst PartAniTag = \"$\";\r\n\r\nexport class SkillInfo extends BaseData {\r\n\r\n\t// region 基本属性\r\n\r\n\t@field\r\n\tpublic level: number = 1; // 技能等级\r\n\t@field\r\n\tpublic skillId: number = -1;\r\n\t@field\r\n\tpublic useCount: number = 0;\r\n\t@field\r\n\tpublic boostCount: number = 0;\r\n\t@field\r\n\tpublic lastTime: number = -1; // 上次使用时间\r\n\r\n\tpublic battler: Battler;\r\n\r\n\t// endregion\r\n\r\n\t// region 初始化\r\n\r\n\tconstructor(index?, parent?) {\r\n\t\tsuper(index);\r\n\t\tthis.battler = parent;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 真实属性/数据\r\n\r\n\t/**\r\n\t * 技能\r\n\t */\r\n\tpublic get skill(): Skill {\r\n\t\treturn skillRepo().getById(this.skillId);\r\n\t}\r\n\r\n\t/**\r\n\t * 加速花费金钱\r\n\t */\r\n\tpublic get boostCost() { return this.skill.boostCost; }\r\n\r\n\t/**\r\n\t * 实际冻结时间\r\n\t */\r\n\tpublic get freezeTime() { return this.skill.freezeTime; }\r\n\r\n\t/**\r\n\t * 已经冻结了的时间\r\n\t */\r\n\tpublic get frozenTime() {\r\n\t\treturn this.battler.elapsedTime - this.lastTime\r\n\t}\r\n\r\n\t/**\r\n\t * 效果\r\n\t */\r\n\tpublic effects() {\r\n\t\treturn this.skill.effects.map(e => e.applyLevel(this.level));\r\n\t}\r\n\r\n\t/**\r\n\t * 特性\r\n\t */\r\n\tpublic traits() {\r\n\t\treturn this.skill.traits.map(t => t.applyLevel(this.level));\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 判定\r\n\r\n\t/**\r\n\t * 加速条件\r\n\t */\r\n\tpublic boostConditions() {\r\n\t\treturn ConditionGroup.create(\r\n\t\t\tcGte(ConditionType.Gold, this.boostCost)\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * 能否使用\r\n\t */\r\n\tpublic get isUsable() {\r\n\t\tif (this.skill.freezeTime <= 0) return true;\r\n\t\treturn this.frozenTime / this.freezeTime >= 1;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 操作\r\n\r\n\t/**\r\n\t * 加速\r\n\t */\r\n\tpublic boost() {\r\n\t\tthis.boostCount++;\r\n\t\tthis.lastTime = 0;\r\n\t}\r\n\r\n\t/**\r\n\t * 使用\r\n\t */\r\n\tpublic use() {\r\n\t\tif (!this.isUsable) return false;\r\n\t\tthis.lastTime = Date.now();\r\n\t\tthis.useCount++;\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 测试\r\n\r\n\tpublic static testData(skill: Skill) {\r\n\t\tconst res = new SkillInfo();\r\n\t\tres.skillId = skill.id;\r\n\t\tres.level = 1;\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n\r\nexport class Battler extends BaseData implements IBattlerInfo {\r\n\r\n\t// region 基本属性\r\n\r\n\t@field(String)\r\n\tpublic nftId?: string; // 英雄NFTID\r\n\t@field(Number)\r\n\tpublic enemyId?: number; // 怪物索引\r\n\t@field(Number)\r\n\tpublic enemyLevel?: number; // 怪物等级\r\n\r\n\t@field\r\n\tpublic camp: number = 0; // 阵营（左右两个阵营）\r\n\t@field\r\n\tpublic pos: number = 0; // 站位\r\n\r\n\t@field\r\n\tpublic hp: number = 0;\r\n\t@field([Number])\r\n\tpublic params: number[] = [];\r\n\t@field([Number])\r\n\tpublic bonusParams: number[] = [];\r\n\t// @field([BattlerStatus])\r\n\t// public statuses: BattlerStatus[] = [];\r\n\r\n\t@field([SkillInfo])\r\n\tpublic skills: SkillInfo[] = [];\r\n\r\n\t@field\r\n\tpublic state: BattlerState = BattlerState.Hidden;\r\n\r\n\tpublic battle: Battle;\r\n\tpublic entity: IEntity;\r\n\r\n\t// endregion\r\n\r\n\t// region 渲染参数\r\n\r\n\t/**\r\n\t * 位置\r\n\t */\r\n\tpublic startPos: Position = {\r\n\t\torigin: \"self\", offset: Vec2.ZERO\r\n\t}\r\n\tpublic targetPos: Position = {\r\n\t\torigin: \"self\", offset: Vec2.ZERO\r\n\t}\r\n\tpublic posRate: Vec1 = Vec1.ONE; // 0 -> pos, 1 -> targetPos\r\n\tpublic shakePos: Vec2 = Vec2.ZERO;\r\n\tpublic z: number = 0; // 高度（计算跳跃用）\r\n\r\n\t/**\r\n\t * 缩放\r\n\t */\r\n\tpublic scale: Vec2 = Vec2.ONE;\r\n\r\n\t/**\r\n\t * 旋转\r\n\t */\r\n\tpublic angle: Vec1 = Vec1.ZERO;\r\n\r\n\t/**\r\n\t * 颜色\r\n\t */\r\n\tpublic color: Color = Color.WHITE;\r\n\r\n\t/**\r\n\t * 透明度\r\n\t */\r\n\tpublic opacity: number = 255;\r\n\r\n\t/**\r\n\t * 需要播放的动画\r\n\t */\r\n\tprivate _animation: string;\r\n\tpublic get animation() {\r\n\t\tconst res = this._animation;\r\n\t\tthis._animation = null;\r\n\t\treturn res;\r\n\t}\r\n\tpublic set animation(val) {\r\n\t\tthis._animation = val;\r\n\t}\r\n\tprivate _normalAnimations: string[] = [];\r\n\tpublic get normalAnimations() {\r\n\t\tconst res = this._normalAnimations;\r\n\t\tthis._normalAnimations = [];\r\n\t\treturn res;\r\n\t}\r\n\tpublic set normalAnimations(val) {\r\n\t\t// @ts-ignore\r\n\t\tthis._normalAnimations.push(val); // 实际的逻辑并非set，而是add\r\n\t}\r\n\tprivate _normalAnimationTimes: number[] = [];\r\n\tpublic get normalAnimationTimes() {\r\n\t\tconst res = this._normalAnimationTimes;\r\n\t\tthis._normalAnimationTimes = [];\r\n\t\treturn res;\r\n\t}\r\n\tpublic set normalAnimationTimes(val) {\r\n\t\t// @ts-ignore\r\n\t\tthis._normalAnimationTimes.push(val); // 实际的逻辑并非set，而是add\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 初始化\r\n\r\n\tconstructor(index?, parent?) {\r\n\t\tsuper(index);\r\n\t\tthis.battle = parent;\r\n\t}\r\n\r\n\tonCreated() {\r\n\t\tsuper.onCreated();\r\n\t\tthis.refreshEntity();\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 基本数据获取\r\n\r\n\t/**\r\n\t * 接口实现\r\n\t */\r\n\tpublic get battler() { return this; }\r\n\tpublic get opponents() { return this.battle?.getOpponents(this); }\r\n\r\n\t/**\r\n\t * 是否为Hero\r\n\t */\r\n\tpublic get isHero() { return !!this.nftId }\r\n\r\n\t/**\r\n\t * 是否为敌人\r\n\t */\r\n\tpublic get isEnemy() { return !!this.enemyId }\r\n\r\n\t/**\r\n\t * 英雄\r\n\t */\r\n\tpublic hero(): Hero {\r\n\t\treturn this.nftId && heroMgr().getCacheOneFromServer(this.nftId);\r\n\t}\r\n\r\n\t/**\r\n\t * 敌人\r\n\t */\r\n\tpublic enemy(): Enemy {\r\n\t\treturn this.enemyId && enemyRepo().getById(this.enemyId);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取单个技能\r\n\t */\r\n\tpublic skill(skillId: number) {\r\n\t\treturn this.skills.find(s => s.skillId == skillId);\r\n\t}\r\n\r\n\t/**\r\n\t * 所有特性\r\n\t */\r\n\tpublic traits() {\r\n\t\tconst res = new TraitGroup();\r\n\t\tthis.skills.forEach(s => res.add(...s.traits()));\r\n\t\treturn res;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 状态机\r\n\r\n\t/**\r\n\t * 状态定义\r\n\t */\r\n\tpublic get isHidden() { return this.state == BattlerState.Hidden; }\r\n\tpublic get isEntering() { return this.state == BattlerState.Entering; }\r\n\tpublic get isIdle() { return this.state == BattlerState.Idle; }\r\n\tpublic get isActing() { return this.state == BattlerState.Acting; }\r\n\tpublic get isFrozen() { return this.state == BattlerState.Frozen; }\r\n\tpublic get isDying() { return this.state == BattlerState.Dying; }\r\n\tpublic get isDead() { return this.state == BattlerState.Dead; }\r\n\r\n\t// endregion\r\n\r\n\t// region 属性控制\r\n\r\n\tpublic get level() {\r\n\t\tconst level = this.entity.battleLevel\r\n\t\treturn this.isEnemy ? this.enemyLevel * level : level;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取属性\r\n\t */\r\n\tpublic param(index: ParamType) {\r\n\t\tlet res = this.params[index] || 0;\r\n\t\tswitch (index) {\r\n\t\t\tcase ParamType.ATK:\r\n\t\t\t\tres *= this.battle.campBonusParam(\r\n\t\t\t\t\tthis.camp, BonusParamType.ATK); break;\r\n\t\t\tcase ParamType.DEF:\r\n\t\t\t\tres *= this.battle.campBonusParam(\r\n\t\t\t\t\tthis.camp, BonusParamType.DEF); break;\r\n\t\t\tcase ParamType.AVO:\r\n\t\t\t\tres += this.bonusParam(BonusParamType.AVO) - 1;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 附加属性\r\n\t */\r\n\tpublic bonusParam(index: BonusParamType) {\r\n\t\tlet res = this.bonusParams[index] || 1;\r\n\t\tres += this.traitBonusParam(index);\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 特性属性\r\n\t */\r\n\tpublic traitBonusParam(index: BonusParamType) {\r\n\t\treturn this.traits().filter(TraitType.BonusParam).sum(0, index);\r\n\t}\r\n\r\n\t/**\r\n\t * 属性快速访问\r\n\t */\r\n\tpublic get cp() { return this.param(ParamType.CP) }\r\n\tpublic get cpb() { return this.param(ParamType.CPB) }\r\n\tpublic get hid() { return this.param(ParamType.HID) }\r\n\tpublic get pow() { return this.param(ParamType.POW) }\r\n\tpublic get agi() { return this.param(ParamType.AGI) }\r\n\tpublic get int() { return this.param(ParamType.INT) }\r\n\tpublic get powb() { return this.param(ParamType.POWB) }\r\n\tpublic get agib() { return this.param(ParamType.AGIB) }\r\n\tpublic get intb() { return this.param(ParamType.INTB) }\r\n\tpublic get atk() { return this.param(ParamType.ATK) }\r\n\tpublic get cri() { return this.param(ParamType.CRI) }\r\n\tpublic get dmg() { return this.param(ParamType.DMG) }\r\n\tpublic get atkb() { return this.param(ParamType.ATKB) }\r\n\tpublic get crib() { return this.param(ParamType.CRIB) }\r\n\tpublic get dmgb() { return this.param(ParamType.DMGB) }\r\n\tpublic get def() { return this.param(ParamType.DEF) }\r\n\tpublic get avo() { return this.param(ParamType.AVO) }\r\n\tpublic get eva() { return this.param(ParamType.EVA) }\r\n\tpublic get defb() { return this.param(ParamType.DEFB) }\r\n\tpublic get avob() { return this.param(ParamType.AVOB) }\r\n\tpublic get evab() { return this.param(ParamType.EVAB) }\r\n\tpublic get mhp() { return this.param(ParamType.MHP) }\r\n\tpublic get spd() { return this.param(ParamType.SPD) }\r\n\tpublic get hit() { return this.param(ParamType.HIT) }\r\n\tpublic get mhpb() { return this.param(ParamType.MHPB) }\r\n\tpublic get spdb() { return this.param(ParamType.SPDB) }\r\n\tpublic get hitb() { return this.param(ParamType.HITB) }\r\n\tpublic get ab1() { return this.param(ParamType.AB1) }\r\n\tpublic get ab2() { return this.param(ParamType.AB2) }\r\n\tpublic get ab3() { return this.param(ParamType.AB3) }\r\n\tpublic get ab4() { return this.param(ParamType.AB4) }\r\n\tpublic get bp() { return this.param(ParamType.BP) }\r\n\tpublic get bpb() { return this.param(ParamType.BPB) }\r\n\r\n\tpublic get isHPDead() { return this.hp <= 0; }\r\n\r\n\t/**\r\n\t * 添加HP\r\n\t */\r\n\tpublic addHP(val) {\r\n\t\tthis.hp += val;\r\n\t\tthis.refreshHp();\r\n\t}\r\n\r\n\t/**\r\n\t * 重置HP\r\n\t */\r\n\tpublic resetHp() {\r\n\t\tthis.hp = this.mhp;\r\n\t}\r\n\r\n\t/**\r\n\t * 死亡判定\r\n\t */\r\n\tpublic judgeDie() {\r\n\t\tif (!this.isDead && !this.isDying && this.isHPDead) this.die();\r\n\t}\r\n\r\n\t/**\r\n\t * 死亡\r\n\t */\r\n\tpublic die() {\r\n\t\tthis.addMotion(DieMotionGroupId,\r\n\t\t\tthis.onDie.bind(this), this.onDead.bind(this));\r\n\t}\r\n\r\n\t/**\r\n\t * 死亡开始回调\r\n\t */\r\n\tpublic onDie() {\r\n\t\tthis.state = BattlerState.Dying;\r\n\t}\r\n\r\n\t/**\r\n\t * 死亡回调\r\n\t */\r\n\tpublic onDead() {\r\n\t\tthis.state = BattlerState.Dead;\r\n\t\tthis.battle.enterNextBattler(this);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 进场控制\r\n\r\n\t/**\r\n\t * 入场\r\n\t */\r\n\tpublic enter() {\r\n\t\tif (!this.isHidden) return;\r\n\r\n\t\tthis.state = BattlerState.Entering;\r\n\t}\r\n\r\n\t/**\r\n\t * 进入完成回调\r\n\t * @private\r\n\t */\r\n\tprivate onEntered() {\r\n\t\tthis.state = BattlerState.Idle\r\n\t}\r\n\r\n\t/**\r\n\t * 更新进场动画\r\n\t */\r\n\tprivate updateEntering() {\r\n\t\t// 如果处于Entering状态，且当前没有动作\r\n\t\tif (this.isEntering && !this.motion)\r\n\t\t\tthis.addMotion(this.isEnemy && this.enemy().type == EnemyType.Boss ? BossEnterMotionGroupId : EnterMotionGroupId,\r\n\t\t\t\tnull, this.onEntered.bind(this));\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 行动控制\r\n\r\n\t/**\r\n\t * 当前行动\r\n\t */\r\n\tpublic action: Action = null;\r\n\r\n\t/**\r\n\t * 属性\r\n\t */\r\n\tpublic get subject() { return this.action?.subject.battler; }\r\n\tpublic get target() { return this.action?.target.battler; }\r\n\tpublic get isSubject() { return this == this.subject; }\r\n\tpublic get isTarget() { return this == this.target; }\r\n\r\n\t/**\r\n\t * 能否执行Action\r\n\t */\r\n\tpublic get canInvokeAction() { return this.isIdle; }\r\n\r\n\t/**\r\n\t * 输入行动\r\n\t */\r\n\tpublic inputAction(target?: IBattlerInfo,\r\n\t\t\t\t\t\t\t\t\t\t skill?: SkillInfo, time?: number) {\r\n\t\ttarget ||= this.generateTarget();\r\n\t\tskill ||= this.generateSkill();\r\n\r\n\t\treturn this.battle.addAction(this, target, skill, time);\r\n\t}\r\n\tprivate generateTarget() {\r\n\t\treturn MathUtils.randomPick(this.opponents);\r\n\t}\r\n\tprivate generateSkill() {\r\n\t\tfor (const skill of this.skills)\r\n\t\t\tif (skill.isUsable) return skill;\r\n\t\treturn this.skills[this.skills.length - 1];\r\n\t}\r\n\r\n\t/**\r\n\t * 执行行动\r\n\t */\r\n\tpublic invokeAction(action: Action) {\r\n\t\tif (!this.canInvokeAction) return;\r\n\t\tthis.action = action;\r\n\t\taction.apply();\r\n\r\n\t\tconst skill = action.skill;\r\n\t\tif (skill.subjectMotionId == PartAttackId) {\r\n\t\t\tif (this.isHero) {\r\n\t\t\t\tlet weapon = (this.entity as Hero).weaponPart;\r\n\t\t\t\tlet motion = weapon ? weapon.attackMotionId : AttackMotionGroupId;\r\n\t\t\t\tthis.addMotion(motion,\r\n\t\t\t\t\tthis.onActionStart.bind(this),\r\n\t\t\t\t\tthis.onActionEnd.bind(this), action);\r\n\t\t\t}\r\n\t\t\tif (this.isEnemy) this.addMotion(this.enemy().attackMotionId,\r\n\t\t\t\t\t\t\t\tthis.onActionStart.bind(this),\r\n\t\t\t\t\t\t\t\tthis.onActionEnd.bind(this), action);\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.addMotion(skill.subjectMotionId,\r\n\t\t\t\tthis.onActionStart.bind(this),\r\n\t\t\t\tthis.onActionEnd.bind(this), action);\r\n\t}\r\n\r\n\t/**\r\n\t * 更新所有行动\r\n\t */\r\n\t// public updateAction() {\r\n\t// \t// 如果所有人的动作都结束了，行动结束\r\n\t// \tif (this.isActing &&\r\n\t// \t\tthis.isMotionsFinished &&\r\n\t// \t\tthis.target.isMotionsFinished)\r\n\t// \t\tthis.onActionEnd();\r\n\t// }\r\n\r\n\t/**\r\n\t * 行动结束\r\n\t */\r\n\tprotected onActionStart() {\r\n\t\tthis.state = BattlerState.Acting;\r\n\t}\r\n\r\n\t/**\r\n\t * 行动结束\r\n\t */\r\n\tprotected onActionEnd() {\r\n\t\tthis.state = BattlerState.Idle;\r\n\t\tthis.action = null;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 结果控制\r\n\r\n\t/**\r\n\t * 要显示的结果\r\n\t */\r\n\tprivate _result: Result;\r\n\tpublic get result() {\r\n\t\tconst res = this._result;\r\n\t\tthis._result = null;\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 能否应用结果\r\n\t */\r\n\tpublic get canApplyResult() { return this.isIdle; }\r\n\r\n\t/**\r\n\t * 显示结果\r\n\t */\r\n\tprivate processResult(result: Result) {\r\n\r\n\t\t// 处理结果\r\n\t\tthis.addHP(-result.hpDamage);\r\n\t\tthis.addHP(result.hpRecover);\r\n\t\tthis.addHP(-result.hpDrain);\r\n\r\n\t\tresult.action.subjectBattler.addHP(result.hpDrain);\r\n\r\n\t\tthis.refresh();\r\n\t}\r\n\r\n\t/**\r\n\t * 应用结果\r\n\t * @param action\r\n\t */\r\n\tpublic applyResult(action: Action) {\r\n\t\tif (!this.canApplyResult || action.result.isMiss)\r\n\t\t\tthis.showResult(action.result);\r\n\t\telse\r\n\t\t\tthis.addMotion(action.skill.targetMotionId,\r\n\t\t\t\tthis.onResultApply.bind(this),\r\n\t\t\t\tthis.onResultEnd.bind(this),\r\n\t\t\t\taction, true);\r\n\t}\r\n\r\n\t/**\r\n\t * 显示结果\r\n\t */\r\n\tpublic showResult(result: Result) {\r\n\t\tthis.processResult(this._result = result);\r\n\t\tthis.judgeDie();\r\n\t}\r\n\r\n\t/**\r\n\t * 结果执行回调\r\n\t */\r\n\tprivate onResultApply() {\r\n\t\tthis.state = BattlerState.Frozen;\r\n\t}\r\n\r\n\t/**\r\n\t * 结果执行结束回调\r\n\t */\r\n\tprivate onResultEnd() {\r\n\t\tthis.state = BattlerState.Idle;\r\n\t}\r\n\r\n\t/**\r\n\t * 更新结果\r\n\t */\r\n\t// public updateResult() {\r\n\t// \tif (this.isFrozen && this.isMotionsFinished)\r\n\t// \t\tthis.state = BattlerState.Idle;\r\n\t// }\r\n\r\n\t// endregion\r\n\r\n\t// region 动作控制\r\n\r\n\t/**\r\n\t * 动作序列\r\n\t */\r\n\tpublic motions: MotionInfo[] = [];\r\n\tpublic get motion() { return this.motions[0]; }\r\n\r\n\t/**\r\n\t * 当前未开始播放的动作\r\n\t */\r\n\tpublic get curMotion() {\r\n\t\treturn this.motion?.played ? null : this.motion;\r\n\t}\r\n\r\n\t/**\r\n\t * 动作处理器\r\n\t */\r\n\tpublic motionProcessors: MotionProcessor[] = [];\r\n\r\n\t/**\r\n\t * 辅助变量\r\n\t */\r\n\tprivate motionEndTime: number;\r\n\tprivate preparingMotion: boolean = false;\r\n\r\n\t/**\r\n\t * 战场时间\r\n\t */\r\n\tpublic get elapsedTime() { return this.battle.elapsedTime; }\r\n\r\n\t/**\r\n\t * 是否所有动作都完成了\r\n\t */\r\n\tpublic get isMotionsFinished() {\r\n\t\treturn !this.preparingMotion && !this.motion;\r\n\t\t// this.motionProcessors.every(\r\n\t\t// \tp => this.elapsedTime >= p.endTime\r\n\t\t// );\r\n\t\t// this.elapsedTime >= this.motionEndTime;\r\n\t}\r\n\r\n\t/**\r\n\t * 当前动作是否播放完成\r\n\t */\r\n\tpublic get isCurMotionFinished() {\r\n\t\treturn this.elapsedTime >= this.motionEndTime;\r\n\t\t// this.motionProcessors.every(\r\n\t\t// \tp => this.elapsedTime >= p.endTime\r\n\t\t// );\r\n\t}\r\n\r\n\t/**\r\n\t * 添加动作\r\n\t */\r\n\tpublic addMotion(id: number,\r\n\t\t\t\t\t\t\t\t\t onStart?: Function,\r\n\t\t\t\t\t\t\t\t\t onFinish?: Function,\r\n\t\t\t\t\t\t\t\t\t action?: Action,\r\n\t\t\t\t\t\t\t\t\t isResult: boolean = false) {\r\n\t\treturn this.motions.push({\r\n\t\t\tmotion: motionGroupRepo().getById(id),\r\n\t\t\tonStart, onFinish, action, isResult\r\n\t\t});\r\n\t}\r\n\t// public addMotion(id: number,\r\n\t// \t\t\t\t\t\t\t\t state?: BattlerState,\r\n\t// \t\t\t\t\t\t\t\t action?: Action,\r\n\t// \t\t\t\t\t\t\t\t isResult: boolean = false) {\r\n\t// \treturn new Promise(resolve => {\r\n\t// \t\tthis.preparingMotion = true;\r\n\t// \t\tthis.motions.push({\r\n\t// \t\t\tmotion: motionGroupRepo().getById(id),\r\n\t// \t\t\tstate, action, isResult,\r\n\t// \t\t\tonFinished: resolve\r\n\t// \t\t})\r\n\t// \t\tthis.preparingMotion = false;\r\n\t// \t})\r\n\t// }\r\n\r\n\t/**\r\n\t * 播放动作\r\n\t */\r\n\tprivate playMotion(motion: MotionInfo) {\r\n\t\tthis.motionProcessors = motion.motion.motions\r\n\t\t\t.map(m => createProcessor(this, m,\r\n\t\t\t\tmotion.action, motion.isResult));\r\n\r\n\t\tthis.scheduleMotions();\r\n\t\tthis.onMotionStart(motion);\r\n\r\n\t\t// this.motionEndTime = this.calcMotionEndTime(motion.motion);\r\n\t}\r\n\r\n\t/**\r\n\t * 添加行动\r\n\t */\r\n\t// public playMotions(motions: Motion[], action?: Action,\r\n\t// \t\t\t\t\t\t\t\t\t isResult: boolean = false) {\r\n\t// \taction ||= this.action;\r\n\t// \tthis.motionProcessors = motions\r\n\t// \t\t.map(m => createProcessor(this, action, m, isResult))\r\n\t// \t\t.filter(p => !!p);\r\n\t//\r\n\t// \tthis.scheduleMotions();\r\n\t// }\r\n\r\n\t/**\r\n\t * 调度动作\r\n\t */\r\n\tprivate scheduleMotions() {\r\n\t\tlet startTime = this.elapsedTime;\r\n\t\tlet endTime = this.elapsedTime;\r\n\r\n\t\tfor (const processor of this.motionProcessors) {\r\n\t\t\tconst playType = processor.motion.playType;\r\n\t\t\tif (playType == 'after') startTime = endTime;\r\n\r\n\t\t\tprocessor.startTime = startTime + processor.motion.offset;\r\n\t\t\tendTime = Math.max(endTime, processor.totalEndTime);\r\n\t\t}\r\n\t\tthis.motionEndTime = endTime;\r\n\t}\r\n\r\n\t/**\r\n\t * 更新动作\r\n\t */\r\n\tprivate updateMotions() {\r\n\t\tif (!this.motion) return;\r\n\r\n\t\t// 如果当前motion还没开始播放\r\n\t\tif (!this.motion.played)\r\n\t\t\tthis.playMotion(this.motion);\r\n\t\t// 如果已经播放完毕\r\n\t\telse if (this.isCurMotionFinished)\r\n\t\t\tthis.onMotionFinish(this.motion);\r\n\r\n\t\tthis.motionProcessors.forEach(p => p.update());\r\n\r\n\t\t// if (!this.isCurMotionFinished) return;\r\n\t\t// if (this.motion.played)\r\n\t\t// \tthis.onMotionFinish(this.motion);\r\n\t\t// else\r\n\t\t// \tthis.playMotion(this.motion);\r\n\t}\r\n\r\n\t/**\r\n\t * 行动完成回调\r\n\t */\r\n\tprivate onMotionStart(motion: MotionInfo) {\r\n\t\tmotion.onStart && motion.onStart();\r\n\t\tmotion.played = true;\r\n\t}\r\n\r\n\t/**\r\n\t * 行动完成回调\r\n\t */\r\n\tprivate onMotionFinish(motion: MotionInfo) {\r\n\t\tmotion.onFinish && motion.onFinish();\r\n\t\tthis.motions.shift();\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 刷新\r\n\r\n\t/**\r\n\t * 刷新数据\r\n\t */\r\n\tpublic refresh() {\r\n\t\tthis.refreshEntity();\r\n\t\tthis.refreshParams();\r\n\t\tthis.refreshHp();\r\n\t}\r\n\r\n\t/**\r\n\t * 刷新Entity\r\n\t */\r\n\tprivate refreshEntity() {\r\n\t\tif (this.isHero) this.entity = this.hero();\r\n\t\tif (this.isEnemy) this.entity = this.enemy();\r\n\t}\r\n\r\n\t/**\r\n\t * 刷新属性\r\n\t */\r\n\tprivate refreshParams() {\r\n\t\tthis.params = this.entity.battleParams.slice(0);\r\n\t\t// TODO: 根据具体情况设置属性\r\n\t\tif (this.isEnemy) {\r\n\t\t\tthis.params[ParamType.ATK] *= this.enemyLevel;\r\n\t\t\tthis.params[ParamType.MHP] *= this.enemyLevel;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 刷新HP\r\n\t * @private\r\n\t */\r\n\tprivate refreshHp() {\r\n\t\tthis.hp = MathUtils.clamp(this.hp, 0, this.mhp);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 更新控制\r\n\r\n\tpublic update() {\r\n\t\tthis.updateMotions();\r\n\t\tthis.updateEntering();\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 测试\r\n\r\n\t/**\r\n\t * 生成测试数据\r\n\t */\r\n\tpublic static testData(camp, index, nftId?, enemyId?) {\r\n\t\tconst res = new Battler();\r\n\r\n\t\tres.camp = camp;\r\n\t\tres.pos = index;\r\n\t\tres.nftId = nftId;\r\n\t\tres.enemyId = enemyId;\r\n\r\n\t\tconst skill = skillRepo().normalAttack();\r\n\t\tconst sInfo = SkillInfo.testData(skill);\r\n\r\n\t\tres.skills.push(sInfo);\r\n\t\tsInfo.battler = res;\r\n\r\n\t\tres.enter();\r\n\t\tres.refreshEntity();\r\n\r\n\t\t// TODO: 生成一些随机数据\r\n\t\tres.entity.battleParams = [10, 125, 10, 5];\r\n\t\tres.refresh();\r\n\t\tres.resetHp();\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n\r\nimport {Hero, RestraintType} from \"../../HeroModule/Data/Hero\";\r\nimport {heroMgr} from \"../../HeroModule/Managers/HeroManager\";\r\nimport {ParamType} from \"../../HeroModule/Data/Param\";\r\nimport {cGte, ConditionGroup, ConditionType} from \"../../PlayerModule/Data/Condition\";\r\nimport {TraitGroup, TraitType} from \"./Trait\";\r\n","import {BaseData, dataPK, field, PK, pkType} from \"../../CoreModule/Data/BaseData\";\r\nimport {Reward} from \"../../PlayerModule/Data/Reward\";\r\nimport {Battler, BonusParamType, SkillInfo} from \"./Battler\";\r\nimport {Action, BattlerInfo, IBattlerInfo} from \"./Action\";\r\nimport {DynamicData} from \"../../CoreModule/Data/DynamicData\";\r\n\r\nexport enum BattleType {\r\n\tMain, PVP, Copy, Boss\r\n}\r\n\r\nexport enum BattleState {\r\n\tNotStarted, Starting,\r\n\tIdle, Acting, Ending, Ended\r\n}\r\n\r\nexport const PlayerCamp = 0;\r\nexport const EnemyCamp = 1;\r\nexport const MainIndex = 0;\r\n\r\nexport class BattleResult extends BaseData {\r\n\r\n\t@field([Reward])\r\n\tpublic rewards: Reward[] = [];\r\n\t@field(Number)\r\n\tpublic winner: number;\r\n\r\n\tpublic battle: Battle;\r\n\r\n\tconstructor(index, parent) {\r\n\t\tsuper(index);\r\n\t\tthis.battle = parent;\r\n\t}\r\n}\r\n\r\nexport class Battle extends DynamicData {\r\n\r\n\t// region 基本属性\r\n\r\n\t@field(String) @dataPK\r\n\tpublic battleId: string;\r\n\r\n\t@field(String)\r\n\tpublic uuid: string;\r\n\r\n\t@field(Number)\r\n\tpublic type: BattleType;\r\n\r\n\t@field(Number)\r\n\tpublic copyId?: number;\r\n\t@field(Number)\r\n\tpublic level?: number;\r\n\t@field(Boolean)\r\n\tpublic isFirst?: boolean;\r\n\r\n\t@field([Battler])\r\n\tpublic battlers: Battler[] = [];\r\n\r\n\t@field([Action])\r\n\tpublic actions: Action[] = [];\r\n\r\n\t@field(BattleResult)\r\n\tpublic result: BattleResult;\r\n\r\n\t@field(Number)\r\n\tpublic createdAt: number;\r\n\t@field(Number)\r\n\tpublic endAt: number;\r\n\r\n\t// 当前ActionTime战斗者输入序列（输入指的是输入行动）\r\n\t@field([BattlerInfo])\r\n\tpublic inputtingBattlers: BattlerInfo[] = [];\r\n\t@field // 当前Action输入索引\r\n\tpublic inputIndex: number = 0;\r\n\r\n\t@field\r\n\tpublic elapsedTime: number = -1;\r\n\t@field\r\n\tpublic actionTime: number = -1;\r\n\r\n\t@field\r\n\tpublic battleAnimations: string[] = [];\r\n\tpublic getCurrentAnimations() {\r\n\t\tconst res = this.battleAnimations;\r\n\t\tthis.battleAnimations = [];\r\n\t\treturn res;\r\n\t}\r\n\t@field\r\n\tpublic battleAnimationTimes: number[] = [];\r\n\tpublic getCurrentAnimationTimes() {\r\n\t\tconst res = this.battleAnimationTimes;\r\n\t\tthis.battleAnimationTimes = [];\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 事件监听/数据生成器\r\n\t */\r\n\tpublic onActionStartListener: (Action) => void;\r\n\tpublic onActionEndListener: (Action) => void;\r\n\tpublic onBattleEndListener: (number) => void;\r\n\tpublic inputtingBattlersGenerator: (Battle?) => BattlerInfo[];\r\n\r\n\t// region 状态机\r\n\r\n\t// @field\r\n\tpublic state: BattleState = BattleState.NotStarted;\r\n\r\n\tpublic get isStarting() { return this.state == BattleState.Starting; }\r\n\tpublic get isRunning() { return this.state >= BattleState.Starting; }\r\n\tpublic get isIdle() { return this.state == BattleState.Idle; }\r\n\tpublic get isActing() { return this.state == BattleState.Acting; }\r\n\tpublic get isEnding() { return this.state == BattleState.Ending; }\r\n\tpublic get isEnded() { return this.state == BattleState.Ended; }\r\n\r\n\t// endregion\r\n\r\n\t// region 流程控制\r\n\r\n\tpublic winner: number;\r\n\r\n\t/**\r\n\t * 输入中战斗者（将要产生行动的战斗者）\r\n\t */\r\n\tpublic get inputtingBattler() {\r\n\t\treturn this.inputtingBattlers[this.inputIndex]?.battler;\r\n\t}\r\n\r\n\t/**\r\n\t * 开始战斗\r\n\t */\r\n\tpublic start() {\r\n\t\tif (this.isRunning) return;\r\n\t\tthis.elapsedTime = this.actionTime = 0;\r\n\t\tthis.state = BattleState.Starting;\r\n\t}\r\n\r\n\t/**\r\n\t * 结束战斗\r\n\t */\r\n\tpublic terminate() {\r\n\t\tif (this.isEnded) return;\r\n\t\tthis.elapsedTime = this.actionTime = -1;\r\n\t\tthis.state = BattleState.Ended;\r\n\t}\r\n\r\n\t// /**\r\n\t//  * 下一步\r\n\t//  */\r\n\t// public next() {\r\n\t// \tthis.inputIndex++;\r\n\t// }\r\n\t//\r\n\t// /**\r\n\t//  * 生成行动顺序\r\n\t//  */\r\n\t// private generateActionBattlers() {\r\n\t// \tthis.inputIndex = 0;\r\n\t// \tif (this.actionBattlersGenerator)\r\n\t// \t\tthis.inputtingBattlers = this.actionBattlersGenerator(this);\r\n\t// \telse\r\n\t// \t\tthis.inputtingBattlers = [];\r\n\t// }\r\n\r\n\t/**\r\n\t * 更新进程\r\n\t */\r\n\tprivate updateProgress() {\r\n\t\tif (this.isStarting &&\r\n\t\t\tthis.isAllBattlersIdle()) {\r\n\t\t\tthis.state = BattleState.Idle;\r\n\t\t\tthis.nextRound();\r\n\t\t}\r\n\t}\r\n\r\n\t// private updateProgress() {\r\n\t// \tif (this.isStarting) this.state = BattleState.Idle;\r\n\t// \t// if (this.isEnding) this.state = BattleState.Ended;\r\n\t// }\r\n\r\n\t/**\r\n\t * 战斗即将结束\r\n\t */\r\n\tprivate onBattleEnd(winner) {\r\n\t\tthis.state = BattleState.Ending;\r\n\t\tthis.winner = winner;\r\n\r\n\t\tif (this.onBattleEndListener)\r\n\t\t\tthis.onBattleEndListener(winner);\r\n\r\n\t\t// TODO: 处理结果\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 回合控制\r\n\r\n\t/**\r\n\t * 是否下一回合\r\n\t */\r\n\tpublic isNextRound() {\r\n\t\treturn this.inputIndex >= this.inputtingBattlers.length;\r\n\t}\r\n\r\n\t/**\r\n\t * 下一步\r\n\t */\r\n\tpublic next() {\r\n\t\tif (this.getBattlers().length <= 0) return;\r\n\r\n\t\tdo { this.inputIndex++; }\r\n\t\twhile (this.inputtingBattler && !this.inputtingBattler.isIdle);\r\n\r\n\t\tif (this.isNextRound()) {\r\n\t\t\tthis.nextRound(); this.next();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 添加回合\r\n\t */\r\n\tpublic nextRound(at = 1) {\r\n\t\tthis.setActionTime(this.actionTime + at);\r\n\t}\r\n\r\n\t/**\r\n\t * 设置回合\r\n\t */\r\n\tpublic setActionTime(at) {\r\n\t\tif (this.actionTime == at) return;\r\n\r\n\t\tthis.actionTime = at;\r\n\t\t// 如果发生回合变化，清空actionBattlers\r\n\t\tthis.generateInputtingBattlers();\r\n\t}\r\n\r\n\t/**\r\n\t * 生成行动顺序\r\n\t */\r\n\tprivate generateInputtingBattlers() {\r\n\t\tthis.inputIndex = -1;\r\n\t\tif (this.inputtingBattlersGenerator)\r\n\t\t\tthis.inputtingBattlers = this.inputtingBattlersGenerator(this);\r\n\t\telse\r\n\t\t\tthis.inputtingBattlers = [];\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 战斗者控制\r\n\r\n\t/**\r\n\t * 获取所有存活的战斗者\r\n\t */\r\n\tpublic getBattlers() {\r\n\t\treturn this.battlers\r\n\t\t\t.filter(b => !b.isHidden && !b.isDead);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取战斗者对象\r\n\t */\r\n\tpublic getBattler(info: IBattlerInfo) {\r\n\t\treturn this.battlers.find(b =>\r\n\t\t\t!b.isHidden && !b.isDead &&\r\n\t\t\tb.camp == info.camp && b.pos == info.pos);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取指定位置的下一个战斗者\r\n\t */\r\n\tpublic getNextBattler(info: IBattlerInfo) {\r\n\t\treturn this.battlers.find(b =>\r\n\t\t\tb.isHidden && b.camp == info.camp && b.pos == info.pos);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取对手数组\r\n\t */\r\n\tpublic getOpponents(info: IBattlerInfo) {\r\n\t\treturn this.getCampBattlers(1 - info.camp);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取阵营的所有战斗者\r\n\t */\r\n\tpublic getCampBattlers(camp) {\r\n\t\treturn this.battlers.filter(b =>\r\n\t\t\t!b.isHidden && !b.isDead && b.camp == camp);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取阵营的所有战斗者\r\n\t */\r\n\tpublic getCampAllBattlers(camp) {\r\n\t\treturn this.battlers.filter(b => b.camp == camp);\r\n\t}\r\n\r\n\t/**\r\n\t * 是否所有存活的战斗者都处于Idle状态\r\n\t */\r\n\tpublic isAllBattlersIdle() {\r\n\t\treturn this.getBattlers().every(b => b.isIdle);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取某个阵营是否全体死亡\r\n\t */\r\n\tpublic isCampDead(camp) {\r\n\t\treturn this.getCampBattlers(camp).every(b => b.isDead);\r\n\t}\r\n\r\n\t/**\r\n\t * 阵营属性\r\n\t */\r\n\tpublic campBonusParam(camp: number, index: BonusParamType) {\r\n\t\tconst battlers = this.getCampBattlers(camp);\r\n\t\treturn battlers.reduce((res, b) => res + b.bonusParam(index) - 1, 1);\r\n\t}\r\n\r\n\t/**\r\n\t * 是否所有Battler的所有Motion都结束了\r\n\t */\r\n\tpublic isMotionsFinished() {\r\n\t\treturn this.battlers.every(\r\n\t\t\tb => b.isMotionsFinished\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * 添加战斗者\r\n\t */\r\n\tpublic addBattler(battler: Battler) {\r\n\t\tbattler.battle = this;\r\n\r\n\t\tthis.battlers.push(battler);\r\n\t}\r\n\r\n\t/**\r\n\t * 判断胜者\r\n\t */\r\n\tpublic judgeWinner() {\r\n\t\tif (this.isCampDead(0)) return 1;\r\n\t\tif (this.isCampDead(1)) return 0;\r\n\t\treturn -1;\r\n\t}\r\n\r\n\t/**\r\n\t * 更新战斗者\r\n\t */\r\n\tprivate updateBattlers() {\r\n\t\tthis.battlers.forEach(b => b.update());\r\n\t}\r\n\r\n\t/**\r\n\t * 进入下一个战斗者\r\n\t */\r\n\tpublic enterNextBattler(battler: Battler) {\r\n\t\tbattler = this.getNextBattler(battler);\r\n\t\tbattler?.enter();\r\n\t\tthis.nextRound();\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 行动控制\r\n\r\n\t/**\r\n\t * 当前行动\r\n\t */\r\n\tpublic get action() { return this.actions[0]; }\r\n\r\n\t/**\r\n\t * 当前行动\r\n\t */\r\n\tpublic get curAction() {\r\n\t\treturn this.actionTime >= this.action?.time\r\n\t\t\t? this.action : undefined;\r\n\t}\r\n\r\n\t/**\r\n\t * 添加行动\r\n\t */\r\n\tpublic addAction(actionOrSubject: Action | IBattlerInfo,\r\n\t\t\t\t\t\t\t\t\t target?: IBattlerInfo,\r\n\t\t\t\t\t\t\t\t\t skill?: SkillInfo, time?: number) {\r\n\t\tlet res;\r\n\t\tif (actionOrSubject instanceof Action) {\r\n\t\t\tres = actionOrSubject;\r\n\t\t\tactionOrSubject.index = this.actions.length;\r\n\t\t\tactionOrSubject.battle = this;\r\n\r\n\t\t} else {\r\n\t\t\tres = new Action(this.actions.length, this);\r\n\t\t\tres.time = time || this.actionTime;\r\n\t\t\tres.setSubject(actionOrSubject);\r\n\t\t\tres.setTarget(target);\r\n\t\t\tres.setSkill(skill);\r\n\t\t\tres.makeResult();\r\n\t\t}\r\n\r\n\t\tthis.actions.push(res);\r\n\t\tthis.actions.sort((a1, a2) => a1.time - a2.time);\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 更新行动\r\n\t */\r\n\tprivate updateActions() {\r\n\t\t// if (!this.isRunning) return;\r\n\t\tif (!this.curAction) return;\r\n\r\n\t\tif (this.isIdle) this.invokeAction();\r\n\r\n\t\t// 如果处于行动中，同时所有战斗者的动作都完成了\r\n\t\tif (this.isActing &&\r\n\t\t\tthis.isMotionsFinished())\r\n\t\t\tthis.onActionEnd();\r\n\t}\r\n\r\n\t/**\r\n\t * 处理Action\r\n\t */\r\n\tprotected invokeAction() {\r\n\t\tconst action = this.action;\r\n\t\tconst battler = action.subject.battler;\r\n\r\n\t\tif (battler) {\r\n\t\t\tbattler.invokeAction(action);\r\n\t\t\tthis.onActionStart();\r\n\t\t} else\r\n\t\t\tthis.actions.shift();\r\n\t}\r\n\r\n\t/**\r\n\t * 行动开始回调\r\n\t */\r\n\tprotected onActionStart() {\r\n\t\tthis.state = BattleState.Acting;\r\n\t\tif (this.onActionStartListener)\r\n\t\t\tthis.onActionStartListener(this.action);\r\n\t}\r\n\r\n\t/**\r\n\t * 行动结束回调\r\n\t */\r\n\tprotected onActionEnd() {\r\n\t\tthis.actions.shift();\r\n\r\n\t\tconst winner = this.judgeWinner();\r\n\t\tif (winner >= 0) // 胜负已分\r\n\t\t\tthis.onBattleEnd(winner);\r\n\t\telse {\r\n\t\t\tif (this.onActionEndListener)\r\n\t\t\t\tthis.onActionEndListener(this.action);\r\n\t\t\tthis.state = BattleState.Idle;\r\n\t\t}\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\tpublic update(dt) {\r\n\t\tif (this.isEnding || this.isEnded) return;\r\n\r\n\t\tthis.elapsedTime += dt;\r\n\r\n\t\tthis.updateProgress();\r\n\t\tthis.updateActions();\r\n\t\tthis.updateBattlers();\r\n\t}\r\n\r\n\t// region 测试\r\n\r\n\tpublic static async testData(type: BattleType = BattleType.Main) {\r\n\t\tconst res = new Battle();\r\n\r\n\t\tres.type = type;\r\n\r\n\t\tawait heroMgr().getOneFromServer(\"194\");\r\n\t\tawait heroMgr().getOneFromServer(\"203\");\r\n\t\tawait heroMgr().getOneFromServer(\"195\");\r\n\r\n\t\tconst battler1 = await Battler.testData(0, 0, \"194\");\r\n\t\tconst battler2 = await Battler.testData(0, 1, \"203\");\r\n\t\tconst battler3 = await Battler.testData(1, 0, \"195\");\r\n\r\n\t\tres.addBattler(battler1);\r\n\t\tres.addBattler(battler2);\r\n\t\tres.addBattler(battler3);\r\n\r\n\t\t// 第0回合\r\n\t\tbattler1.inputAction(battler3, undefined, 0);\r\n\t\tbattler3.inputAction(battler1, undefined, 0);\r\n\r\n\t\tbattler2.inputAction(battler3, undefined, 0);\r\n\t\tbattler3.inputAction(battler2, undefined, 0);\r\n\r\n\t\t// 第1回合\r\n\t\tbattler3.inputAction(battler1, undefined, 1);\r\n\t\tbattler1.inputAction(battler3, undefined, 1);\r\n\r\n\t\tbattler2.inputAction(battler3, undefined, 1);\r\n\t\tbattler3.inputAction(battler2, undefined, 1);\r\n\r\n\t\t// TODO: 添加其他数据\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\nimport {heroMgr} from \"../../HeroModule/Managers/HeroManager\";\r\nimport {copyRepo} from \"../../CopyModule/Data/Copy\";\r\n","import {ItemContainer} from \"../../../CoreModule/Components/ItemContainer\";\r\nimport {Hero} from \"../../../HeroModule/Data/Hero\";\r\nimport {waitForDataLoad} from \"../../../CoreModule/Managers/DataManager\";\r\nimport {playerMgr, waitForLogin} from \"../../../PlayerModule/Managers/PlayerManager\";\r\nimport HeroCompositingDisplay from \"./Compositing/HeroCompositingDisplay\";\r\nimport CultivateWindowController from \"./CultivateWindowController\";\r\nimport {heroMgr} from \"../../../HeroModule/Managers/HeroManager\";\r\nimport {battleScene} from \"../../../../Scenes/BattleScene\";\r\nimport Button = cc.Button;\r\nimport Node = cc.Node;\r\nimport EventHandler = cc.Component.EventHandler;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BottomListHeroContainer extends ItemContainer<Hero, HeroCompositingDisplay> {\r\n\r\n    private cultivateController: CultivateWindowController = null;\r\n    private totalHeroes: Hero[] = [];\r\n    private page: number = 0;\r\n\r\n    start () {\r\n        this.cultivateController = battleScene().cultivateWindow;\r\n        this.setup().then();\r\n    }\r\n\r\n    @waitForDataLoad\r\n    @waitForLogin\r\n    private async setup() {\r\n        const acc = playerMgr().player.account;\r\n        this.totalHeroes = (await heroMgr().getListFromServer())\r\n          .filter(h => h.ownerAccount == acc);\r\n        this.onPageChange();\r\n    }\r\n\r\n    update (dt) {\r\n        this.updateNodes();\r\n    }\r\n\r\n    @property(Node)\r\n    heroFrame: Node = null;\r\n\r\n    updateNodes() {\r\n        let index = this.items.findIndex(i => i == battleScene().cultivateWindow.currentHero);\r\n        if (index == -1) {\r\n            this.heroFrame.active = false;\r\n            return;\r\n        }\r\n        this.heroFrame.active = true;\r\n        this.heroFrame.x = 125 * index - 250;\r\n    }\r\n\r\n\r\n    onItemsChanged() {\r\n        super.onItemsChanged();\r\n        this.itemsComponents.forEach((item, i) => {\r\n            let event = new EventHandler();\r\n            event.target = this.node;\r\n            event.component = \"BottomListHeroContainer\";\r\n            event.handler = \"onItemClicked\";\r\n            event.customEventData = \"\" + i;\r\n            item.getComponent(Button).clickEvents = [];\r\n            item.getComponent(Button).clickEvents.push(event);\r\n        })\r\n    }\r\n\r\n    nextPage() {\r\n        if (this.totalHeroes.length > (this.page + 1) * 5) this.page++;\r\n        this.onPageChange();\r\n    }\r\n\r\n    lastPage() {\r\n        if (this.page > 0) this.page--;\r\n        this.onPageChange();\r\n    }\r\n\r\n    onPageChange() {\r\n        let items = this.totalHeroes.filter((h, i) => Math.floor(i / 5) == this.page);\r\n        this.setItems(items);\r\n    }\r\n\r\n    onItemClicked(event: any, index: string) {\r\n        this.cultivateController.currentHero = this.items[index];\r\n        this.cultivateController.refreshHero = true;\r\n    }\r\n}\r\n","import requireComponent = cc._decorator.requireComponent;\r\nimport Button = cc.Button;\r\nimport Sprite = cc.Sprite;\r\nimport Node = cc.Node;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\n@requireComponent(Button)\r\n@requireComponent(Sprite)\r\nexport default class ButtonFlash extends cc.Component {\r\n\r\n    // @property(Node)\r\n    // mask: Node = null;\r\n\r\n    button: Button = null;\r\n    sprite: Sprite = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n        this.button = this.getComponent(Button);\r\n        this.sprite = this.getComponent(Sprite);\r\n        this.node.on(Node.EventType.TOUCH_START, () => this.lightOn());\r\n        this.node.on(Node.EventType.TOUCH_CANCEL, () => this.lightOff());\r\n        this.node.on(Node.EventType.TOUCH_END, () => this.lightOff());\r\n    }\r\n\r\n    // update (dt) { }\r\n\r\n    lightOn() {\r\n        this.sprite.dstBlendFactor = cc.macro.ONE;\r\n        // this.mask.active = true;\r\n    }\r\n\r\n    lightOff() {\r\n        this.sprite.dstBlendFactor = cc.macro.ONE_MINUS_SRC_ALPHA;\r\n        // this.mask.active = false;\r\n    }\r\n}\r\n","import Node = cc.Node;\r\nimport Widget = cc.Widget;\r\nimport {nftMgr} from \"../../../Modules/NFTModule/Managers/NFTManager\";\r\nimport {selectorScene} from \"../SelectorScene\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class CanvasAdapter extends cc.Component {\r\n\r\n    @property(Node)\r\n    canvas: Node = null;\r\n    @property(Widget)\r\n    previewUI: Widget = null;\r\n    @property(Widget)\r\n    selectUI: Widget = null;\r\n    @property(Widget)\r\n    createUI: Widget = null;\r\n    @property(Widget)\r\n    descriptionUI: Widget = null;\r\n    @property(Widget)\r\n    main: Widget = null;\r\n    @property(Widget)\r\n    fixed: Widget = null;\r\n\r\n    windowWidth: number = 1200;\r\n    isDebug: boolean = true;\r\n\r\n    @property(Number)\r\n    testWidth: number = 1200; // 运行从编辑器进行宽度设置\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    update (dt) {\r\n        if (selectorScene().editorMode) return;\r\n\r\n        this.fixed.top = this.canvas.y - 400;\r\n\r\n        if (nftMgr().data.windowSize || !this.isDebug) {\r\n            if (nftMgr().data.windowSize[0] == this.windowWidth) return;\r\n            this.windowWidth = nftMgr().data.windowSize[0];\r\n            this.windowWidth = Math.min(1200, this.testWidth);\r\n            this.isDebug = false;\r\n        }\r\n        else {\r\n            // this.testWidth = cc.view.getVisibleSize().width; // 自动以画布可视尺寸适配\r\n            this.testWidth = window.document.documentElement.clientWidth; // 自动以浏览器界面尺寸适配\r\n            if(this.testWidth == this.windowWidth) return;\r\n            this.windowWidth = Math.min(1200, this.testWidth);\r\n        }\r\n        if (this.windowWidth >= 880) {\r\n            this.canvas.width = this.windowWidth;\r\n            this.canvas.height = this.getHeightByWidth();\r\n\r\n            this.previewUI.isAlignLeft = true;\r\n            this.previewUI.left = 0;\r\n\r\n            this.selectUI.top = 150;\r\n            this.selectUI.left = 450;\r\n\r\n            this.createUI.top = 650;\r\n            this.createUI.right = this.windowWidth - 450;\r\n\r\n            this.descriptionUI.top = 760;\r\n            this.descriptionUI.left = 450;\r\n            this.descriptionUI.right = 30;\r\n            this.descriptionUI.node.height = this.windowWidth == 1200 ? 330 : 570;\r\n        }\r\n        else {\r\n            this.canvas.width = Math.max(450, this.windowWidth);\r\n            this.canvas.height = this.getHeightByWidth();\r\n\r\n            this.previewUI.isAlignHorizontalCenter = true;\r\n            this.previewUI.horizontalCenter = 0;\r\n\r\n            this.selectUI.top = 700;\r\n            this.selectUI.left = 30;\r\n\r\n            this.createUI.top = 1300;\r\n            this.createUI.right = 0;\r\n\r\n            this.descriptionUI.top = 1600;\r\n            this.descriptionUI.left = 20;\r\n            this.descriptionUI.right = 20;\r\n            this.descriptionUI.node.height = this.windowWidth > 780 ? 330 : 570;\r\n        }\r\n        if (this.windowWidth < 450) this.canvas.scale = this.windowWidth / 450;\r\n        else this.canvas.scale = 1;\r\n    }\r\n\r\n    getHeightByWidth(width: number = this.windowWidth): number{\r\n        if (width >= 1200) return 1100;\r\n        if (width >= 880) return 1350;\r\n        if (width >= 780) return 1950;\r\n        return 2200;\r\n    }\r\n\r\n}\r\n","import Prefab = cc.Prefab;\r\nimport Component = cc.Component;\r\nimport instantiate = cc.instantiate;\r\nimport Vec3 = cc.Vec3;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ClickAnimation extends Component {\r\n\r\n    @property(Prefab)\r\n    clickObj: Prefab = null;\r\n\r\n    isLoad: boolean = false;\r\n\r\n    protected update(dt: number) {\r\n        if (!this.isLoad) {\r\n            this.node.on(cc.Node.EventType.TOUCH_END, e => { this.click(e); });\r\n            (this.node as any)._touchListener.setSwallowTouches(false);\r\n            this.isLoad = true;\r\n        }\r\n    }\r\n\r\n    click (event: Event) {\r\n        let node = instantiate(this.clickObj);\r\n        node.parent = this.node;\r\n        node.position = new Vec3(Number(event[\"touch\"][\"_point\"][\"x\"]) - this.node.width / 2,\r\n                                 Number(event[\"touch\"][\"_point\"][\"y\"]) - this.node.height / 2,\r\n                                 0);\r\n        setTimeout(() => { node.destroy(); }, 400);\r\n    }\r\n}\r\n","import executeInEditMode = cc._decorator.executeInEditMode;\r\nimport Color = cc.Color;\r\nimport director = cc.director;\r\nimport requireComponent = cc._decorator.requireComponent;\r\nimport RenderComponent = cc.RenderComponent;\r\nimport Director = cc.Director;\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\n@executeInEditMode\r\n@requireComponent(RenderComponent)\r\nexport default class ColorAssembler extends cc.Component {\r\n\r\n    @property([Color])\r\n    colors: Color[] = [\r\n        null, null, null, null\r\n    ]; // 依次为左下角，右下角，左上角，右上角\r\n\r\n    onEnable() { director.once(Director.EVENT_AFTER_DRAW, this.updateColors, this); }\r\n\r\n    onDisable() { director.off(Director.EVENT_AFTER_DRAW, this.updateColors, this); this.node[ '_renderFlag'] |= cc[ 'RenderFlow'].FLAG_COLOR; }\r\n\r\n    updateColors() {\r\n        const cmp = this.getComponent(cc.RenderComponent);\r\n        if (!cmp) return;\r\n        const _assembler = cmp['_assembler'];\r\n        if (!(_assembler instanceof cc['Assembler2D'])) return;\r\n        const uintVerts = _assembler._renderData.uintVDatas[0];\r\n        if (!uintVerts) return;\r\n        const color = this.node.color;\r\n        const floatsPerVert = _assembler.floatsPerVert;\r\n        const colorOffset = _assembler.colorOffset;\r\n        let count = 0;\r\n        for (let i = colorOffset, l = uintVerts.length; i < l; i += floatsPerVert)\r\n            uintVerts[i] = (this.colors[count++] || color)['_val'];\r\n    }\r\n}\r\n","import HeroInfoDisplay from \"../HeroInfoDisplay\";\r\nimport CultivateWindowController from \"../CultivateWindowController\";\r\nimport {playerMgr} from \"../../../../PlayerModule/Managers/PlayerManager\";\r\nimport {PlayerMoney} from \"../../../../EconomicModule/Data/PlayerMoney\";\r\nimport Label = cc.Label;\r\nimport HeroCompositingDisplay from \"./HeroCompositingDisplay\";\r\nimport {Hero} from \"../../../../HeroModule/Data/Hero\";\r\nimport {battleScene} from \"../../../../../Scenes/BattleScene\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class CompositingWindowDisplay extends cc.Component {\r\n\r\n    // region Background中组件及资源引用\r\n\r\n    @property(HeroInfoDisplay)\r\n    heroInfo: HeroInfoDisplay = null;\r\n    @property(Label)\r\n    lastTime: Label = null;\r\n    @property(HeroCompositingDisplay)\r\n    mainHero: HeroCompositingDisplay = null;\r\n    @property(HeroCompositingDisplay)\r\n    secondHero: HeroCompositingDisplay = null;\r\n\r\n    // endregion\r\n\r\n    // region Content中组件及资源引用\r\n\r\n    @property(Label)\r\n    priceValues: Label[] = [];\r\n    @property(Label)\r\n    balanceValues: Label[] = [];\r\n\r\n    // endregion\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    private cultivateController: CultivateWindowController = null;\r\n\r\n    start () {\r\n        this.cultivateController = battleScene().cultivateWindow;\r\n        this.mainHero.setItem(null);\r\n        this.secondHero.setItem(null);\r\n    }\r\n\r\n    // region 更新控制\r\n\r\n    update (dt) {\r\n        this.updateLabels();\r\n        this.updatePictures();\r\n    }\r\n\r\n    updateLabels() {\r\n        this.priceValues[0].string = \"1000\";\r\n        this.priceValues[1].string = \"1\";\r\n        this.balanceValues[0].string = \"\\\\L[SShop14]:\" + playerMgr().getPlayerData(PlayerMoney).gold.toString();\r\n        this.balanceValues[1].string = \"\\\\L[SShop14]:\" + playerMgr().getPlayerData(PlayerMoney).token.toString();\r\n        this.lastTime.string = \"16:22\";\r\n    }\r\n\r\n    updatePictures() {\r\n\r\n\r\n    }\r\n\r\n    protected onEnable() {\r\n        this.heroInfo.node.active = false;\r\n    }\r\n\r\n    protected onDisable() {\r\n        this.mainHero.setItem(null);\r\n        this.secondHero.setItem(null);\r\n        this.mainHero.node.active = false;\r\n        this.secondHero.node.active = false;\r\n    }\r\n\r\n    // endregion\r\n\r\n    onHeroChange() {\r\n        this.cultivateController.refreshHero = true;\r\n    }\r\n\r\n    // region 组件点击回调\r\n\r\n    selectHero(hero: Hero) {\r\n        if (!this.mainHero.item) {\r\n            this.mainHero.node.active = true;\r\n            this.mainHero.setItem(hero);\r\n            return;\r\n        }\r\n        if (!this.secondHero.item) {\r\n            this.secondHero.node.active = true;\r\n            this.secondHero.setItem(hero);\r\n            return;\r\n        }\r\n    }\r\n\r\n    deselectMainHero() {\r\n        this.mainHero.setItem(null);\r\n        this.mainHero.node.active = false;\r\n    }\r\n\r\n    deselectSecondHero() {\r\n        this.secondHero.setItem(null);\r\n        this.secondHero.node.active = false;\r\n    }\r\n\r\n    compositingBtn() {\r\n\r\n        this.onHeroChange();\r\n    }\r\n\r\n    // endregion\r\n\r\n}\r\n","import {Condition, ConditionType} from \"../Data/Condition\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\n\r\nexport function conditionProcessor(type: ConditionType) {\r\n\treturn (clazz) => {\r\n\t\tConditionProcessor.processorSettings[type] = clazz;\r\n\t}\r\n}\r\n\r\nexport function createProcessor(condition: Condition) {\r\n\tconst clazz = ConditionProcessor.processorSettings[condition.type];\r\n\treturn new clazz(condition);\r\n}\r\n\r\nexport abstract class ConditionProcessor {\r\n\r\n\tpublic static processorSettings:\r\n\t\t{[K: string]: Constructor<ConditionProcessor>} = {};\r\n\r\n\tpublic condition: Condition;\r\n\r\n\tprotected constructor(condition: Condition) {\r\n\t\tthis.condition = condition;\r\n\t}\r\n\r\n\t/**\r\n\t * 属性声明\r\n\t */\r\n\tpublic get value() { return this.condition.value; }\r\n\tpublic get compare() { return this.condition.compare; }\r\n\tpublic get consumable() { return this.condition.consumable; }\r\n\tpublic get errMsg() { return this.condition.errMsg; }\r\n\r\n\tprotected abstract get playerValue(): number;\r\n\tprotected abstract get throwFunc(): Function;\r\n\r\n\t/**\r\n\t * 条件判断\r\n\t */\r\n\tpublic judge() {\r\n\t\tthis.preprocess();\r\n\t\tconst pValue = this.playerValue;\r\n\t\tswitch (this.compare) {\r\n\t\t\tcase \"eq\": return pValue == this.value;\r\n\t\t\tcase \"neq\": return pValue != this.value;\r\n\t\t\tcase \"gt\": return pValue > this.value;\r\n\t\t\tcase \"gte\": return pValue >= this.value;\r\n\t\t\tcase \"lt\": return pValue < this.value;\r\n\t\t\tcase \"lte\": return pValue <= this.value;\r\n\t\t\tdefault: return false;\r\n\t\t}\r\n \t}\r\n\r\n\t/**\r\n\t * 消耗\r\n\t */\r\n\tpublic check() {\r\n\t\tif (!this.judge()) this.throwFunc(this.errMsg);\r\n\t}\r\n\r\n\t/**\r\n\t * 消耗\r\n\t */\r\n\tpublic consume() {\r\n\t\tif (this.consumable) this.doConsume();\r\n\t}\r\n\r\n\t/**\r\n\t * 预处理\r\n\t */\r\n \tprotected preprocess() { }\r\n\r\n\t/**\r\n\t * 执行消耗\r\n\t */\r\n\tprotected doConsume() { }\r\n\r\n}\r\n\r\n@conditionProcessor(ConditionType.Func)\r\nclass FuncConditionProcessor extends ConditionProcessor {\r\n\r\n\tprotected get playerValue(): number { return 0; }\r\n\tprotected get throwFunc(): Function { return this.condition.params.throwFunc; }\r\n\r\n\tjudge(): boolean {\r\n\t\treturn this.condition.params.jFunc();\r\n\t}\r\n\r\n}\r\n","\r\nexport enum ConditionType {\r\n\tFunc = \"func\",\r\n\r\n\tGold = \"gold\",\r\n\tDiamond = \"diamond\",\r\n\tMedal = \"medal\",\r\n\tFragment = \"fragment\", // 碎片\r\n\tToken = \"token\", // 代币\r\n\r\n\tReturnTime = \"returnTime\",\r\n\r\n\t// TODO: 补充更多\r\n}\r\n\r\nexport type CompareType = 'eq' | 'neq' | 'gt' | 'lt' | 'gte' | 'lte'\r\n\r\nexport const DefaultThrowFunc = () => {throw \"Condition not met！\"};\r\n\r\nexport function cEq(type: ConditionType, value: number, consumable: boolean = true,\r\n\t\t\t\t\t\t\t\t\t\tparams: object = {}, errMsg?: string) {\r\n\treturn Condition.eq(type, value, consumable, params, errMsg);\r\n}\r\nexport function cNeq(type: ConditionType, value: number, consumable: boolean = true,\r\n\t\t\t\t\t\t\t\t\t\t params: object = {}, errMsg?: string) {\r\n\treturn Condition.neq(type, value, consumable, params, errMsg);\r\n}\r\nexport function cGte(type: ConditionType, value: number, consumable: boolean = true,\r\n\t\t\t\t\t\t\t\t\t\t params: object = {}, errMsg?: string) {\r\n\treturn Condition.gte(type, value, consumable, params, errMsg);\r\n}\r\nexport function cGt(type: ConditionType, value: number, consumable: boolean = true,\r\n\t\t\t\t\t\t\t\t\t\tparams: object = {}, errMsg?: string) {\r\n\treturn Condition.gt(type, value, consumable, params, errMsg);\r\n}\r\nexport function cLte(type: ConditionType, value: number, consumable: boolean = true,\r\n\t\t\t\t\t\t\t\t\t\t params: object = {}, errMsg?: string) {\r\n\treturn Condition.lte(type, value, consumable, params, errMsg);\r\n}\r\nexport function cLt(type: ConditionType, value: number, consumable: boolean = true,\r\n\t\t\t\t\t\t\t\t\t\tparams: object = {}, errMsg?: string) {\r\n\treturn Condition.lt(type, value, consumable, params, errMsg);\r\n}\r\nexport function cFun(jFunc: Function, tFunc: Function = DefaultThrowFunc, errMsg?: string) {\r\n\treturn Condition.fun(jFunc, tFunc, errMsg);\r\n}\r\n\r\nimport {BaseData, field} from \"../../CoreModule/Data/BaseData\";\r\n\r\nexport class Condition extends BaseData {\r\n\r\n\t@field\r\n\tpublic type: ConditionType = ConditionType.Gold;\r\n\t@field\r\n\tpublic value: number = 100;\r\n\t@field(Object)\r\n\tpublic params: any = {};\r\n\r\n\t@field\r\n\tpublic compare: CompareType = \"gte\";\r\n\t@field\r\n\tpublic consumable: boolean = true;\r\n\r\n\t@field(String)\r\n\tpublic errMsg: string;\r\n\r\n\tprotected constructor(type, value, compare,\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsumable, params, errMsg) {\r\n\t\tsuper();\r\n\t\tthis.type = type;\r\n\t\tthis.value = value;\r\n\t\tthis.compare = compare;\r\n\t\tthis.consumable = consumable;\r\n\t\tthis.params = params;\r\n\t\tthis.errMsg = errMsg;\r\n\t}\r\n\r\n\tpublic static eq(type: ConditionType, value: number, consumable: boolean = true,\r\n\t\t\t\t\t\t\t\t\t params: object = {}, errMsg?: string) {\r\n\t\treturn new Condition(type, value, \"eq\", consumable, params, errMsg);\r\n\t}\r\n\tpublic static neq(type: ConditionType, value: number, consumable: boolean = true,\r\n\t\t\t\t\t\t\t\t\t\tparams: object = {}, errMsg?: string) {\r\n\t\treturn new Condition(type, value, \"neq\", consumable, params, errMsg);\r\n\t}\r\n\tpublic static gte(type: ConditionType, value: number, consumable: boolean = true,\r\n\t\t\t\t\t\t\t\t\t\tparams: object = {}, errMsg?: string) {\r\n\t\treturn new Condition(type, value, \"gte\", consumable, params, errMsg);\r\n\t}\r\n\tpublic static gt(type: ConditionType, value: number, consumable: boolean = true,\r\n\t\t\t\t\t\t\t\t\t params: object = {}, errMsg?: string) {\r\n\t\treturn new Condition(type, value, \"gt\", consumable, params, errMsg);\r\n\t}\r\n\tpublic static lte(type: ConditionType, value: number, consumable: boolean = false,\r\n\t\t\t\t\t\t\t\t\t\tparams: object = {}, errMsg?: string) {\r\n\t\treturn new Condition(type, value, \"lte\", consumable, params, errMsg);\r\n\t}\r\n\tpublic static lt(type: ConditionType, value: number, consumable: boolean = false,\r\n\t\t\t\t\t\t\t\t\t params: object = {}, errMsg?: string) {\r\n\t\treturn new Condition(type, value, \"lt\", consumable, params, errMsg);\r\n\t}\r\n\r\n\tpublic static fun(jFunc: Function, tFunc: Function = DefaultThrowFunc, errMsg?: string) {\r\n\t\treturn new Condition(ConditionType.Func,\r\n\t\t\tnull, null, false,\r\n\t\t\t{ jFunc, tFunc }, errMsg);\r\n\t}\r\n\r\n}\r\n\r\nimport {createProcessor} from \"../Utils/ConditionProcessor\";\r\n\r\nexport class ConditionGroup extends BaseData {\r\n\r\n\t@field([Condition])\r\n\tpublic conditions: Condition[] = [];\r\n\r\n\tpublic static create(...conds: (Condition | ConditionGroup)[]) {\r\n\t\tconst res = new ConditionGroup();\r\n\t\tconds.forEach(cond => res.add(cond));\r\n\t\treturn res;\r\n\t}\r\n\r\n\tpublic add(cond: Condition | ConditionGroup) {\r\n\t\tif (cond instanceof Condition) {\r\n\t\t\tif (cond.type != ConditionType.Func) {\r\n\t\t\t\tconst curCond = this.find(cond.type);\r\n\t\t\t\tif (curCond) curCond.value += cond.value;\r\n\t\t\t\telse this.conditions.push(cond.clone());\r\n\t\t\t} else this.conditions.push(cond.clone());\r\n\t\t} else\r\n\t\t\tcond.conditions.forEach(c => this.add(c))\r\n\t}\r\n\r\n\tpublic process() {\r\n\t\tconst processors = this.conditions.map(\r\n\t\t\tc => createProcessor(c));\r\n\r\n\t\tfor (const p of processors) p.check();\r\n\t\tfor (const p of processors) p.consume();\r\n\t}\r\n\r\n\tpublic check() {\r\n\t\tconst processors = this.conditions.map(\r\n\t\t\tc => createProcessor(c));\r\n\t\tfor (const p of processors) p.check();\r\n\t}\r\n\r\n\tpublic judge() {\r\n\t\tconst processors = this.conditions.map(\r\n\t\t\tc => createProcessor(c));\r\n\t\treturn processors.every(p => p.judge());\r\n\t}\r\n\r\n\tpublic find(type: ConditionType) {\r\n\t\treturn this.conditions.find(c => c.type == type);\r\n\t}\r\n\r\n\t// region 快捷查找\r\n\r\n\tpublic get gold() { return this.find(ConditionType.Gold); }\r\n\tpublic get diamond() { return this.find(ConditionType.Diamond); }\r\n\tpublic get medal() { return this.find(ConditionType.Medal); }\r\n\tpublic get token() { return this.find(ConditionType.Token); }\r\n\r\n\tpublic get fragment() { return this.find(ConditionType.Fragment); }\r\n\r\n\t// endregion\r\n\r\n}\r\n","import {BaseConfig} from \"../Data/BaseConfig\";\r\nimport {BaseManager, getManager, manager} from \"./BaseManager\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {CoreInterface} from \"../Common/CoreCommon\";\r\nimport {DataLoader} from \"../Utils/DataLoader\";\r\n\r\nexport function configMgr() {\r\n\treturn getManager(ConfigManager)\r\n}\r\n\r\ntype ConfigCache<T extends BaseConfig> = {\r\n\tclazz: Constructor<T>, name: string, config?: T\r\n}\r\n\r\nconst ClazzConfigKey = \"configName\";\r\n\r\n@manager\r\nexport class ConfigManager extends BaseManager {\r\n\r\n\tpublic configs: {[T: string]: ConfigCache<any>} = {};\r\n\r\n\tprivate isLoaded = false;\r\n\r\n\t/**\r\n\t * 初始化\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis._initializeData().then();\r\n\t}\r\n\tprivate async _initializeData() {\r\n\t\tthis.isLoaded = false;\r\n\r\n\t\tconst res = await CoreInterface.GetConfig();\r\n\t\tfor (const key in this.configs) {\r\n\t\t\tconst cache = this.configs[key];\r\n\t\t\tthis.configs[key].config = DataLoader.load(\r\n\t\t\t\tcache.clazz, res.configs[key]);\r\n\t\t}\r\n\r\n\t\tthis.isLoaded = true;\r\n\t}\r\n\r\n\t// region 配置操作\r\n\r\n\tpublic registerConfig<T extends BaseConfig>(\r\n\t\tclazz: Constructor<T>, name: string) {\r\n\t\tclazz[ClazzConfigKey] = name;\r\n\r\n\t\tthis.configs[name] = { clazz, name };\r\n\t}\r\n\tpublic getConfigCache<T extends BaseConfig>(\r\n\t\tclazz: Constructor<T> | string): ConfigCache<T> {\r\n\t\tif (typeof clazz !== 'string')\r\n\t\t\tclazz = clazz[ClazzConfigKey] as string;\r\n\r\n\t\treturn this.configs[clazz];\r\n\t}\r\n\r\n\t/**\r\n\t * 获取集合\r\n\t * @param clazz\r\n\t */\r\n\tpublic config<T extends BaseConfig>(clazz: Constructor<T> | string) {\r\n\t\tconst config = this.getConfigCache(clazz);\r\n\t\treturn config.config ||= new config.clazz();\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n","import {get, post} from \"../CoreModule/Common/CoreCommon\";\r\n\r\nexport class CopyInterface {\r\n    @post(\"/copy/setting/adjust_heroes\") static AdjustHeroes(d?): any {}\r\n}\r\n","import {BaseManager, getManager, manager} from \"../../CoreModule/Managers/BaseManager\";\r\nimport {CopyInterface} from \"../CopyCommon\";\r\nimport {PlayerCopy} from \"../Data/PlayerCopy\";\r\nimport {DataLoader} from \"../../CoreModule/Utils/DataLoader\";\r\nimport {copyRepo, CopyType} from \"../Data/Copy\";\r\nimport {playerMgr} from \"../../PlayerModule/Managers/PlayerManager\";\r\nimport {PlayerJob} from \"../../EconomicModule/Data/PlayerJob\";\r\n\r\nexport function copyMgr() {\r\n\treturn getManager(CopyManager)\r\n}\r\n\r\n@manager\r\nclass CopyManager extends BaseManager {\r\n\r\n\t/**\r\n\t * 获取闯关“副本”进度\r\n\t */\r\n\tpublic getMainPlayerCopy() {\r\n\t\treturn playerMgr().getPlayerData(PlayerCopy).mainCopy();\r\n\t}\r\n\r\n\tpublic getMainPlayerCopySettings() {\r\n\t\treturn playerMgr().getPlayerData(PlayerCopy)?.mainSetting();\r\n\t}\r\n\r\n\tpublic getPlayerCopy() {\r\n\t\treturn playerMgr().getPlayerData(PlayerCopy);\r\n\t}\r\n}\r\n","import {Reward, RewardGroup} from \"../../PlayerModule/Data/Reward\";\r\nimport {assetField, BaseData, field, GameData, PK, pkType} from \"../../CoreModule/Data/BaseData\";\r\nimport {Condition} from \"../../PlayerModule/Data/Condition\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {BaseRepository, getRepository, repository} from \"../../CoreModule/Data/BaseRepository\";\r\nimport {Enemy, enemyRepo} from \"./Enemy\";\r\nimport {data, StaticData} from \"../../CoreModule/Data/StaticData\";\r\nimport {copyMgr} from \"../Managers/CopyManager\";\r\nimport {BundleName} from \"../../CoreModule/Managers/AssetBundleManager\";\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport {ParamType} from \"../../HeroModule/Data/Param\";\r\n\r\nexport enum CopyType {\r\n\tMain, Copy, Boss\r\n}\r\n\r\nconst DefaultMaxRound = 100;\r\n\r\nexport class CopyLevel extends BaseData {\r\n\r\n\t@field\r\n\tpublic mapIdx: number = 0; // 关卡所属的地图\r\n\t@field([Number])\r\n\tpublic enemyIds: number[] = []; // 关卡敌人设置\r\n\r\n\t// 暂定\r\n\t@field([Reward])\r\n\tpublic firstRewards: Reward[] = [];\r\n\t@field([Reward])\r\n\tpublic winRewards: Reward[] = [];\r\n\t@field([Reward])\r\n\tpublic loseRewards: Reward[] = [];\r\n\r\n\tpublic copy: Copy;\r\n\r\n\tconstructor(index, parent) {\r\n\t\tsuper(index);\r\n\t\tthis.copy = parent;\r\n\t}\r\n\r\n\t/**\r\n\t * 显示名称\r\n\t */\r\n\tpublic get displayName() {\r\n\t\treturn `\\\\L[CopyLevel${this.mapIdx}]`;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取敌人列表\r\n\t */\r\n\tpublic enemies() {\r\n\t\treturn this.enemyIds.map(eid => enemyRepo().getById(eid))\r\n\t}\r\n\r\n\t/**\r\n\t * 获取奖励\r\n\t */\r\n\tpublic calcRewards(win: boolean, first = false) {\r\n\t\tconst res = RewardGroup.create(\r\n\t\t\t...(win ? this.winRewards : this.loseRewards)\r\n\t\t);\r\n\t\tif (win && first)\r\n\t\t\tthis.firstRewards.forEach(r => res.add(r));\r\n\t\treturn res;\r\n\t}\r\n\r\n\tprivate get mapName() { switch (this.copy.type) {\r\n\t\tcase CopyType.Main:\r\n\t\t\treturn \"main_\" + this.mapIdx;\r\n\t\tcase CopyType.Boss:\r\n\t\t\treturn \"boss_\" + this.mapIdx;\r\n\t\tcase CopyType.Copy:\r\n\t\t\treturn \"copy_\" + this.mapIdx;\r\n\t} }\r\n\t@assetField(SpriteFrame, BundleName.Sprites,\r\n\t\t\"battlemaps/${mapName}\")\r\n\tpublic mapPicture: SpriteFrame;\r\n\r\n}\r\n\r\n@data(\"Copy\")\r\nexport class Copy extends StaticData {\r\n\r\n\t@field\r\n\tpublic type: CopyType = CopyType.Copy;\r\n\t@field\r\n\tpublic pictureName: string = \"\";\r\n\t@field\r\n\tpublic maxRound: number = DefaultMaxRound;\r\n\t@field\r\n\tpublic maxLevel: number = 0;\r\n\t@field([CopyLevel])\r\n\tpublic levels: CopyLevel[] = []; // 每个关卡的配置，实际关卡超出配置范围后会从0开始\r\n\t@field\r\n\tpublic difficulty: number = 1;\r\n\t@field([Condition])\r\n\tpublic conditions: Condition[] = [];\r\n\r\n\tpublic level(level: number): CopyLevel {\r\n\t\treturn this.levels[(level + 1) % this.levels.length];\r\n\t}\r\n}\r\n\r\nexport function copyRepo() {\r\n\treturn getRepository(CopyRepo);\r\n}\r\n\r\n@repository\r\nexport class CopyRepo extends BaseRepository<Copy> {\r\n\r\n\tget clazz(): Constructor<Copy> { return Copy; }\r\n\r\n\t// @ts-ignore\r\n\tpublic getByType(type: CopyType): Copy { };\r\n\r\n\tpublic main() {\r\n\t\treturn this.getByType(CopyType.Main);\r\n\t}\r\n\r\n}\r\n","\r\nexport function error(code: number, errMsg: string) {\r\n\treturn (obj, key, desc) => {\r\n\t\tdesc.value = (detail, data) => {\r\n\t\t\tthrow new GameError(code, errMsg, detail, data);\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport function loading(code: number, title?: string,\r\n\t\t\t\t\t\t\t\t\t\t\t\tmaxValue: number = 1,\r\n\t\t\t\t\t\t\t\t\t\t\t\tshowImmediately: boolean = false) {\r\n\treturn (obj, key, desc) => {\r\n\t\tdesc.value = (detail?: string) =>\r\n\t\t\tnew GameLoading(code, title, detail, maxValue, showImmediately);\r\n\t}\r\n}\r\n\r\nexport function post(\r\n\tp1: string, p2?: string | InterfaceLoading,\r\n\tp3?: InterfaceLoading | boolean, p4?: boolean) {\r\n\r\n\tconst opt = makeInterfaceOption(\"post\", p1, p2, p3, p4);\r\n\r\n\treturn (obj, key, desc) => {\r\n\t\tdesc.value = p => networkMgr().request(new Interface(opt), p)\r\n\t}\r\n}\r\nexport function get(\r\n\tp1: string, p2?: string | InterfaceLoading,\r\n\tp3?: InterfaceLoading | boolean, p4?: boolean) {\r\n\r\n\tconst opt = makeInterfaceOption(\"get\", p1, p2, p3, p4);\r\n\r\n\treturn (obj, key, desc) => {\r\n\t\tdesc.value = d => networkMgr().request(new Interface(opt), d)\r\n\t}\r\n}\r\n\r\nfunction makeInterfaceOption(method: Method,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t hostOrRoute: string,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t routeOrLoading?: string | InterfaceLoading,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t loadingOrUseToken?: InterfaceLoading | boolean,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t useEncrypt: boolean = true): InterfaceOptions {\r\n\tconst res: InterfaceOptions = { method, route: hostOrRoute };\r\n\tif (typeof routeOrLoading === \"string\") { // 有host参数\r\n\t\tres.host = hostOrRoute;\r\n\t\tres.route = routeOrLoading;\r\n\t\tres.loading = loadingOrUseToken;\r\n\t\t// 有host参数，不可设置token和加密\r\n\t\tres.useToken = res.useEncrypt = false;\r\n\t} else {\r\n\t\tres.loading = routeOrLoading;\r\n\t\t// @ts-ignore\r\n\t\tres.useToken = loadingOrUseToken;\r\n\t\tres.useEncrypt = useEncrypt;\r\n\t}\r\n\tif (res.useToken === undefined) res.useToken = true;\r\n\treturn res;\r\n}\r\n\r\nexport class CoreThrow {\r\n\r\n\t@error(100000, \"系统错误\") static SystemError(...p) {}\r\n\r\n}\r\n\r\nexport class CoreLoading {\r\n\r\n\t@loading(100000, \"\") static Default(...p): any {};\r\n\t@loading(100001, \"Loading assets\") static GetAsset(...p): any {};\r\n\t@loading(100002, \"Waiting for response\") static Request(...p): any {};\r\n\t@loading(100003, \"Loading data\") static GetData(...p): any {};\r\n\r\n}\r\n\r\nexport class CoreInterface {\r\n\t@get(\"/core/data/get\", CoreLoading.GetData, false) static GetData(d?): any {}\r\n\t@get(\"/core/config/get\", CoreLoading.GetData, false) static GetConfig(d?): any {}\r\n\t@post(\"/core/token/update\", false) static UpdateToken(d?): any {}\r\n}\r\n\r\nimport {GameLoading} from \"../Managers/LoadingManager\";\r\nimport {GameError} from \"../Managers/AlertManager\";\r\nimport {Interface, InterfaceLoading, InterfaceOptions, Method, networkMgr} from \"../Managers/NetworkManager\";\r\n","import Sprite = cc.Sprite;\r\nimport Label = cc.Label;\r\nimport Animation = cc.Animation;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport Color = cc.Color;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nconst MaxQuality = 5;\r\n\r\n@ccclass\r\nexport default class CreatedWindow extends cc.Component {\r\n\r\n\t@property(Sprite)\r\n\tpicture: Sprite = null;\r\n\t@property(Sprite)\r\n\tlight: Sprite = null;\r\n\t@property(Sprite)\r\n\tframe: Sprite = null;\r\n\t@property(Label)\r\n\ttips: Label = null;\r\n\r\n\t@property([SpriteFrame])\r\n\tsf: SpriteFrame[] = [];\r\n\t@property([String])\r\n\ttipContents: string[] = [\r\n\t\t\"\\\\L[SCreate31]\\\\L[SCreate36]\\\\L[SCreate37]\",\r\n\t\t\"\\\\L[SCreate31]\\\\L[SCreate35]\\\\L[SCreate37]\",\r\n\t\t\"\\\\L[SCreate31]\\\\L[SCreate34]\\\\L[SCreate37]\",\r\n\t\t\"\\\\L[SCreate31]\\\\L[SCreate33]\\\\L[SCreate37]\",\r\n\t\t\"\\\\L[SCreate31]\\\\L[SCreate32]\\\\L[SCreate37]\"\r\n\t];\r\n\t@property([Color])\r\n\tcolors: Color[] = [\r\n\t\tnew Color(35, 229, 160),\r\n\t\tnew Color(23, 179, 226),\r\n\t\tnew Color(160, 69, 246),\r\n\t\tnew Color(216, 91, 225),\r\n\t\tnew Color(254, 189, 74)\r\n\t];\r\n\r\n\tsetPicture(base64: string){\r\n\t\tif(!this.picture) return;\r\n\t\tlet img = new Image();\r\n\t\timg.src = base64;\r\n\t\tlet self = this;\r\n\t\timg.onload = function(){\r\n\t\t\tlet texture = new cc.Texture2D();\r\n\t\t\ttexture.initWithElement(img);\r\n\t\t\ttexture.handleLoadedTexture();\r\n\t\t\tself.picture.spriteFrame = new cc.SpriteFrame(texture);\r\n\t\t}\r\n\t}\r\n\r\n\tsetQuality(quality: number) {\r\n\t\tconst idx = MaxQuality - quality;\r\n\t\tthis.light.spriteFrame = this.sf[idx];\r\n\t\tthis.tips.string = this.tipContents[idx];\r\n\t\tthis.frame.node.color = this.colors[idx];\r\n\r\n\t\t/*\r\n\t\tswitch (quality){\r\n\t\t\t\tcase 5:\r\n\t\t\t\t\t\tthis.light.spriteFrame = this.sf[0];\r\n\t\t\t\t\t\tthis.frame.node.color = new Color(35, 229, 160);\r\n\t\t\t\t\t\tthis.tips.string = \"\\\\L[SCreate30]\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\t\tthis.light.spriteFrame = this.sf[1];\r\n\t\t\t\t\t\tthis.frame.node.color = new Color(23, 179, 226);\r\n\t\t\t\t\t\tthis.tips.string = \"\\\\L[SCreate30]\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\t\tthis.light.spriteFrame = this.sf[2];\r\n\t\t\t\t\t\tthis.frame.node.color = new Color(160, 69, 246);\r\n\t\t\t\t\t\tthis.tips.string = \"\\\\L[SCreate30]\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\t\tthis.light.spriteFrame = this.sf[3];\r\n\t\t\t\t\t\tthis.frame.node.color = new Color(216, 91, 225);\r\n\t\t\t\t\t\tthis.tips.string = \"\\\\L[SCreate30]\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\t\tthis.light.spriteFrame = this.sf[4];\r\n\t\t\t\t\t\tthis.frame.node.color = new Color(254, 189, 74);\r\n\t\t\t\t\t\tthis.tips.string = \"\\\\L[SCreate30]\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t}\r\n\t\t*/\r\n\t}\r\n\r\n\tshow(){\r\n\t\tthis.light.node.getComponent(Animation).play();\r\n\t\tthis.node.active = true;\r\n\t}\r\n\r\n\tshut(){\r\n\t\tthis.node.active = false;\r\n\t}\r\n\r\n\tjump(){\r\n\t\twindow.parent.location.href = \"/mynft\";\r\n\t}\r\n\r\n}\r\n","import {SelectableGroup} from \"../../../CoreModule/Components/SelectableGroup\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class CultivateSelectionGroup extends SelectableGroup {\r\n\r\n}\r\n","import {SelectableObject} from \"../../../CoreModule/Components/SelectableObject\";\r\nimport Sprite = cc.Sprite;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport CultivateWindowController from \"./CultivateWindowController\";\r\nimport Node = cc.Node;\r\nimport Color = cc.Color;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class CultivateSelection extends SelectableObject {\r\n\r\n\r\n    @property(Sprite)\r\n    picture: Sprite = null;\r\n    @property(Node)\r\n    labelNode: Node = null;\r\n    @property(Node)\r\n    redPoint: Node = null;\r\n\r\n    @property([SpriteFrame])\r\n    pictures: SpriteFrame[] = [];\r\n\r\n    controller: CultivateWindowController = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    update (dt) {\r\n        this.redPoint.active = false;\r\n    }\r\n\r\n    onDeselected(): void {\r\n        this.refresh(false);\r\n    }\r\n\r\n    onSelected(): void {\r\n        this.controller.onSelectionCardChange();\r\n        this.refresh(true);\r\n    }\r\n\r\n    refresh(select: boolean) {\r\n        this.picture.spriteFrame = this.pictures[select ? 1 : 0];\r\n        this.labelNode.color = select ? new Color(0, 0, 0) : new Color(62, 50, 36);\r\n        this.labelNode.scale = 1 + (select ? 0.07 : 0);\r\n    }\r\n\r\n}\r\n","import Node = cc.Node;\r\nimport CultivateSelection from \"./CultivateSelection\";\r\nimport CultivateSelectionGroup from \"./CultivateSelectionGroup\";\r\nimport {Hero} from \"../../../HeroModule/Data/Hero\";\r\nimport Animation = cc.Animation;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class CultivateWindowController extends cc.Component {\r\n\r\n    @property(Node)\r\n    window: Node = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () { }\r\n\r\n    // region 选项卡控制\r\n\r\n    @property([CultivateSelection])\r\n    selectionCards: CultivateSelection[] = [];\r\n    selectionGroup: CultivateSelectionGroup = null;\r\n    @property([Node])\r\n    outNodes: Node[] = [];\r\n    @property([Node])\r\n    inNodes: Node[] = [];\r\n\r\n    initSelectionGroup() {\r\n        this.selectionGroup = new CultivateSelectionGroup(false);\r\n        this.selectionCards.forEach(c => {\r\n            c.selectableGroup = this.selectionGroup;\r\n            c.controller = this;\r\n            this.selectionGroup.addElement(c);\r\n        })\r\n    }\r\n\r\n    onSelectionCardChange() {\r\n        let selected = this.selectionCards.findIndex(c => c.selectableGroup.isSelected(c));\r\n        this.outNodes.forEach((n, i) => n.active = i == selected);\r\n        this.inNodes.forEach((n, i) => n.active = i == selected);\r\n        this.refreshHero = true;\r\n    }\r\n\r\n    // endregion\r\n\r\n    // update (dt) {}\r\n\r\n    public currentHero: Hero = null;\r\n    public refreshHero: boolean = false;\r\n\r\n    open(hero: Hero) {\r\n        if (!this.selectionGroup)\r\n            this.initSelectionGroup();\r\n        this.currentHero = hero;\r\n        this.refreshHero = true;\r\n        this.selectionGroup.select(this.selectionCards[0]);\r\n        this.window.active = true;\r\n        this.getComponent(Animation).play();\r\n    }\r\n\r\n    quit() {\r\n        this.window.active = false;\r\n    }\r\n}\r\n","import {assetMgr} from \"../Managers/AssetBundleManager\";\r\nimport {CoreThrow} from \"../Common/CoreCommon\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\n\r\nimport JsonAsset = cc.JsonAsset;\r\nimport isChildClassOf = cc.js.isChildClassOf;\r\nimport {getMetaData} from \"../../../Utils/TypeUtils\";\r\n\r\nconst CACHE_KEY = '__exermonCache__';\r\n\r\ntype DataSetting = {\r\n\tdefault: any,\r\n\tproperties: {\r\n\t\t[K: string]: {\r\n\t\t\ttype: Constructor | Constructor[], default: any\r\n\t\t}\r\n\t},\r\n\tassetFields: {\r\n\t\t[K: string]: {\r\n\t\t\ttype: Constructor | Constructor[],\r\n\t\t\tbundleName: string, assetPath: string\r\n\t\t}\r\n\t}\r\n\toccasions: {[K: string]: number},\r\n\tdataPK: string\r\n}\r\nconst DataSettingKey = \"dataSetting\";\r\n\r\nexport class DataLoader {\r\n\r\n\tpublic static getSetting<T extends BaseData>(type: Constructor<T>) {\r\n\t\treturn getMetaData<DataSetting>(\r\n\t\t\ttype, DataSettingKey, {\r\n\t\t\t\tdefault: new type(),\r\n\t\t\t\tproperties: {},\r\n\t\t\t\tassetFields: {},\r\n\t\t\t\toccasions: {},\r\n\t\t\t\tdataPK: undefined\r\n\t\t\t});\r\n\t}\r\n\r\n\tpublic static getDefault<T extends BaseData>(type: Constructor<T>) {\r\n\t\treturn this.getSetting(type).default;\r\n\t}\r\n\tpublic static getProperties<T extends BaseData>(type: Constructor<T>) {\r\n\t\treturn this.getSetting(type).properties;\r\n\t}\r\n\tpublic static getDataPK<T extends BaseData>(type: Constructor<T>) {\r\n\t\treturn this.getSetting(type).dataPK;\r\n\t}\r\n\tprivate static getAssetFields<T extends BaseData>(type: Constructor<T>) {\r\n\t\treturn this.getSetting(type).assetFields;\r\n\t}\r\n\r\n\t// static getOrCreateCache<T extends BaseData>(\r\n\t// \ttype: Constructor<T> | Object) {\r\n\t// \t\tif (typeof type !== 'function')\r\n\t// \t\t\treturn this.getOrCreateCache(type.constructor);\r\n\t//\r\n\t// \treturn type[CACHE_KEY] ||= {\r\n\t// \t\t// @ts-ignore\r\n\t// \t\tdefault: new type(),\r\n\t// \t\tproto: {\r\n\t// \t\t\tproperties: { /* 每个字段的定义 */ },\r\n\t// \t\t\tassetFields: { /* 每个素材的定义 */ }\r\n\t// \t\t}\r\n\t// \t};\r\n\t// }\r\n\t// static getOrCreateCache<T extends BaseData>(\r\n\t// \ttype: Constructor<T> | Object) {\r\n\t// \tif (typeof type !== 'function')\r\n\t// \t\treturn this.getOrCreateCache(type.constructor);\r\n\t//\r\n\t// \tlet cache = type[CACHE_KEY];\r\n\t// \t// 如果还没有cache 或者 cache的类型和当前类型不一致\r\n\t// \tif (!cache || cache.default.constructor !== type) {\r\n\t// \t\tcache = this.createCache(type, cache);\r\n\t// \t\tconsole.log(\"[Cache]\", type, cache);\r\n\t// \t}\r\n\t//\r\n\t// \treturn cache;\r\n\t// }\r\n\t// private static createCache(type, parentCache) {\r\n\t// \tconst res = type[CACHE_KEY] = {\r\n\t// \t\t// @ts-ignore\r\n\t// \t\tdefault: new type(),\r\n\t// \t\tproto: {\r\n\t// \t\t\tproperties: { /* 每个字段的定义 */ },\r\n\t// \t\t\tassetFields: { /* 每个素材的定义 */ }\r\n\t// \t\t}\r\n\t// \t};\r\n\t// \tif (parentCache) {\r\n\t// \t\tObject.assign(res.proto.properties,\r\n\t// \t\t\tparentCache.proto.properties);\r\n\t// \t\tObject.assign(res.proto.assetFields,\r\n\t// \t\t\tparentCache.proto.assetFields);\r\n\t// \t}\r\n\t// \treturn res;\r\n\t// }\r\n\t// static getDefaultValue(obj, key) {\r\n\t// \tlet res = obj[key];\r\n\t// \tif (res && res.clone) res = res.clone();\r\n\t// \treturn res;\r\n\t// }\r\n\r\n\t// region 读取（反序列化）\r\n\r\n\tpublic static load<T extends BaseData>(\r\n\t\ttype: Constructor<T>, data = null,\r\n\t\tindex: number = null, parent: BaseData = null) : T {\r\n\t\tif (data == null) return data;\r\n\t\tlet res = new type(index, parent);\r\n\r\n\t\tif (data) {\r\n\t\t\tconst properties = this.getProperties(type);\r\n\t\t\tfor (const key in properties) if (key in data)\r\n\t\t\t\tthis.loadProp(res, key, properties[key], data[key]);\r\n\t\t}\r\n\r\n\t\tconst assetFields = this.getAssetFields(type);\r\n\t\tfor (const key in assetFields)\r\n\t\t\tthis.loadAsset(res, key, assetFields[key]);\r\n\r\n\t\tPromise.all(res.loadTasks())\r\n\t\t\t.then(() => res.isLoaded = true);\r\n\r\n\t\tres.onCreated();\r\n\t\treturn res;\r\n\t}\r\n\r\n\tpublic static async loadFromAssetBundle<T extends GameData>(\r\n\t\tbundleName: string, assetPath: string, type: Constructor<T>) : Promise<Object> {\r\n\r\n\t\tlet data: any = await assetMgr().loadAsset(\r\n\t\t\tJsonAsset, bundleName, assetPath);\r\n\t\tif (!data) return {};\r\n\r\n\t\treturn this.loadFromJSON(data.json, type);\r\n\t}\r\n\tpublic static loadFromJSON<T extends GameData>(\r\n\t\tjson: object[], type: Constructor<T>) : Object {\r\n\r\n\t\tif (!json) console.error(json, type);\r\n\r\n\t\tlet list: T[] = json ? json.map(this.load.bind(this, type)) : [];\r\n\r\n\t\tlet res = {};\r\n\t\tlist.forEach(d => res[d._id] = d);\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tprivate static loadProp(res: BaseData, key: string, prop, data) {\r\n\t\ttry {\r\n\t\t\tlet pType = prop.type || prop.default?.constructor;\r\n\r\n\t\t\tres[key] = this.loadType(pType, data, res);\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e, res, key, data, prop);\r\n\t\t}\r\n\t}\r\n\tprivate static loadAsset(res: BaseData, key: string, asset) {\r\n\t\tres.addLoadTask(asset.type, key, asset.bundleName, asset.assetPath);\r\n\t}\r\n\r\n\tprivate static loadType(type, data, parent, index = null) {\r\n\t\tif (data === null) return null;\r\n\r\n\t\tif (type instanceof Array) {\r\n\t\t\tthis.ensureType(Array, data);\r\n\r\n\t\t\tconst eType = type[0]; // 元素类型\r\n\t\t\treturn data.map((d, idx) =>\r\n\t\t\t\tthis.loadType(eType, d, parent, idx));\r\n\t\t}\r\n\r\n\t\tthis.ensureType(type, data);\r\n\t\treturn cc.js.isChildClassOf(type, BaseData) ?\r\n\t\t\tthis.load(type, data, index, parent) : data;\r\n\t}\r\n\r\n\tprivate static ensureType(type, data) {\r\n\t\tif (!type) return;\r\n\r\n\t\tconst isData = cc.js.isChildClassOf(type, BaseData);\r\n\t\tif (isData && data.constructor != Object)\r\n\t\t\tCoreThrow.SystemError(`Data type error: value = ${data}，type = ${type}`);\r\n\t\t\t// throw `Data type error: value = ${data}，type = ${type}`;\r\n\t\t\t// throw new DataLoaderError(type, data);\r\n\r\n\r\n\t\tif (!isData && !isChildClassOf(data.constructor, type))\r\n\t\t\tCoreThrow.SystemError(`Data type error: value = ${data}，type = ${type}`);\r\n\t\t// if (!isData && type != data.constructor)\r\n\t\t// \tCoreThrow.SystemError(`Data type error: value = ${data}，type = ${type}`);\r\n\t\t\t// throw `Data type error: value = ${data}，type = ${type}`;\r\n\t\t\t// throw new DataLoaderError(type, data);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 转化（序列化）\r\n\r\n\tpublic static convert<T extends BaseData>(\r\n\t\ttypeOrData: Constructor<T> | any, data?: any): Partial<T> {\r\n\t\tlet type: Constructor<T>;\r\n\t\tif (typeOrData instanceof Function)\r\n\t\t\ttype = typeOrData;\r\n\t\telse {\r\n\t\t\tdata = typeOrData;\r\n\t\t\tif (typeOrData instanceof BaseData)\r\n\t\t\t\ttype = data.constructor as Constructor<T>;\r\n\t\t}\r\n\r\n\t\tif (!data) return null;\r\n\r\n\t\tconst res = {};\r\n\t\tif (type) { // 赋值 type\r\n\t\t\tconst properties = this.getProperties(type);\r\n\t\t\tfor (const key in properties) if (key in data)\r\n\t\t\t\tthis.convertProp(res, key, properties[key], data[key]);\r\n\r\n\t\t} else { // 没有赋值 type\r\n\t\t\tconst keys = Object.keys(data);\r\n\t\t\tfor (const key of keys)\r\n\t\t\t\tthis.convertProp(res, key, null, data[key]);\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tprivate static convertProp(res: object, key: string, prop, data) {\r\n\t\ttry {\r\n\t\t\tlet pType = prop?.type || prop?.default?.constructor || data?.constructor;\r\n\r\n\t\t\tres[key] = this.convertType(pType, data);\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e, res, key, data, prop);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static convertType(type, data) {\r\n\t\tif (data === null) return null;\r\n\r\n\t\tif (type instanceof Array)\r\n\t\t\t// this.ensureType(Array, data); // Convert不需要保证类型\r\n\t\t\treturn data.map(d => this.convertType(type[0], d));\r\n\r\n\t\t// this.ensureType(type, data); // Convert不需要保证类型\r\n\t\treturn isChildClassOf(type, BaseData) ?\r\n\t\t\tthis.convert(data) : data;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 转化（序列化）\r\n\r\n\t// public static convert<T extends BaseData>(data: BaseData) {\r\n\t// \tif (!data) return null;\r\n\t//\r\n\t// \tconst res = {};\r\n\t// \tconst type = data.constructor as Constructor<T>;\r\n\t// \tconst properties = this.getProperties(type);\r\n\t// \tfor (const key in properties)\r\n\t// \t\tres[key] = data[key];\r\n\t//\r\n\t// \treturn res;\r\n\t// }\r\n\r\n\t// endregion\r\n\r\n}\r\n\r\nimport {BaseData, GameData} from \"../Data/BaseData\";\r\n","import {CoreInterface} from \"../Common/CoreCommon\";\r\nimport {BaseManager, getManager, manager} from \"./BaseManager\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {PromiseUtils} from \"../../../Utils/PromiseUtils\";\r\nimport {GameData, PK} from \"../Data/BaseData\";\r\nimport {DataLoader} from \"../Utils/DataLoader\";\r\n\r\n// function data<T extends GameData>(\r\n// \tclazz: Constructor<T>, path: string = null) {\r\n// \treturn (target: DataManager, key) => {\r\n// \t\t// @ts-ignore\r\n// \t\ttarget.database ||= {};\r\n// \t\t// @ts-ignore\r\n// \t\ttarget.database[key] = {\r\n// \t\t\tclazz, path: path || key\r\n// \t\t};\r\n// \t}\r\n// }\r\n\r\nconst ClazzDataKey = \"dataName\";\r\n\r\nexport function waitForDataLoad(obj, key, desc) {\r\n\tconst oriFunc = desc.value;\r\n\tdesc.value = async function (...p) {\r\n\t\tawait PromiseUtils.waitFor(() => dataMgr().loadingProgress() >= 1);\r\n\t\treturn oriFunc.apply(this, p);\r\n\t}\r\n}\r\n\r\nexport function dataMgr() : DataManager {\r\n\treturn getManager(DataManager);\r\n}\r\n\r\n@manager\r\nclass DataManager extends BaseManager {\r\n\r\n\t/**\r\n\t * 数据库（内部处理用）\r\n\t */\r\n\tprivate database = {};\r\n\tprivate isLoaded = false;\r\n\r\n\t/**\r\n\t * 初始化\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis._initializeData().then();\r\n\t}\r\n\tprivate async _initializeData() {\r\n\t\tthis.isLoaded = false;\r\n\r\n\t\tconst res = await CoreInterface.GetData();\r\n\r\n\t\tawait this._initializeDatabase(res.data);\r\n\r\n\t\tthis.isLoaded = true;\r\n\t}\r\n\tprivate async _initializeDatabase(data) {\r\n\t\t// const bundleName = BundleName.Data;\r\n\t\tfor (const key in this.database) {\r\n\t\t\tconst item = this.database[key];\r\n\t\t\titem.data = await DataLoader.loadFromJSON(\r\n\t\t\t\tdata[item.name], item.clazz);\r\n\t\t\t// this[key] = await DataLoader.loadFromAssetBundle(\r\n\t\t\t// \tbundleName, item.path, item.clazz)\r\n\t\t}\r\n\t\tconsole.log(\"Database: \", this.database);\r\n\t}\r\n\r\n\t/**\r\n\t * 注册数据\r\n\t */\r\n\tpublic async registerData<T extends GameData>(\r\n\t\tclazz: Constructor<T>, name: string) {\r\n\t\tclazz[ClazzDataKey] = name;\r\n\r\n\t\tthis.database[name] = {\r\n\t\t\tclazz, name, data: []\r\n\t\t\t\t// await DataLoader.loadFromAssetBundle(\r\n\t\t\t\t// \tBundleName.Data, path, clazz)\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * 数据获取\r\n\t */\r\n\tpublic getData<T extends GameData>(\r\n\t\tclazz: Constructor<T> | string,\r\n\t\tval: any, dataKey: string = \"_id\") : T {\r\n\t\tif (dataKey != \"_id\")\r\n\t\t\treturn this.getDataList(clazz)\r\n\t\t\t\t.find(d => d[dataKey] == val);\r\n\r\n\t\treturn typeof val === 'string' ?\r\n\t\t\tthis.getDataById(clazz, val) :\r\n\t\t\tthis.getDataByIndex(clazz, val);\r\n\t}\r\n\tpublic getDataByIndex<T extends GameData>(\r\n\t\tclazz: Constructor<T> | string, idx: number) : T {\r\n\t\treturn this.getDataList(clazz)[idx];\r\n\t}\r\n\tpublic getDataById<T extends GameData>(\r\n\t\tclazz: Constructor<T> | string, id: PK) : T {\r\n\t\treturn this.getDataDict(clazz)[id];\r\n\t}\r\n\tpublic getDataList<T extends GameData>(\r\n\t\tclazz: Constructor<T> | string) : T[] {\r\n\t\tconst dict = this.getDataDict(clazz);\r\n\t\treturn Object.values(dict);\r\n\t}\r\n\tpublic getDataDict<T extends GameData>(\r\n\t\tclazz: Constructor<T> | string) : Object {\r\n\t\tif (typeof clazz !== 'string')\r\n\t\t\tclazz = this.getDataName(clazz);\r\n\t\treturn this.database[clazz].data;\r\n\t}\r\n\tpublic getDataName<T extends GameData>(\r\n\t\tclazz: Constructor<T>): string {\r\n\t\treturn clazz[ClazzDataKey];\r\n\t}\r\n\r\n\t/**\r\n\t * 所有数据\r\n\t */\r\n\tpublic allData() {\r\n\t\tlet res = [];\r\n\t\tfor (const key in this.database)\r\n\t\t\tres = res.concat(Object.values(this.database[key].data));\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 读取进度\r\n\t */\r\n\tpublic loadingProgress() {\r\n\t\tif (!this.isLoaded) return 0;\r\n\r\n\t\tlet data = this.allData();\r\n\t\treturn data.reduce((res, e) =>\r\n\t\t\tres + (e.isLoaded ? 1 : 0), 0) / data.length;\r\n\t}\r\n\r\n}\r\n\r\n","\r\nexport class DateUtils {\r\n\r\n\tpublic static DayTime = 24*60*60*1000;\r\n\r\n\t/**\r\n\t * 日期转化为字符串\r\n\t */\r\n\tpublic static time2DateStr(time: number) {\r\n\t\tconst date = new Date(time);\r\n\t\tconst year = date.getFullYear().toString();\r\n\t\tconst month = (date.getMonth() + 1).toString().padStart(2, \"0\");\r\n\t\tconst day = date.getDate().toString().padStart(2, \"0\");\r\n\r\n\t\treturn `${year}/${month}/${day}`;\r\n\t}\r\n\r\n\t/**\r\n\t * 日期转化为字符串\r\n\t */\r\n\tpublic static time2Str(time: number) {\r\n\t\tconst date = new Date(time);\r\n\t\tconst year = date.getFullYear().toString();\r\n\t\tconst month = (date.getMonth() + 1).toString().padStart(2, \"0\");\r\n\t\tconst day = date.getDate().toString().padStart(2, \"0\");\r\n\t\tconst hour = date.getHours().toString().padStart(2, \"0\");\r\n\t\tconst minute = date.getMinutes().toString().padStart(2, \"0\");\r\n\t\tconst second = date.getSeconds().toString().padStart(2, \"0\");\r\n\r\n\t\treturn `${year}/${month}/${day} ${hour}:${minute}:${second}`;\r\n\t}\r\n\r\n\t/**\r\n\t * 日期转化为字符串\r\n\t */\r\n\tpublic static time2StrInFile(time: number) {\r\n\t\tconst date = new Date(time);\r\n\t\tconst month = (date.getMonth() + 1).toString().padStart(2, \"0\");\r\n\t\tconst day = date.getDate().toString().padStart(2, \"0\");\r\n\t\tconst hour = date.getHours().toString().padStart(2, \"0\");\r\n\t\tconst minute = date.getMinutes().toString().padStart(2, \"0\");\r\n\t\tconst second = date.getSeconds().toString().padStart(2, \"0\");\r\n\r\n\t\treturn `${month}${day}-${hour}${minute}${second}`;\r\n\t}\r\n\r\n\t/**\r\n\t * 时间转化为字符串\r\n\t */\r\n\tpublic static sec2Str(sec: number) {\r\n\t\tif (sec < 60) return sec.toString();\r\n\t\treturn Math.floor(sec / 60) + \":\" +\r\n\t\t\t(sec % 60).toString().padStart(2, \"0\");\r\n\t}\r\n\r\n\t/**\r\n\t * 将时间转换为日期\r\n\t * @param date\r\n\t */\r\n\tpublic static date2DayStart(date: Date | number) {\r\n\t\tlet res = new Date(date)\r\n\t\tres.setHours(0,0,0,0);\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 判断指定日期是否为今天\r\n\t * @param date\r\n\t */\r\n\tpublic static isToday(date: Date | number) {\r\n\t\treturn this.dayDiff(new Date(), date) == 0;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取date1到date2之间相隔的天数\r\n\t */\r\n\tpublic static dayDiff(date1: Date | number, date2: Date | number) {\r\n\t\tif (typeof date1 == 'number' && date1 <= 0)\r\n\t\t\treturn Number.NEGATIVE_INFINITY;\r\n\t\tif (typeof date2 == 'number' && date2 <= 0)\r\n\t\t\treturn Number.POSITIVE_INFINITY;\r\n\r\n\t\tconst day1 = this.date2DayStart(date1).getTime();\r\n\t\tconst day2 = this.date2DayStart(date2).getTime();\r\n\r\n\t\treturn (day1 - day2) / this.DayTime;\r\n\t}\r\n\r\n}\r\n","\r\nexport function cache(obj, key, desc) {\r\n\tconst oriFun = desc.value;\r\n\tdesc.value = function (): Promise<any> | any {\r\n\t\tif (this[key + \"_CACHE\"]) return this[key + \"_CACHE\"];\r\n\r\n\t\tconst res = oriFun.apply(this);\r\n\t\t// 如果是Promise需要进行特殊处理，保证非Promise时候是同步状态\r\n\t\tif (res instanceof Promise)\r\n\t\t\treturn res.then(r => this[key + \"_CACHE\"] = r)\r\n\t\treturn this[key + \"_CACHE\"] = res;\r\n\t}\r\n}\r\n","import requireComponent = cc._decorator.requireComponent;\r\nimport Button = cc.Button;\r\nimport Sprite = cc.Sprite;\r\nimport SpriteFrame = cc.SpriteFrame;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\n@requireComponent(Button)\r\n@requireComponent(Sprite)\r\nexport default class NewClass extends cc.Component {\r\n\r\n    button: Button = null;\r\n    sprite: Sprite = null;\r\n\r\n    @property([SpriteFrame])\r\n    pictures: SpriteFrame[] = [null, null];\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n        this.button = this.getComponent(Button);\r\n        this.sprite = this.getComponent(Sprite);\r\n    }\r\n\r\n    update (dt) {\r\n        this.sprite.spriteFrame = this.pictures[this.button.interactable ? 0 : 1];\r\n    }\r\n}\r\n","import {GameData} from \"./BaseData\";\r\n\r\nexport abstract class DynamicData extends GameData {\r\n\r\n\tpublic get syncAble() { return true; }\r\n\tpublic get removeAble() {  return false; }\r\n\r\n\t// public sync() : undefined | Promise<SyncResult>;\r\n\t// public remove() : undefined | Promise<RemoveResult>;\r\n\r\n\t/**\r\n\t * 业务主键\r\n\t */\r\n\tpublic get dataId(): string {\r\n\t\t// @ts-ignore\r\n\t\treturn this[DataLoader.getDataPK(this.constructor)];\r\n\t}\r\n\r\n}\r\n","import {error, get, post} from \"../../CoreModule/Common/CoreCommon\";\r\n\r\nexport class EconomicThrow {\r\n\r\n    @error(400001, \"持有货币不足\") static NotEnoughMoney(d?) {}\r\n    @error(400002, \"持有碎片不足\") static NotEnoughFragment(d?) {}\r\n    @error(400003, \"回城次数不足\") static NotEnoughReturn(d?) {}\r\n    @error(400011, \"无法解锁打工点\") static CanNotUnlockJob(d?) {}\r\n    @error(400012, \"打工点已解锁\") static JobAlreadyUnlocked(d?) {}\r\n    @error(400013, \"打工点未解锁\") static JobNotUnlocked(d?) {}\r\n    @error(400014, \"到达打工等级上限\") static ReachJobMaxLevel(d?) {}\r\n    @error(400015, \"领取时间未到\") static NotJobProfitTime(d?) {}\r\n    @error(400016, \"解锁打工点失败\") static UnlockJobError(d?) {}\r\n    @error(400017, \"升级打工点失败\") static UpgradeJobError(d?) {}\r\n    @error(400018, \"领取打工金币失败\") static ProfitJobError(d?) {}\r\n\r\n}\r\n\r\nexport class EconomicInterface {\r\n\r\n    @post(\"/job/job/unlock\") static UnlockJob(d?): any {}\r\n    @post(\"/job/job/upgrade\") static UpgradeJob(d?): any {}\r\n    @post(\"/job/job/profit\") static ProfitJob(d?): any {}\r\n\r\n}\r\n","import {BaseManager, getManager, manager} from \"../../CoreModule/Managers/BaseManager\";\r\nimport {EconomicInterface} from \"../Common/EconomicCommon\";\r\nimport {PlayerJob, PlayerJobItem} from \"../Data/PlayerJob\";\r\nimport {handleError} from \"../../CoreModule/Managers/AlertManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nexport function economicMgr() {\r\n    return getManager(EconomicManager);\r\n}\r\n\r\n@manager\r\nexport default class EconomicManager extends BaseManager {\r\n\r\n    playerJob: PlayerJob = null;\r\n    jobItems: PlayerJobItem[] = [];\r\n\r\n    update(dt: number) {\r\n        super.update(dt);\r\n        if (this.playerJob?.isAutoProfit)\r\n            this.profitAutoCheck();\r\n    }\r\n\r\n    // region 玩家操作处理\r\n\r\n    @handleError\r\n    public async profit(id : number) {\r\n        const jobItem = this.jobItems.find(j => j.jobId == id);\r\n        await EconomicInterface.ProfitJob({id: jobItem.jobId});\r\n        jobItem.profitConditions().process();\r\n        jobItem.profitRewards().invoke();\r\n        jobItem.profit();\r\n    }\r\n\r\n    @handleError\r\n    public async upgrade(id : number) {\r\n        const jobItem = this.jobItems.find(j => j.jobId == id);\r\n        if (jobItem.curLevel <= 0) { // 未解锁\r\n            await EconomicInterface.UnlockJob({id: jobItem.jobId});\r\n            jobItem.unlockConditions().process();\r\n        } else {\r\n            await EconomicInterface.UpgradeJob({id: jobItem.jobId});\r\n            jobItem.upgradeConditions().process();\r\n        }\r\n        jobItem.upgrade();\r\n    }\r\n\r\n    // endregion\r\n\r\n    // region 自动操作检测\r\n\r\n    private profitAutoCheck() {\r\n        this.jobItems.forEach(j => {\r\n            if (!j.profitConditions().judge()) return;\r\n            j.profitRewards().invoke();\r\n            j.profit();\r\n        })\r\n    }\r\n\r\n    // endregion\r\n\r\n}\r\n","import {get, post} from \"../../CoreModule/Common/CoreCommon\";\r\n\r\nexport class EditorInterface {\r\n\r\n\t@post(\"/editor/config/push\", true, false) static PushConfig(d?): any {}\r\n\t@get(\"/editor/config/pull\", true, false) static PullConfig(d?): any {}\r\n\t@post(\"/editor/config/save\", true, false) static SaveConfig(d?): any {}\r\n\t@post(\"/editor/config/recalc\", true, false) static RecalcConfig(d?): any {}\r\n\t@post(\"/editor/part/import\", true, false) static ImportParts(d?): any {}\r\n\r\n}\r\n","import {BaseManager, getManager, manager} from \"../../CoreModule/Managers/BaseManager\";\r\nimport {configMgr} from \"../../CoreModule/Managers/ConfigManager\";\r\nimport PartConfig from \"../Configs/PartConfig\";\r\nimport {EditorInterface} from \"../Common/EditorCommon\";\r\nimport {AlertDialogType, alertMgr} from \"../../CoreModule/Managers/AlertManager\";\r\nimport {showLoading} from \"../../CoreModule/Managers/LoadingManager\";\r\nimport {DateUtils} from \"../../../Utils/DateUtils\";\r\n\r\nexport function editorMgr() {\r\n\treturn getManager(EditorManager);\r\n}\r\n\r\nexport type ChangeType = \"pHtScale\" |\r\n\t\"ptBptScale\" | \"ptBptOffset\" | \"ptBptHidden\" |\r\n\t\"clothes6Problem\" | \"weapon3Problem\" | \"footOffset\";\r\nexport type ChangeValue =\r\n\tnumber | [number, number] | string[] | boolean;\r\nexport type ChangeInfo = {\r\n\tkey: ChangeType\r\n\tpath: number[] // 变更路径\r\n\tori?: ChangeValue\r\n\tval: ChangeValue\r\n}\r\n\r\n// 读取文件方式\r\nexport enum FileType {\r\n\tDataUrl,// readAsDataURL, base64\r\n\tText,// readAsText\r\n\tBinary,// readAsBinaryString\r\n\tArrayBuffer,// readAsArrayBuffer\r\n}\r\n\r\n@manager\r\nclass EditorManager extends BaseManager {\r\n\r\n\tpublic changes: {[T: string]:ChangeInfo} = {};\r\n\r\n\tprivate _config;\r\n\tpublic get config() {\r\n\t\treturn this._config ||= configMgr().config(PartConfig);\r\n\t}\r\n\r\n\t// region 配置获取\r\n\r\n\tprivate getMapValue(cKey: keyof PartConfig, id1, id2,\r\n\t\t\t\t\t\t\t\t\t\t\tdefault_, add = false) {\r\n\t\tconst key = `${id1}-${id2}`;\r\n\t\tlet res = this.config[cKey][key];\r\n\r\n\t\tif (res == undefined) {\r\n\t\t\tres = default_;\r\n\t\t\tif (add) this.config[cKey][key] = default_;\r\n\t\t}\r\n\t\tif (res instanceof Array) res = res.slice();\r\n\t\treturn res;\r\n\t}\r\n\tprivate setMapValue(cKey, id1, id2, val) {\r\n\t\tconst key = `${id1}-${id2}`;\r\n\t\treturn this.config[cKey][key] = val;\r\n\t}\r\n\r\n\tpublic getPHtScale(ptId: number, fhtId: number, htId: number) {\r\n\t\tconst res = this.config.pHtScale[ptId][fhtId][htId];\r\n\t\treturn res === undefined ? 1 : res;\r\n\t}\r\n\tpublic getPtBptScale(pOriId, bpOriId,\r\n\t\t\t\t\t\t\t\t\t\t\t default_ = 1,\r\n\t\t\t\t\t\t\t\t\t\t\t add = false): number {\r\n\t\treturn this.getMapValue(\"ptBptScale\", pOriId, bpOriId, default_, add);\r\n\t}\r\n\tpublic getPtBptOffset(pOriId, bpOriId,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefault_: [number, number] = [0, 0],\r\n\t\t\t\t\t\t\t\t\t\t\t\tadd = false): [number, number] {\r\n\t\treturn this.getMapValue(\"ptBptOffset\", pOriId, bpOriId, default_, add);\r\n\t}\r\n\tpublic getPtBptHidden(pOriId, bpOriId,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefault_: string[] = [],\r\n\t\t\t\t\t\t\t\t\t\t\t\tadd = false): string[] {\r\n\t\treturn this.getMapValue(\"ptBptHidden\", pOriId, bpOriId, default_, add);\r\n\t}\r\n\tpublic getClothes6Problem(pOriId, hpOriId,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefault_ = false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tadd = false): boolean {\r\n\t\treturn this.getMapValue(\"clothes6Problem\", pOriId, hpOriId, default_, add);\r\n\t}\r\n\tpublic getWeapon3Problem(pOriId, hpOriId,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t default_ = false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t add = false): boolean {\r\n\t\treturn this.getMapValue(\"weapon3Problem\", pOriId, hpOriId, default_, add);\r\n\t}\r\n\tpublic getFootOffset(bodyId, default_ = [0, 0],\r\n\t\t\t\t\t\t\t\t\t\t\t add = false): [number, number] {\r\n\t\tlet res = this.config.footOffset[bodyId];\r\n\r\n\t\tif (res == undefined) {\r\n\t\t\tres = default_;\r\n\t\t\tif (add) this.config.footOffset[bodyId] = default_;\r\n\t\t}\r\n\t\treturn res.slice();\r\n\t}\r\n\r\n\t// public getPtBptScale(pOriId, bpOriId, default_: number = 1): number {\r\n\t// \treturn this.getPtBptScaleConfig(pOriId, bpOriId, default_)[2];\r\n\t// }\r\n\t// public getPtBptOffset(pOriId, bpOriId, default_: [number, number] = [0, 0]): [number, number] {\r\n\t// \treturn this.getPtBptOffsetConfig(pOriId, bpOriId, default_)[2].slice() as [number, number];\r\n\t// }\r\n\t// public getPtBptHidden(pOriId, bpOriId, default_: string[] = []): string[] {\r\n\t// \treturn this.getPtBptHiddenConfig(pOriId, bpOriId, default_)[2].slice();\r\n\t// }\r\n\r\n\tprivate setPHtScale(ptId, fhtId, htId, val) {\r\n\t\treturn this.config.pHtScale[ptId][fhtId][htId] = val;\r\n\t}\r\n\tprivate setPtBptScale(pOriId, bpOriId, val: number) {\r\n\t\treturn this.setMapValue(\"ptBptScale\", pOriId, bpOriId, val);\r\n\t}\r\n\tprivate setPtBptOffset(pOriId, bpOriId, val: [number, number]) {\r\n\t\treturn this.setMapValue(\"ptBptOffset\", pOriId, bpOriId, val);\r\n\t}\r\n\tprivate setPtBptHidden(pOriId, bpOriId, val: string[]) {\r\n\t\treturn this.setMapValue(\"ptBptHidden\", pOriId, bpOriId, val);\r\n\t}\r\n\tprivate setClothes6Problem(pOriId, hpOriId, val: boolean) {\r\n\t\treturn this.setMapValue(\"clothes6Problem\", pOriId, hpOriId, val);\r\n\t}\r\n\tprivate setWeapon3Problem(pOriId, hpOriId, val: boolean) {\r\n\t\treturn this.setMapValue(\"weapon3Problem\", pOriId, hpOriId, val);\r\n\t}\r\n\tprivate setFootOffset(bodyId, val: boolean) {\r\n\t\treturn this.config.footOffset[bodyId] = val;\r\n\t}\r\n\r\n\tpublic getConfig(key: ChangeType, path: number[]) {\r\n\t\tswitch (key) {\r\n\t\t\tcase \"pHtScale\": // @ts-ignore\r\n\t\t\t\treturn this.getPHtScale(...path);\r\n\t\t\tcase \"ptBptScale\": // @ts-ignore\r\n\t\t\t\treturn this.getPtBptScale(...path);\r\n\t\t\tcase \"ptBptOffset\": // @ts-ignore\r\n\t\t\t\treturn this.getPtBptOffset(...path);\r\n\t\t\tcase \"ptBptHidden\": // @ts-ignore\r\n\t\t\t\treturn this.getPtBptHidden(...path);\r\n\t\t\tcase \"clothes6Problem\": // @ts-ignore\r\n\t\t\t\treturn this.getClothes6Problem(...path);\r\n\t\t\tcase \"weapon3Problem\": // @ts-ignore\r\n\t\t\t\treturn this.getWeapon3Problem(...path);\r\n\t\t\tcase \"footOffset\": // @ts-ignore\r\n\t\t\t\treturn this.getFootOffset(...path);\r\n\t\t}\r\n\t}\r\n\tprivate setConfig(key: ChangeType, path: number[], val: ChangeValue) {\r\n\t\tswitch (key) {\r\n\t\t\tcase \"pHtScale\": // @ts-ignore\r\n\t\t\t\treturn this.setPHtScale(...path, val);\r\n\t\t\tcase \"ptBptScale\": // @ts-ignore\r\n\t\t\t\treturn this.setPtBptScale(...path, val);\r\n\t\t\tcase \"ptBptOffset\": // @ts-ignore\r\n\t\t\t\treturn this.setPtBptOffset(...path, val);\r\n\t\t\tcase \"ptBptHidden\": // @ts-ignore\r\n\t\t\t\treturn this.setPtBptHidden(...path, val);\r\n\t\t\tcase \"clothes6Problem\": // @ts-ignore\r\n\t\t\t\treturn this.setClothes6Problem(...path, val);\r\n\t\t\tcase \"weapon3Problem\": // @ts-ignore\r\n\t\t\t\treturn this.setWeapon3Problem(...path, val);\r\n\t\t\tcase \"footOffset\": // @ts-ignore\r\n\t\t\t\treturn this.setFootOffset(...path, val);\r\n\t\t}\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 配置变更\r\n\r\n\tpublic changePtBptScale(ptId, bptId, val) {\r\n\t\tthis.addChange(\"ptBptScale\", [ptId, bptId], val);\r\n\t}\r\n\tpublic changePtBptOffset(ptId, bptId, val) {\r\n\t\tthis.addChange(\"ptBptOffset\", [ptId, bptId], val);\r\n\t}\r\n\tpublic changePHtScale(ptId, htId, chtId, val) {\r\n\t\tthis.addChange(\"pHtScale\", [ptId, htId, chtId], val);\r\n\t}\r\n\tpublic changePtBptHidden(ptId, bptId, val) {\r\n\t\tthis.addChange(\"ptBptHidden\", [ptId, bptId], val);\r\n\t}\r\n\tpublic changeClothes6Problem(ptId, bptId, val) {\r\n\t\tthis.addChange(\"clothes6Problem\", [ptId, bptId], val);\r\n\t}\r\n\tpublic changeWeapon3Problem(ptId, bptId, val) {\r\n\t\tthis.addChange(\"weapon3Problem\", [ptId, bptId], val);\r\n\t}\r\n\tpublic changeFootOffset(bodyId, val) {\r\n\t\tthis.addChange(\"footOffset\", [bodyId], val);\r\n\t}\r\n\r\n\tprivate getKey(key: ChangeType, path: number[]) {\r\n\t\treturn key + \".\" + path.join(\",\");\r\n\t}\r\n\r\n\tpublic getChange(key: ChangeType, path: number[]) {\r\n\t\treturn this.changes[this.getKey(key, path)];\r\n\t}\r\n\r\n\tpublic addChange(changeOrKey: ChangeInfo | ChangeType,\r\n\t\t\t\t\t\t\t\t\t path?: number[], val?: ChangeValue) {\r\n\t\tif (typeof changeOrKey == \"string\") { // key\r\n\t\t\tconst key = changeOrKey;\r\n\t\t\tconst cKey = this.getKey(key, path);\r\n\t\t\tconst res = this.changes[cKey] ||= {\r\n\t\t\t\tkey, path, val, ori: this.getConfig(key, path)\r\n\t\t\t};\r\n\t\t\t// const res = this.changes[cKey] ||= { key, path, val };\r\n\t\t\t// res.ori = res.ori === undefined ? this.getConfig(key, path) : res.ori;\r\n\t\t\tthis.setConfig(key, path, res.val = val);\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\t// ChangeInfo\r\n\t\tconst change = changeOrKey;\r\n\t\tconst cKey = this.getKey(change.key, change.path);\r\n\t\tconst oldChange = this.changes[cKey];\r\n\t\tif (oldChange) // 如果已经有变更了，需要合并\r\n\t\t\tthis.addChange(change.key, change.path,\r\n\t\t\t\tthis.getMergeVal(change.key, oldChange.val, change.val))\r\n\t\telse\r\n\t\t\tthis.addChange(change.key, change.path, change.val);\r\n\t}\r\n\r\n\tprivate getMergeVal(key: ChangeType,\r\n\t\t\t\t\t\t\t\t\t\t\told: ChangeValue,\r\n\t\t\t\t\t\t\t\t\t\t\tnew_: ChangeValue) {\r\n\t\t// let dist;\r\n\t\t// switch (key) {\r\n\t\t// \tcase \"pHtScale\": case \"ptBptScale\":\r\n\t\t// \t\t// 计算缩放值与1的距离，取距离最长的值，如果相等，取新的值\r\n\t\t// \t\tdist = (val) => val == 0 ? Infinity :\r\n\t\t// \t\t\tval > 1 ? val - 1 : 1 / val - 1; break;\r\n\t\t// \tcase \"ptBptOffset\":\r\n\t\t// \t\t// 计算偏移量与[0, 0]的距离，取距离最长的值，如果相等，取新的值\r\n\t\t// \t\tdist = (val: [number, number]) =>\r\n\t\t// \t\t\tval[0] * val[0] + val[1] * val[1]; break;\r\n\t\t// \tcase \"ptBptHidden\":\r\n\t\t// \t\tdist = (val: string[]) => val.length; break;\r\n\t\t// \tcase \"clothes6Problem\":\r\n\t\t// \t\tdist = (val: boolean) => val ? 1 : 0; break;\r\n\t\t// }\r\n\t\treturn new_; // dist(old) > dist(new_) ? old : new_;\r\n\t}\r\n\r\n\tpublic resetChange(key, path) {\r\n\t\tconst cKey = this.getKey(key, path);\r\n\t\tconst change = this.changes[cKey];\r\n\t\tif (!change) return;\r\n\t\tthis.setConfig(key, path, change.ori);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 配置同步\r\n\r\n\t/**\r\n\t * 导出全部\r\n\t */\r\n\tpublic exportAll() {\r\n\t\tconsole.log(this.config);\r\n\t\tconst str = JSON.stringify(this.config);\r\n\t\tthis.saveForBrowser(str, `export-all-${DateUtils.time2StrInFile(Date.now())}.json`);\r\n\t\tthis.copyToClipboard(str);\r\n\t\talertMgr().alert('全部数据已下载并复制到粘贴板！',\r\n\t\t\t\"\", AlertDialogType.OK).then();\r\n\t}\r\n\r\n\t/**\r\n\t * 导出\r\n\t */\r\n\tpublic export() {\r\n\t\tconsole.log(this.changes);\r\n\t\tconst str = JSON.stringify(this.changes);\r\n\t\tthis.saveForBrowser(str, `export-${DateUtils.time2StrInFile(Date.now())}.json`);\r\n\t\tthis.copyToClipboard(str);\r\n\t\talertMgr().alert('配置变更已下载并复制到粘贴板！',\r\n\t\t\t\"\", AlertDialogType.OK).then();\r\n\t}\r\n\tprivate copyToClipboard(str) {\r\n\t\tconst input = document.createElement('input');\r\n\t\tdocument.body.appendChild(input);\r\n\t\tinput.setAttribute('value', str);\r\n\t\tinput.select();\r\n\t\tif (document.execCommand('copy')) {\r\n\t\t\tdocument.execCommand('copy');\r\n\t\t}\r\n\t\tdocument.body.removeChild(input);\r\n\t}\r\n\r\n\t/**\r\n\t * 导入\r\n\t */\r\n\t@showLoading\r\n\tpublic async import() {\r\n\t\tconst file = await this.openLocalFile(\"*.json\");\r\n\t\tconst str = await this.readLocalFile(file, FileType.Text) as string;\r\n\t\tconsole.log(\"str:\", str);\r\n\t\tconst data = JSON.parse(str);\r\n\t\tconsole.log(\"data:\", data);\r\n\r\n\t\tObject.values<any>(data).forEach(\r\n\t\t\tchange => this.addChange(change));\r\n\t}\r\n\r\n\t/**\r\n\t * 提交\r\n\t */\r\n\tpublic async push() {\r\n\t\tawait EditorInterface.PushConfig({changes: this.changes});\r\n\t\talertMgr().alert('成功提交当前更改！',\r\n\t\t\t\"\", AlertDialogType.OK).then();\r\n\t}\r\n\r\n\t/**\r\n\t * 拉取\r\n\t */\r\n\tpublic async pull() {\r\n\t\tconst res = await EditorInterface.PullConfig();\r\n\t\tconsole.log(res);\r\n\r\n\t\tObject.values<any>(res.changes).forEach(\r\n\t\t\tchange => this.addChange(change));\r\n\t\tObject.assign(this.config, res.config);\r\n\r\n\t\talertMgr().alert('成功拉取最新配置！',\r\n\t\t\t\"\", AlertDialogType.OK).then();\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 导入/导出文件操作\r\n\r\n\t// 保存字符串内容到文件。\r\n\t// 效果相当于从浏览器下载了一个文件到本地。\r\n\t// textToWrite - 要保存的文件内容\r\n\t// fileNameToSaveAs - 要保存的文件名\r\n\tsaveForBrowser(textToWrite, fileNameToSaveAs) {\r\n\t\tif (cc.sys.isBrowser) {\r\n\t\t\tconsole.log(\"浏览器\");\r\n\t\t\tlet textFileAsBlob = new Blob([textToWrite], {type:'application/json'});\r\n\t\t\tlet downloadLink = document.createElement(\"a\");\r\n\t\t\tdownloadLink.download = fileNameToSaveAs;\r\n\t\t\tdownloadLink.innerHTML = \"Download File\";\r\n\t\t\tif (window.webkitURL != null)\r\n\t\t\t{\r\n\t\t\t\t// Chrome allows the link to be clicked\r\n\t\t\t\t// without actually adding it to the DOM.\r\n\t\t\t\tdownloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// Firefox requires the link to be added to the DOM\r\n\t\t\t\t// before it can be clicked.\r\n\t\t\t\tdownloadLink.href = window.URL.createObjectURL(textFileAsBlob);\r\n\t\t\t\t// downloadLink.onclick = destroyClickedElement;\r\n\t\t\t\tdownloadLink.style.display = \"none\";\r\n\t\t\t\tdocument.body.appendChild(downloadLink);\r\n\t\t\t}\r\n\t\t\tdownloadLink.click();\r\n\t\t}\r\n\t}\r\n\r\n\t// TS\r\n\t// 使用input调起文件选择窗口\r\n\topenLocalFile(accept: string) {\r\n\t\tlet inputEl: HTMLInputElement = <HTMLInputElement>document.getElementById('file_input');\r\n\t\tif (!inputEl) {\r\n\t\t\tinputEl = document.createElement('input');\r\n\t\t\tinputEl.id = 'file_input';\r\n\t\t\tinputEl.setAttribute('id', 'file_input');\r\n\t\t\tinputEl.setAttribute('type', 'file');\r\n\t\t\tinputEl.setAttribute('class', 'fileToUpload');\r\n\t\t\tinputEl.style.opacity = '0';\r\n\t\t\tinputEl.style.position = 'absolute';\r\n\t\t\tinputEl.setAttribute('left', '-999px');\r\n\t\t\tdocument.body.appendChild(inputEl);\r\n\t\t}\r\n\r\n\t\taccept = accept || \".*\";\r\n\t\tinputEl.setAttribute('accept', accept);\r\n\r\n\t\treturn new Promise<File>(resolve => {\r\n\t\t\tinputEl.onchange = (event) => {\r\n\t\t\t\t// console.log('xxx onchange2', event, inputEl.files);\r\n\t\t\t\tlet files = inputEl.files\r\n\t\t\t\tconsole.log(\"event\", event, \"files\", files);\r\n\t\t\t\tresolve(files[0]);\r\n\t\t\t}\r\n\t\t\tinputEl.click();\r\n\t\t})\r\n\t}\r\n\r\n\t// 读取本地文件数据\r\n\treadLocalFile(file: File, readType: FileType) {\r\n\t\tconst reader = new FileReader();\r\n\t\treturn new Promise<string | ArrayBuffer>(resolve => {\r\n\t\t\treader.onload = function (event) {\r\n\t\t\t\tif (reader.readyState == FileReader.DONE)\r\n\t\t\t\t\tresolve(reader.result);\r\n\t\t\t\telse resolve(null);\r\n\t\t\t};\r\n\t\t\tswitch (readType) {\r\n\t\t\t\tcase FileType.DataUrl:\r\n\t\t\t\t\treader.readAsDataURL(file);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FileType.Text:\r\n\t\t\t\t\treader.readAsText(file);   //作为字符串读出\r\n\t\t\t\t\t//reader.readAsText(file,'gb2312');   //默认是用utf-8格式输出的，想指定输出格式就再添加一个参数，像txt的ANSI格式只能用国标才能显示出来\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FileType.Binary:\r\n\t\t\t\t\treader.readAsBinaryString(file);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FileType.ArrayBuffer:\r\n\t\t\t\t\treader.readAsArrayBuffer(file);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// base64生成Texture2D\r\n\tbase64ToTexture2D(base64: string, callback: (this: void, texture: cc.Texture2D) => void) {\r\n\t\tif (base64) {\r\n\t\t\tvar img = new Image();\r\n\t\t\timg.onload = function () {\r\n\t\t\t\tvar texture = new cc.Texture2D();\r\n\t\t\t\ttexture.initWithElement(img);\r\n\t\t\t\ttexture.handleLoadedTexture();\r\n\t\t\t\tif (callback) callback(texture);\r\n\t\t\t}\r\n\t\t\timg.onerror = function (err) {\r\n\t\t\t}\r\n\t\t\tif ((<any>base64).startsWith !== undefined && (<any>base64).startsWith(\"data:image\")) {\r\n\t\t\t\timg.src = base64;\r\n\t\t\t} else {\r\n\t\t\t\timg.src = \"data:image/png;base64,\" + base64;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (callback) callback(null);\r\n\t\t}\r\n\t}\r\n\r\n\t// base64生成cc.SpriteFrame\r\n\tbase64ToSpriteFrame(base64: string, callback: (this: void, spriteFrame: cc.SpriteFrame) => void) {\r\n\t\tthis.base64ToTexture2D(base64, (texture: cc.Texture2D) => {\r\n\t\t\tif (texture) {\r\n\t\t\t\tvar newframe = new cc.SpriteFrame(texture);\r\n\t\t\t\tif (callback) callback(newframe);\r\n\t\t\t} else {\r\n\t\t\t\tif (callback) callback(null);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// endregion\r\n}\r\n\r\n","import {BaseData, field} from \"../../CoreModule/Data/BaseData\";\r\n\r\nexport enum EffectType {\r\n\tNone = \"none\",\r\n\tApply = \"apply\",\r\n\tAddParam = \"addParam\",\r\n\t// AddStatus = \"addStatus\",\r\n\t// RemoveStatus = \"removeStatus\",\r\n}\r\n\r\nclass LevelSetting extends BaseData {\r\n\t@field(Number)\r\n\tpublic idx: number = 0;\r\n\t@field(Number)\r\n\tpublic value: number = 0;\r\n\t@field(String)\r\n\tpublic method: \"add\" | \"mult\" = \"add\";\r\n}\r\n\r\nexport class Effect extends BaseData {\r\n\r\n\t@field\r\n\tpublic percent: number = 1; // 成功几率\r\n\r\n\t@field(String)\r\n\tpublic type: EffectType = EffectType.None;\r\n\t@field([Object])\r\n\tpublic params: any[] = [];\r\n\t@field([LevelSetting])\r\n\tpublic levelSettings: LevelSetting[] = [];\r\n\r\n\t/**\r\n\t * 创建\r\n\t */\r\n\tpublic static create(type: EffectType, params: any[]) {\r\n\t\tconst res = new Effect();\r\n\t\tres.type = type;\r\n\t\tres.params = params;\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 应用等级效果\r\n\t */\r\n\tpublic applyLevel(level) {\r\n\t\tconst params = this.params.slice();\r\n\t\tthis.levelSettings.forEach(ls => {\r\n\t\t\tswitch (ls.method) {\r\n\t\t\t\tcase \"add\": params[ls.idx] += ls.value * level; break;\r\n\t\t\t\tcase \"mult\": params[ls.idx] *= ls.value * level; break;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn Effect.create(this.type, params);\r\n\t}\r\n}\r\n","import {assetField, field, GameData} from \"../../CoreModule/Data/BaseData\";\r\nimport {BundleName} from \"../../CoreModule/Managers/AssetBundleManager\";\r\nimport SkeletonData = sp.SkeletonData;\r\nimport {BaseRepository, getRepository, repository} from \"../../CoreModule/Data/BaseRepository\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {data, StaticData} from \"../../CoreModule/Data/StaticData\";\r\nimport {AttackMotionGroupId} from \"../../BattleModule/Data/MotionGroup\";\r\nimport {IEntity} from \"../../BattleModule/Data/Battler\";\r\nimport {paramRepo} from \"../../HeroModule/Data/Param\";\r\nimport {MathUtils} from \"../../../Utils/MathUtils\";\r\nimport {RestraintType} from \"../../HeroModule/Data/Hero\";\r\n\r\nexport enum EnemyType {\r\n\tNormal, Boss\r\n}\r\n\r\n@data(\"Enemy\")\r\nexport class Enemy extends StaticData implements IEntity {\r\n\r\n\t@field\r\n\tpublic type: EnemyType = EnemyType.Normal;\r\n\t@field\r\n\tpublic level: number = 1;\r\n\t@field\r\n\tpublic name: string = \"\";\r\n\t@field\r\n\tpublic restraint: RestraintType = RestraintType.Red;\r\n\t@field\r\n\tpublic skeletonName: string = \"\";\r\n\t@field\r\n\tpublic params: {[T: number]: number} = {};\r\n\t@field\r\n\tpublic score: number = 1;\r\n\r\n\t@field(Number)\r\n\tpublic attackMotionId: number = AttackMotionGroupId;\r\n\r\n\t@assetField(SkeletonData, BundleName.Sprites,\r\n\t\t\"parts/${skeletonName}\")\r\n\tpublic skeleton: SkeletonData;\r\n\r\n\t/**\r\n\t * 战斗等级\r\n\t */\r\n\tget battleLevel(): number { return this.level; }\r\n\r\n\t/**\r\n\t * 战斗属性\r\n\t */\r\n\tprivate _battleParams: number[];\r\n\tget battleParams(): number[] {\r\n\t\tif (!this._battleParams) {\r\n\t\t\tconst params = paramRepo().find();\r\n\r\n\t\t\tthis._battleParams = [];\r\n\t\t\tparams.forEach(p => {\r\n\t\t\t\tconst k = p.id;\r\n\t\t\t\tconst val = this.params[k] || p.default_;\r\n\t\t\t\tthis._battleParams[k] = MathUtils.clamp(val, p.min, p.max);\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn this._battleParams;\r\n\t}\r\n}\r\n\r\nexport function enemyRepo() {\r\n\treturn getRepository(EnemyRepo);\r\n}\r\n\r\n@repository\r\nexport class EnemyRepo extends BaseRepository<Enemy> {\r\n\r\n\tget clazz(): Constructor<Enemy> {\r\n\t\treturn Enemy;\r\n\t}\r\n\r\n\tpublic constructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n}\r\n","import gifshot = require('./gifshot')\r\nimport {PromiseUtils} from \"./PromiseUtils\";\r\n\r\nexport default class GIFUtils {\r\n\r\n    static async makeGIF(images: string[]) {\r\n        let passedOptions = this.getSelectedOptions();\r\n        let temp = [];\r\n        images.forEach(i => {\r\n            let image = new Image();\r\n            image.src = i;\r\n            temp.push(image);\r\n        })\r\n        passedOptions.images = temp;\r\n        let res = null;\r\n        let made = false;\r\n\r\n        gifshot['createGIF'](passedOptions, obj => {\r\n            if (!obj.error) res = obj.image;\r\n            made = true;\r\n        });\r\n        await PromiseUtils.waitFor(() => made);\r\n\r\n        return res;\r\n    }\r\n\r\n    private static getSelectedOptions() {\r\n        return {\r\n            gifWidth: Number(400),\r\n            gifHeight: Number(400),\r\n            images: [],\r\n            interval: Number(0.02),\r\n            frameDuration: Number(1),\r\n            sampleInterval: Number(10),\r\n            numWorkers: Number(2)\r\n        }\r\n    }\r\n}\r\n","import {BaseManager, getManager, manager} from \"./BaseManager\";\r\n\r\nimport {CoreInterface} from \"../Common/CoreCommon\";\r\n\r\nclass Token {\r\n\t// TOKEN有效总时间\r\n\tpublic static Duration = 30 * 60 * 1000;\r\n\t// TOKEN更新时间（测试30秒）\r\n\tpublic static UpdateDuration = 15 * 60 * 1000;\r\n\r\n\tpublic value: string;\r\n\tpublic time: number;\r\n\r\n\t// 是否过时\r\n\tpublic isOutOfDate() {\r\n\t\tconst now = Date.now();\r\n\t\treturn now > this.time + Token.Duration;\r\n\t}\r\n\r\n\t// 是否需要刷新\r\n\tpublic isNeedUpdate() {\r\n\t\tconst now = Date.now();\r\n\t\treturn now > this.time + Token.UpdateDuration;\r\n\t}\r\n\r\n\tpublic static create(token) {\r\n\t\tconst res = new Token();\r\n\t\tres.value = token;\r\n\t\tres.time = Date.now();\r\n\t\treturn res;\r\n\t}\r\n\r\n\tpublic static invalid() {\r\n\t\tlet token = new Token();\r\n\t\ttoken.time = -1000;\r\n\t\ttoken.value = \"\";\r\n\t\treturn token;\r\n\t}\r\n}\r\n\r\nexport function gameMgr(): GameManager {\r\n\treturn getManager(GameManager);\r\n}\r\n\r\n@manager\r\nclass GameManager extends BaseManager {\r\n\r\n\tpublic token: Token = null; // Token.invalid();\r\n\r\n\tprivate lastCheckUpdToken: number = 0;\r\n\r\n\tpublic needUpdateToken = true;\r\n\r\n\t// region 更新\r\n\r\n\tupdate(dt: number) {\r\n\t\tsuper.update(dt);\r\n\r\n\t\tthis.checkUpdateToken();\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region Token操作\r\n\r\n\t/**\r\n\t * 获取Token值\r\n\t */\r\n\tpublic getToken() {\r\n\t\treturn this.token.value;\r\n\t}\r\n\r\n\t/**\r\n\t * 设置Token\r\n\t * @param token\r\n\t */\r\n\tpublic setToken(token: string) {\r\n\t\tthis.token = Token.create(token);\r\n\t}\r\n\r\n\t/**\r\n\t * 更新Token\r\n\t */\r\n\tpublic async updateToken() {\r\n\t\tconst res = await CoreInterface.UpdateToken();\r\n\t\tthis.setToken(res['token']);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\tprivate checkUpdateToken() { // 每5秒检查一次更新\r\n\t\tif (this.needUpdateToken &&\r\n\t\t\tthis.token?.isNeedUpdate() &&\r\n\t\t\tDate.now() - this.lastCheckUpdToken > 5000) {\r\n\r\n\t\t\tthis.lastCheckUpdToken = 1e300; // 防止频繁更新\r\n\r\n\t\t\tconsole.log(\"UpdateToken!!\")\r\n\t\t\t// @ts-ignore\r\n\t\t\tthis.updateToken().finally(() => {\r\n\t\t\t\tthis.lastCheckUpdToken = Date.now();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nimport {networkMgr} from \"./NetworkManager\";\r\n","import {ItemDisplay} from \"../../../../Modules/CoreModule/Components/ItemDisplay\";\r\nimport Label = cc.Label;\r\nimport Node = cc.Node;\r\nimport Sprite = cc.Sprite;\r\nimport {PartInfo} from \"../../../../Modules/HeroModule/Data/PartInfo\";\r\nimport Color = cc.Color;\r\nimport {selectorScene} from \"../../SelectorScene\";\r\nimport PartsDisplay from \"../ItemPrefabs/PartsDisplay\";\r\nimport Scrollbar = cc.Scrollbar;\r\nimport PreviewPictureDisplay from \"../ItemPrefabs/PreviewPictureDisplay\";\r\nimport {partMgr} from \"../../../../Modules/HeroModule/Managers/PartManager\";\r\nimport {configMgr} from \"../../../../Modules/CoreModule/Managers/ConfigManager\";\r\nimport PartConfig from \"../../../../Modules/HeroModule/Configs/PartConfig\";\r\nimport Slider = cc.Slider;\r\nimport PartsContainer from \"../ItemContainers/PartsContainer\";\r\nimport Component = cc.Component;\r\nimport EditBox = cc.EditBox;\r\nimport {PartType, partTypeRepo} from \"../../../../Modules/HeroModule/Data/PartType\";\r\nimport GlobalEditorLine from \"./GlobalEditorLine\";\r\nimport {HeroType} from \"../../../../Modules/HeroModule/Data/HeroType\";\r\nimport {editorMgr} from \"../../../../Modules/HeroModule/Managers/EditorManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nconst MaxScale = 4;\r\nconst MinScale = 0;\r\n\r\n@ccclass\r\nexport default class GlobalEditorCell extends ItemDisplay<HeroType> {\r\n\r\n\t@property(Boolean)\r\n\tpublic isTitle: boolean = false;\r\n\t@property(Label)\r\n\tpublic title: Label = null;\r\n\t@property(Slider)\r\n\tpublic slider: Slider = null;\r\n\t@property(Label)\r\n\tpublic value: Label = null;\r\n\t@property(EditBox)\r\n\tpublic edit: EditBox = null;\r\n\r\n\tpublic line: GlobalEditorLine = null;\r\n\r\n\t// region 数据获取\r\n\r\n\tpublic get globalEditor() {\r\n\t\treturn this.line.globalEditor;\r\n\t}\r\n\tpublic get singleEditor() {\r\n\t\treturn selectorScene().singleEditor;\r\n\t}\r\n\tpublic get partType() {\r\n\t\treturn this.globalEditor.item;\r\n\t}\r\n\tpublic get firstHeroType() {\r\n\t\treturn this.line.item;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取缩放\r\n\t */\r\n\tpublic get scale() {\r\n\t\tconst ptId = this.partType.id,\r\n\t\t\tfhtId = this.firstHeroType.id, htId = this.item.id;\r\n\t\treturn editorMgr().getPHtScale(ptId, fhtId, htId);\r\n\t}\r\n\tpublic set scale(val) {\r\n\t\tconst ptId = this.partType.id,\r\n\t\t\tfhtId = this.firstHeroType.id, htId = this.item.id;\r\n\t\teditorMgr().changePHtScale(ptId, fhtId, htId, val);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 绘制控制\r\n\r\n\tpublic refresh() {\r\n\t\tif (this.isTitle) this.drawTitle();\r\n\t\telse this.drawValue();\r\n\t}\r\n\tprivate drawTitle() {\r\n\t\t// const curPart = this.singleEditor?.part;\r\n\t\t// const htId = this.item.id\r\n\t\t// const cHtId = curPart?.heroTypeId;\r\n\t\t//\r\n\t\t// const color = htId == cHtId ? Color.GREEN : Color.WHITE;\r\n\r\n\t\tthis.title.string = `${this.item.id} ${this.item.getDisplayName()}`;\r\n\t\t// this.title.node.color = color;\r\n\t}\r\n\tprivate drawValue() {\r\n\t\tconst config = configMgr().config(PartConfig);\r\n\t\tconst ptId = this.partType.id,\r\n\t\t\tfhtId = this.firstHeroType.id, htId = this.item.id;\r\n\t\tconst scale = config.pHtScale[ptId][fhtId][htId];\r\n\r\n\t\tthis.slider.progress = (scale - MinScale) / (MaxScale - MinScale);\r\n\t\tthis.value.string = scale.toFixed(3);\r\n\t\tthis.edit.string = scale.toFixed(3);\r\n\r\n\t\tconst editable = fhtId != htId && !this.partType.isBody;\r\n\t\tthis.slider.node.active = editable;\r\n\t\tthis.edit.node.active = editable;\r\n\t\tthis.value.node.active = !editable;\r\n\r\n\t\tconst curPart = this.singleEditor?.part;\r\n\t\tconst basePart = this.singleEditor?.basePart;\r\n\t\tconst cPtId = curPart?.partTypeId;\r\n\t\tconst cHtId = curPart?.heroTypeId;\r\n\t\tconst cBhtId = basePart ? basePart.heroTypeId :\r\n\t\t\tthis.globalEditor.preview.item?.heroTypeId;\r\n\r\n\t\tconst color = ptId == cPtId && fhtId == cBhtId && htId == cHtId ?\r\n\t\t\tColor.GREEN : Color.WHITE;\r\n\r\n\t\tthis.value.node.color = this.edit.textLabel.node.color = color;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 操作\r\n\r\n\t/**\r\n\t * 设置缩放\r\n\t */\r\n\tpublic setScale(scale) {\r\n\t\tthis.scale = scale;\r\n\r\n\t\tthis.refresh();\r\n\t\tthis.globalEditor.preview.refresh();\r\n\t\tthis.globalEditor.partsContainer.refresh();\r\n\t}\r\n\r\n\t/**\r\n\t * 重置\r\n\t */\r\n\tpublic reset() {\r\n\t\tthis.setScale(1);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 回调控制\r\n\r\n\tpublic onScaleSlide() {\r\n\t\tconst rate = this.slider.progress;\r\n\t\tthis.setScale(rate * (MaxScale - MinScale) + MinScale);\r\n\t}\r\n\tpublic onEdit() {\r\n\t\tconst num = Number(this.edit.string);\r\n\t\tif (isNaN(num)) this.setScale(this.scale);\r\n\t\telse this.setScale(num);\r\n\t}\r\n\r\n\t// endregion\r\n}\r\n","import {ItemDisplay} from \"../../../../Modules/CoreModule/Components/ItemDisplay\";\r\nimport Label = cc.Label;\r\nimport Node = cc.Node;\r\nimport Sprite = cc.Sprite;\r\nimport {PartInfo} from \"../../../../Modules/HeroModule/Data/PartInfo\";\r\nimport Color = cc.Color;\r\nimport {selectorScene} from \"../../SelectorScene\";\r\nimport PartsDisplay from \"../ItemPrefabs/PartsDisplay\";\r\nimport Scrollbar = cc.Scrollbar;\r\nimport PreviewPictureDisplay from \"../ItemPrefabs/PreviewPictureDisplay\";\r\nimport {partMgr} from \"../../../../Modules/HeroModule/Managers/PartManager\";\r\nimport {configMgr} from \"../../../../Modules/CoreModule/Managers/ConfigManager\";\r\nimport PartConfig from \"../../../../Modules/HeroModule/Configs/PartConfig\";\r\nimport Slider = cc.Slider;\r\nimport PartsContainer from \"../ItemContainers/PartsContainer\";\r\nimport Component = cc.Component;\r\nimport Boolean = cc.Boolean;\r\nimport GlobalEditorCell from \"./GlobalEditorCell\";\r\nimport Prefab = cc.Prefab;\r\nimport GlobalEditor from \"./GlobalEditor\";\r\nimport {partTypeRepo} from \"../../../../Modules/HeroModule/Data/PartType\";\r\nimport {HeroType, heroTypeRepo} from \"../../../../Modules/HeroModule/Data/HeroType\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GlobalEditorLine extends ItemDisplay<HeroType> {\r\n\r\n\t@property(Boolean)\r\n\tpublic isTitle: boolean = false;\r\n\t@property(Label)\r\n\tpublic title: Label = null;\r\n\t@property(Node)\r\n\tpublic cellContainer: Node = null;\r\n\t@property([GlobalEditorCell])\r\n\tpublic cells: GlobalEditorCell[] = [];\r\n\t@property(Prefab)\r\n\tpublic editPrefab: Prefab = null;\r\n\t@property(Prefab)\r\n\tpublic titlePrefab: Prefab = null;\r\n\r\n\tpublic globalEditor: GlobalEditor = null;\r\n\tprivate cellCreated = false;\r\n\r\n\tpublic get prefab() {\r\n\t\treturn this.isTitle ? this.titlePrefab : this.editPrefab;\r\n\t}\r\n\r\n\tprotected onLoad() {\r\n\t}\r\n\r\n\trefresh() {\r\n\t\tsuper.refresh();\r\n\t\tthis.drawTitle();\r\n\t\tif (!this.cellCreated)\r\n\t\t\tthis.createCells();\r\n\t\telse this.refreshCells();\r\n\t}\r\n\tprivate drawTitle() {\r\n\t\tif (!this.title || !this.item) return;\r\n\t\tthis.title.string = `${this.item.id} ${this.item.getDisplayName()}`;\r\n\t}\r\n\tprivate createCells() {\r\n\t\tconst hts = heroTypeRepo().list;\r\n\t\thts.forEach(ht => this.createCell(ht));\r\n\t\tthis.cellCreated = true;\r\n\t}\r\n\tprivate refreshCells() {\r\n\t\tthis.cells.forEach(line => line.refresh());\r\n\t}\r\n\tprivate createCell(heroType: HeroType) {\r\n\t\tconst node = cc.instantiate(this.prefab);\r\n\t\tconst cell = node.getComponent(GlobalEditorCell);\r\n\t\tnode.parent = this.cellContainer;\r\n\r\n\t\t// const sp = this.cellContainer.getComponent(Sprite);\r\n\t\t// sp.enabled = !this.isTitle;\r\n\r\n\t\tcell.line = this;\r\n\t\tcell.isTitle = this.isTitle;\r\n\t\tcell.setItem(heroType);\r\n\r\n\t\tthis.cells.push(cell);\r\n\t}\r\n\r\n}\r\n","import {ItemDisplay} from \"../../../../Modules/CoreModule/Components/ItemDisplay\";\r\nimport Node = cc.Node;\r\nimport PreviewPictureDisplay from \"../ItemPrefabs/PreviewPictureDisplay\";\r\nimport PartsContainer from \"../ItemContainers/PartsContainer\";\r\nimport PartTypeContainer from \"../ItemContainers/PartTypeContainer\";\r\nimport {PartType, partTypeRepo} from \"../../../../Modules/HeroModule/Data/PartType\";\r\nimport Prefab = cc.Prefab;\r\nimport GlobalEditorLine from \"./GlobalEditorLine\";\r\nimport {HeroType, heroTypeRepo} from \"../../../../Modules/HeroModule/Data/HeroType\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GlobalEditor extends ItemDisplay<PartType> {\r\n\r\n\t@property(PartTypeContainer)\r\n\tpublic partTypeContainer: PartTypeContainer = null;\r\n\t@property(Node)\r\n\tpublic lineContainer: Node = null;\r\n\t@property([GlobalEditorLine])\r\n\tpublic lines: GlobalEditorLine[] = [];\r\n\r\n\t@property(PartsContainer)\r\n\tpublic partsContainer: PartsContainer = null;\r\n\t@property(PreviewPictureDisplay)\r\n\tpublic preview: PreviewPictureDisplay = null;\r\n\r\n\t@property(Prefab)\r\n\tpublic prefab: Prefab = null;\r\n\r\n\t// region 初始化\r\n\r\n\tprotected onLoad() {\r\n\t\tthis.partTypeContainer.globalEditor = this;\r\n\t\tthis.partTypeContainer.setItems(partTypeRepo().list);\r\n\t\tthis.createLines();\r\n\t}\r\n\tprivate createLines() {\r\n\t\tthis.createLine(); // Title\r\n\t\tconst hts = heroTypeRepo().list;\r\n\t\thts.forEach(ht => this.createLine(ht));\r\n\t}\r\n\tprivate createLine(heroType?: HeroType) {\r\n\t\tconst node = cc.instantiate(this.prefab);\r\n\t\tconst line = node.getComponent(GlobalEditorLine);\r\n\t\tnode.parent = this.lineContainer;\r\n\r\n\t\tline.globalEditor = this;\r\n\t\tline.isTitle = !heroType;\r\n\t\tline.setItem(heroType);\r\n\r\n\t\tthis.lines.push(line);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 绘制控制\r\n\r\n\trefresh() {\r\n\t\tsuper.refresh();\r\n\t\tthis.lines.forEach(line => line.refresh());\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 数据控制\r\n\r\n\t// endregion\r\n\r\n}\r\n","import {get, post} from \"../../CoreModule/Common/CoreCommon\";\r\n\r\nexport class HeroInterface {\r\n\r\n\t@post(\"/hero/hero/sync\") static SyncHero(d?): any {}\r\n\t@post(\"/hero/hero/create\") static CreateHero(d?): any {}\r\n\t@get(\"/hero/hero/get_one\") static GetHero(d?): any {}\r\n\t@get(\"/hero/hero/count\") static GetHeroCount(d?): any {}\r\n\t@get(\"/hero/hero/get_list\") static GetHeroes(d?): any {}\r\n\r\n\t@post(\"/hero/level/upgrade\") static UpgradeLevel(d?): any {}\r\n\t@post(\"/hero/level/break\") static BreakLevel(d?): any {}\r\n\t@post(\"/hero/star/upgrade\") static UpgradeStar(d?): any {}\r\n\t@post(\"/hero/strengthen/upgrade\") static UpgradeStrengthen(d?): any {}\r\n\r\n\t@get(\"/hero/rank/refresh\") static RefreshAllRank(d?): any {}\r\n\r\n\t@post(\"/core/data/clear_cache\") static EmptyCache(d?): any {}\r\n\r\n}\r\n","import {ItemContainer} from \"../../../../CoreModule/Components/ItemContainer\";\r\nimport {Hero} from \"../../../../HeroModule/Data/Hero\";\r\nimport HeroCompositingDisplay from \"./HeroCompositingDisplay\";\r\nimport {waitForDataLoad} from \"../../../../CoreModule/Managers/DataManager\";\r\nimport {playerMgr, waitForLogin} from \"../../../../PlayerModule/Managers/PlayerManager\";\r\nimport {heroMgr} from \"../../../../HeroModule/Managers/HeroManager\";\r\nimport {ScrollviewFilter} from \"../../../../CoreModule/Utils/ScrollviewFilter\";\r\nimport HeroQualitySiftSelectionGroup from \"./HeroQualitySiftSelectionGroup\";\r\nimport HeroQualitySiftSelection from \"./HeroQualitySiftSelection\";\r\nimport CompositingWindowDisplay from \"./CompositingWindowDisplay\";\r\nimport Node = cc.Node;\r\nimport Button = cc.Button;\r\nimport EventHandler = cc.Component.EventHandler;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroCompositingContainer extends ItemContainer<Hero, HeroCompositingDisplay> {\r\n\r\n    @property([HeroQualitySiftSelection])\r\n    qualitySelections: HeroQualitySiftSelection[] = [];\r\n    @property(CompositingWindowDisplay)\r\n    compositing: CompositingWindowDisplay = null;\r\n    private selectionGroup: HeroQualitySiftSelectionGroup = null;\r\n\r\n    private totalHeroes: Hero[] = [];\r\n\r\n    start () {\r\n        this.selectionGroup = new HeroQualitySiftSelectionGroup(false);\r\n        this.qualitySelections.forEach(s => {\r\n            this.selectionGroup.addElement(s);\r\n            s.container = this;\r\n            s.selectableGroup = this.selectionGroup;\r\n        })\r\n        this.setup().then();\r\n    }\r\n\r\n    @waitForDataLoad\r\n    @waitForLogin\r\n    private async setup() {\r\n        const acc = playerMgr().player.account;\r\n        this.totalHeroes = (await heroMgr().getListFromServer())\r\n          .filter(h => h.ownerAccount == acc);\r\n        this.onSelectionChange();\r\n    }\r\n\r\n    update (dt) {\r\n        this.itemsComponents.forEach(i => i.isSelected = i.item == this.compositing.mainHero.item || i.item == this.compositing.secondHero.item);\r\n    }\r\n\r\n    onItemsChanged() {\r\n        super.onItemsChanged();\r\n        let nodes : Node[] = [];\r\n        this.itemsComponents.forEach((item, i) => {\r\n            if(item.node.active == true)\r\n                nodes.push(item.node);\r\n            let event = new EventHandler();\r\n            event.target = this.node;\r\n            event.component = \"HeroCompositingContainer\";\r\n            event.handler = \"onItemClicked\";\r\n            event.customEventData = \"\" + i;\r\n            item.getComponent(Button).clickEvents = [];\r\n            item.getComponent(Button).clickEvents.push(event);\r\n        })\r\n        ScrollviewFilter.filter(\"vertical\", this.container, nodes, 60, this.container.height, 60, 4);\r\n    }\r\n\r\n    onSelectionChange() {\r\n        let type = (this.selectionGroup.currentSelection() as HeroQualitySiftSelection).quality;\r\n        if (type == -1)\r\n            this.setItems(this.totalHeroes);\r\n        else\r\n            this.setItems(this.totalHeroes.filter(h => h.quality == type));\r\n    }\r\n\r\n    onItemClicked(event: any, index: string) {\r\n        if (this.items[index] == this.compositing.mainHero.item) {\r\n            this.compositing.deselectMainHero();\r\n            return;\r\n        }\r\n        if (this.items[index] == this.compositing.secondHero.item) {\r\n            this.compositing.deselectSecondHero();\r\n            return;\r\n        }\r\n        this.compositing.selectHero(this.items[index]);\r\n    }\r\n\r\n}\r\n","import Label = cc.Label;\r\nimport Node = cc.Node;\r\nimport Sprite = cc.Sprite;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport {battleScene} from \"../../../../../Scenes/BattleScene\";\r\nimport HeroWithAvatar from \"../../HeroWithAvatar\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroCompositingDisplay extends HeroWithAvatar {\r\n\r\n    @property(Label)\r\n    nameLabel: Label = null;\r\n    @property(Sprite)\r\n    qualitySprite: Sprite = null;\r\n    @property(SpriteFrame)\r\n    qualityPictures: SpriteFrame[] = [];\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    protected onItemChanged() {\r\n        if (!this.item) return;\r\n        super.onItemChanged();\r\n        this.nameLabel.string = this.item.name;\r\n        this.qualitySprite.spriteFrame = this.qualityPictures[this.item.quality];\r\n    }\r\n\r\n    update (dt) {\r\n        this.updateMoreInfo();\r\n    }\r\n\r\n    // region 额外组件控制\r\n\r\n    @property(Node)\r\n    moreInfoNode: Node = null;\r\n    @property(Label)\r\n    levelLabel: Label = null;\r\n    @property([Node])\r\n    starNodes: Node[] = [];\r\n    @property(Node)\r\n    selectedNode: Node = null;\r\n    @property(Node)\r\n    fightingNode: Node = null;\r\n\r\n    public isSelected: boolean = false;\r\n\r\n    private updateMoreInfo() {\r\n        if (!this.moreInfoNode) return;\r\n        this.levelLabel.string = this.item.level.level.toString();\r\n        this.starNodes.forEach((s, i) => s.active = i < this.item.star.level);\r\n        this.selectedNode.active = this.isSelected;\r\n        this.fightingNode.active = battleScene().heroesInTeam.find(h => h == this.item) != undefined;\r\n    }\r\n\r\n    // endregion\r\n\r\n}\r\n","import {ItemContainer} from \"../../../CoreModule/Components/ItemContainer\";\r\nimport {ScrollviewFilter} from \"../../../CoreModule/Utils/ScrollviewFilter\";\r\nimport {Hero} from \"../../../HeroModule/Data/Hero\";\r\nimport {playerMgr, waitForLogin} from \"../../../PlayerModule/Managers/PlayerManager\";\r\nimport {waitForDataLoad} from \"../../../CoreModule/Managers/DataManager\";\r\nimport HeroGroupDisplay from \"./HeroGroupDisplay\";\r\nimport {HeroGroup, HeroGroupType} from \"../../Data/HeroGroup\";\r\nimport {heroMgr} from \"../../../HeroModule/Managers/HeroManager\";\r\nimport Node = cc.Node;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroGroupContainer extends ItemContainer<HeroGroup, HeroGroupDisplay> {\r\n    currentGroupType: HeroGroupType = HeroGroupType.RESTRAINT;\r\n    totalHeroes: Hero[] = [];\r\n\r\n    start() {\r\n        this.setup().then();\r\n    }\r\n\r\n    @waitForDataLoad\r\n    @waitForLogin\r\n    private async setup() {\r\n        const acc = playerMgr().player.account;\r\n        this.totalHeroes = (await heroMgr().getListFromServer())\r\n          .filter(h => h.ownerAccount == acc);\r\n        this.setItems(this.groupHeroes(this.totalHeroes));\r\n    }\r\n\r\n    update(dt) {\r\n    }\r\n\r\n    onItemsChanged() {\r\n        super.onItemsChanged();\r\n        let nodes: Node[] = [];\r\n        this.itemsComponents.forEach(item => {\r\n            if (item.node.active == true) nodes.push(item.node)\r\n        })\r\n        ScrollviewFilter.filter(\"vertical\", this.container, nodes, 5, this.container.height, 180, 5);\r\n    }\r\n\r\n    /**\r\n     * 根据分组依据将Hero分成若干个HeroGroup\r\n     */\r\n    groupHeroes(heroes: Hero[], groupBy: HeroGroupType = this.currentGroupType): HeroGroup[] {\r\n        this.currentGroupType = groupBy;\r\n        let groups: HeroGroup[] = [];\r\n        let maxIdx = 0;\r\n        heroes.forEach((hero) => {\r\n            let idx;//先后顺序\r\n            let val;//分组依据对应属性的值\r\n            switch (groupBy) {\r\n                case HeroGroupType.STAR:\r\n                    idx = 6 - hero.star.level;\r\n                    val = hero.star.level;\r\n                    break;\r\n                case HeroGroupType.QUALITY:\r\n                    val = hero.quality;\r\n                    idx = 6 - hero.quality;\r\n                    break;\r\n                case HeroGroupType.RESTRAINT:\r\n                    val = idx = hero.restraint;\r\n                    break;\r\n            }\r\n            groups[idx] ||= new HeroGroup(groupBy, val);\r\n            groups[idx].heroes.push(hero);\r\n            maxIdx = Math.max(maxIdx, idx);\r\n        })\r\n        for (let i = maxIdx; i >= 0; i--) {\r\n            if (groups[i] == null)\r\n                groups.splice(i, 1);\r\n        }\r\n        return groups;\r\n    }\r\n\r\n    /**\r\n     * tab按钮回调，设置不同的分组依据\r\n     */\r\n    setHeroGroupType(e, d) {\r\n        let value = parseInt(d);\r\n        this.setItems(this.groupHeroes(this.totalHeroes, value));\r\n    }\r\n}\r\n","import {ItemDisplay} from \"../../../CoreModule/Components/ItemDisplay\";\r\nimport {HeroGroup, HeroGroupType} from \"../../Data/HeroGroup\";\r\nimport HeroInBagContainer from \"./HeroInBagContainer\";\r\nimport {QualityType} from \"../../../HeroModule/Data/Quality\";\r\nimport Label = cc.Label;\r\nimport Node = cc.Node;\r\nimport Sprite = cc.Sprite;\r\nimport {RestraintType} from \"../../../HeroModule/Data/Hero\";\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport HeroGroupHeroContainer from \"./HeroGroupHeroContainer\";\r\nimport {ScrollviewFilter} from \"../../../CoreModule/Utils/ScrollviewFilter\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroGroupDisplay extends ItemDisplay<HeroGroup> {\r\n    @property(HeroGroupHeroContainer)\r\n    heroContainer: HeroGroupHeroContainer;\r\n    @property([Node])\r\n    stars: Node[] = [];\r\n    @property([SpriteFrame])\r\n    restraintIcons: SpriteFrame[] = [];\r\n    @property(Label)\r\n    tagLabel: Label;\r\n    @property(Sprite)\r\n    icon: Sprite;\r\n\r\n    @property(Node)\r\n    starsNode: Node;\r\n    @property(Node)\r\n    labelNode: Node;\r\n    @property(Node)\r\n    iconNode: Node;\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    protected onItemChanged() {\r\n        super.onItemChanged();\r\n        this.setTag();\r\n        this.heroContainer.setItems(this.item.heroes);\r\n    }\r\n\r\n\r\n    private setTag() {\r\n        this.starsNode.active = false;\r\n        this.labelNode.active = false;\r\n        this.iconNode.active = false;\r\n\r\n        switch (this.item.groupBy) {\r\n            case HeroGroupType.STAR:\r\n\r\n                for (let i = 0; i < 5; i++)\r\n                    this.stars[i].active = i < this.item.value;\r\n                this.starsNode.active = true;\r\n                break;\r\n            case HeroGroupType.QUALITY:\r\n                this.tagLabel.string = QualityType[this.item.value];\r\n                this.labelNode.x = 0;\r\n                this.labelNode.active = true;\r\n                break;\r\n            case HeroGroupType.RESTRAINT:\r\n                this.tagLabel.string = RestraintType[this.item.value];\r\n                this.labelNode.x = 7;\r\n                this.icon.spriteFrame = this.restraintIcons[this.item.value];\r\n                this.labelNode.active = true;\r\n                this.iconNode.active = true;\r\n                break;\r\n        }\r\n    }\r\n}\r\n","import {ItemContainer} from \"../../../CoreModule/Components/ItemContainer\";\r\nimport {ScrollviewFilter} from \"../../../CoreModule/Utils/ScrollviewFilter\";\r\nimport Node = cc.Node;\r\nimport {Hero} from \"../../../HeroModule/Data/Hero\";\r\nimport HeroInBagDisplay from \"./HeroInBagDisplay\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroGroupHeroContainer extends ItemContainer<Hero, HeroInBagDisplay> {\r\n\r\n    start() {\r\n    }\r\n\r\n    private async setup() {\r\n    }\r\n\r\n    onItemsChanged() {\r\n        super.onItemsChanged();\r\n        let nodes: Node[] = [];\r\n        this.itemsComponents.forEach(item => {\r\n            if (item.node.active == true) nodes.push(item.node)\r\n        })\r\n        ScrollviewFilter.filter(\"vertical\", this.container, nodes, 5, this.container.height, 40, 5);\r\n        this.modifyOnClickEvents();\r\n    }\r\n\r\n    modifyOnClickEvents() {\r\n        this.itemsComponents.forEach(item => {\r\n            let btn = item.node.getComponentInChildren(Button);\r\n            btn.clickEvents = [];\r\n            let clickEventHandler = new cc.Component.EventHandler();\r\n            clickEventHandler.target = this.node;\r\n            clickEventHandler.component = \"HeroGroupHeroContainer\";\r\n            clickEventHandler.handler = \"onHeroClicked\";\r\n            clickEventHandler.customEventData = item.item.nftId;//用nftId来作为附加数据\r\n            btn.clickEvents.push(clickEventHandler);\r\n        });\r\n    }\r\n\r\n    async onHeroClicked(e, nftId: string) {\r\n        battleScene().myTeamFrame.addTeamMember(nftId);\r\n    }\r\n}\r\nimport Button = cc.Button;\r\nimport {battleScene} from \"../../../../Scenes/BattleScene\";\r\nimport {HeroRace} from \"../../../HeroModule/Data/HeroType\";\r\n","import {Hero, RestraintType} from \"../../HeroModule/Data/Hero\";\r\nimport {QualityType} from \"../../HeroModule/Data/Quality\";\r\nimport {BaseData} from \"../../CoreModule/Data/BaseData\";\r\n\r\n\r\n/**\r\n * 根据什么来分类\r\n */\r\nexport enum HeroGroupType {\r\n    RESTRAINT, QUALITY, STAR\r\n}\r\n\r\n/**\r\n * 用于在选择英雄出战的页面\r\n */\r\nexport class HeroGroup extends BaseData{\r\n    heroes: Hero[];\r\n\r\n    groupBy: HeroGroupType;//分组依据\r\n    value: RestraintType | QualityType | number;//分组依据的值，即该HeroGroup的heroes的groupBy对应属性都是value\r\n\r\n    constructor(groupBy: HeroGroupType, groupValue) {\r\n        super();\r\n        this.groupBy = groupBy;\r\n        this.value = groupValue;\r\n        this.heroes = [];\r\n    }\r\n\r\n}","import {ItemContainer} from \"../../../CoreModule/Components/ItemContainer\";\r\nimport {ScrollviewFilter} from \"../../../CoreModule/Utils/ScrollviewFilter\";\r\nimport {Hero} from \"../../../HeroModule/Data/Hero\";\r\nimport HeroInBagDisplay from \"./HeroInBagDisplay\";\r\nimport {playerMgr, waitForLogin} from \"../../../PlayerModule/Managers/PlayerManager\";\r\nimport {waitForDataLoad} from \"../../../CoreModule/Managers/DataManager\";\r\nimport {heroMgr} from \"../../../HeroModule/Managers/HeroManager\";\r\nimport {HeroRace} from \"../../../HeroModule/Data/HeroType\";\r\nimport Node = cc.Node;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroInBagContainer extends ItemContainer<Hero, HeroInBagDisplay> {\r\n\r\n    private totalHeroes: Hero[] = [];\r\n    private currentRace: HeroRace;\r\n\r\n    start() {\r\n        this.setup().then();\r\n    }\r\n\r\n    @waitForDataLoad\r\n    @waitForLogin\r\n    private async setup() {\r\n        const acc = playerMgr().player.account;\r\n        this.totalHeroes = (await heroMgr().getListFromServer())\r\n          .filter(h => h.ownerAccount == acc);\r\n        this.currentRace = undefined;\r\n        this.onHeroRaceChange();\r\n    }\r\n\r\n    onItemsChanged() {\r\n        super.onItemsChanged();\r\n        let nodes : Node[] = [];\r\n        this.itemsComponents.forEach(item => { if(item.node.active == true) nodes.push(item.node) })\r\n        ScrollviewFilter.filter(\"vertical\", this.container, nodes, 5, this.container.height, 170, 5);\r\n    }\r\n\r\n\r\n    /**\r\n     * 筛选按钮回调\r\n     */\r\n    setHeroBagFilter(e, d) {\r\n        this.currentRace = d == 'undefined' ? undefined : parseInt(d);\r\n        this.onHeroRaceChange();\r\n    }\r\n\r\n    onHeroRaceChange() {\r\n        let items = this.currentRace ? this.totalHeroes.filter(h => h.race == this.currentRace) : this.totalHeroes;\r\n        this.setItems(items);\r\n    }\r\n}\r\n","import Label = cc.Label;\r\nimport Node = cc.Node;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport Sprite = cc.Sprite;\r\nimport {battleScene} from \"../../../../Scenes/BattleScene\";\r\nimport HeroWithAvatar from \"../HeroWithAvatar\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroInBagDisplay extends HeroWithAvatar {\r\n\r\n    @property(Label)\r\n    nameLabel: Label = null;\r\n    @property(Label)\r\n    fragmentLabel: Label = null;\r\n\r\n    @property(Sprite)\r\n    qualityBackground: Sprite = null;\r\n\r\n    @property(Node)\r\n    fightingTips: Node = null;\r\n    @property([Node])\r\n    stars: Node[] = [];\r\n\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    protected onItemChanged() {\r\n        super.onItemChanged();\r\n        this.nameLabel.string = this.item.name;\r\n        this.qualityBackground.spriteFrame = this.qualityPictures[this.item.quality];\r\n    }\r\n    update (dt) {\r\n        if (!this.item) return;\r\n        this.updateLabels();\r\n        this.updatePictures();\r\n        this.updateNodes();\r\n    }\r\n\r\n    updateLabels() {\r\n        this.fragmentLabel.string = \"0/60\";\r\n    }\r\n\r\n    @property([SpriteFrame])\r\n    qualityPictures: SpriteFrame[] = [];\r\n\r\n    updatePictures() {\r\n\r\n    }\r\n\r\n    updateNodes() {\r\n        this.fightingTips.active = battleScene().heroesInTeam.find(h => h == this.item) != undefined;\r\n        this.stars.forEach((s, i) => { s.active = i < this.item.star.level; });\r\n    }\r\n\r\n    onAvatarClick() {\r\n        battleScene().cultivateWindow.open(this.item);\r\n    }\r\n\r\n}\r\n","import {ItemContainer} from \"../../../CoreModule/Components/ItemContainer\";\r\nimport {ScrollviewFilter} from \"../../../CoreModule/Utils/ScrollviewFilter\";\r\nimport Node = cc.Node;\r\nimport {Hero} from \"../../../HeroModule/Data/Hero\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroInTeamContainer extends ItemContainer<Hero, HeroInTeamDisplay> {\r\n\r\n    start() {\r\n    }\r\n\r\n    private async setup() {\r\n    }\r\n\r\n    onItemsChanged() {\r\n        super.onItemsChanged();\r\n        this.modifyOnClickEvents();\r\n    }\r\n\r\n    modifyOnClickEvents() {\r\n        this.itemsComponents.forEach(item => {\r\n            let btn = item.node.getComponentInChildren(Button);\r\n            btn.clickEvents = [];\r\n            let clickEventHandler = new cc.Component.EventHandler();\r\n            clickEventHandler.target = this.node;\r\n            clickEventHandler.component = \"HeroInTeamContainer\";\r\n            clickEventHandler.handler = \"onTeamHeroClicked\";\r\n            clickEventHandler.customEventData = item.item.nftId;//用nftId来作为附加数据\r\n            btn.clickEvents.push(clickEventHandler);\r\n        });\r\n    }\r\n\r\n    onTeamHeroClicked(e, nftId: string) {\r\n        battleScene().myTeamFrame.removeTeamMember(nftId);\r\n    }\r\n}\r\n\r\nimport HeroInTeamDisplay from \"./HeroInTeamDisplay\";\r\nimport Button = cc.Button;\r\nimport {battleScene} from \"../../../../Scenes/BattleScene\";\r\n","import Label = cc.Label;\r\nimport Sprite = cc.Sprite;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport HeroWithAvatar from \"../HeroWithAvatar\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroInTeamDisplay extends HeroWithAvatar {\r\n\r\n\t@property(Label)\r\n\tnameLabel: Label = null;\r\n\t@property(Label)\r\n\tlevelLabel: Label = null;\r\n\t@property(Label)\r\n\tqualityLabel: Label = null;\r\n\r\n\t@property(Sprite)\r\n\tqualityBackground: Sprite = null;\r\n\r\n\tstart () {\r\n\t\tthis.setup();\r\n\t}\r\n\r\n\tprivate setup() {\r\n\t}\r\n\r\n\tprotected onItemChanged() {\r\n\t\tsuper.onItemChanged();\r\n\t\tthis.nameLabel.string = this.item.name;\r\n\t\tthis.levelLabel.string = \"Lv.\" + this.item.level.level;\r\n\t\tthis.qualityLabel.string = this.item.qualityData.shortName;\r\n\t\tthis.qualityBackground.spriteFrame = this.qualityPictures[this.item.quality];\r\n\t}\r\n\r\n\t@property([SpriteFrame])\r\n\tqualityPictures: SpriteFrame[] = [];\r\n\r\n}\r\n","import Sprite = cc.Sprite;\r\nimport Label = cc.Label;\r\nimport Skeleton = sp.Skeleton;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport {autoUnitConvert} from \"../../../../Utils/NumberUtils\";\r\nimport {HeroSkeleton} from \"../../../../Utils/SpineUtils\";\r\nimport {heroMgr} from \"../../../HeroModule/Managers/HeroManager\";\r\nimport {DefaultStand} from \"../../../../Scenes/SelectorScene/Components/ItemPrefabs/PreviewPictureDisplay\";\r\nimport Node = cc.Node;\r\nimport CultivateWindowController from \"./CultivateWindowController\";\r\nimport {battleScene} from \"../../../../Scenes/BattleScene\";\r\nimport Animation = cc.Animation;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroInfoDisplay extends cc.Component {\r\n\r\n    @property(Label)\r\n    nameLabel: Label = null;\r\n    @property(Sprite)\r\n    qualitySprite: Sprite = null;\r\n    @property(Label)\r\n    qualityLabel: Label = null;\r\n    qualityStrings: string[] = [\"N\", \"R\", \"SR\", \"SSR\", \"UR\"];\r\n    @property([Sprite])\r\n    starSprites: Sprite[] = [];\r\n    @property(Sprite)\r\n    restraintSprite: Sprite = null;\r\n    @property(Skeleton)\r\n    heroSkeleton: Skeleton = null;\r\n\r\n    @property([SpriteFrame])\r\n    qualityPictures: SpriteFrame[] = [];\r\n    @property([SpriteFrame])\r\n    starPictures: SpriteFrame[] = [];\r\n    @property([SpriteFrame])\r\n    restraintPictures: SpriteFrame[] = [];\r\n\r\n    @property(Animation)\r\n    animation: Animation = null;\r\n    // onLoad () {}\r\n\r\n    private cultivateController: CultivateWindowController = null;\r\n\r\n    start () {\r\n        this.cultivateController = battleScene().cultivateWindow;\r\n    }\r\n\r\n    // region 更新控制\r\n\r\n    update (dt) {}\r\n\r\n    refresh() {\r\n        if (!this.cultivateController)\r\n            this.cultivateController = battleScene().cultivateWindow;\r\n        this.updateLabels();\r\n        this.updatePictures();\r\n        this.drawSkeleton();\r\n    }\r\n\r\n    @autoUnitConvert\r\n    updateLabels() {\r\n        let hero = this.cultivateController.currentHero;\r\n        if (!hero) return;\r\n        this.nameLabel.string = hero.name;\r\n        this.qualityLabel.string = this.qualityStrings[hero.quality];\r\n    }\r\n\r\n    updatePictures() {\r\n        let hero = this.cultivateController.currentHero;\r\n        if (!hero) return;\r\n        this.qualitySprite.spriteFrame = this.qualityPictures[hero.quality];\r\n        this.starSprites.forEach((s, i) => {s.spriteFrame = this.starPictures[i < hero.star.level ? 1 : 0];});\r\n        this.restraintSprite.spriteFrame = this.restraintPictures[hero.restraint];\r\n    }\r\n\r\n    drawSkeleton() {\r\n        let hero = this.cultivateController.currentHero;\r\n        if (!hero) return;\r\n        let node = new Node('node');\r\n        let temp = node.addComponent(Skeleton);\r\n        let heroSkeleton = new HeroSkeleton(this.heroSkeleton, temp, heroMgr().getCacheOneFromServer(hero.nftId).heroTypeId);\r\n        hero.parts.forEach(part => { heroSkeleton.addPart(part); });\r\n        heroSkeleton.refresh().then(res => {\r\n            node.destroy();\r\n            this.heroSkeleton.clearTracks();\r\n            this.heroSkeleton.setAnimation(0, DefaultStand, true);\r\n            this.sizeFilter();\r\n        });\r\n    }\r\n\r\n    private size: number = 240;\r\n\r\n    private sizeFilter() {\r\n        let k = Math.max(\r\n          this.heroSkeleton.node.width * this.heroSkeleton.node.scaleX / this.size,\r\n          this.heroSkeleton.node.height * this.heroSkeleton.node.scaleY / this.size);\r\n        if (k > 1) {\r\n            this.heroSkeleton.node.scaleX /= k;\r\n            this.heroSkeleton.node.scaleY /= k;\r\n        }\r\n        this.heroSkeleton.node.y = - 50 - this.size / 3;\r\n    }\r\n\r\n    // endregion\r\n\r\n    playAnimation(name: string) {\r\n        this.animation.play(name);\r\n    }\r\n}\r\n","import {ItemContainer} from \"../../../CoreModule/Components/ItemContainer\";\r\nimport HeroItemDisplay from \"./HeroItemDisplay\";\r\nimport {ScrollviewFilter} from \"../../../CoreModule/Utils/ScrollviewFilter\";\r\nimport Node = cc.Node;\r\nimport {Hero} from \"../../../HeroModule/Data/Hero\";\r\nimport {playerMgr, waitForLogin} from \"../../../PlayerModule/Managers/PlayerManager\";\r\nimport {waitForDataLoad} from \"../../../CoreModule/Managers/DataManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroItemContainer extends ItemContainer<Hero, HeroItemDisplay> {\r\n\r\n\tstart () {\r\n\t\tthis.setup().then();\r\n\t}\r\n\r\n\t@waitForDataLoad\r\n\t@waitForLogin\r\n\tprivate async setup() {\r\n\t\tconst acc = playerMgr().player.account;\r\n\t\tthis.setItems((await heroMgr().getListFromServer())\r\n\t\t\t.filter(h => h.ownerAccount == acc));\r\n\t}\r\n\r\n\tupdate (dt) {\r\n\t}\r\n\r\n\tonItemsChanged() {\r\n\t\tsuper.onItemsChanged();\r\n\t\tlet nodes : Node[] = [];\r\n\t\tthis.itemsComponents.forEach(item => { if(item.node.active == true) nodes.push(item.node) })\r\n\t\tScrollviewFilter.filter(\"vertical\", this.container, nodes, 5, this.node.height, 170);\r\n\t}\r\n\r\n}\r\nimport { heroMgr } from \"../../../HeroModule/Managers/HeroManager\";\r\n","import Label = cc.Label;\r\nimport Sprite = cc.Sprite;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport Node = cc.Node;\r\nimport Layout = cc.Layout;\r\nimport Button = cc.Button;\r\nimport {autoUnitConvert} from \"../../../../Utils/NumberUtils\";\r\nimport {heroMgr} from \"../../../HeroModule/Managers/HeroManager\";\r\nimport {battleScene} from \"../../../../Scenes/BattleScene\";\r\nimport HeroWithAvatar from \"../HeroWithAvatar\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroItemDisplay extends HeroWithAvatar {\r\n\r\n\t@property(Label)\r\n\tnameLabel: Label = null;\r\n\t@property(Label)\r\n\tlevelLabel: Label = null;\r\n\t@property(Label)\r\n\tqualityLabel: Label = null;\r\n\r\n\t@property(Label)\r\n\tattackLabel: Label = null;\r\n\t@property(Label)\r\n\tdefenseLabel: Label = null;\r\n\t@property(Label)\r\n\thealthLabel: Label = null;\r\n\r\n\t@property(Label)\r\n\tupgradeValueLabel: Label = null;\r\n\t@property(Label)\r\n\tupgradeTipsLabel: Label = null;\r\n\r\n\t@property(Sprite)\r\n\tqualityBackground: Sprite = null;\r\n\t@property(Sprite)\r\n\tscissorsIcon: Sprite = null;\r\n\t@property(Sprite)\r\n\tupgradeIcon: Sprite = null;\r\n\t@property(Node)\r\n\tupgradeNode: Node = null;\r\n\tprivate upgradePicture: Sprite = null;\r\n\tprivate upgradeButton: Button = null;\r\n\t@property([Node])\r\n\tstarNodes: Node[] = [];\r\n\t@property(Layout)\r\n\tstarLayout: Layout = null;\r\n\r\n\tstart () {\r\n\t\tthis.setup();\r\n\t}\r\n\r\n\tprivate setup() {\r\n\t\tthis.upgradePicture = this.upgradeNode.getComponent(Sprite);\r\n\t\tthis.upgradeButton = this.upgradeNode.getComponent(Button);\r\n\t}\r\n\r\n\tprotected onItemChanged() {\r\n\t\tsuper.onItemChanged();\r\n\t\tthis.nameLabel.string = this.item.name;\r\n\t\tthis.qualityLabel.string = this.item.qualityData.shortName;\r\n\t\tthis.qualityBackground.spriteFrame = this.qualityPictures[this.item.quality];\r\n\t\tthis.scissorsIcon.spriteFrame = this.scissorsPictures[this.item.restraint];\r\n\t}\r\n\r\n\tupdate (dt) {\r\n\t\tif (!this.item) return;\r\n\t\tthis.updateLabels();\r\n\t\tthis.updatePictures();\r\n\t\tthis.updateNodes();\r\n\t}\r\n\r\n\t@autoUnitConvert\r\n\tupdateLabels() {\r\n\t\tthis.levelLabel.string = \"Lv.\" + this.item.level.level;\r\n\t\tthis.attackLabel.string = this.item.atk.toString();\r\n\t\tthis.defenseLabel.string = this.item.def.toString();\r\n\t\tthis.healthLabel.string = this.item.mhp.toString();\r\n\t\tif (this.item.level.isMax()) {\r\n\t\t\tthis.upgradeValueLabel.string = \"0\";\r\n\t\t\tthis.upgradeTipsLabel.string = \"\\\\L[SJob10]\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.item.level.breakEnable()) {\r\n\t\t\tthis.upgradeValueLabel.string =\r\n\t\t\t\tthis.item.break.costs().diamond.value.toString();\r\n\t\t\tthis.upgradeTipsLabel.string = \"\\\\L[SHero3]\";\r\n\t\t} else {\r\n\t\t\tthis.upgradeValueLabel.string =\r\n\t\t\t\tthis.item.level.costs().gold.value.toString();\r\n\t\t\tthis.upgradeTipsLabel.string = \"\\\\L[SJob3]\";\r\n\t\t}\r\n\t}\r\n\r\n\t@property([SpriteFrame])\r\n\tqualityPictures: SpriteFrame[] = [];\r\n\t@property([SpriteFrame])\r\n\tscissorsPictures: SpriteFrame[] = [];\r\n\t@property([SpriteFrame])\r\n\tbuttonPictures: SpriteFrame[] = [];\r\n\t@property([SpriteFrame])\r\n\tupgradeIcons: SpriteFrame[] = [];\r\n\r\n\tprivate static spacingX: number[] = [0, 0, -8, -18, -23];\r\n\tprivate static leftPending: number[] = [29, 12, 0, 0, 0];\r\n\r\n\tupdatePictures() {\r\n\t\tthis.upgradeIcon.spriteFrame = this.item.level.breakEnable() ?\r\n\t\t\tthis.upgradeIcons[0] : this.upgradeIcons[1];\r\n\t}\r\n\r\n\tupdateNodes() {\r\n\t\tconst enable = (this.item.level.breakEnable() &&\r\n\t\t\tthis.item.break.conditions().judge()) ||\r\n\t\t\tthis.item.level.conditions().judge();\r\n\r\n\t\tthis.upgradePicture.spriteFrame = this.buttonPictures[enable ? 0 : 1];\r\n\t\tthis.upgradeButton.interactable = enable;\r\n\r\n\t\tconst star = this.item.star.level;\r\n\t\tthis.starNodes.forEach((n, i) => { n.active = i < star; });\r\n\t\tthis.starLayout.paddingLeft = HeroItemDisplay.leftPending[star - 1];\r\n\t\tthis.starLayout.spacingX = HeroItemDisplay.spacingX[star - 1];\r\n\t}\r\n\r\n\tupgradeBtn() {\r\n\t\tif (this.item.level.breakEnable())\r\n\t\t\theroMgr().break(this.item).then();\r\n\t\telse\r\n\t\t\theroMgr().upgrade(this.item).then();\r\n\t}\r\n\r\n\tonAvatarClick() {\r\n\t\tbattleScene().cultivateWindow.open(this.item);\r\n\t}\r\n\r\n}\r\n","import {BaseManager, getManager, manager} from \"../../CoreModule/Managers/BaseManager\";\r\nimport {Web3NFTData} from \"../../NFTModule/Utils/Web3\";\r\nimport {\r\n\tchainId,\r\n\tChainId,\r\n\tDefaultBt1,\r\n\tDefaultBt2,\r\n\tnftMgr,\r\n\tnftMakeId2PartId\r\n} from \"../../NFTModule/Managers/NFTManager\";\r\nimport {HeroInterface} from \"../Common/HeroCommon\";\r\nimport {Hero, PartSetting} from \"../Data/Hero\";\r\nimport {DataLoader} from \"../../CoreModule/Utils/DataLoader\";\r\nimport {handleError} from \"../../CoreModule/Managers/AlertManager\";\r\nimport {heroTypeRepo} from \"../Data/HeroType\";\r\nimport {QualityType} from \"../Data/Quality\";\r\n\r\nexport const PageSize = 100;\r\n\r\nconst Web3NFTParamCount = 6;\r\n\r\nexport function heroMgr() {\r\n\treturn getManager(HeroManager);\r\n}\r\n\r\n@manager\r\nclass HeroManager extends BaseManager {\r\n\r\n\tpublic data = {};\r\n\r\n\t// region 从链上获取数据\r\n\r\n\t/**\r\n\t * 获取指定英雄\r\n\t */\r\n\tpublic async getOne(bt1: number, bt2: number,\r\n\t\t\t\t\t\t\t\t\t\t\tid: string, refresh?: boolean) {\r\n\t\tlet res = this.getCacheOne(bt1, bt2, id);\r\n\t\tif (!res || refresh)\r\n\t\t\tres = this.add(bt1, bt2, await nftMgr().getNFTDetail(id))\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取类别下的所有英雄（带缓存）\r\n\t */\r\n\tpublic async getList(bt1: number, bt2: number,\r\n\t\t\t\t\t\t\t\t\t\t\t refresh?: boolean) {\r\n\t\tlet res = this.getCacheList(bt1, bt2);\r\n\r\n\t\t// 如果没有缓存或者强制刷新\r\n\t\tif (!res || refresh) {\r\n\t\t\tconst cnt = await this.getCount(bt1, bt2);\r\n\t\t\tconst maxPage = Math.ceil(cnt.createCount / PageSize);\r\n\t\t\t//TODO: 获取 我 创建的英雄数量\r\n\r\n\t\t\tfor (let i = 1; i <= maxPage; i++)\r\n\t\t\t\tawait this.getListWithPage(bt1, bt2, i, refresh);\r\n\r\n\t\t\tres = this.getCacheList(bt1, bt2);\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 分页获取类别下的英雄（带缓存）\r\n\t * 其中page从1开始\r\n\t */\r\n\tpublic async getListWithPage(bt1: number, bt2: number,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t page: number, refresh?: boolean) {\r\n\t\tlet res = this.getCacheListWithPage(bt1, bt2, page);\r\n\r\n\t\t// 如果没有缓存、页面数据为空或强制刷新\r\n\t\tif (!res || res.length <= 0 || refresh) {\r\n\t\t\tlet tmp = await nftMgr().getMyNFTList(page, bt1, bt2, PageSize);\r\n\t\t\ttmp.forEach(d => this.add(bt1, bt2, d));\r\n\t\t\tres = this.getCacheList(bt1, bt2);\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取英雄个数\r\n\t */\r\n\tpublic async getCount(bt1: number, bt2: number) {\r\n\t\treturn await nftMgr().getNFTCount(bt1, bt2);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取缓存单个英雄数据\r\n\t */\r\n\tpublic getCacheOne(bt1: number, bt2: number, id: string) {\r\n\t\tconst list = this.getCacheList(bt1, bt2);\r\n\t\treturn list?.find(d => d.nftId == id);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取缓存列表数据\r\n\t */\r\n\tpublic getCacheList(bt1: number, bt2: number): Hero[] {\r\n\t\treturn this.data[this.getKey(bt1, bt2)];\r\n\t}\r\n\tpublic getCacheListWithPage(bt1: number, bt2: number, page: number): Hero[] {\r\n\t\tlet res = this.getCacheList(bt1, bt2);\r\n\t\treturn res?.splice(page * PageSize, (page + 1) * PageSize);\r\n\t}\r\n\tpublic getOrCreateCacheList(bt1: number, bt2: number): Hero[] {\r\n\t\treturn this.data[this.getKey(bt1, bt2)] ||= [];\r\n\t}\r\n\r\n\t/**\r\n\t * 添加英雄\r\n\t */\r\n\tprivate add(bt1: number, bt2: number, data: Web3NFTData) {\r\n\t\tconst id = data.tokenId;\r\n\t\tconst list = this.getOrCreateCacheList(bt1, bt2);\r\n\r\n\t\t// 获取缓存中单个数据\r\n\t\tlet res = this.getCacheOne(bt1, bt2, id);\r\n\t\t// 如果不存在数据，加到列表里\r\n\t\tif (!res) list.push(res = new Hero());\r\n\t\t// 转换数据\r\n\t\treturn this.convert(data, res);\r\n\t}\r\n\r\n\tprivate getKey(bt1: number, bt2: number) {\r\n\t\treturn bt1 + \"_\" + bt2;\r\n\t}\r\n\r\n\tpublic convert(data: Web3NFTData, res?: Hero): Hero {\r\n\t\tres ||= new Hero()\r\n\t\tres.bt1 = Number(data.seriesId) || DefaultBt1;\r\n\t\tres.bt2 = Number(data.gameId) || DefaultBt2;\r\n\t\tres.chainId = Number(data.chainId) as ChainId || chainId();\r\n\t\tres.nftId = data.tokenId.toString();\r\n\t\tres.name = data.tokenName;\r\n\t\tres.avatarUrl = data.tokenUrl;\r\n\t\tres.quality = QualityType.UR - Number(data.quality) + 1;\r\n\t\tres.price = nftMgr().convertPrice(data.currentPrice);\r\n\t\tres.creatorAccount = data.createAddress.toLowerCase();\r\n\t\tres.ownerAccount = data.ownerAddress.toLowerCase();\r\n\t\tres.addedParams = this.convertParams(data);\r\n\t\tres.partSettings = this.convertComponentIds(data.componentIds);\r\n\t\tres.heroTypeId = res.bodyPart.heroTypeId;\r\n\t\tres.rawData = data;\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tprivate convertParams(extra: Web3NFTData) {\r\n\t\tconst res = [];\r\n\t\tfor (let i = 1; i <= Web3NFTParamCount; i++)\r\n\t\t\t// 这里是从1开始，并没有转换为从0开始\r\n\t\t\tres[Number(extra[\"et\" + i])] = Number(extra[\"ef\" + i]) / 100;\r\n\t\treturn res;\r\n\t}\r\n\r\n\tprivate convertComponentIds(cidsStr: string) {\r\n\t\treturn cidsStr.split(\"-\").map(\r\n\t\t\tcid => PartSetting.create(nftMakeId2PartId(Number(cid))));\r\n\t}\r\n\r\n\t/**\r\n\t * 获取最新的NFT\r\n\t */\r\n\tpublic async getLastNFT(hash: string) {\r\n\t\tconst hero = await nftMgr().getLastestNFT(hash);\r\n\t\treturn this.convert(hero);\r\n\t}\r\n\r\n\tpublic async synchronizeAllHeroes(){\r\n\t\theroTypeRepo().list.forEach(t => {\r\n\t\t\tnftMgr().getMyNFTList(1, DefaultBt1, DefaultBt2, 9999).then(list => {\r\n\t\t\t\tlist.forEach(d => {\r\n\t\t\t\t\tlet hero = this.convert(d);\r\n\t\t\t\t\tHeroInterface.SyncHero({ hero }).then();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t})\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 从服务器获取数据\r\n\r\n\tprivate serverKey: string = \"server\";\r\n\r\n\t/**\r\n\t * 获取指定英雄\r\n\t */\r\n\tpublic async getOneFromServer(nftId: string, refresh?: boolean) {\r\n\t\tlet res = this.getCacheOneFromServer(nftId);\r\n\t\tif (!res || refresh)\r\n\t\t\tres = this.addFromServer(await this._getOneFromServer(nftId));\r\n\t\treturn res;\r\n\t}\r\n\r\n\tprivate async _getOneFromServer(nftId: string): Promise<Hero>{\r\n\t\tconst res =  await HeroInterface.GetHero({nftId});\r\n\t\treturn DataLoader.load(Hero, res['hero']);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取类别下的所有英雄（带缓存），默认会刷新缓存\r\n\t */\r\n\tpublic async getListFromServer(refresh: boolean = true) {\r\n\t\tlet res = this.getCacheListFromServer();\r\n\r\n\t\t// 如果没有缓存或者强制刷新\r\n\t\tif (!res || refresh) {\r\n\t\t\tconst cnt = await this.getCountFromServer();\r\n\t\t\tconst maxPage = Math.ceil(cnt / PageSize);\r\n\t\t\t// TODO: 获取 我 创建的英雄数量\r\n\r\n\t\t\tfor (let i = 0; i < maxPage; ++i)\r\n\t\t\t\tawait this.getListWithPageFromServer(i, refresh);\r\n\r\n\t\t\tres = this.getCacheListFromServer();\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tprivate async _getListFromServer(offset = 0, count = 1000): Promise<Hero[]>{\r\n\t\tconst res = await HeroInterface.GetHeroes({ offset, count });\r\n\t\tlet heroes: Hero[] = [];\r\n\t\tres['heroes'].forEach(hero => {\r\n\t\t\theroes.push(DataLoader.load(Hero, hero));\r\n\t\t})\r\n\t\treturn heroes;\r\n\t}\r\n\r\n\t/**\r\n\t * 分页获取类别下的英雄（带缓存）\r\n\t * 其中page从1开始\r\n\t */\r\n\tpublic async getListWithPageFromServer(page: number, refresh?: boolean) {\r\n\t\tlet res = this.getCacheListWithPageFromServer(page);\r\n\r\n\t\t// 如果没有缓存、页面数据为空或强制刷新\r\n\t\tif (!res || res.length <= 0 || refresh) {\r\n\t\t\tlet tmp = await this._getListFromServer(page * PageSize, PageSize);\r\n\t\t\ttmp.forEach(d => this.addFromServer(d));\r\n\t\t\tres = this.getCacheListFromServer();\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取英雄个数\r\n\t */\r\n\tpublic async getCountFromServer() {\r\n\t\treturn this._getCountFromServer();\r\n\t}\r\n\r\n\tprivate async _getCountFromServer(): Promise<number>{\r\n\t\tconst res =  await HeroInterface.GetHeroCount();\r\n\t\treturn res['count'];\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * 获取缓存单个英雄数据\r\n\t */\r\n\tpublic getCacheOneFromServer(nftId: string) {\r\n\t\tconst list = this.getCacheListFromServer();\r\n\t\treturn list?.find(d => d.nftId == nftId);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取缓存列表数据\r\n\t */\r\n\tpublic getCacheListFromServer(): Hero[] {\r\n\t\treturn this.data[this.serverKey];\r\n\t}\r\n\tpublic getCacheListWithPageFromServer(page: number): Hero[] {\r\n\t\tlet res = this.getCacheListFromServer();\r\n\t\t// return res?.splice(page * PageSize, (page + 1) * PageSize);\r\n\t\treturn res?.slice(page * PageSize, (page + 1) * PageSize);\r\n\t}\r\n\tpublic getOrCreateCacheListFromServer(): Hero[] {\r\n\t\treturn this.data[this.serverKey] ||= [];\r\n\t}\r\n\r\n\t/**\r\n\t * 添加英雄\r\n\t */\r\n\tprivate addFromServer(data: Hero) {\r\n\t\tconst list = this.getOrCreateCacheListFromServer();\r\n\t\t// 获取缓存中单个数据\r\n\t\tlet res = this.getCacheOneFromServer(data.nftId);\r\n\t\t// 如果不存在数据，加到列表里\r\n\t\tif (!res) list.push((res = data));\r\n\t\t// 转换数据\r\n\t\treturn res;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 游戏内英雄数据操作\r\n\r\n\t@handleError\r\n\tpublic async upgrade(hero: Hero) {\r\n\t\tawait HeroInterface.UpgradeLevel({nftId: hero.nftId});\r\n\t\thero.level.conditions().process();\r\n\t\thero.level.upgrade();\r\n\t}\r\n\r\n\t@handleError\r\n\tpublic async break(hero: Hero) {\r\n\t\tawait HeroInterface.BreakLevel({nftId: hero.nftId});\r\n\t\thero.break.conditions().process();\r\n\t\thero.break.upgrade();\r\n\t}\r\n\r\n\t@handleError\r\n \tpublic async strengthen(hero: Hero) {\r\n\t\tawait HeroInterface.UpgradeStrengthen({nftId: hero.nftId});\r\n\t\thero.strengthen.conditions().process();\r\n\t\thero.strengthen.upgrade();\r\n\t}\r\n\r\n\t@handleError\r\n\tpublic async starUp(hero: Hero) {\r\n\t\tawait HeroInterface.UpgradeStar({nftId: hero.nftId});\r\n\t\thero.star.conditions().process();\r\n\t\thero.star.upgrade();\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n\r\n","import Node = cc.Node;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroPageController extends cc.Component {\r\n\r\n    @property([Node])\r\n    pages: Node[] = [];\r\n    @property([Node])\r\n    titles: Node[] = [];\r\n\r\n    protected onEnable() {\r\n        this.onStateChange();\r\n    }\r\n\r\n    backBtn() {\r\n        this.state = 0;\r\n        this.onStateChange();\r\n    }\r\n\r\n    teamBtn() {\r\n        this.state = 1;\r\n        this.onStateChange();\r\n    }\r\n\r\n    bagBtn() {\r\n        this.state = 2;\r\n        this.onStateChange();\r\n    }\r\n\r\n    private state: number = 0;\r\n\r\n    onStateChange() {\r\n        this.pages.forEach((n, i) => { n.active = i == this.state; });\r\n        this.titles.forEach((n, i) => { n.active = i == this.state; });\r\n    }\r\n\r\n}\r\n","import {SelectableGroup} from \"../../../../CoreModule/Components/SelectableGroup\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroQualitySiftSelectionGroup extends SelectableGroup {\r\n\r\n}\r\n","import {SelectableObject} from \"../../../../CoreModule/Components/SelectableObject\";\r\nimport HeroCompositingContainer from \"./HeroCompositingContainer\";\r\nimport Sprite = cc.Sprite;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport LabelOutline = cc.LabelOutline;\r\nimport Color = cc.Color;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroQualitySiftSelection extends SelectableObject {\r\n\r\n    @property(Number)\r\n    quality: number = -1;\r\n    @property(Sprite)\r\n    picture: Sprite = null;\r\n    @property(LabelOutline)\r\n    outline: LabelOutline = null;\r\n    @property([SpriteFrame])\r\n    pictures: SpriteFrame[] = [];\r\n    public container: HeroCompositingContainer = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    // update (dt) {}\r\n\r\n    onDeselected(): void {\r\n        this.picture.spriteFrame = this.pictures[1];\r\n        this.outline.color = new Color(104, 104, 104);\r\n    }\r\n\r\n    onSelected(): void {\r\n        this.picture.spriteFrame = this.pictures[0];\r\n        this.outline.color = new Color(134, 118, 79);\r\n        this.container?.onSelectionChange();\r\n    }\r\n\r\n}\r\n","import {waitForDataLoad} from \"../../../CoreModule/Managers/DataManager\";\r\nimport {playerMgr, waitForLogin} from \"../../../PlayerModule/Managers/PlayerManager\";\r\nimport {Hero} from \"../../../HeroModule/Data/Hero\";\r\nimport {ScrollviewFilter} from \"../../../CoreModule/Utils/ScrollviewFilter\";\r\nimport {ItemContainer} from \"../../../CoreModule/Components/ItemContainer\";\r\nimport HeroSelectDisplay from \"./HeroSelectDisplay\";\r\nimport Node = cc.Node;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroSelectContainer extends ItemContainer<Hero, HeroSelectDisplay> {\r\n\r\n    start () {\r\n        this.setup().then();\r\n    }\r\n\r\n    @waitForDataLoad\r\n    @waitForLogin\r\n    private async setup() {\r\n        const acc = playerMgr().player.account;\r\n        let items: Hero[] = (await heroMgr().getListFromServer()).filter(h => h.ownerAccount == acc);\r\n        this.setItems(items);\r\n    }\r\n\r\n    update (dt) {\r\n    }\r\n\r\n    onItemsChanged() {\r\n        super.onItemsChanged();\r\n        let nodes : Node[] = [];\r\n        this.itemsComponents.forEach(item => { if(item.node.active == true) nodes.push(item.node) })\r\n        ScrollviewFilter.filter(\"vertical\", this.container, nodes, 5, this.node.height, 170);\r\n        battleScene().currentPVPSelect = this.items[0];\r\n        battleScene().heroSelected = true;\r\n    }\r\n}\r\n\r\nimport {heroMgr} from \"../../../HeroModule/Managers/HeroManager\";\r\nimport {battleScene} from \"../../../../Scenes/BattleScene\";\r\n","import Label = cc.Label;\r\nimport Sprite = cc.Sprite;\r\nimport Button = cc.Button;\r\nimport Node = cc.Node;\r\nimport Layout = cc.Layout;\r\nimport {autoUnitConvert} from \"../../../../Utils/NumberUtils\";\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport {battleScene} from \"../../../../Scenes/BattleScene\";\r\nimport HeroWithAvatar from \"../HeroWithAvatar\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroSelectDisplay extends HeroWithAvatar {\r\n\r\n    @property(Label)\r\n    nameLabel: Label = null;\r\n    @property(Label)\r\n    levelLabel: Label = null;\r\n    @property(Label)\r\n    qualityLabel: Label = null;\r\n\r\n    @property(Label)\r\n    attackLabel: Label = null;\r\n    @property(Label)\r\n    defenseLabel: Label = null;\r\n    @property(Label)\r\n    healthLabel: Label = null;\r\n\r\n    @property(Sprite)\r\n    qualityBackground: Sprite = null;\r\n    @property(Sprite)\r\n    scissorsIcon: Sprite = null;\r\n    @property(Node)\r\n    selectNode: Node = null;\r\n    private selectPicture: Sprite = null;\r\n    private selectButton: Button = null;\r\n    @property([Node])\r\n    starNodes: Node[] = [];\r\n    @property(Layout)\r\n    starLayout: Layout = null;\r\n    @property(Node)\r\n    selectFrame: Node = null;\r\n\r\n    start () {\r\n        this.setup();\r\n    }\r\n\r\n    private setup() {\r\n        this.selectPicture = this.selectNode.getComponent(Sprite);\r\n        this.selectButton = this.selectNode.getComponent(Button);\r\n    }\r\n\r\n    protected onItemChanged() {\r\n        super.onItemChanged();\r\n        this.nameLabel.string = this.item.name;\r\n        this.qualityLabel.string = this.item.qualityData.shortName;\r\n        this.qualityBackground.spriteFrame = this.qualityPictures[this.item.quality];\r\n        this.scissorsIcon.spriteFrame = this.scissorsPictures[this.item.restraint];\r\n    }\r\n\r\n    update (dt) {\r\n        if (!this.item) return;\r\n        this.updateLabels();\r\n        this.updatePictures();\r\n        this.updateNodes();\r\n    }\r\n\r\n    @autoUnitConvert\r\n    updateLabels() {\r\n        this.levelLabel.string = \"Lv.\" + this.item.level.level;\r\n        this.attackLabel.string = this.item.atk.toString();\r\n        this.defenseLabel.string = this.item.def.toString();\r\n        this.healthLabel.string = this.item.mhp.toString();\r\n    }\r\n\r\n    @property([SpriteFrame])\r\n    qualityPictures: SpriteFrame[] = [];\r\n    @property([SpriteFrame])\r\n    scissorsPictures: SpriteFrame[] = [];\r\n    @property([SpriteFrame])\r\n    buttonPictures: SpriteFrame[] = [];\r\n\r\n    private static spacingX: number[] = [0, 0, -8, -18, -23];\r\n    private static leftPending: number[] = [29, 12, 0, 0, 0];\r\n\r\n    updatePictures() {\r\n\r\n    }\r\n\r\n    updateNodes() {\r\n        if (this.item.level.level > battleScene().currentPVPRoomIndex * 20) {\r\n            this.selectPicture.spriteFrame = this.buttonPictures[0];\r\n            this.selectButton.interactable = true;\r\n        } else {\r\n            this.selectPicture.spriteFrame = this.buttonPictures[1];\r\n            this.selectButton.interactable = false;\r\n        }\r\n        this.starNodes.forEach((n, i) => { n.active = i < this.item.star.level; });\r\n        this.starLayout.paddingLeft = HeroSelectDisplay.leftPending[this.item.star.level - 1];\r\n        this.starLayout.spacingX = HeroSelectDisplay.spacingX[this.item.star.level - 1];\r\n        this.selectFrame.active = battleScene().currentPVPSelect == this.item;\r\n    }\r\n\r\n    selectBtn() {\r\n        battleScene().currentPVPSelect = this.item;\r\n        battleScene().heroSelected = true;\r\n    }\r\n\r\n    onAvatarClick() {\r\n        battleScene().cultivateWindow.open(this.item);\r\n    }\r\n}\r\n","import {BaseConfig, config} from \"../../CoreModule/Data/BaseConfig\";\r\nimport {field} from \"../../CoreModule/Data/BaseData\";\r\n\r\n@config(\"HeroSystemConfig\")\r\nexport class HeroSystemConfig extends BaseConfig {\r\n\r\n\t// 基本属性计算\r\n\t@field\r\n\tparamCalc: any = {};\r\n\r\n\t@field\r\n\tlevel: any = {};\r\n\t@field\r\n\tbreak: any = {};\r\n\t@field\r\n\tstrengthen: any = {};\r\n\t@field\r\n\tstar: any = {};\r\n\r\n}\r\n","import {Hero} from \"./Hero\";\r\nimport {BaseData, field} from \"../../CoreModule/Data/BaseData\";\r\nimport {cFun, cGte, ConditionGroup, ConditionType} from \"../../PlayerModule/Data/Condition\";\r\nimport {HeroSystemConfig} from \"../Configs/HeroSystemConfig\";\r\nimport {ParamType} from \"./Param\";\r\nimport {MathUtils} from \"../../../Utils/MathUtils\";\r\nimport {config} from \"../../CoreModule/Data/BaseConfig\";\r\nimport {configMgr} from \"../../CoreModule/Managers/ConfigManager\";\r\n\r\nexport abstract class HeroSystem extends BaseData {\r\n\r\n\t@field\r\n\tpublic level: number = 0;\r\n\r\n\thero: Hero\r\n\r\n\tconstructor(index, parent) {\r\n\t\tsuper(index);\r\n\t\tthis.hero = parent;\r\n\t}\r\n\r\n\tonCreated() {\r\n\t\tsuper.onCreated();\r\n\t\tthis.level = MathUtils.clamp(this.level, this.minLevel, this.maxLevel);\r\n\t}\r\n\r\n\t// region 基本配置\r\n\r\n\tpublic get minLevel(): number { return 0; }\r\n\tpublic abstract get maxLevel(): number\r\n\r\n\tprotected get affectParams(): ParamType[] { return []; }\r\n\r\n\t// endregion\r\n\r\n\t// region 条件\r\n\r\n\tpublic isMax() { return this.level >= this.maxLevel; }\r\n\tpublic isMin() { return this.level <= this.minLevel; }\r\n\r\n\t// endregion\r\n\r\n\t// region 升级\r\n\r\n\tpublic abstract costs();\r\n\r\n\tpublic conditions() {\r\n\t\treturn ConditionGroup.create(\r\n\t\t\tcFun(() => this.level < this.maxLevel),\r\n\t\t\tthis.costs()\r\n\t\t);\r\n\t}\r\n\r\n\tpublic upgrade() {\r\n\t\tthis.level = Math.min(this.level + 1, this.maxLevel);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 属性计算\r\n\r\n\tpublic calc(val, paramId: ParamType) {\r\n\t\t// 如果 this.affectParams 的长度为 0，对所有属性都生效\r\n\t\tif (this.affectParams.length == 0 ||\r\n\t\t\tthis.affectParams.includes(paramId))\r\n\t\t\treturn this.doCalc(val, paramId);\r\n\t\treturn val;\r\n\t}\r\n\r\n\tprotected abstract doCalc(val, paramId: ParamType);\r\n\r\n\t// endregion\r\n\r\n}\r\n\r\nexport abstract class ConfigurableHeroSystem extends HeroSystem {\r\n\r\n\tabstract get systemName();\r\n\tprotected get config() {\r\n\t\treturn configMgr().config(HeroSystemConfig)[this.systemName]\r\n\t}\r\n\r\n\tpublic get minLevel(): number { return this.config.min; }\r\n\tpublic get maxLevel(): number { return this.config.max; }\r\n\r\n\tprotected get affectParams(): ParamType[] {\r\n\t\treturn Object.keys(this.config.params).map(k => Number.parseInt(k));\r\n\t}\r\n\r\n\tpublic costs() {\r\n\t\tconst res = new ConditionGroup();\r\n\r\n\t\tfor (const key in this.config.cost) {\r\n\t\t\tconst formula = this.config.cost[key];\r\n\t\t\tconst val = this.eval(formula);\r\n\t\t\tval && res.add(cGte(key as ConditionType, val));\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tprotected doCalc(val, paramId: ParamType) {\r\n\t\tconst formula = this.config.params[paramId];\r\n\t\tconst res = this.eval(formula, val);\r\n\t\treturn res === undefined ? val : res;\r\n\t}\r\n\r\n\tprotected eval(formula, val?) {\r\n\t\tconst i = this.level, c = this.config;\r\n\t\ttry {\r\n\t\t\treturn eval(formula);\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(\"属性计算错误！\", this, val, formula, e);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class LevelData extends ConfigurableHeroSystem {\r\n\r\n\t@field\r\n\tpublic curMaxLevel: number =\r\n\t\tconfigMgr().config(HeroSystemConfig).level.defaultMax;\r\n\r\n\tget systemName() { return \"level\"; }\r\n\r\n\tconditions(): ConditionGroup {\r\n\t\treturn ConditionGroup.create(\r\n\t\t\tcFun(() => this.level < this.curMaxLevel),\r\n\t\t\tsuper.conditions()\r\n\t\t)\r\n\t}\r\n\r\n\tpublic upgrade() {\r\n\t\tif (this.level >= this.curMaxLevel) return;\r\n\t\tsuper.upgrade();\r\n\t}\r\n\r\n\tpublic breakEnable() {\r\n\t\treturn this.level >= this.curMaxLevel && this.curMaxLevel <= this.maxLevel\r\n\t}\r\n\r\n\tpublic break() {\r\n\t\tthis.curMaxLevel = Math.min(this.maxLevel, this.curMaxLevel +\r\n\t\t\tconfigMgr().config(HeroSystemConfig).break.breakLevel);\r\n\t}\r\n\r\n}\r\nexport class BreakData extends ConfigurableHeroSystem {\r\n\r\n\tget systemName() { return \"break\" }\r\n\r\n\tprivate get heroLevel() { return this.hero.level; }\r\n\r\n\tconditions(): ConditionGroup {\r\n\t\treturn ConditionGroup.create(\r\n\t\t\tcFun(() => this.heroLevel.breakEnable()),\r\n\t\t\tsuper.conditions()\r\n\t\t);\r\n\t}\r\n\r\n\tupgrade() {\r\n\t\tsuper.upgrade();\r\n\t\tthis.hero.level.break();\r\n\t}\r\n\r\n}\r\nexport class StrengthenData extends ConfigurableHeroSystem {\r\n\r\n\tget systemName() { return \"strengthen\" }\r\n\r\n}\r\n\r\nexport class StarData extends ConfigurableHeroSystem {\r\n\r\n\tget systemName() { return \"star\" }\r\n\r\n\tprivate get costConfig() {\r\n\t\treturn this.config.costTable[this.hero.quality][this.level - 1];\r\n\t}\r\n\tprivate get paramConfig() {\r\n\t\treturn this.config.paramTable[this.hero.quality][this.level - 1];\r\n\t}\r\n\r\n\tprotected get affectParams(): ParamType[] {\r\n\t\treturn !this.paramConfig ? [] :\r\n\t\t\tObject.keys(this.paramConfig).map(k => Number.parseInt(k));\r\n\t}\r\n\r\n\tprotected doCalc(val, paramId: ParamType) {\r\n\t\treturn val + (this.paramConfig?.[paramId] || 0);\r\n\t}\r\n\r\n\tpublic costs() {\r\n\t\tconst res = new ConditionGroup();\r\n\r\n\t\tif (!this.costConfig) return res;\r\n\t\tfor (const key in this.costConfig)\r\n\t\t\tres.add(cGte(key as ConditionType, this.costConfig[key]));\r\n\r\n\t\treturn res;\r\n\t}\r\n}\r\n","import {ItemContainer} from \"../../../../Modules/CoreModule/Components/ItemContainer\";\r\nimport {HeroType, heroTypeRepo} from \"../../../../Modules/HeroModule/Data/HeroType\";\r\nimport HeroTypeDisplay from \"../ItemPrefabs/HeroTypeDisplay\";\r\nimport HeroTypeSelection from \"../ItemPrefabs/HeroTypeSelection\";\r\nimport HeroTypeSelectionGroup from \"./HeroTypeSelectionGroup\";\r\nimport PartsContainer from \"./PartsContainer\";\r\nimport {waitForLogin} from \"../../../../Modules/PlayerModule/Managers/PlayerManager\";\r\nimport {waitForDataLoad} from \"../../../../Modules/CoreModule/Managers/DataManager\";\r\nimport {ScrollviewFilter} from \"../../../../Modules/CoreModule/Utils/ScrollviewFilter\";\r\nimport Node = cc.Node;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroTypeContainer extends ItemContainer<HeroType, HeroTypeDisplay> {\r\n\r\n\t@property(PartsContainer)\r\n\tpartsContainer: PartsContainer = null;\r\n\r\n\tselectionGroup: HeroTypeSelectionGroup = null;\r\n\r\n\t//region 更新控制\r\n\r\n\t@waitForDataLoad\r\n\tprotected start() {\r\n\t\tthis.setItems(heroTypeRepo().list);\r\n\t}\r\n\r\n\tprotected update(dt: number) {\r\n\t\tthis.itemsComponents.forEach(i => i.node.active ? i.size = this.container.width / this.items.length : null);\r\n\t\t// let nodes : Node[] = [];\r\n\t\t// this.itemsComponents.forEach(item => { if(item.node.active == true) nodes.push(item.node) })\r\n\t\t// ScrollviewFilter.filter(\"horizontal\", this.container, nodes, 10, this.node.width);\r\n\t}\r\n\r\n\tprivate updateSelectionGroup(){\r\n\t\tthis.selectionGroup = new HeroTypeSelectionGroup(false)\r\n\t\tthis.itemsComponents.forEach(item => {\r\n\t\t\tlet selection = item.node.getComponent(HeroTypeSelection)\r\n\t\t\tselection.display = selection.getComponent(HeroTypeDisplay)\r\n\t\t\tselection.container = this;\r\n\t\t\tthis.selectionGroup.addElement(selection);\r\n\t\t})\r\n\t}\r\n\r\n\t//endregion\r\n\r\n\t//region 回调控制\r\n\r\n\tonItemsChanged() {\r\n\t\tsuper.onItemsChanged();\r\n\t\tthis.updateSelectionGroup();\r\n\t}\r\n\r\n\tasync onSelectChanged(item: HeroTypeDisplay){\r\n\t\tthis.partsContainer.currentHeroType = item.item;\r\n\t\tawait this.partsContainer.onHeroTypeChange();\r\n\t\tawait this.partsContainer.onTypeChange();\r\n\t}\r\n\r\n\t//endregion\r\n\r\n}\r\n","import {ItemDisplay} from \"../../../../Modules/CoreModule/Components/ItemDisplay\";\r\nimport Label = cc.Label;\r\nimport Node = cc.Node;\r\nimport {HeroType} from \"../../../../Modules/HeroModule/Data/HeroType\";\r\nimport Color = cc.Color;\r\nimport {selectorScene} from \"../../SelectorScene\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroTypeDisplay extends ItemDisplay<HeroType> {\r\n\r\n\t@property(Label)\r\n\tlabel: Label = null;\r\n\t@property(Node)\r\n\tbackground: Node = null;\r\n\r\n\tpublic size: number = 0;\r\n\r\n\tprivate isSelected: boolean = false;\r\n\r\n\tstart () { }\r\n\r\n\t//region 更新控制\r\n\r\n\trefresh() {\r\n\t\tsuper.refresh();\r\n\t\tif(this.item == null) return;\r\n\t\tthis.isSelected = false;\r\n\t\tthis.label.string = this.item.getDisplayName();\r\n\t\tif (selectorScene().editorMode)\r\n\t\t\tthis.label.string = `${this.item.id} ${this.label.string}`;\r\n\t}\r\n\r\n\tprotected update(dt: number) {\r\n\t\tthis.node.width = Math.max(this.size, 50);\r\n\t\tthis.label.node.color = this.isSelected ? new Color(255, 255, 255) : new Color(159, 157, 180);\r\n\t\tthis.background.opacity = this.isSelected ? 255 : 0;\r\n\t}\r\n\r\n\t//endregion\r\n\r\n\t//region 回调控制\r\n\r\n\tpublic onSelectChanged(select: boolean){\r\n\t\tthis.isSelected = select;\r\n\t}\r\n\r\n\t//endregion\r\n\r\n}\r\n","import {SelectableGroup} from \"../../../../Modules/CoreModule/Components/SelectableGroup\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroTypeSelectionGroup extends SelectableGroup {\r\n\r\n}\r\n","import {SelectableObject} from \"../../../../Modules/CoreModule/Components/SelectableObject\";\r\nimport HeroTypeDisplay from \"./HeroTypeDisplay\";\r\nimport HeroTypeContainer from \"../ItemContainers/HeroTypeContainer\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HeroTypeSelection extends SelectableObject {\r\n\r\n    display: HeroTypeDisplay = null;\r\n    container: HeroTypeContainer = null;\r\n\r\n    //region 回调控制\r\n\r\n    onDeselected(): void {\r\n        this.display.onSelectChanged(false);\r\n    }\r\n\r\n    onSelected(): void {\r\n        this.display.onSelectChanged(true);\r\n        this.container.onSelectChanged(this.display).then();\r\n    }\r\n\r\n    //endregion\r\n\r\n}\r\n","import {BundleName} from \"../../CoreModule/Managers/AssetBundleManager\";\r\nimport {assetField, field} from \"../../CoreModule/Data/BaseData\";\r\nimport {DefaultBt1, DefaultBt2} from \"../../NFTModule/Managers/NFTManager\";\r\nimport {BaseRepository, getRepository, repository} from \"../../CoreModule/Data/BaseRepository\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {partRepo} from \"./Part\";\r\nimport {data, StaticData} from \"../../CoreModule/Data/StaticData\";\r\nimport SkeletonData = sp.SkeletonData;\r\n\r\nexport enum HeroRace {\r\n\tRace0, Race1, Race2, Race3, None\r\n}\r\n\r\n@data(\"HeroType\")\r\nexport class HeroType extends StaticData {\r\n\r\n\t@field\r\n\tpublic bt1: number = DefaultBt1;\r\n\t@field\r\n\tpublic bt2: number = DefaultBt2;\r\n\r\n\t// @field\r\n\t// public name: string = \"\";\r\n\r\n\t@field\r\n\tpublic race: HeroRace = HeroRace.Race0;\r\n\r\n\t@field\r\n\tpublic scale: number = 1;\r\n\r\n\t@field([Number])\r\n\tpublic defaultParts: number[] = [];\r\n\t@field(String)\r\n\tpublic defaultSkeletonName: string = null;\r\n\r\n\t@field\r\n\tpublic createEnable: boolean = true;\r\n\r\n\t@assetField(SkeletonData, BundleName.Sprites,\r\n\t\t\"parts/${defaultSkeletonName}\")\r\n\tpublic defaultSkeleton: SkeletonData;\r\n\r\n\tpublic getDefaultParts() {\r\n\t\treturn partRepo().list.filter( p => this.defaultParts.indexOf(p.id) >= 0);\r\n\t\t// const types = partTypeRepo().list; // DataUtils.partTypes();\r\n\t\t// return types.filter(t => this.defaultParts.indexOf(t.id) >= 0);\r\n\t}\r\n\r\n}\r\n\r\nexport function heroTypeRepo() {\r\n\treturn getRepository(HeroTypeRepo);\r\n}\r\n\r\n@repository\r\nexport class HeroTypeRepo extends BaseRepository<HeroType> {\r\n\r\n\tget clazz(): Constructor<HeroType> { return HeroType; }\r\n\r\n}\r\n","import {ItemDisplay} from \"../../CoreModule/Components/ItemDisplay\";\r\nimport {Hero} from \"../../HeroModule/Data/Hero\";\r\nimport {HeroSkeleton} from \"../../../Utils/SpineUtils\";\r\nimport ccclass = cc._decorator.ccclass;\r\nimport property = cc._decorator.property;\r\nimport Skeleton = sp.Skeleton;\r\nimport Node = cc.Node;\r\nimport Bone = sp.spine.Bone;\r\nimport Slot = sp.spine.Slot;\r\nimport instantiate = cc.instantiate;\r\nimport BattleScene, {battleScene} from \"../../../Scenes/BattleScene\";\r\n\r\n@ccclass\r\nexport default class HeroWithAvatar extends ItemDisplay<Hero> {\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    protected onItemChanged() {\r\n        super.onItemChanged();\r\n        this.drawAvatar();\r\n    }\r\n\r\n    // region 头像绘制\r\n\r\n    @property(Skeleton)\r\n    avatar: Skeleton = null;\r\n\r\n    @property(Number)\r\n    size: number = 100;\r\n\r\n    private avatarHeight: number = 0;\r\n    private avatarWidth: number = 0;\r\n    private avatarOffsetX: number = 0;\r\n    private avatarOffsetY: number = 0;\r\n\r\n    private drawAvatar(){\r\n        this.avatar.node.scale = 0;\r\n        let loading = instantiate(battleScene().loading);\r\n        loading.parent = this.avatar.node.parent;\r\n        loading.scale = this.size / loading.width * 0.7;\r\n        let node = new Node('node');\r\n        let temp = node.addComponent(Skeleton);\r\n        let hero = new HeroSkeleton(this.avatar, temp, this.item.heroTypeId);\r\n        this.item.parts.forEach(part => { hero.addPart(part); });\r\n        hero.refresh().then(res => {\r\n            node.destroy();\r\n            let bone: Bone = hero.findBone(\"head_1\");\r\n\r\n            hero.skeleton.updateWorldTransform();\r\n            let offsetX = bone.worldX, offsetY = bone.worldY;\r\n            while (bone.parent) bone = bone.parent;\r\n            bone.x -= offsetX;\r\n            bone.y -= offsetY;\r\n\r\n            let slot: Slot = hero.findSlot(\"head_1\");\r\n            if (!slot.getAttachment()) return;\r\n            this.avatarHeight = slot.getAttachment()[\"height\"];\r\n            this.avatarWidth = slot.getAttachment()[\"width\"];\r\n            this.avatarOffsetY = slot.getAttachment()[\"x\"];\r\n            this.avatarOffsetX = slot.getAttachment()[\"y\"];\r\n            this.sizeFilter();\r\n            loading.destroy();\r\n        });\r\n    }\r\n\r\n    private sizeFilter() {\r\n        let k = Math.min(this.avatarWidth / this.size, this.avatarHeight / this.size);\r\n        k *= 1.2;\r\n        // this.avatar.node.x = - this.avatarOffsetX / k;\r\n        this.avatar.node.y = - this.avatarOffsetY / k;\r\n        if (k > 1) this.avatar.node.scale = 1 / k;\r\n        else this.avatar.node.scale = 1;\r\n    }\r\n\r\n    // endregion\r\n\r\n}\r\n","import {DynamicData} from \"../../CoreModule/Data/DynamicData\";\r\nimport {Web3NFTData} from \"../../NFTModule/Utils/Web3\";\r\nimport {ChainId, DefaultBt1, DefaultBt2, DefaultChainId} from \"../../NFTModule/Managers/NFTManager\";\r\nimport {qualityRepo, QualityType} from \"./Quality\";\r\nimport {Part, partRepo} from \"./Part\";\r\nimport {heroTypeRepo} from \"./HeroType\";\r\nimport {BreakData, LevelData, StarData, StrengthenData} from \"./HeroSystem\";\r\nimport {BaseData, dataPK, field} from \"../../CoreModule/Data/BaseData\";\r\nimport {paramRepo, ParamType} from \"./Param\";\r\nimport {MathUtils} from \"../../../Utils/MathUtils\";\r\nimport {IEntity} from \"../../BattleModule/Data/Battler\";\r\nimport {configMgr} from \"../../CoreModule/Managers/ConfigManager\";\r\nimport {HeroSystemConfig} from \"../Configs/HeroSystemConfig\";\r\nimport {SpecialPartType} from \"./PartType\";\r\n\r\nexport enum HeroState {\r\n\tNotCreated, Created, Destroyed\r\n}\r\n\r\nexport enum RestraintType {\r\n\t// Red: 布, Green: 石头，Blue: 剪刀\r\n\t// 0 克制 1, 1 克制 2, 2 克制 0\r\n\t// 判断克制方式：(x + 1) % 3 == y => x 克制 y\r\n\t// 判断被克制方式：(x + 2) % 3 == y => x 被 y 克制\r\n\tRed, Green, Blue\r\n}\r\n\r\nexport const SuitPattern = [\r\n\t[[1,1,1,1,1]],[[2,1,1,1]],[[2,2,1],[3,1,1]],[[4,1],[3,2]],[[5]]\r\n]\r\n\r\nexport class PartSetting extends BaseData {\r\n\r\n\t@field(Number)\r\n\tpublic partId: number;\r\n\t@field\r\n\tpublic scale: number = 1;\r\n\r\n\tprivate _part;\r\n\tpublic part() {\r\n\t\treturn this._part ||= partRepo().getById(this.partId);\r\n\t}\r\n\r\n\t/**\r\n\t * 创建\r\n\t */\r\n\tpublic static create(partId: number, scale: number = 1) {\r\n\t\tconst res = new PartSetting();\r\n\t\tres.partId = partId;\r\n\t\tres.scale = scale;\r\n\t\treturn res;\r\n\t}\r\n}\r\n\r\nexport class Hero extends DynamicData implements IEntity {\r\n\r\n\t@field @dataPK\r\n\tpublic nftId: string = \"\";\r\n\r\n\t@field\r\n\tpublic bt1: number = DefaultBt1;\r\n\t@field\r\n\tpublic bt2: number = DefaultBt2;\r\n\t@field\r\n\tpublic chainId: ChainId = DefaultChainId; // 链ID\r\n\t@field(Number)\r\n\tpublic heroTypeId: number;\r\n\r\n\t@field(String)\r\n\tpublic creatorAccount: string;\r\n\t@field(String)\r\n\tpublic ownerAccount: string;\r\n\t@field(String)\r\n\tpublic name: string;\r\n\t@field(String)\r\n\tpublic avatarUrl: string;\r\n\t@field(String)\r\n\tpublic description: string;\r\n\r\n\t@field(LevelData)\r\n\tpublic level: LevelData;\r\n\t@field(BreakData)\r\n\tpublic break: BreakData;\r\n\t@field(StrengthenData)\r\n\tpublic strengthen: StrengthenData;\r\n\t@field(StarData)\r\n\tpublic star: StarData;\r\n\r\n\t@field(Number)\r\n\tpublic quality: QualityType;\r\n\t@field\r\n\tpublic restraint: RestraintType = RestraintType.Red;\r\n\t@field\r\n\tpublic variation: boolean = false;\r\n\t@field(Number)\r\n\tpublic rank: number;\r\n\r\n\t@field([Number])\r\n\tpublic params: number[] = [];\r\n\t@field([Number])\r\n\tpublic addedParams: number[] = [];\r\n\r\n\t@field([Number])\r\n\tpublic skillIds: number[] = [];\r\n\t// @field([Trait])\r\n\t// public traits: Trait[] = [];\r\n\r\n\t@field([Number])\r\n\tpublic suitPattern: number[] = [];\r\n\t@field([PartSetting])\r\n\tpublic partSettings: PartSetting[] = [];\r\n\t@field(Number)\r\n\tpublic createdAt: number;\r\n\r\n\t@field\r\n\tpublic price: number = 0;\r\n\r\n\t@field\r\n\tpublic state: HeroState = HeroState.NotCreated;\r\n\r\n\t@field(Object)\r\n\tpublic rawData: Web3NFTData;\r\n\r\n\tonCreated() {\r\n\t\tsuper.onCreated();\r\n\t\tthis.initHeroSystems();\r\n\t}\r\n\r\n\t// region 组件数据\r\n\r\n\t/**\r\n\t * 英雄类型\r\n\t */\r\n\tpublic get heroType() {\r\n\t\treturn heroTypeRepo().getById(this.heroTypeId);\r\n\t}\r\n\r\n\t/**\r\n\t * 骨骼\r\n\t */\r\n\tpublic get skeleton() {\r\n\t\treturn this.heroType?.defaultSkeleton;\r\n\t}\r\n\r\n\t/**\r\n\t * 部件列表\r\n\t */\r\n\tprivate _parts: Part[];\r\n\tpublic get parts() {\r\n\t\treturn this._parts ||= this.partSettings.map(\r\n\t\t\tps => partRepo().getById(ps.partId)) // DataUtils.part(pid, \"id\"));\r\n\t}\r\n\r\n\t/**\r\n\t * 特殊部件\r\n\t */\r\n\tpublic get bodyPart() {\r\n\t\treturn this.parts.find(p => p.partType.special === SpecialPartType.Body)\r\n\t}\r\n\tpublic get weaponPart() {\r\n\t\treturn this.parts.find(p => p.partType.special === SpecialPartType.Weapon)\r\n\t}\r\n\r\n\t/**\r\n\t * 种族\r\n\t */\r\n\tpublic get race() {return this.heroType.race; }\r\n\r\n\t// endregion\r\n\r\n\t// region 其他数据\r\n\r\n\t/**\r\n\t * 获取品质数据\r\n\t */\r\n\tpublic get qualityData() {\r\n\t\treturn qualityRepo().getById(this.quality);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 属性控制\r\n\r\n\t/**\r\n\t * 初始化英雄系统\r\n\t */\r\n\tprivate initHeroSystems() {\r\n\t\tthis.level ||= new LevelData(null, this);\r\n\t\tthis.break ||= new BreakData(null, this);\r\n\t\tthis.strengthen ||= new StrengthenData(null, this);\r\n\t\tthis.star ||= new StarData(null, this);\r\n\t}\r\n\r\n\t/**\r\n\t * 战斗力\r\n\t */\r\n\tpublic get battlePoint() {\r\n\t\treturn paramRepo().find().reduce((res, p) =>\r\n\t\t\tres + this.param(p.id) * p.battlePoint, 0);\r\n\t}\r\n\r\n\t/**\r\n\t * 英雄系统\r\n\t */\r\n\tprivate _heroSystems;\r\n\tprotected get heroSystems() {\r\n\t\treturn this._heroSystems ||= [\r\n\t\t\tthis.break, this.strengthen, this.star\r\n\t\t]\r\n\t}\r\n\r\n\t/**\r\n\t * 获取属性\r\n\t */\r\n\tpublic param(index: ParamType): number {\r\n\t\tconst params = paramRepo().find();\r\n\t\tconst param = paramRepo().getById(index);\r\n\t\tconst bonusParams = params.filter(p => p.bonus.includes(index));\r\n\r\n\t\tconst val = this.heroSystems.reduce(\r\n\t\t\t(res, p) => p.calc(res, index),\r\n\t\t\tthis.baseParam(index)\r\n\t\t);\r\n\t\tconst bonus = bonusParams.reduce((sum, p) =>\r\n\t\t\tsum * this.param(p.id), 1);\r\n\r\n\t\tlet res = val * bonus;\r\n\t\tif (!param.isPercent) res = Math.round(res);\r\n\t\treturn MathUtils.clamp(res, param.min, param.max);\r\n\t}\r\n\r\n\t/**\r\n\t * 战斗等级\r\n\t */\r\n\tget battleLevel(): number {\r\n\t\treturn this.level.level\r\n\t}\r\n\r\n\t/**\r\n\t * 战斗属性\r\n\t */\r\n\tget battleParams(): number[] {\r\n\t\tconst params = paramRepo().find();\r\n\t\treturn params.map(p => this.param(p.id));\r\n\t}\r\n\r\n\t/**\r\n\t * 基础属性值\r\n\t */\r\n\tpublic baseParam(index: ParamType) {\r\n\t\tconst param = paramRepo().getById(index);\r\n\t\tlet base = this.params[index] || param.default_;\r\n\r\n\t\tconst config = configMgr().config(HeroSystemConfig).paramCalc;\r\n\r\n\t\tif (index in config) {\r\n\t\t\tconst level = this.level.calc(0, index);\r\n\t\t\tconst pow = this.pow, agi = this.agi, int = this.int;\r\n\t\t\ttry {\r\n\t\t\t\tbase += eval(config[index]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(\"计算公式有误！\", index, config, {\r\n\t\t\t\t\tlevel, pow, agi, int\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// TODO: 暂时不对接平台数据\r\n\t\t// let add = this.addedParams[index + 1] || (param.isPercent ? 100 : 0);\r\n\t\t// if (param.isPercent) add = base * (add / 100 - 1);\r\n\r\n\t\treturn base //+ add;\r\n\t}\r\n\r\n\t/**\r\n\t * 属性快速访问\r\n\t */\r\n\tpublic get cp() { return this.param(ParamType.CP) }\r\n\tpublic get cpb() { return this.param(ParamType.CPB) }\r\n\tpublic get hid() { return this.param(ParamType.HID) }\r\n\tpublic get pow() { return this.param(ParamType.POW) }\r\n\tpublic get agi() { return this.param(ParamType.AGI) }\r\n\tpublic get int() { return this.param(ParamType.INT) }\r\n\tpublic get powb() { return this.param(ParamType.POWB) }\r\n\tpublic get agib() { return this.param(ParamType.AGIB) }\r\n\tpublic get intb() { return this.param(ParamType.INTB) }\r\n\tpublic get atk() { return this.param(ParamType.ATK) }\r\n\tpublic get cri() { return this.param(ParamType.CRI) }\r\n\tpublic get dmg() { return this.param(ParamType.DMG) }\r\n\tpublic get atkb() { return this.param(ParamType.ATKB) }\r\n\tpublic get crib() { return this.param(ParamType.CRIB) }\r\n\tpublic get dmgb() { return this.param(ParamType.DMGB) }\r\n\tpublic get def() { return this.param(ParamType.DEF) }\r\n\tpublic get avo() { return this.param(ParamType.AVO) }\r\n\tpublic get eva() { return this.param(ParamType.EVA) }\r\n\tpublic get defb() { return this.param(ParamType.DEFB) }\r\n\tpublic get avob() { return this.param(ParamType.AVOB) }\r\n\tpublic get evab() { return this.param(ParamType.EVAB) }\r\n\tpublic get mhp() { return this.param(ParamType.MHP) }\r\n\tpublic get spd() { return this.param(ParamType.SPD) }\r\n\tpublic get hit() { return this.param(ParamType.HIT) }\r\n\tpublic get mhpb() { return this.param(ParamType.MHPB) }\r\n\tpublic get spdb() { return this.param(ParamType.SPDB) }\r\n\tpublic get hitb() { return this.param(ParamType.HITB) }\r\n\tpublic get ab1() { return this.param(ParamType.AB1) }\r\n\tpublic get ab2() { return this.param(ParamType.AB2) }\r\n\tpublic get ab3() { return this.param(ParamType.AB3) }\r\n\tpublic get ab4() { return this.param(ParamType.AB4) }\r\n\tpublic get bp() { return this.param(ParamType.BP) }\r\n\tpublic get bpb() { return this.param(ParamType.BPB) }\r\n\r\n\t// endregion\r\n\r\n\t// region 创建\r\n\r\n\t/**\r\n\t * 创建\r\n\t */\r\n\tpublic static create(account: string, heroTypeId: number,\r\n\t\t\t\t\t\t\t\t\t\t\t partInfos: PartSetting[], name: string) {\r\n\t\tconst res = new Hero();\r\n\t\tres.nftId = \"LOC_\" + MathUtils.randomString();\r\n\t\tres.creatorAccount = res.ownerAccount = account;\r\n\t\tres.heroTypeId = heroTypeId;\r\n\t\tres.partSettings = partInfos;\r\n\t\tres.name = name;\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tpublic static createRandomQuality() {\r\n\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n","import Node = cc.Node;\r\nimport Label = cc.Label;\r\nimport Font = cc.Font;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HitDamage extends cc.Component {\r\n\r\n    @property(Number)\r\n    public speedX: number = 0; // 水平初速度，默认为0\r\n    @property(Number)\r\n    public speedY: number = 0; // 竖直初速度，默认为0\r\n    @property(Number)\r\n    public accelerationY: number = 200; // 竖直加速度，默认为200\r\n    @property(Number)\r\n    public timer: number = 0.5; // 存活计时器，该计时器归零后飘字开始渐隐\r\n    @property(Number)\r\n    public scaleSpeed: number = 2; // 飘字逐渐变大的速度，默认为2，即1/2秒完成缩放\r\n    @property(Number)\r\n    public disappearSpeed: number = 1000; // 计时器归零后渐隐速度，默认为1000，即0.255秒完成消失\r\n    @property(Number)\r\n    public maxScale: number = 1;\r\n    @property([Font])\r\n    atlas: Font[] = [];\r\n    @property(Node)\r\n    miss: Node = null;\r\n\r\n    start () {\r\n        this.node.scaleX = 0;\r\n        this.node.scaleY = 0;\r\n    }\r\n\r\n    protected update(dt: number) {\r\n        if (this.timer <= 0 ) {\r\n            this.node.opacity -= this.disappearSpeed * dt;\r\n            if(this.node.opacity <= 0) this.node.destroy();\r\n        }\r\n        this.updateScale(dt);\r\n        this.updatePosition(dt);\r\n        this.timer -= dt;\r\n    }\r\n\r\n    private updateScale(dt: number) {\r\n        this.node.scaleX = Math.min(this.maxScale, this.node.scaleX + 3 * dt * this.maxScale);\r\n        this.node.scaleY = Math.min(this.maxScale, this.node.scaleY + 3 * dt * this.maxScale);\r\n    }\r\n\r\n    private updatePosition(dt: number) {\r\n        this.node.x += this.speedX * dt;\r\n        this.node.y += this.speedY * dt;\r\n        this.speedY += this.accelerationY * dt;\r\n    }\r\n\r\n    public setValue(val: number) {\r\n        this.getComponent(Label).string = \"\" + val;\r\n    }\r\n\r\n    public setPosition(x: number, y: number) {\r\n        this.node.x = x;\r\n        this.node.y = y;\r\n    }\r\n\r\n    public setRange(x: number, y: number) {\r\n        let rx = Math.random() * x - x / 2, ry = Math.random() * y - y / 2;\r\n        this.node.x += rx;\r\n        this.node.y += ry;\r\n        this.speedX = Math.min(150, Math.max(-150, rx));\r\n    }\r\n\r\n    public setType(type: number) {\r\n        if (type == HitType.Miss) {\r\n            this.miss.active = true;\r\n            this.getComponent(Label).string = \"\";\r\n            return;\r\n        }\r\n        this.miss.active = false;\r\n        this.getComponent(Label).font = this.atlas[type];\r\n    }\r\n\r\n}\r\n\r\nexport enum HitType {\r\n    Normal, Critical, Recover , Miss\r\n}\r\n","import {BaseManager, getManager, manager} from \"./BaseManager\";\r\nimport {LocalizedLabel} from \"../Components/LocalizedLabel\";\r\nimport {LocalizedSprite} from \"../Components/LocalizedSprite\";\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport JsonAsset = cc.JsonAsset;\r\nimport {PromiseUtils} from \"../../../Utils/PromiseUtils\";\r\nimport {assetMgr, BundleName} from \"./AssetBundleManager\";\r\n\r\nexport function i18nMgr(): I18nManager {\r\n\treturn getManager(I18nManager);\r\n}\r\n\r\nexport type LanguageType = 'zh' | 'ko' | 'ja' | 'en';\r\nexport const Languages: LanguageType[] = [\r\n\t'zh','ko', 'ja', 'en'\r\n];\r\nexport function getLanguage(type: LanguageType) {\r\n\treturn Languages.indexOf(type);\r\n}\r\n\r\nconst TranFileName = \"translation\";\r\n\r\n@manager\r\nclass I18nManager extends BaseManager {\r\n\r\n\tprivate curLanguage: LanguageType = 'zh';\r\n\r\n\tprivate registeredLabels: LocalizedLabel[] = [];\r\n\tprivate registeredSprites: LocalizedSprite[] = [];\r\n\tprivate translation: any;\r\n\tprivate spriteTranslation: any;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.loadTranslation().then();\r\n\t}\r\n\r\n\tasync loadTranslation() {\r\n\t\tawait PromiseUtils.waitFor(() => assetMgr && !!assetMgr());\r\n\t\tthis.translation ||= (await assetMgr().loadAsset(\r\n\t\t\tJsonAsset, BundleName.Data, TranFileName))?.json;\r\n\t}\r\n\r\n\tpublic getKey(key: string) {\r\n\t\treturn this.translation && this.translation[key];\r\n\t}\r\n\r\n\tpublic makeStr(key: string, default_: string = \"\") {\r\n\t\treturn this.getKey(key) ? `\\\\L[${key}]` : default_;\r\n\t}\r\n\r\n\t/**\r\n\t * 翻译文字\r\n\t * @param string\r\n\t */\r\n\tpublic t(string: string): string {\r\n\t\tconst index = getLanguage(this.curLanguage);\r\n\t\tlet result: string = \"\";\r\n\t\t// 应该可以改成用正则表达式来简化\r\n\t\tfor (let i = 0; i < string.length; i++) {\r\n\t\t\tif (string.startsWith(\"\\\\L[\", i)) {\r\n\t\t\t\ti += 3;\r\n\t\t\t\tlet tag = \"\";\r\n\t\t\t\twhile (string.charAt(i) != ']') {\r\n\t\t\t\t\ttag += string.charAt(i);\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.translation == undefined) {\r\n\t\t\t\t\tresult += \"{!\" + tag + \"!}\";\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tlet tr = this.translation[tag];\r\n\t\t\t\tif (tr == undefined || tr[index] == undefined) {\r\n\t\t\t\t\tresult += \"{!\" + tag + \"!}\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult += tr[index];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresult += string.charAt(i);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t/**\r\n\t * 翻译图片\r\n\t * @param spriteName\r\n\t */\r\n\tasync ts(spriteName: string) {\r\n\t\tconst index = getLanguage(this.curLanguage);\r\n\t\treturn await this.loadSpriteFrame(BundleName.Sprites,\r\n\t\t\tspriteName + \"$\" + index) ||\r\n\t\t\tawait this.loadSpriteFrame(\r\n\t\t\t\tBundleName.Sprites, spriteName);\r\n\t}\r\n\r\n\tprivate loadSpriteFrame(bundleName: string, assetPath: string) {\r\n\t\t/* if(object==null) {\r\n\r\n\t\t} else {\r\n\t\t\t\tconst reg = /\\${(.+?)}/g;\r\n\t\t\t\tconst regRes = reg.exec(assetPath)\r\n\t\t\t\t// const replaceReg = new RegExp(regRes[0], 'g');\r\n\t\t\t\tconst name = object[regRes[1]];\r\n\t\t\t\tif (name) assetPath = assetPath.replace(reg, name);\r\n\t\t} */\r\n\t\treturn assetMgr().loadAsset<SpriteFrame>(SpriteFrame, bundleName, assetPath);\r\n\t}\r\n\r\n\tpublic registerLabel(label: LocalizedLabel): void {\r\n\t\tthis.unregisterLabel(label);\r\n\t\tthis.registeredLabels.push(label);\r\n\t}\r\n\r\n\tpublic unregisterLabel(label: LocalizedLabel): void {\r\n\t\tlet idx = this.registeredLabels.indexOf(label);\r\n\t\tif (idx == -1) return;\r\n\t\tthis.registeredLabels.splice(idx, 1);\r\n\t}\r\n\r\n\tpublic registerSprite(sprite: LocalizedSprite): void {\r\n\t\tthis.unregisterSprite(sprite);\r\n\t\tthis.registeredSprites.push(sprite);\r\n\t}\r\n\r\n\tpublic unregisterSprite(sprite: LocalizedSprite): void {\r\n\t\tlet idx = this.registeredSprites.indexOf(sprite);\r\n\t\tif (idx == -1) return;\r\n\t\tthis.registeredSprites.splice(idx, 1);\r\n\t}\r\n\r\n\tpublic setLanguage(language: LanguageType): void {\r\n\t\tif (this.curLanguage == language) return;\r\n\t\tthis.curLanguage = language;\r\n\t\tthis.updateUIs();\r\n\t}\r\n\r\n\tpublic getCurrentLanguage(): LanguageType {\r\n\t\treturn this.curLanguage;\r\n\t}\r\n\r\n\tprivate updateUIs(): void {\r\n\t\tthis.registeredLabels.forEach(l => l.updateText());\r\n\t\tthis.registeredSprites.forEach(l => l.updateSprite());\r\n\t}\r\n}\r\n","import {ItemDisplay} from \"../../../../Modules/CoreModule/Components/ItemDisplay\";\r\nimport Label = cc.Label;\r\nimport Node = cc.Node;\r\nimport {PartInfo} from \"../../../../Modules/HeroModule/Data/PartInfo\";\r\nimport {selectorScene} from \"../../SelectorScene\";\r\nimport PartsDisplay from \"../ItemPrefabs/PartsDisplay\";\r\nimport PreviewPictureDisplay from \"../ItemPrefabs/PreviewPictureDisplay\";\r\nimport {configMgr} from \"../../../../Modules/CoreModule/Managers/ConfigManager\";\r\nimport PartConfig from \"../../../../Modules/HeroModule/Configs/PartConfig\";\r\nimport Slider = cc.Slider;\r\nimport PartsContainer from \"../ItemContainers/PartsContainer\";\r\nimport EditBox = cc.EditBox;\r\nimport Component = cc.Component;\r\nimport {DataLoader} from \"../../../../Modules/CoreModule/Utils/DataLoader\";\r\nimport {AlertDialogType, alertMgr} from \"../../../../Modules/CoreModule/Managers/AlertManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ImportWindow extends Component {\r\n\r\n\t@property(EditBox)\r\n\timportInput: EditBox = null;\r\n\r\n\t// region 操作\r\n\r\n\tpublic show() {\r\n\t\tthis.node.active = true\r\n\t}\r\n\r\n\tpublic close() {\r\n\t\tthis.node.active = false\r\n\t}\r\n\r\n\tpublic import() {\r\n\t\tconst text = this.importInput.string;\r\n\t\ttry {\r\n\t\t\tconst json = JSON.parse(text);\r\n\t\t\tconst config = configMgr().config(PartConfig);\r\n\t\t\tObject.assign(config, json);\r\n\t\t\tconsole.log(json, \" -> \", config);\r\n\t\t\talertMgr().alert('导入成功！',\r\n\t\t\t\t\"\", AlertDialogType.OK).then();\r\n\t\t\tselectorScene().globalEditor.refresh();\r\n\t\t\tselectorScene().singleEditor.refresh();\r\n\t\t\tthis.close();\r\n\t\t} catch (e) {\r\n\t\t\talertMgr().alert('导入数据格式不正确！',\r\n\t\t\t\t\"\", AlertDialogType.OK).then();\r\n\t\t}\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n","\r\nimport {ItemDisplay} from \"./ItemDisplay\";\r\nimport {BaseData} from \"../Data/BaseData\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport class ItemContainer<T extends BaseData, D extends ItemDisplay<T>> extends cc.Component {\r\n\r\n\t@property(cc.Node)\r\n\tcontainer: cc.Node = null;\r\n\t@property(cc.Prefab)\r\n\tprefab: cc.Prefab = null;\r\n\r\n\tpublic items: T[] = [];\r\n\tprotected itemsComponents: D[] = [];\r\n\tprotected itemCount: number = 0;\r\n\r\n\tpublic isInclude(item: T) { return true; }\r\n\r\n\tpublic setItems(items: T[]){\r\n\t\tthis.items = items.filter(item => this.isInclude(item));\r\n\t\tthis.onItemsChanged();\r\n\t}\r\n\r\n\tprotected onItemsChanged(){\r\n\t\tthis.refresh();\r\n\t}\r\n\r\n\tpublic refresh() {\r\n\t\tthis.refreshComponents();\r\n\t}\r\n\tprivate refreshComponents() {\r\n\t\tfor (let i = 0; i < this.items.length; i++) {\r\n\t\t\tif (i >= this.itemsComponents.length)\r\n\t\t\t\tthis.createItemDisplay();\r\n\t\t\telse\r\n\t\t\t\tthis.itemsComponents[i].node.active = true;\r\n\t\t\tthis.itemsComponents[i].setItem(this.items[i]);\r\n\t\t}\r\n\t\tfor (let i = this.items.length; i < this.itemsComponents.length; i++) {\r\n\t\t\tthis.itemsComponents[i].node.active = false;\r\n\t\t\t//this.itemsComponents[i].setItem(null);\r\n\t\t}\r\n\t\tthis.itemCount = this.items.length;\r\n\t}\r\n\r\n\tprivate createItemDisplay() {\r\n\t\tconst node = cc.instantiate(this.prefab);\r\n\t\tnode.parent = this.container;\r\n\r\n\t\tconst res = node.getComponent(ItemDisplay) as D;\r\n\t\tthis.onItemDisplayCreated(res);\r\n\t\tthis.itemsComponents.push(res);\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tprotected onItemDisplayCreated(display: D) {\r\n\r\n\t}\r\n}\r\n","import {BaseData} from \"../Data/BaseData\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport abstract class ItemDisplay<T extends BaseData> extends cc.Component {\r\n\r\n\titem: T = null;\r\n\r\n\t// isStarted = false;\r\n\r\n\tprotected start() {\r\n\t\t// this.isStarted = true;\r\n\t}\r\n\r\n\tpublic setItem(item: T) {\r\n\t\t// if (!this.isStarted) this.start();\r\n\t\tthis.item = item;\r\n\t\tthis.onItemChanged();\r\n\t}\r\n\r\n\tprotected onItemChanged() {\r\n\t\tthis.refresh();\r\n\t}\r\n\r\n\tpublic refresh() {}\r\n\r\n}\r\n","import {ItemContainer} from \"../../../CoreModule/Components/ItemContainer\";\r\nimport JobDisplay from \"./JobDisplay\";\r\nimport {Job, jobRepo} from \"../../../EconomicModule/Data/Job\";\r\nimport {ScrollviewFilter} from \"../../../CoreModule/Utils/ScrollviewFilter\";\r\nimport Node = cc.Node;\r\nimport {PlayerJob, PlayerJobItem} from \"../../../EconomicModule/Data/PlayerJob\";\r\nimport {playerMgr, waitForLogin} from \"../../../PlayerModule/Managers/PlayerManager\";\r\nimport {waitForDataLoad} from \"../../../CoreModule/Managers/DataManager\";\r\nimport {economicMgr} from \"../../../EconomicModule/Manager/EconomicManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n// @ccclass\r\n// export default class JobContainer extends ItemContainer<Job, JobDisplay> {\r\n//\r\n//     private isLoad: boolean = false;\r\n//\r\n//     start () {\r\n//         this.setup();\r\n//     }\r\n//\r\n//     update (dt) {\r\n//         if (!this.isLoad) {\r\n//             this.setup();\r\n//             if (!this.isLoad) return;\r\n//         }\r\n//     }\r\n//\r\n//     private setup() {\r\n//         this.setItems(jobRepo().list);\r\n//         this.isLoad = true;\r\n//     }\r\n//\r\n//     onItemsChanged() {\r\n//         super.onItemsChanged();\r\n//         let nodes : Node[] = [];\r\n//         this.itemsComponents.forEach(item => { if(item.node.active == true) nodes.push(item.node) })\r\n//         ScrollviewFilter.filter(\"vertical\", this.container, nodes, 5, this.node.height, 10);\r\n//     }\r\n//\r\n// }\r\n\r\n@ccclass\r\nexport default class JobContainer extends ItemContainer<PlayerJobItem, JobDisplay> {\r\n\r\n\t// private isLoad: boolean = false;\r\n\r\n\tstart () {\r\n\t\tthis.setup();\r\n\t}\r\n\r\n\t// update (dt) {\r\n\t// \tif (!this.isLoad) {\r\n\t// \t\tthis.setup();\r\n\t// \t\tif (!this.isLoad) return;\r\n\t// \t}\r\n\t// }\r\n\r\n\t@waitForDataLoad\r\n\t@waitForLogin\r\n\tprivate setup() {\r\n\t\tconst playerJob = playerMgr().getPlayerData(PlayerJob);\r\n\t\tconst jobs = jobRepo().list;\r\n\r\n\t\tthis.setItems(jobs.map(j => playerJob.job(j.id)));\r\n\t\teconomicMgr().playerJob = playerJob;\r\n\t\teconomicMgr().jobItems = jobs.map(j => playerJob.job(j.id));\r\n\t\t// this.isLoad = true;\r\n\t}\r\n\r\n\tonItemsChanged() {\r\n\t\tsuper.onItemsChanged();\r\n\t\tconst nodes = [];\r\n\t\tthis.itemsComponents.forEach(item =>\r\n\t\t\titem.node.active && nodes.push(item.node)\r\n\t\t)\r\n\t\tScrollviewFilter.filter(\"vertical\", this.container,\r\n\t\t\tnodes, 5, this.node.height, 170);\r\n\t}\r\n\r\n}\r\n","import {ItemDisplay} from \"../../../CoreModule/Components/ItemDisplay\";\r\nimport Label = cc.Label;\r\nimport Node = cc.Node;\r\nimport Button = cc.Button;\r\nimport Sprite = cc.Sprite;\r\nimport ProgressBar = cc.ProgressBar;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport {PlayerJobItem} from \"../../../EconomicModule/Data/PlayerJob\";\r\nimport {EconomicInterface} from \"../../../EconomicModule/Common/EconomicCommon\";\r\nimport {autoUnitConvert} from \"../../../../Utils/NumberUtils\";\r\nimport {handleError} from \"../../../CoreModule/Managers/AlertManager\";\r\nimport {DateUtils} from \"../../../../Utils/DateUtils\";\r\nimport {economicMgr} from \"../../../EconomicModule/Manager/EconomicManager\";\r\nimport Animation = cc.Animation;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n// @ccclass\r\n// export default class JobDisplay extends ItemDisplay<Job> {\r\n//\r\n// \t@property(Label)\r\n// \tprofitLabel: Label = null;\r\n// \t@property(Label)\r\n// \tprofitLabel2: Label = null;\r\n// \t@property(Label)\r\n// \tupgradeLabel: Label = null;\r\n// \t@property(Label)\r\n// \tupgradeTips: Label = null;\r\n// \t@property(Label)\r\n// \ttitleLabel: Label = null;\r\n// \t@property(Label)\r\n// \ttimerLabel: Label = null;\r\n// \t@property(Label)\r\n// \tlevelLabel: Label = null;\r\n// \t@property(Label)\r\n// \tnumberLabel: Label = null;\r\n//\r\n// \t@property(Node)\r\n// \tinfoNode: Node = null;\r\n// \t@property(Node)\r\n// \tprofitNode: Node = null;\r\n// \t@property(Node)\r\n// \ticonNode: Node = null;\r\n// \t@property(Node)\r\n// \tautoIconNode: Node = null;\r\n//\r\n// \t@property(Node)\r\n// \tupgradeNode: Node = null;\r\n// \tprivate upgradePicture: Sprite = null;\r\n// \tprivate upgradeButton: Button = null;\r\n//\r\n// \t@property(ProgressBar)\r\n// \tprogressBar: ProgressBar = null;\r\n// \t@property(SpriteFrame)\r\n// \tcanUpgrade: SpriteFrame = null;\r\n// \t@property(SpriteFrame)\r\n// \tcannotUpgrade: SpriteFrame = null;\r\n// \t@property(ProgressBar)\r\n// \tlevelProgress: ProgressBar = null;\r\n//\r\n// \ttimer: number = 0;\r\n//\r\n// \t// onLoad () {}\r\n//\r\n// \tstart () {\r\n// \t\tthis.setup();\r\n// \t}\r\n//\r\n// \tprotected onItemChanged() {\r\n// \t\tsuper.onItemChanged();\r\n// \t\tthis.titleLabel.string = \"\" + this.item.id;\r\n// \t\tthis.numberLabel.string = \"\" + this.item.id;\r\n// \t\tif (this.getPlayerJobItem().curLevel == 0)\r\n// \t\t\tthis.timer = 0;\r\n// \t\telse\r\n// \t\t\tthis.timer = (Date.now() - this.getPlayerJobItem().lastProfitTime) / 1000;\r\n// \t}\r\n//\r\n// \tprivate isLoad: boolean = false;\r\n// \tprivate setup() {\r\n// \t\tthis.upgradePicture = this.upgradeNode.getComponent(Sprite);\r\n// \t\tthis.upgradeButton = this.upgradeNode.getComponent(Button);\r\n// \t\tthis.isLoad = true;\r\n// \t}\r\n//\r\n// \t// region 更新控制\r\n//\r\n// \tupdate (dt) {\r\n// \t\tif (!this.isLoad) {\r\n// \t\t\tthis.setup();\r\n// \t\t\tif (!this.isLoad) return;\r\n// \t\t}\r\n// \t\tif (!this.item) return;\r\n// \t\tif(this.getPlayerJobItem().curLevel != 0) this.timer += dt;\r\n// \t\tthis.updateNodes();\r\n// \t\tthis.updateLabels();\r\n// \t\tthis.updatePictures();\r\n// \t}\r\n//\r\n// \tprivate updateNodes() {\r\n// \t\tif (this.getPlayerJobItem().curLevel > 0 && Date.now() <= playerMgr().getPlayerData(PlayerJob).autoProfitTime) {\r\n// \t\t\tthis.autoIconNode.active = true;\r\n// \t\t\tthis.iconNode.active = false;\r\n// \t\t}\r\n// \t\telse {\r\n// \t\t\tthis.autoIconNode.active = false;\r\n// \t\t\tthis.iconNode.active = true;\r\n// \t\t}\r\n// \t\tif (this.timer >= this.item.time) {\r\n// \t\t\tif (Date.now() <= playerMgr().getPlayerData(PlayerJob).autoProfitTime) {\r\n// \t\t\t\tplayerMgr().getPlayerData(PlayerMoney).gold += this.item.getRealProfit(this.getPlayerJobItem().curLevel);\r\n// \t\t\t\tthis.timer = 0;\r\n// \t\t\t\treturn;\r\n// \t\t\t}\r\n// \t\t\tthis.profitNode.active = true;\r\n// \t\t\tthis.infoNode.active = false;\r\n// \t\t}\r\n// \t\telse {\r\n// \t\t\tthis.profitNode.active = false;\r\n// \t\t\tthis.infoNode.active = true;\r\n// \t\t}\r\n// \t}\r\n//\r\n// \tprivate updateLabels() {\r\n// \t\tthis.profitLabel.string = NumberUtils.toString(this.item.getRealProfit(Math.max(1, this.getPlayerJobItem().curLevel)));\r\n// \t\tthis.profitLabel2.string = this.profitLabel.string;\r\n// \t\tthis.upgradeLabel.string = this.getPlayerJobItem().curLevel == this.item.maxLevel ? \"0\" : NumberUtils.toString(this.item.getRealUpgrade(this.getPlayerJobItem().curLevel));\r\n// \t\tthis.timerLabel.string = this.getTime(this.item.time - Math.floor(this.timer));\r\n// \t\tthis.upgradeTips.string = this.getPlayerJobItem().curLevel == 0 ? \"\\\\L[SJob7]\" : (this.getPlayerJobItem().curLevel == this.item.maxLevel ? \"\\\\L[SJob10]\" : \"\\\\L[SJob3]\");\r\n// \t\tthis.levelLabel.string = \"Lv.\" + this.getPlayerJobItem().curLevel;\r\n// \t}\r\n//\r\n// \tprivate updatePictures() {\r\n// \t\tif (this.item.getRealUpgrade(this.getPlayerJobItem().curLevel) <= playerMgr().getPlayerData(PlayerMoney).gold\r\n// \t\t\t&& this.getPlayerJobItem().curLevel < this.item.maxLevel) {\r\n// \t\t\tthis.upgradePicture.spriteFrame = this.canUpgrade;\r\n// \t\t\tthis.upgradeButton.interactable = true;\r\n// \t\t}\r\n// \t\telse {\r\n// \t\t\tthis.upgradePicture.spriteFrame = this.cannotUpgrade;\r\n// \t\t\tthis.upgradeButton.interactable = false;\r\n// \t\t}\r\n// \t\tthis.progressBar.progress = 1 - Math.min(0.98, this.timer / this.item.time);\r\n// \t\tthis.levelProgress.progress = this.getPlayerJobItem().curLevel / this.item.maxLevel;\r\n// \t}\r\n//\r\n// \t// endregion\r\n//\r\n// \t// region 按钮点击事件\r\n//\r\n// \tprofitBtn() {\r\n// \t\tlet id = this.item.id;\r\n// \t\tEconomicInterface.ProfitJob({id}).then(res => {\r\n// \t\t\tplayerMgr().getPlayerData(PlayerMoney).gold += this.item.getRealProfit(this.getPlayerJobItem().curLevel);\r\n// \t\t\tthis.timer = 0;\r\n// \t\t}, rej => {\r\n// \t\t\tconsole.log(rej);\r\n// \t\t});\r\n// \t}\r\n//\r\n// \tupgradeBtn() {\r\n// \t\tif (this.getPlayerJobItem().curLevel == 0) {\r\n// \t\t\tthis.unlock();\r\n// \t\t\treturn;\r\n// \t\t}\r\n// \t\tlet id = this.item.id;\r\n// \t\tEconomicInterface.UpgradeJob({id}).then(res => {\r\n// \t\t\tplayerMgr().getPlayerData(PlayerMoney).gold -= this.item.getRealUpgrade(this.getPlayerJobItem().curLevel);\r\n// \t\t\tthis.getPlayerJobItem().curLevel++;\r\n// \t\t}, rej => {\r\n// \t\t\tconsole.log(rej);\r\n// \t\t});\r\n// \t}\r\n//\r\n// \tprivate unlock() {\r\n// \t\tlet id = this.item.id;\r\n// \t\tEconomicInterface.UnlockJob({id}).then(res => {\r\n// \t\t\tplayerMgr().getPlayerData(PlayerMoney).gold -= this.item.getRealUpgrade(this.getPlayerJobItem().curLevel);\r\n// \t\t\tthis.getPlayerJobItem().curLevel++;\r\n// \t\t}, rej => {\r\n// \t\t\tconsole.log(rej);\r\n// \t\t});\r\n// \t}\r\n//\r\n// \t// endregion\r\n//\r\n// \t// region 数据获取\r\n//\r\n// \tprivate getPlayerJobItem(): PlayerJobItem {\r\n// \t\treturn playerMgr().getPlayerData(PlayerJob).jobs.find(j => j.jobId == this.item.id);\r\n// \t}\r\n//\r\n// \tprivate getTime(val: number): string {\r\n// \t\tif (val < 60) return \"\" + val;\r\n// \t\treturn Math.floor(val / 60) + ((val % 60) < 10 ? \":0\" : \":\") + val % 60;\r\n// \t}\r\n//\r\n// }\r\n\r\n@ccclass\r\nexport default class JobDisplay extends ItemDisplay<PlayerJobItem> {\r\n\r\n\t@property(Label)\r\n\tprofitLabel: Label = null;\r\n\t@property(Label)\r\n\tprofitLabel2: Label = null;\r\n\t@property(Label)\r\n\tupgradeLabel: Label = null;\r\n\t@property(Label)\r\n\tupgradeTips: Label = null;\r\n\t@property(Label)\r\n\ttitleLabel: Label = null;\r\n\t@property(Label)\r\n\ttimerLabel: Label = null;\r\n\t@property(Label)\r\n\tlevelLabel: Label = null;\r\n\t@property(Label)\r\n\tnumberLabel: Label = null;\r\n\r\n\t@property(Node)\r\n\tinfoNode: Node = null;\r\n\t@property(Node)\r\n\tprofitNode: Node = null;\r\n\t@property(Node)\r\n\ticonNode: Node = null;\r\n\t@property(Node)\r\n\tautoIconNode: Node = null;\r\n\t@property(Node)\r\n\ticonFrameNode: Node = null;\r\n\r\n\t@property(Node)\r\n\tupgradeNode: Node = null;\r\n\tprivate upgradeButton: Button = null;\r\n\r\n\t@property(ProgressBar)\r\n\tprogressBar: ProgressBar = null;\r\n\t@property(ProgressBar)\r\n\tlevelProgress: ProgressBar = null;\r\n\r\n\t@property(Animation)\r\n\tlevelUpAnimation: Animation = null;\r\n\t@property(Sprite)\r\n\ticonSprite: Sprite = null;\r\n\r\n\t// onLoad () {}\r\n\r\n\tstart () {\r\n\t\tthis.setup();\r\n\t}\r\n\r\n\t// private isLoad: boolean = false;\r\n\tprivate setup() {\r\n\t\tthis.upgradeButton = this.upgradeNode.getComponent(Button);\r\n\t\t// this.isLoad = true;\r\n\t}\r\n\r\n\t// region 界面绘制\r\n\r\n\tprivate get restSecond() {\r\n\t\tconst sec = this.item.curLevel == 0 ? 0 : Math.floor((Date.now() - this.item.lastProfitTime) / 1000);\r\n\t\treturn this.item.job.time - sec;\r\n\t}\r\n\r\n\tprivate get restSecondRate() {\r\n\t\tconst sec = this.item.curLevel == 0 ? 0 : (Date.now() - this.item.lastProfitTime) / 1000;\r\n\t\treturn 1 - Math.min(0.98, sec / this.item.job.time);\r\n\t}\r\n\r\n\tpublic refresh() {\r\n\t\tsuper.refresh();\r\n\r\n\t\tthis.drawTitle();\r\n\t\tthis.drawNodes();\r\n\t\tthis.drawLabels();\r\n\t\tthis.drawPictures();\r\n\t\tthis.drawIcon();\r\n\t}\r\n\r\n\tprivate drawTitle() {\r\n\t\tthis.titleLabel.string = this.item.job.getDisplayName();\r\n\t\tthis.numberLabel.string = this.item.jobId.toString();\r\n\t}\r\n\r\n\tprivate drawNodes() {\r\n\t\tconst auto = this.item.isAutoProfit;\r\n\t\tconst enable = this.item.profitConditions().judge();\r\n\r\n\t\tthis.autoIconNode.active = auto && this.item.curLevel > 0;\r\n\t\tthis.profitNode.active = !auto && enable;\r\n\t\tthis.infoNode.active = !enable;\r\n\t\tthis.iconNode.active = !auto || this.item.curLevel <= 0;\r\n\t\tthis.iconFrameNode.active = this.iconNode.active;\r\n\t}\r\n\r\n\t@autoUnitConvert\r\n\tprivate drawLabels() {\r\n\t\tconst costs = this.item.upgradeCosts();\r\n\t\tconst rewards = this.item.profitRewards();\r\n\r\n\t\tconst isLocked = this.item.curLevel == 0;\r\n\t\tconst isMax = this.item.curLevel >= this.item.job.maxLevel;\r\n\r\n\t\tthis.levelLabel.string = \"Lv.\" + this.item.curLevel;\r\n\t\tthis.profitLabel.string = this.profitLabel2.string = rewards.gold.value.toString();\r\n\t\tthis.upgradeLabel.string = (isMax ? 0 : costs.gold.value).toString();\r\n\t\t// TODO: [多语言系统]\r\n\t\tthis.upgradeTips.string = isLocked ? \"\\\\L[SJob7]\" : (isMax ? \"\\\\L[SJob10]\" : \"\\\\L[SJob3]\");\r\n\t\tthis.timerLabel.string = DateUtils.sec2Str(this.restSecond);\r\n\t}\r\n\r\n\tprivate drawPictures() {\r\n\t\tconst enable = this.item.curLevel <= 0 ?\r\n\t\t\tthis.item.unlockConditions().judge() : this.item.upgradeConditions().judge();\r\n\t\tif (this.upgradeButton)\r\n\t\t\tthis.upgradeButton.interactable = enable;\r\n\r\n\t\tthis.progressBar.progress = this.restSecondRate;\r\n\t\tthis.levelProgress.progress = this.item.curLevel / this.item.job.maxLevel;\r\n\t}\r\n\r\n\tprivate drawIcon() {\r\n\t\tthis.item.icon().then(res => this.iconSprite.spriteFrame = res);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 操作控制\r\n\r\n\tpublic profitBtn() {\r\n\t\teconomicMgr().profit(this.item.jobId).then();\r\n\t}\r\n\r\n\tpublic upgradeBtn() {\r\n\t\teconomicMgr().upgrade(this.item.jobId).then(() => this.levelUpAnimation.play());\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 更新控制\r\n\r\n\tupdate(dt) {\r\n\t\tif (!this.item) return;\r\n\r\n\t\tthis.updateDraw();\r\n\t}\r\n\r\n\tprivate updateDraw() {\r\n\t\tthis.drawNodes();\r\n\t\tthis.drawLabels();\r\n\t\tthis.drawPictures();\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n","import {BaseData, field, GameData} from \"../../CoreModule/Data/BaseData\";\r\nimport {BaseRepository, getRepository, repository} from \"../../CoreModule/Data/BaseRepository\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {data, StaticData} from \"../../CoreModule/Data/StaticData\";\r\n\r\n@data(\"Job\")\r\nexport class Job extends StaticData {\r\n\r\n\t@field(Number)\r\n\tpublic time: number = -1; // 打工时间\r\n\t@field(Number)\r\n\tpublic maxLevel: number = 100; // 最大等级\r\n\t@field([Number])\r\n\tpublic unlockParams: number[] = []; // 解锁需求参数\r\n\t@field([Number])\r\n\tpublic profitParams: number[] = []; // 收益参数\r\n\t@field([Number])\r\n\tpublic upgradeParams: number[] = []; // 升级消耗参数\r\n\r\n\t/**\r\n\t * 解锁金币需求\r\n\t */\r\n\tpublic get unlockGold() { return this.unlockParams[1]; }\r\n\r\n\t/**\r\n\t * 回城次数需求\r\n\t */\r\n\tpublic get unlockReturnTime() { return this.unlockParams[0] || 0; }\r\n\r\n\t/**\r\n\t * 获取实际收益\r\n\t */\r\n\tpublic profit(level: number): number {\r\n\t\t// TODO: 完善收益算法\r\n\t\treturn this.profitParams[0] + this.profitParams[1] * level;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取实际升级金币需求\r\n\t */\r\n\tpublic upgradeGold(level: number): number {\r\n\t\t// TODO: 完善升级花费算法\r\n\t\treturn this.upgradeParams[0] + this.upgradeParams[1] * level;\r\n\t}\r\n\r\n}\r\n\r\nexport function jobRepo() {\r\n\treturn getRepository(JobRepo);\r\n}\r\n\r\n@repository\r\nexport class JobRepo extends BaseRepository<Job> {\r\n\r\n\tget clazz(): Constructor<Job> { return Job; }\r\n\r\n}\r\n","import ccclass = cc._decorator.ccclass;\r\nimport Button = cc.Button;\r\nimport property = cc._decorator.property;\r\nimport {getLanguage, i18nMgr, Languages} from \"../Managers/I18nManager\";\r\nimport Toggle = cc.Toggle;\r\nimport Node = cc.Node;\r\nimport ToggleGroup = cc.ToggleGroup;\r\nimport {gameMgr} from \"../Managers/GameManager\";\r\nimport Label = cc.Label;\r\n\r\n\r\n@ccclass\r\nexport default class LanguageSwitch extends cc.Component {\r\n\r\n    @property(Node)\r\n    langSwitchWindow: Node;\r\n\r\n    @property([Toggle])\r\n    toggles: Toggle[] = [];// 约定第i个Toggle对应Languages的第i个语言\r\n\r\n    @property(Label)\r\n    languageLabel: Label;// 显示当前语言的label\r\n\r\n    protected onEnable() {\r\n        let langIdx = getLanguage(i18nMgr().getCurrentLanguage());\r\n        this.toggles[langIdx].check();\r\n        this.onClick(this.toggles[langIdx]);\r\n    }\r\n\r\n    /**\r\n     * Toggle按钮回调，\r\n     * @param e 发生回调的Toggle\r\n     */\r\n    public onClick(e: Toggle) {\r\n        if (!e.isChecked) return; // 因为被取消选择的toggle也会回调这个函数，要过滤掉\r\n        let idx=this.toggles.indexOf(e);\r\n        i18nMgr().setLanguage(Languages[idx]);\r\n        this.languageLabel.string = e.getComponentInChildren(Label).string;\r\n    }\r\n\r\n    public setWindowVisible(e: any, visible: string) {\r\n        console.log(visible)\r\n        this.langSwitchWindow.active = visible == 'true';\r\n    }\r\n}","import {BaseManager, getManager, manager} from \"./BaseManager\";\r\n\r\nimport director = cc.director;\r\n\r\nexport type LoadingOptions = {\r\n\tenable?: boolean,\r\n\tcode?: number,\r\n\ttitle?: string,\r\n\tdetail?: string,\r\n\tmaxValue?: number,\r\n\tshowImmediately?: boolean\r\n}\r\n\r\nexport class GameLoading implements LoadingOptions {\r\n\r\n\tpublic code: number;\r\n\tpublic title: string\r\n\tpublic detail: string\r\n\tpublic maxValue: number\r\n\tpublic showImmediately: boolean\r\n\r\n\tconstructor(code: number, title?: string,\r\n\t\t\t\t\t\t\tdetail?: string, maxValue: number = 1,\r\n\t\t\t\t\t\t\tshowImmediately: boolean = false) {\r\n\t\tthis.code = code;\r\n\t\tthis.title = title;\r\n\t\tthis.detail = detail;\r\n\t\tthis.maxValue = maxValue;\r\n\t\tthis.showImmediately = showImmediately;\r\n\t}\r\n}\r\n\r\nexport function showLoading(settingOrObj?: LoadingParam | object,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdetailOrKey?: string, desc?: any): any {\r\n\r\n\t// 不能加默认值，默认值在startLoading内加\r\n\t// let setting: LoadingSetting; // = CoreLoading.Default();\r\n\tconst hasSetting = !detailOrKey && !desc;\r\n\r\n\tconst process = (obj, key, desc) => {\r\n\t\tconst oriFunc = desc.value;\r\n\r\n\t\tdesc.value = async function(...p) {\r\n\t\t\tconst setting = hasSetting ?\r\n\t\t\t\t(typeof settingOrObj == 'function' ?\r\n\t\t\t\t\tsettingOrObj(detailOrKey) : settingOrObj) :\r\n\t\t\t\tundefined;\r\n\r\n\t\t\tconst info = loadingMgr().startLoading(setting);\r\n\t\t\treturn await oriFunc.apply(this, p)\r\n\t\t\t\t.finally(() => info?.finish());\r\n\t\t}\r\n\t}\r\n\r\n\tif (hasSetting) return process;\r\n\r\n\tprocess(settingOrObj, detailOrKey, desc);\r\n}\r\n\r\nexport function blockLoading(obj, key, desc) {\r\n\tconst oriFunc = desc.value;\r\n\tconst mgr = loadingMgr();\r\n\r\n\tdesc.value = async function(...p) {\r\n\t\t// return PromiseUtils.funcWrapper(\r\n\t\t// \toriFunc.bind(this, p),\r\n\t\t// \t() => mgr.isBlocked = true,\r\n\t\t// \t() => mgr.isBlocked = false);\r\n\t\tmgr.isBlocked++;\r\n\t\ttry {\r\n\t\t\treturn await oriFunc.apply(this, p);\r\n\t\t} finally {\r\n\t\t\tmgr.isBlocked--;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function loadingMgr(): LoadingManager {\r\n\treturn getManager(LoadingManager);\r\n}\r\n\r\nexport function peekLoadingInfo() {\r\n\treturn loadingMgr().peekLatestLoadingInfo();\r\n}\r\n\r\nexport type LoadingParam = LoadingOptions |\r\n\t((...any) => LoadingOptions);\r\n\r\n@manager\r\nclass LoadingManager extends BaseManager {\r\n\r\n\tprivate loadingInfo: LoadingInfo[] = [];\r\n\r\n\tpublic isBlocked: number = 0;\r\n\r\n\t/**\r\n\t * @param setting Loading配置\r\n\t * @return LoadingProgressSetter 可以在里面动态修改加载进度\r\n\t */\r\n\tpublic startLoading(setting?: LoadingParam): LoadingProgressSetter {\r\n\t\tsetting ||= CoreLoading.Default;\r\n\r\n\t\tif (typeof setting == 'function') setting = setting();\r\n\r\n\t\tif (this.isBlocked || setting?.enable === false) return null;\r\n\r\n\t\tlet title = setting.title, detail = setting.detail;\r\n\r\n\t\tif (setting.code) { // 带有code属性\r\n\t\t\tconst key = \"LOAD\" + setting.code;\r\n\t\t\tconst exist = !!i18nMgr().getKey(key);\r\n\r\n\t\t\t// Title约定：默认使用翻译的文本，无翻译文本才用setting的title字段\r\n\t\t\ttitle = exist ? `\\\\L[${key}]` : title;\r\n\r\n\t\t\t// Detail约定：优先使用setting的detail，再看是否有翻译文本，如果没有就用空值\r\n\t\t\tif (!detail) { // 如果setting没有detail\r\n\t\t\t\tconst dKey = key + \"_DETAIL\";\r\n\t\t\t\tconst dExist = !!i18nMgr().getKey(dKey);\r\n\r\n\t\t\t\tdetail = dExist ? `\\\\L[${dKey}]` : \"\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.pushLoadingInfo(title, detail,\r\n\t\t\tsetting.maxValue, setting.showImmediately);\r\n\t}\r\n\r\n\tprivate pushLoadingInfo(title, detail, maxValue, showImmediately) {\r\n\t\tlet res = new LoadingInfo(title, detail,\r\n\t\t\tmaxValue, showImmediately);\r\n\t\tthis.loadingInfo.push(res);\r\n\t\treturn res;\r\n\t}\r\n\r\n\tpublic peekLatestLoadingInfo(): LoadingInfo {\r\n\t\treturn this.loadingInfo[this.loadingInfo.length - 1];\r\n\t}\r\n\r\n\tpublic popLatestLoadingInfo():void {\r\n\t\tthis.loadingInfo.pop();\r\n\t}\r\n\r\n}\r\n\r\ninterface LoadingProgressSetter {\r\n\t/**\r\n\t * 更新当前进度和最大值\r\n\t * @param currentValue 当前进度\r\n\t * @param maxValue 进度最大值，如果不传参数或传undefined则表示不更新最大值\r\n\t */\r\n\tupdateProgress(currentValue: number, maxValue: number): void;\r\n\r\n\t/**\r\n\t * 更新当前进度\r\n\t * @param currentValue\r\n\t */\r\n\tupdateProgress(currentValue: number): void;\r\n\r\n\t/**\r\n\t * 更新进度条上方的文字\r\n\t * @param text 新的文字\r\n\t */\r\n\tupdateLoadingText(text: string): void;\r\n\r\n\t/**\r\n\t * 更新二级字幕\r\n\t * @param text 新的文字\r\n\t */\r\n\tupdateReminder(text: string): void;\r\n\r\n\t/**\r\n\t * 设置为完成\r\n\t */\r\n\tfinish(): void;\r\n}\r\n\r\nenum LoadingState {\r\n\tNOT_STARTED,\r\n\tLOADING,\r\n\tFINISHED\r\n}\r\n\r\nclass LoadingInfo implements LoadingProgressSetter, LoadingOptions {\r\n\r\n\tpublic title: string;\r\n\tpublic detail: string;\r\n\tpublic currentValue: number;\r\n\tpublic maxValue: number;\r\n\r\n\tpublic startTime: number;\r\n\r\n\tprivate state: LoadingState;\r\n\r\n\tconstructor(title: string, detail: string, maxValue: number, showImmediately: boolean) {\r\n\t\tthis.title = title;\r\n\t\tthis.detail = detail;\r\n\t\tthis.currentValue = 0;\r\n\t\tthis.maxValue = maxValue;\r\n\t\tthis.startTime = director.getTotalTime() - (showImmediately ? 1e9 : 0);\r\n\t\tthis.state = LoadingState.NOT_STARTED;\r\n\t}\r\n\r\n\t/**\r\n\t * 设置当前进度，如果需要，还可以更新最大值\r\n\t * @param currentValue 当前进度\r\n\t * @param maxValue 进度最大值\r\n\t */\r\n\tpublic updateProgress(currentValue: number, maxValue: number = undefined): void {\r\n\t\tthis.currentValue = currentValue;\r\n\t\tif (maxValue != undefined) this.maxValue = maxValue;\r\n\t\tif (this.currentValue >= this.maxValue) {\r\n\t\t\tthis.markFinished();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 更新进度条上方的文字\r\n\t * @param text 新的文字\r\n\t */\r\n\tpublic updateLoadingText(text: string) {\r\n\t\tthis.title = text;\r\n\t}\r\n\r\n\tpublic updateReminder(text: string): void {\r\n\t\tthis.detail = text;\r\n\t}\r\n\r\n\tget isNotStarted() {\r\n\t\treturn this.state == LoadingState.NOT_STARTED;\r\n\t}\r\n\r\n\tget isLoading() {\r\n\t\treturn this.state == LoadingState.LOADING;\r\n\t}\r\n\r\n\tget isFinished() {\r\n\t\treturn this.state == LoadingState.FINISHED;\r\n\t}\r\n\r\n\tpublic markStarted() {\r\n\t\tthis.state = LoadingState.LOADING;\r\n\t}\r\n\r\n\tpublic markFinished() {\r\n\t\tthis.state = LoadingState.FINISHED;\r\n\t}\r\n\r\n\tpublic finish(): void {\r\n\t\tthis.updateProgress(this.maxValue);\r\n\t}\r\n\r\n}\r\n\r\nimport {CoreLoading} from \"../Common/CoreCommon\";\r\nimport {i18nMgr} from \"./I18nManager\";\r\nimport {InterfaceOptions} from \"./NetworkManager\";\r\nimport {PromiseUtils} from \"../../../Utils/PromiseUtils\";\r\n","import ProgressBar = cc.ProgressBar;\r\nimport Label = cc.Label;\r\nimport {loadingMgr, peekLoadingInfo} from \"../Managers/LoadingManager\";\r\nimport BlockInputEvents = cc.BlockInputEvents;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n/**\r\n * 加载开始后多久才真正显示遮罩\r\n */\r\nconst WaitDuration: number = 100;\r\nconst MaskOpacity = 255;\r\n\r\n@ccclass\r\nexport default class LoadingMask extends cc.Component {\r\n\r\n\t@property(ProgressBar)\r\n\tprogressBar: ProgressBar = null;\r\n\r\n\t@property(Label)\r\n\tloadingLabel: Label;\r\n\t@property(Label)\r\n\tdetailLabel: Label;\r\n\r\n\t@property(BlockInputEvents)\r\n\tinputBlocker: BlockInputEvents;\r\n\r\n\tstart() {\r\n\t\tthis.node.opacity = 0;\r\n\t}\r\n\r\n\tupdate(dt) {\r\n\t\tlet info = peekLoadingInfo();\r\n\t\tif (!info) return;\r\n\r\n\t\tif (info.isNotStarted) {\r\n\t\t\tinfo.markStarted();\r\n\t\t\tthis.loadingLabel.string = info.title;\r\n\t\t\tthis.node.opacity = 0;\r\n\t\t\tthis.blockInput();\r\n\t\t}\r\n\r\n\t\tif (info.isFinished) {\r\n\t\t\tloadingMgr().popLatestLoadingInfo();\r\n\t\t\tthis.node.opacity = 0;\r\n\t\t\tthis.unblockInput();\r\n\t\t\t// 还有正在进行的任务就直接显示\r\n\t\t\tlet tmp = peekLoadingInfo();\r\n\t\t\tif (tmp != null) tmp.startTime -= 1e9;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst now = cc.director.getTotalTime();\r\n\t\tif (now - info.startTime > WaitDuration && !info.isFinished)\r\n\t\t\tthis.node.opacity = MaskOpacity;\r\n\t\tif (this.progressBar) this.progressBar.progress = info.currentValue / info.maxValue;\r\n\t\tif (this.loadingLabel) this.loadingLabel.string = info.title;\r\n\t\tif (this.detailLabel) this.detailLabel.string = info.detail;\r\n\t}\r\n\r\n\tprivate blockInput() {\r\n\t\tthis.inputBlocker.enabled = true;\r\n\t}\r\n\r\n\tprivate unblockInput() {\r\n\t\tthis.inputBlocker.enabled = false;\r\n\t}\r\n}\r\n","import Label = cc.Label;\r\nimport {i18nMgr} from \"../Managers/I18nManager\";\r\nimport menu = cc._decorator.menu;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n/**\r\n * 用法：在结点上添加cc.Label后，再添加cc.LocalizedLabel\r\n */\r\n@ccclass\r\n@menu(\"其他组件/多语言\")\r\nexport class LocalizedLabel extends cc.Component {\r\n    /**\r\n     * 绑定的Label\r\n     */\r\n    public label: Label;\r\n\r\n    /**\r\n     * 当前显示的文字的未翻译版本\r\n     */\r\n    public prevRawText: string;\r\n\r\n    /**\r\n     * 当前显示的文字的翻译版本\r\n     */\r\n    public prevLocalizedText: string;\r\n\r\n    /**\r\n     * 未翻译的字符串\r\n     */\r\n    get string() {\r\n        return this.prevRawText;\r\n    }\r\n\r\n    /**\r\n     * 设置翻译前的字符串\r\n     * @param value\r\n     */\r\n    set string(value: string) {\r\n        this.prevRawText = value;\r\n        this.prevLocalizedText = this.label.string = i18nMgr().t(value);\r\n    }\r\n\r\n    protected start() {\r\n        i18nMgr().registerLabel(this);\r\n    }\r\n\r\n    protected onEnable() {\r\n        this.label = this.getComponent(Label);\r\n        if (!this.label) {\r\n            console.log(\"i18nLabel没有对应的Label\");\r\n            return;\r\n        }\r\n        this.string = this.label.string;\r\n    }\r\n\r\n    protected onDisable() {\r\n        //i18nMgr().unregisterLabel(this);\r\n    }\r\n\r\n    /**\r\n     * 根据最新的语言设置刷新一次当前的文字\r\n     */\r\n    public updateText() {\r\n        this.string = this.prevRawText;\r\n    }\r\n\r\n    protected update(dt: number) {\r\n        if (this.label.string != this.prevLocalizedText) {\r\n            this.string = this.label.string;\r\n        }\r\n    }\r\n\r\n    protected lateUpdate(dt: number) {\r\n        this.update(dt);\r\n    }\r\n}\r\n","import Sprite = cc.Sprite;\r\nimport {i18nMgr} from \"../Managers/I18nManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n/**\r\n * 用法：在结点上添加cc.Sprite后，再添加cc.i18nSprite\r\n */\r\n@ccclass\r\nexport class LocalizedSprite extends cc.Component {\r\n    /**\r\n     * 绑定的Sprite\r\n     */\r\n    public sprite: Sprite;\r\n\r\n    /**\r\n     * 图片名称，仅用于初始化，动态改变请用小写开头的spriteName\r\n     */\r\n    @property\r\n    private SpriteName: string = \"\";\r\n\r\n    /**\r\n     * 未翻译的字符串\r\n     */\r\n    get spriteName() {\r\n        return this.SpriteName;\r\n    }\r\n\r\n    /**\r\n     * 设置翻译前的字符串\r\n     * @param value\r\n     */\r\n    set spriteName(value: string) {\r\n        this.SpriteName = value;\r\n        i18nMgr().ts(value).then((val) => {\r\n            this.sprite.spriteFrame = val;\r\n        });\r\n    }\r\n\r\n    protected onEnable() {\r\n        this.sprite = this.getComponent(Sprite);\r\n        if (this.sprite == null) {\r\n            console.log(\"i18nSprite没有对应的Sprite\");\r\n            return;\r\n        }\r\n        i18nMgr().registerSprite(this);\r\n        this.spriteName = this.SpriteName;\r\n    }\r\n\r\n    protected onDisable() {\r\n        super.onDisable();\r\n        i18nMgr().unregisterSprite(this);\r\n    }\r\n\r\n    /**\r\n     * 根据最新的语言设置刷新一次当前的文字\r\n     */\r\n    public updateSprite() {\r\n        this.spriteName = this.spriteName;\r\n    }\r\n\r\n    public test33() {\r\n        this.spriteName = this.spriteName == \"loc/test\" ? \"loc/tt\" : \"loc/test\";\r\n    }\r\n}\r\n","import BattleDisplay from \"../BattleDisplay\";\r\nimport StageProgressController from \"../StageProgressController\";\r\nimport {waitForLogin} from \"../../../PlayerModule/Managers/PlayerManager\";\r\nimport {waitForDataLoad} from \"../../../CoreModule/Managers/DataManager\";\r\nimport {copyMgr} from \"../../../CopyModule/Managers/CopyManager\";\r\nimport {copyRepo} from \"../../../CopyModule/Data/Copy\";\r\nimport Label = cc.Label;\r\nimport Prefab = cc.Prefab;\r\nimport Sprite = cc.Sprite;\r\nimport Node = cc.Node;\r\nimport instantiate = cc.instantiate;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MainBattleDisplay extends BattleDisplay {\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n        super.start();\r\n        this.initProgress();\r\n    }\r\n\r\n    // region 界面绘制\r\n\r\n    refresh() {\r\n        super.refresh();\r\n        let index = (this.item.level - 1) % 15 + 1;\r\n        const level = copyRepo().main().level(this.item.level - 1);\r\n        this.mapName.string = level.displayName + (index < 10 ? \"0\" : \"\") + index;\r\n        this.setMap();\r\n    }\r\n\r\n    // endregion\r\n\r\n    // region 更新控制\r\n\r\n    protected update(dt: number) {\r\n        if (!this.item) return;\r\n        super.update(dt);\r\n        this.updateStageProgress();\r\n    }\r\n\r\n    updateStageProgress() {\r\n        let level = copyMgr().getMainPlayerCopy().curLevel;\r\n        if (level > this.currentLevel)\r\n            this.nextStage();\r\n        if (level < this.currentLevel)\r\n            this.lastStage();\r\n        this.enemies.forEach(e => e.enemyIndex = e.stageIndex < level ? 5 :\r\n            e.stageIndex > level ? 0 : this.enemyIndex());\r\n    }\r\n\r\n    // endregion\r\n\r\n    // region 关卡进度控制\r\n\r\n    @property(Label)\r\n    mapName: Label = null;\r\n    @property(Node)\r\n    progressContainer: Node = null;\r\n    @property(Prefab)\r\n    progressPrefab: Prefab = null;\r\n    @property(Sprite)\r\n    backgroundSprite: Sprite = null;\r\n\r\n    enemies: StageProgressController[] = [];\r\n    enemyIndex() {\r\n        return this.item && this.item.state < 5 ? 1 + this.item?.battlers\r\n            .filter(b => (b.camp == 1) && b.isDead).length : 0;\r\n    }\r\n    currentLevel: number = 1;\r\n\r\n    @waitForLogin\r\n    @waitForDataLoad\r\n    initProgress() {\r\n        this.currentLevel = Math.max(1, copyMgr().getMainPlayerCopy().curLevel - 1);\r\n        this.enemies = [];\r\n        for (let i = 0; i < 2; i++) {\r\n            let node = instantiate(this.progressPrefab);\r\n            node.parent = this.progressContainer;\r\n            let controller = node.getComponent(StageProgressController);\r\n            controller.init(i + this.currentLevel, i);\r\n            this.enemies.push(controller);\r\n        }\r\n    }\r\n\r\n    nextStage() {\r\n        this.currentLevel++;\r\n        let node = instantiate(this.progressPrefab);\r\n        node.parent = this.progressContainer;\r\n        node.opacity = 0;\r\n        let controller = node.getComponent(StageProgressController);\r\n        controller.init(this.currentLevel + 1, 2);\r\n        this.enemies.push(controller);\r\n        this.enemies.forEach((e, i) => {\r\n            if (e.node) e.nextStage();\r\n            else this.enemies.splice(i, 1);\r\n        });\r\n    }\r\n\r\n    lastStage() {\r\n        if (this.currentLevel == 1) return;\r\n        this.currentLevel--;\r\n        if (this.currentLevel > 1) {\r\n            let node = instantiate(this.progressPrefab);\r\n            node.parent = this.progressContainer;\r\n            node.opacity = 0;\r\n            let controller = node.getComponent(StageProgressController);\r\n            controller.init(this.currentLevel - 1, -2);\r\n            this.enemies.push(controller);\r\n        }\r\n        this.enemies.forEach((e, i) => {\r\n            if (e.node) e.lastStage();\r\n            else this.enemies.splice(i, 1);\r\n        });\r\n    }\r\n\r\n    setMap() {\r\n        this.backgroundSprite.spriteFrame = copyRepo().main().level(this.item.level - 1).mapPicture;\r\n    }\r\n\r\n    // endregion\r\n\r\n}\r\n","import Component = cc.Component;\r\nimport Sprite = cc.Sprite;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport MainMenuItemSelectionGroup from \"./MainMenuItemSelectionGroup\";\r\nimport MainMenuItemSelection from \"./MainMenuItemSelection\";\r\nimport Node = cc.Node;\r\nimport Color = cc.Color;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MainMenuController extends Component {\r\n\r\n    @property([Sprite])\r\n    backgroundSprites: Sprite[] = [];\r\n    @property([Sprite])\r\n    iconSprites: Sprite[] = [];\r\n    @property([Node])\r\n    textNodes: Node[] = [];\r\n    @property([Node])\r\n    playerWindows: Node[] = [];\r\n\r\n    @property(SpriteFrame)\r\n    backgroundSelect: SpriteFrame = null;\r\n    @property([SpriteFrame])\r\n    iconSelect: SpriteFrame[] = [];\r\n    @property(SpriteFrame)\r\n    backgroundUnselect: SpriteFrame = null;\r\n    @property([SpriteFrame])\r\n    iconUnselect: SpriteFrame[] = [];\r\n\r\n    @property([Node])\r\n    redPointTips: Node[] = [];\r\n\r\n\r\n    // onLoad () {}\r\n\r\n    isLoad: boolean = false;\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    setup () {\r\n        this.selectionGroup = new MainMenuItemSelectionGroup(false);\r\n        this.selections.forEach(s => {\r\n            this.selectionGroup.addElement(s);\r\n            s.menu = this;\r\n        });\r\n        this.selectionGroup.select(this.selections[1]);\r\n        this.selectionGroup.select(this.selections[0]);\r\n        this.isLoad = true;\r\n    }\r\n\r\n    update (dt) {\r\n        if (!this.isLoad) {\r\n            this.setup();\r\n            if (!this.isLoad) return;\r\n        }\r\n        this.updateTips();\r\n    }\r\n\r\n    updateTips () {\r\n        // 更新红点提示\r\n        this.redPointTips[2].active = Date.now() % 10000 >= 5000;\r\n    }\r\n\r\n    selectionGroup: MainMenuItemSelectionGroup = null;\r\n    @property([MainMenuItemSelection])\r\n    selections: MainMenuItemSelection[] = [];\r\n\r\n    onSelectChanged (index: number) {\r\n        this.backgroundSprites.forEach((bg, i) => {\r\n            bg.spriteFrame = i == index ? this.backgroundSelect : this.backgroundUnselect;\r\n        });\r\n        this.iconSprites.forEach((ic, i) => {\r\n            ic.spriteFrame = i == index ? this.iconSelect[i] : this.iconUnselect[i];\r\n        });\r\n        this.textNodes.forEach((n, i) => {\r\n            n.color = i == index ? new Color(250, 235, 204) : new  Color(68, 58, 46);\r\n        });\r\n        this.playerWindows.forEach((n, i) => {\r\n            n.active = i == index;\r\n        })\r\n    }\r\n\r\n}\r\n","import {SelectableGroup} from \"../../../CoreModule/Components/SelectableGroup\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MainMenuItemSelectionGroup extends SelectableGroup {\r\n\r\n}\r\n","import {SelectableObject} from \"../../../CoreModule/Components/SelectableObject\";\r\nimport MainMenuController from \"./MainMenuController\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MainMenuItemSelection extends SelectableObject {\r\n\r\n    menu: MainMenuController = null;\r\n\r\n    //region 回调控制\r\n\r\n    onDeselected (): void {\r\n\r\n    }\r\n\r\n    onSelected (): void {\r\n        this.menu?.onSelectChanged(this.selectableGroup.indexOf(this));\r\n    }\r\n\r\n    //endregion\r\n\r\n}\r\n","\r\nexport class MathUtils {\r\n\r\n\t/**\r\n\t * CLAMP\r\n\t */\r\n\tpublic static clamp(val: number, min: number, max: number) {\r\n\t\treturn Math.max(Math.min(val, max), min);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取随机范围数\r\n\t */\r\n\tpublic static random(min = 0, max = 1) {\r\n\t\treturn Math.random() * (max - min) + min;\r\n\t}\r\n\r\n\t/**\r\n\t * 生成随机字符串\r\n\t * @param len\r\n\t */\r\n\tpublic static randomString(len = 32) {\r\n\t\tconst chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';    /****默认去掉了容易混淆的字符oOLl,9gq,Vv,Uu,I1****/\r\n\t\tconst maxPos = chars.length;\r\n\r\n\t\tlet res = '';\r\n\t\tfor (let i = 0; i < len; i++)\r\n\t\t \tres += chars.charAt(Math.floor(Math.random() * maxPos));\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 随机选择\r\n\t * @param array\r\n\t */\r\n\tpublic static randomPick(array: any[]) {\r\n\t\treturn array[Math.floor(Math.random() * array.length)];\r\n\t}\r\n\r\n\t/**\r\n\t * 随机选择多个\r\n\t * @param array 选择的数组\r\n\t * @param count 选择个数（传了该参数，返回值将变为数组）\r\n\t * @param repeat 能否重复\r\n\t */\r\n\tpublic static randomPickMany<T>(array: T[], count: number, repeat = false): T[] {\r\n\t\tconst res = [];\r\n\t\tif (repeat) // 如果可以重复\r\n\t\t\tfor (let i = 0; i < count; i++)\r\n\t\t\t\tres.push(this.randomPick(array))\r\n\t\telse {\r\n\t\t\tconst tmp = array.slice(0);\r\n\t\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\t\tconst idx = Math.floor(Math.random() * tmp.length);\r\n\t\t\t\tres.push(tmp[idx]); // 如果tmp为空，添加的都是空值\r\n\t\t\t\ttmp.splice(idx, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 根据概率随机抽取\r\n\t */\r\n\tpublic static randomByRate(rate: number): boolean {\r\n\t\treturn Math.random() <= rate;\r\n\t}\r\n}\r\n","export class MessageQueue {\r\n\r\n\tstatic queue = [];\r\n\r\n\tpublic static registerListener() {\r\n\t\tthis.queue = window[\"queue\"] || [];\r\n\t\twindow.addEventListener('message', (e) => {\r\n\t\t\tconsole.log(\"message\", e, e.data);\r\n\t\t\tthis.queue.push(e);\r\n\t\t}, false);\r\n\t}\r\n\r\n\tpublic static message() {\r\n\t\treturn this.queue.shift();\r\n\t}\r\n}\r\n\r\nMessageQueue.registerListener();\r\n","import {conditionProcessor, ConditionProcessor} from \"../../PlayerModule/Utils/ConditionProcessor\";\r\nimport {MoneyType, PlayerMoney} from \"../Data/PlayerMoney\";\r\nimport {EconomicThrow} from \"../Common/EconomicCommon\";\r\nimport {playerMgr} from \"../../PlayerModule/Managers/PlayerManager\";\r\nimport {ConditionType} from \"../../PlayerModule/Data/Condition\";\r\nimport {PlayerJob} from \"../Data/PlayerJob\";\r\n\r\nabstract class MoneyConditionProcessor extends ConditionProcessor {\r\n\r\n\tprotected pMoney: PlayerMoney;\r\n\r\n\tprotected abstract get type(): MoneyType;\r\n\r\n\tprotected get playerValue() { return this.pMoney[this.type] }\r\n\tprotected get throwFunc(): Function { return EconomicThrow.NotEnoughMoney; }\r\n\r\n\tprotected preprocess() {\r\n\t\tsuper.preprocess();\r\n\t\tthis.pMoney = playerMgr().getPlayerData(PlayerMoney);\r\n\t}\r\n\r\n\tprotected async doConsume() {\r\n\t\tthis.pMoney.gain(this.type, -this.value);\r\n\t}\r\n\r\n}\r\n\r\n@conditionProcessor(ConditionType.Gold)\r\nexport class GoldConditionProcessor extends MoneyConditionProcessor {\r\n\r\n\tprotected get type(): MoneyType { return \"gold\"; }\r\n\r\n}\r\n\r\n@conditionProcessor(ConditionType.Diamond)\r\nexport class DiamondConditionProcessor extends MoneyConditionProcessor {\r\n\r\n\tprotected get type(): MoneyType { return \"diamond\"; }\r\n\r\n}\r\n\r\n@conditionProcessor(ConditionType.Medal)\r\nexport class MedalConditionProcessor extends  MoneyConditionProcessor {\r\n\r\n\tprotected get type(): MoneyType { return \"medal\" }\r\n\r\n}\r\n\r\n@conditionProcessor(ConditionType.Fragment)\r\nexport class FragmentConditionProcessor extends MoneyConditionProcessor {\r\n\r\n\tprotected get type(): MoneyType { return \"fragment\"; }\r\n\tprotected get throwFunc(): Function { return EconomicThrow.NotEnoughFragment; }\r\n\r\n}\r\n\r\n@conditionProcessor(ConditionType.ReturnTime)\r\nexport class ReturnTimeConditionProcessor extends ConditionProcessor {\r\n\r\n\tprotected pJob: PlayerJob;\r\n\r\n\tprotected preprocess() {\r\n\t\tsuper.preprocess();\r\n\t\tthis.pJob = playerMgr().getPlayerData(PlayerJob);\r\n\t}\r\n\r\n\tget consumable(): boolean { return false; }\r\n\r\n\tget playerValue() { return this.pJob.returnTimes }\r\n\tget throwFunc(): Function { return EconomicThrow.NotEnoughReturn; }\r\n\r\n}\r\n","import {rewardProcessor, RewardProcessor} from \"../../PlayerModule/Utils/RewardProcessor\";\r\nimport {MoneyType, PlayerMoney} from \"../Data/PlayerMoney\";\r\nimport {RewardType} from \"../../PlayerModule/Data/Reward\";\r\nimport {playerMgr} from \"../../PlayerModule/Managers/PlayerManager\";\r\n\r\nabstract class MoneyRewardProcessor extends RewardProcessor {\r\n\r\n\tprotected abstract get type(): MoneyType;\r\n\r\n\tpublic invoke(rate = 1) {\r\n\t\tconst pMoney = playerMgr().getPlayerData(PlayerMoney);\r\n\t\tpMoney.gain(this.type, this.value * rate);\r\n\t}\r\n\r\n}\r\n\r\n@rewardProcessor(RewardType.Gold)\r\nexport class GoldRewardProcessor extends MoneyRewardProcessor {\r\n\r\n\tprotected get type(): MoneyType { return \"gold\"; }\r\n\r\n}\r\n\r\n@rewardProcessor(RewardType.Diamond)\r\nexport class DiamondRewardProcessor extends MoneyRewardProcessor {\r\n\r\n\tprotected get type(): MoneyType { return \"diamond\"; }\r\n\r\n}\r\n\r\n@rewardProcessor(RewardType.Medal)\r\nexport class MedalRewardProcessor extends MoneyRewardProcessor {\r\n\r\n\tprotected get type(): MoneyType { return \"medal\"; }\r\n\r\n}\r\n\r\n@rewardProcessor(RewardType.Fragment)\r\nexport class FragmentRewardProcessor extends MoneyRewardProcessor {\r\n\r\n\tprotected get type(): MoneyType { return \"fragment\"; }\r\n\r\n}\r\n","import {field} from \"../../CoreModule/Data/BaseData\";\r\nimport {Motion} from \"./Motion\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {BaseRepository, getRepository, repository} from \"../../CoreModule/Data/BaseRepository\";\r\nimport {data, StaticData} from \"../../CoreModule/Data/StaticData\";\r\n\r\nexport const AttackMotionGroupId = 0;\r\nexport const HurtMotionGroupId = 1;\r\nexport const EnterMotionGroupId = 2;\r\nexport const DieMotionGroupId = 3;\r\nexport const BossEnterMotionGroupId = 5;\r\nexport const SkillMotionGroupId = 6;\r\nexport const RecoverMotionGroupId = 7;\r\n\r\n@data(\"MotionGroup\")\r\nexport class MotionGroup extends StaticData {\r\n\r\n\t@field([Motion])\r\n\tpublic motions: Motion[] = []\r\n}\r\n\r\nexport function motionGroupRepo() {\r\n\treturn getRepository(MotionGroupRepo);\r\n}\r\n\r\n@repository\r\nexport class MotionGroupRepo extends BaseRepository<MotionGroup> {\r\n\r\n\tget clazz(): Constructor<MotionGroup> { return MotionGroup; }\r\n\r\n\tpublic attack() {\r\n\t\treturn this.getById(AttackMotionGroupId);\r\n\t}\r\n\tpublic hurt() {\r\n\t\treturn this.getById(HurtMotionGroupId);\r\n\t}\r\n\tpublic enter() {\r\n\t\treturn this.getById(EnterMotionGroupId);\r\n\t}\r\n\tpublic die() {\r\n\t\treturn this.getById(DieMotionGroupId);\r\n\t}\r\n\tpublic skill() {\r\n\t\treturn this.getById(SkillMotionGroupId);\r\n\t}\r\n\tpublic recover() {\r\n\t\treturn this.getById(RecoverMotionGroupId);\r\n\t}\r\n\r\n}\r\n\r\n","import {Motion, MotionType, TargetType, TranslateType} from \"../Data/Motion\";\r\nimport {Vec1} from \"./Vec1\";\r\nimport {Battler} from \"../Data/Battler\";\r\nimport {Action} from \"../Data/Action\";\r\nimport {cache} from \"../../../Utils/DecoratorUtils\";\r\nimport Vec2 = cc.Vec2;\r\nimport v2 = cc.v2;\r\nimport Color = cc.Color;\r\n\r\nexport type MotionState = 'not_started' | 'playing' | 'ended' | 'finished';\r\n\r\nexport function motionProcessor(type: MotionType) {\r\n\treturn (clazz) => {\r\n\t\tMotionProcessor.processorSettings[type] = clazz;\r\n\t}\r\n}\r\n\r\nexport function createProcessor(\r\n\tbattler: Battler, motion: Motion,\r\n\taction?: Action, isResult: boolean = false) {\r\n\tconst clazz = MotionProcessor.processorSettings[motion.type];\r\n\treturn clazz ? new clazz(battler, motion, action, isResult) : null;\r\n}\r\n\r\nexport abstract class MotionProcessor {\r\n\r\n\tpublic static processorSettings = {};\r\n\r\n\tpublic motion: Motion;\r\n\tpublic action: Action;\r\n\tpublic battler: Battler;\r\n\r\n\tpublic isResult: boolean;\r\n\r\n\tpublic startTime: number = -1;\r\n\tpublic elapsedTime: number = -1;\r\n\r\n\tprotected state: MotionState = 'not_started';\r\n\r\n\tprotected constructor(battler: Battler, motion: Motion,\r\n\t\t\t\t\t\t\t\t\t\t\t\taction?: Action, isResult: boolean = false) {\r\n\t\tthis.battler = battler; this.action = action;\r\n\t\tthis.motion = motion; this.isResult = isResult;\r\n\t}\r\n\r\n\t/**\r\n\t * 数据属性定义\r\n\t */\r\n\tpublic get battle() { return this.action.battle; }\r\n\r\n\tpublic get subject() { return this.action.subject; }\r\n\tpublic get subjectBattler() { return this.subject.battler; }\r\n\r\n\tpublic get target() { return this.action.target; }\r\n\tpublic get targetBattler() { return this.target.battler; }\r\n\r\n\tpublic get isSubject() { return this.battler == this.subjectBattler }\r\n\tpublic get isTarget() { return this.battler == this.targetBattler }\r\n\r\n\t/**\r\n\t * 状态属性定义\r\n\t */\r\n\tpublic get isStarted() { return this.state != 'not_started'; }\r\n\t// public get isPlaying() { return this.state == 'playing'; }\r\n\tpublic get isEnded() { return this.state == 'ended' || this.isFinished; }\r\n\tpublic get isFinished() { return this.state == 'finished'; }\r\n\tpublic get isElapsedStarted() { return this.progress > 0; }\r\n\t// public get isElapsedPlaying() { return this.progress > 0 && this.progress < 1; }\r\n\tpublic get isElapsedEnded() { return this.progress >= 1; }\r\n\tpublic get isElapsedFinished() { return this.totalProgress >= 1; }\r\n\r\n\tpublic get duration() { return this.motion.duration; }\r\n\tpublic get endTime() { return this.startTime + this.duration; }\r\n\tpublic get totalEndTime() { return this.endTime + this.motion.wait; }\r\n\tpublic get totalDuration() { return this.totalEndTime - this.startTime; }\r\n\tpublic get progress() { return this.elapsedTime / this.duration; }\r\n\tpublic get totalProgress() { return this.elapsedTime / this.totalDuration; }\r\n\r\n\tpublic motionTarget(tType: TargetType) {\r\n\t\tswitch (tType){\r\n\t\t\tcase TargetType.Self:\r\n\t\t\t\treturn this.battler;\r\n\t\t\tcase TargetType.Subject:\r\n\t\t\t\treturn this.subjectBattler;\r\n\t\t\tcase TargetType.Target:\r\n\t\t\t\treturn this.targetBattler;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 更新\r\n\t */\r\n\tpublic update() {\r\n\t\t// console.log(\"[Motion.Update]\", this.motion.type);\r\n\r\n\t\tthis.elapsedTime = this.battler.elapsedTime - this.startTime;\r\n\r\n\t\tif (!this.isStarted && this.isElapsedStarted) this.start();\r\n\t\tif (!this.isEnded && !this.isFinished &&\r\n\t\t\tthis.isElapsedEnded) this.end();\r\n\t\tif (!this.isFinished && this.isElapsedFinished) this.finish();\r\n\r\n\t\tif (this.isStarted && !this.isEnded)\r\n\t\t\tthis.onProgress(this.progress);\r\n\t}\r\n\r\n\tprotected start() {\r\n\t\tthis.state = 'playing';\r\n\t\tthis.onStart();\r\n\t\tthis.onProgress(0);\r\n\t}\r\n\r\n\tprotected end() {\r\n\t\tthis.state = 'ended';\r\n\t\tthis.onProgress(1);\r\n\t\tthis.onEnd();\r\n\t}\r\n\r\n\tprotected finish() {\r\n\t\tthis.state = 'finished';\r\n\t\t// this.onProgress(1);\r\n\t\tthis.onFinish();\r\n\t}\r\n\r\n\tprotected onProgress(p: number) { }\r\n\r\n\tprotected onStart() {\r\n\t\t// console.log(\"[Motion.OnStart]\", this.elapsedTime, this.motion.type);\r\n\t}\r\n\r\n\tprotected onEnd() {\r\n\t\t// console.log(\"[Motion.OnEnd]\", this.elapsedTime, this.motion.type);\r\n\t}\r\n\r\n\tprotected onFinish() {\r\n\t\t// console.log(\"[Motion.OnFinish]\", this.elapsedTime, this.motion.type);\r\n\t}\r\n}\r\n\r\ntype TranslateProp = 'posRate' | 'angle' | 'scale';\r\n\r\nabstract class TranslateProcessor extends MotionProcessor {\r\n\r\n\tpublic targetVal: Vec1 | Vec2;\r\n\tpublic startVal: Vec1 | Vec2;\r\n\r\n\tprotected abstract get propKey(): TranslateProp;\r\n\tprotected abstract get oriVal();\r\n\tprotected get val() {\r\n\t\treturn this.battler[this.propKey].clone();\r\n\t}\r\n\r\n\t/**\r\n\t * 获取参数\r\n\t */\r\n\tprotected get tType(): TranslateType { return this.motion.params[0] }\r\n\tprotected get delta(): number[] | number { return this.motion.params[1] }\r\n\r\n\tprotected onStart() {\r\n\t\tsuper.onStart();\r\n\t\tthis.setupStartVal();\r\n\t\tthis.setupTargetVal();\r\n\t}\r\n\r\n\tprotected setupStartVal() {\r\n\t\tthis.startVal = this.val;\r\n\t}\r\n\r\n\tprotected setupTargetVal() {\r\n\t\tthis.targetVal = new Vec2();\r\n\r\n\t\tconst dt = v2(this.delta[0] || this.delta, this.delta[1] || 0);\r\n\r\n\t\tswitch (this.tType) {\r\n\t\t\tcase TranslateType.Delta:\r\n\t\t\t\tVec2.add(this.targetVal, this.val, dt); break;\r\n\t\t\tcase TranslateType.Value:\r\n\t\t\t\tthis.targetVal = dt; break;\r\n\t\t\tcase TranslateType.Origin:\r\n\t\t\t\tVec2.add(this.targetVal, this.oriVal, dt); break;\r\n\t\t\tdefault:\r\n\t\t\t\tthis.targetVal = this.val; break;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected onProgress(p: number) {\r\n\t\tsuper.onProgress(p);\r\n\t\tconst val = new Vec2();\r\n\t\tVec2.lerp(val, this.startVal, this.targetVal, p);\r\n\t\tthis.battler[this.propKey] = val;\r\n\t}\r\n}\r\n\r\n@motionProcessor(MotionType.Move)\r\nclass MoveProcessor extends TranslateProcessor {\r\n\r\n\tprotected get propKey(): TranslateProp { return \"posRate\"; }\r\n\r\n\tprotected get sPos() { return this.battler.startPos; }\r\n\tprotected get tPos() { return this.battler.targetPos; }\r\n\r\n\tprotected setupStartVal() {\r\n\t\tthis.startVal = Vec1.ZERO;\r\n\t}\r\n\r\n\tprotected setupTargetVal() {\r\n\t\tconst dt = v2(this.delta[0] || 0, this.delta[1] || 0);\r\n\r\n\t\tswitch (this.tType) {\r\n\t\t\tcase TranslateType.Delta:\r\n\t\t\t\tthis.tPos.origin = this.sPos.origin;\r\n\t\t\t\tVec2.add(this.tPos.offset, this.sPos.offset, dt);\r\n\t\t\t\tbreak;\r\n\t\t\tcase TranslateType.Value:\r\n\t\t\t\tthis.tPos.origin = this.sPos.origin;\r\n\t\t\t\tthis.tPos.offset = dt;\r\n\t\t\t\tbreak;\r\n\t\t\tcase TranslateType.Origin:\r\n\t\t\t\tthis.tPos.origin = \"self\";\r\n\t\t\t\tthis.tPos.offset = dt;\r\n\t\t\t\tbreak;\r\n\t\t\tcase TranslateType.Target:\r\n\t\t\t\tthis.tPos.origin = \"target\";\r\n\t\t\t\tthis.tPos.offset = dt;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.targetVal = Vec1.ONE;\r\n\t}\r\n\r\n\tprotected onFinish() {\r\n\t\tsuper.onFinish();\r\n\t\tthis.sPos.origin = this.tPos.origin;\r\n\t\tthis.sPos.offset = this.tPos.offset.clone();\r\n\t}\r\n\r\n\t// 不需要该值\r\n\tprotected get oriVal() { return null; }\r\n}\r\n\r\n@motionProcessor(MotionType.Scale)\r\nclass ScaleProcessor extends TranslateProcessor {\r\n\tprotected get propKey(): TranslateProp { return \"scale\"; }\r\n\tprotected get oriVal() { return Vec2.ONE; }\r\n}\r\n\r\n@motionProcessor(MotionType.Rotate)\r\nclass RotateProcessor extends TranslateProcessor {\r\n\tprotected get propKey(): TranslateProp { return \"angle\"; }\r\n\tprotected get oriVal() { return Vec1.ZERO; }\r\n}\r\n\r\n@motionProcessor(MotionType.Jump)\r\nclass JumpProcessor extends MotionProcessor {\r\n\r\n}\r\n\r\n@motionProcessor(MotionType.ApplyResult)\r\nclass ApplyResultProcessor extends MotionProcessor {\r\n\r\n\tprotected onStart() {\r\n\t\tsuper.onStart();\r\n\t\tif (this.isResult)\r\n\t\t\tconsole.error(\"结果动作中无法使用ApplyResult动作！\");\r\n\t\telse\r\n\t\t\tthis.targetBattler.applyResult(this.action);\r\n\t}\r\n}\r\n\r\n@motionProcessor(MotionType.ShowResult)\r\nclass ShowResultProcessor extends MotionProcessor {\r\n\r\n\tprotected onStart() {\r\n\t\tsuper.onStart();\r\n\t\tif (!this.isResult)\r\n\t\t\tconsole.error(\"非结果动作中无法使用ShowResult动作！\");\r\n\t\telse\r\n\t\t\tthis.battler.showResult(this.action.result);\r\n\t}\r\n}\r\n\r\n@motionProcessor(MotionType.PlayCharAni)\r\nclass CharAniProcessor extends  MotionProcessor {\r\n\t/**\r\n\t * 获取参数\r\n\t */\r\n\tprotected get name(): string { return this.motion.params[0] }\r\n\r\n\tprotected onStart() {\r\n\t\tsuper.onStart();\r\n\t\tthis.battler.animation = this.name;\r\n\t}\r\n\r\n\tpublic get duration(): number {\r\n\t\treturn this.realDuration();\r\n\t}\r\n\r\n\t@cache\r\n\tprivate realDuration() {\r\n\t\treturn this.battler.entity.skeleton.getRuntimeData()\r\n\t\t\t.animations.find(a => a.name == this.name)\r\n\t\t\t?.duration || this.motion.duration;\r\n\t}\r\n\r\n\tprotected onEnd() {\r\n\t\tsuper.onEnd();\r\n\t}\r\n}\r\n\r\n@motionProcessor(MotionType.Shake)\r\nclass ShakeProcessor extends  MotionProcessor {\r\n\r\n\tprotected get tt(): TargetType { return this.motion.params[0] }\r\n\tprotected get range(): number { return this.motion.params[1] }\r\n\r\n\tprotected onProgress(p: number) {\r\n\t\tsuper.onProgress(p);\r\n\t\tthis.motionTarget(this.tt).shakePos.x = this.range * Math.sin(Math.PI * 4 * p);\r\n\t}\r\n\r\n\tprotected onEnd() {\r\n\t\tsuper.onEnd();\r\n\t\tthis.motionTarget(this.tt).shakePos = Vec2.ZERO;\r\n\t}\r\n\r\n}\r\n\r\n@motionProcessor(MotionType.Shine)\r\nclass ShineProcessor extends  MotionProcessor {\r\n\r\n\tprotected get tt(): TargetType { return this.motion.params[0] }\r\n\tprotected get colorCode(): string { return this.motion.params[1] }\r\n\r\n\tprivate realColor: Color = Color.WHITE;\r\n\r\n\tprotected onStart() {\r\n\t\tsuper.onStart();\r\n\t\tthis.realColor = new Color().fromHEX(this.colorCode);\r\n\t}\r\n\r\n\tprotected onProgress(p: number) {\r\n\t\tsuper.onProgress(p);\r\n\t\tColor.lerp(this.motionTarget(this.tt).color, Color.WHITE, this.realColor, Math.sin(Math.PI * p));\r\n\t}\r\n\r\n\tprotected onEnd() {\r\n\t\tsuper.onEnd();\r\n\t\tthis.motionTarget(this.tt).color = Color.WHITE;\r\n\t}\r\n\r\n}\r\n\r\n@motionProcessor(MotionType.FadeOut)\r\nclass FadeOutProcessor extends MotionProcessor {\r\n\r\n\tprotected get tt(): TargetType { return this.motion.params[0] }\r\n\r\n\tprotected onStart() {\r\n\t\tsuper.onStart();\r\n\t}\r\n\r\n\tprotected onProgress(p: number) {\r\n\t\tsuper.onProgress(p);\r\n\t\tthis.motionTarget(this.tt).opacity = (1 - p) * 255;\r\n\t}\r\n\r\n\tprotected onEnd() {\r\n\t\tsuper.onEnd();\r\n\t}\r\n\r\n}\r\n\r\n@motionProcessor(MotionType.PlayBattleAni)\r\nclass PlayBattleAniProcessor extends MotionProcessor {\r\n\r\n\tprotected onStart() {\r\n\t\tthis.motion.params.forEach(p => {\r\n\t\t\tthis.battler.battle.battleAnimations.push(p[0]);\r\n\t\t\tthis.battler.battle.battleAnimationTimes.push(p[1]);\r\n\t\t})\r\n\t\tsuper.onStart();\r\n\t}\r\n\r\n\tprotected onProgress(p: number) {\r\n\t\tsuper.onProgress(p);\r\n\t}\r\n\r\n\tprotected onEnd() {\r\n\t\tsuper.onEnd();\r\n\t}\r\n\r\n}\r\n\r\n@motionProcessor(MotionType.PlayNormalAni)\r\nclass PlayNormalAniProcessor extends MotionProcessor {\r\n\r\n\tprotected onStart() {\r\n\t\tthis.motion.params.forEach(p => {\r\n\t\t\tthis.battler.normalAnimations = p[0];\r\n\t\t\tthis.battler.normalAnimationTimes = p[1];\r\n\t\t})\r\n\t\tsuper.onStart();\r\n\t}\r\n\r\n\tprotected onProgress(p: number) {\r\n\t\tsuper.onProgress(p);\r\n\t}\r\n\r\n\tprotected onEnd() {\r\n\t\tsuper.onEnd();\r\n\t}\r\n\r\n}\r\n","import {BaseData, field} from \"../../CoreModule/Data/BaseData\";\r\n\r\nexport enum MotionType {\r\n\tNone = \"none\",\r\n\tMove = \"move\",\r\n\tRotate = \"rotate\",\r\n\tScale = \"scale\",\r\n\tJump = \"jump\",\r\n\tShake = \"shake\",\r\n\tShine = \"shine\",\r\n\tReset = \"reset\",\r\n\tPlayCharAni = \"playCharAni\",\r\n\tPlayBattleAni = \"playBattleAni\",\r\n\tPlayNormalAni = \"playNormalAni\",\r\n\tPlaySE = \"playSE\",\r\n\tApplyResult = \"applyResult\",\r\n\tShowResult = \"showResult\",\r\n\tWait = \"ended\",\r\n\tFadeOut = \"fadeOut\"\r\n}\r\n\r\nexport enum TranslateType {\r\n\tDelta = 'delta',\r\n\tValue = 'value',\r\n\tOrigin = 'origin',\r\n\tTarget = 'target'\r\n}\r\n\r\nexport enum TargetType {\r\n\tSelf = 'self',\r\n\tSubject = 'subject',\r\n\tTarget = 'target',\r\n\tBackground = 'background',\r\n\tScreen = 'screen'\r\n}\r\n\r\nexport enum AniOrigin {\r\n\tSubject = 'subject',\r\n\tScreen = 'screen',\r\n\tTarget = 'target',\r\n}\r\n\r\nexport class Motion extends BaseData {\r\n\r\n\t@field\r\n\tpublic duration: number = 0; // 持续时间\r\n\t@field\r\n\tpublic offset: number = 0; // 时间偏移量\r\n\t@field\r\n\tpublic wait: number = 0; // 等待时间\r\n\t@field\r\n\tpublic playType: 'before' | 'after' = 'after'; // 播放类型\r\n\r\n\t@field(String)\r\n\tpublic type: MotionType = MotionType.None;\r\n\t@field([Object])\r\n\tpublic params: any[] = [];\r\n\r\n}\r\n","import HeroInTeamContainer from \"../../../Modules/BattleModule/Components/Hero/HeroInTeamContainer\";\r\nimport HeroGroupContainer from \"../../../Modules/BattleModule/Components/Hero/HeroGroupContainer\";\r\nimport {CopyType} from \"../../../Modules/CopyModule/Data/Copy\";\r\nimport {PlayerCopy} from \"../../../Modules/CopyModule/Data/PlayerCopy\";\r\nimport {CopyInterface} from \"../../../Modules/CopyModule/CopyCommon\";\r\nimport {Hero} from \"../../../Modules/HeroModule/Data/Hero\";\r\nimport {playerMgr, waitForLogin} from \"../../../Modules/PlayerModule/Managers/PlayerManager\";\r\nimport {waitForDataLoad} from \"../../../Modules/CoreModule/Managers/DataManager\";\r\nimport {heroMgr} from \"../../../Modules/HeroModule/Managers/HeroManager\";\r\nimport {copyMgr} from \"../../../Modules/CopyModule/Managers/CopyManager\";\r\nimport {battleScene} from \"../../BattleScene\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MyTeamFrame extends cc.Component {\r\n\r\n    totalHeroes: Hero[] = [];\r\n\r\n    @property(HeroInTeamContainer)\r\n    heroesInTeamContainer: HeroInTeamContainer = null;\r\n\r\n    @property(HeroGroupContainer)\r\n    heroGroupContainer: HeroGroupContainer = null;\r\n\r\n    start() {\r\n        this.setup().then(res => {\r\n            this.refreshTeam();\r\n        });\r\n    }\r\n\r\n    @waitForDataLoad\r\n    @waitForLogin\r\n    private async setup() {\r\n        const acc = playerMgr().player.account;\r\n        this.totalHeroes = (await heroMgr().getListFromServer())\r\n          .filter(h => h.ownerAccount == acc);\r\n    }\r\n\r\n    private refreshTeam() {\r\n        battleScene().heroesInTeam = this.getHeroesInTeam();\r\n        this.heroesInTeamContainer?.setItems(battleScene().heroesInTeam);\r\n    }\r\n\r\n    /**\r\n     * 获取当前出场的英雄列表\r\n     */\r\n    private getHeroesInTeam() {\r\n        let cfg = copyMgr().getMainPlayerCopySettings();\r\n        return this.totalHeroes.filter(h => cfg.nftIds.find(c => c == h.nftId));\r\n    }\r\n\r\n    addTeamMember(nftId: string) {\r\n        let cfg: PlayerCopy = copyMgr().getPlayerCopy();\r\n        let teamHeroNftIds = cfg.mainSetting().nftIds;\r\n        if (teamHeroNftIds.indexOf(nftId) >= 0) return this.removeTeamMember(nftId);\r\n        if (teamHeroNftIds.length >= 3) return;\r\n        teamHeroNftIds.push(nftId);\r\n        this.refreshTeam();\r\n    }\r\n\r\n    removeTeamMember(nftId: string) {\r\n        let cfg = copyMgr().getPlayerCopy();\r\n        let teamHeroNftIds = cfg.mainSetting().nftIds;\r\n        let idx = teamHeroNftIds.indexOf(nftId);\r\n        if (idx != -1) {\r\n            teamHeroNftIds.splice(idx, 1);\r\n        }\r\n        this.refreshTeam();\r\n    }\r\n\r\n    makeNewTeam(){\r\n        let cfg = copyMgr().getPlayerCopy();\r\n        let teamHeroNftIds = cfg.mainSetting().nftIds;\r\n        CopyInterface.AdjustHeroes({copyType: CopyType.Main, nftIds: teamHeroNftIds});\r\n    }\r\n}\r\n","import {error, get, loading, post} from \"../../CoreModule/Common/CoreCommon\";\r\n\r\nexport class NFTThrow {\r\n\r\n\t@error(500000, \"Web3初始化錯誤\") static Web3InitError(...p) {}\r\n\t@error(500001, \"暱稱輸入不正確\") static NicknameError(...p) {}\r\n\t@error(500002, \"部件庫存不足\") static PartStockError(...p) {}\r\n\t@error(500003, \"NFT已售罄\") static NFTStockError(...p) {}\r\n\t@error(500004, \"相同的NFT已存在\") static NFTExistError(...p) {}\r\n\t@error(500005, \"交易錯誤\") static TransactionError(...p) {}\r\n\t@error(500010, \"NFT創建錯誤\") static NFTCreateError(...p) {}\r\n\r\n}\r\n\r\nexport class NFTLoading {\r\n\r\n\t@loading(500000, \"錢包初始化\") static Web3Init(...p): any {};\r\n\t@loading(500001, \"創建NFT\") static CreateNFT(...p): any {};\r\n\r\n}\r\n\r\nconst APITestServerPath: string = \"https://test-hkaws-20220318-9927311a69be.nftmake.io/platform\";\r\nconst APIServerPath: string = \"https://www.nftmake.com/platform\";\r\n\r\nimport {Testing} from \"../Managers/NFTManager\";\r\n\r\nexport class NFTInterface {\r\n\r\n\t@post(Testing ? APITestServerPath : APIServerPath,\r\n\t\t\"/api/createimg\") static UploadImgInterface(d?): any {}\r\n\t// @post(APIServerPath, \"/api/createos\") static CreateOSInterface(d?): any {}\r\n\r\n}\r\n","import {chainId, defaultAccount, DefaultBt1, DefaultBt2, DefaultChainId, nftMgr} from \"../Managers/NFTManager\";\r\nimport {NFTLoading, NFTThrow} from \"../Common/NFTCommon\";\r\nimport {catchAsError, handleError} from \"../../CoreModule/Managers/AlertManager\";\r\nimport {blockLoading, showLoading} from \"../../CoreModule/Managers/LoadingManager\";\r\nimport {heroMgr} from \"../../HeroModule/Managers/HeroManager\";\r\n\r\nexport class NFTCreator {\r\n\r\n\tpublic bt1: number = DefaultBt1;\r\n\tpublic bt2: number = DefaultBt2;\r\n\tpublic name: string;\r\n\tpublic picture: string;\r\n\tpublic gif: string;\r\n\tprivate _partIds: number[];\r\n\r\n\tset partIds(value: number[]) {\r\n\t\tthis._partIds = value;\r\n\t\tthis.calcPrice().then();\r\n\t}\r\n\tget partIds() {\r\n\t\treturn this._partIds;\r\n\t}\r\n\r\n\tpublic price: number;\r\n\r\n\tpublic async getPrice() {\r\n\t\treturn this.price || await this.calcPrice();\r\n\t}\r\n\r\n\tpublic async calcPrice() {\r\n\t\tthis.price = null;\r\n\t\treturn this.price = await nftMgr().getNFTPrice(\r\n\t\t\tthis.bt1, this.bt2, this.partIds);\r\n\t}\r\n\r\n\tprivate async checkNFT() {\r\n\t\t// 检查名称合法性\r\n\t\tlet regular = /[a-zA-Z0-9]+\\s?[a-zA-Z0-9]+|[a-zA-Z0-9]+/; //正则表达式，只允许英文、数字且中间最多含一个空格\r\n\t\tif (this.name.length > 20 || regular.exec(this.name) ?\r\n\t\t\tregular.exec(this.name)[0] != this.name : true)\r\n\t\t\tNFTThrow.NicknameError();\r\n\r\n\t\t// let stock = await nftMgr().getPartsStock(\r\n\t\t// \tthis.bt1, this.bt2, this.partIds);\r\n\t\t//\r\n\t\t// console.log(\"getPartsStock: \", stock);\r\n\t\t//\r\n\t\t// if (stock.length > 0) NFTThrow.PartStockError();\r\n\t\t// // 检查是否下架该系列\r\n\t\t// if (stock.indexOf(\"0\") !== -1) NFTThrow.PartStockError(); // throw \"\\\\L[SCreate43]\";\r\n\t\t// // if (stock !== -1) NFTThrow.PartStockError(); // throw \"\\\\L[SCreate43]\";\r\n\t\t//\r\n\t\t// // 检查部件组合是否重复\r\n\t\t// let exist = await nftMgr().notUniqueParts(this.partIds);\r\n\t\t// if (exist) NFTThrow.NFTExistError();\r\n\t}\r\n\r\n\t// 拉起授权让用户设置授权代币数量？\r\n\t@catchAsError(NFTThrow.TransactionError)\r\n\tprivate async payForGameToken() {\r\n\t\tlet totalSupply = await nftMgr().getTotalSupply();\r\n\r\n\t\tconst hash = await nftMgr().payForIt(totalSupply);\r\n\t\tconst res = await nftMgr().searchHash(hash);\r\n\r\n\t\tif (!res) throw \"\\\\L[ERR500010_DETAIL4]\";\r\n\t}\r\n\r\n\tprivate async checkAccount() {\r\n\t\t// 检查钱包地址\r\n\t\tif(!defaultAccount())\r\n\t\t\tNFTThrow.NFTCreateError(\"\\\\L[ERR500010_DETAIL1]\");\r\n\r\n\t\t// // 判断bsc余额是否足够支付gas\r\n\t\t// let gasPrice = await nftMgr().getGasPrice();\r\n\t\t// let balance = await nftMgr().getBNBBalance();\r\n\t\t// if (gasPrice >= balance)\r\n\t\t// \tNFTThrow.TransactionError();\r\n\t\t//\r\n\t\t// // TODO: 测试\r\n\t\t// // 判断游戏代币是否足够支付\r\n\t\t// let nftPrice = await this.getPrice();\r\n\t\t// let gameBalance = await nftMgr().getUSTDBalance();\r\n\t\t// if (nftPrice > gameBalance)\r\n\t\t// \tNFTThrow.NFTCreateError(\"\\\\L[ERR500010_DETAIL2]\");\r\n\t\t//\r\n\t\t// // 判断获取授权合约扣除代币是否足够支付\r\n\t\t// let allowancePrice = await nftMgr().getAllowance();\r\n\t\t// // return this.payForGameToken()\r\n\t\t// if (nftPrice > allowancePrice)\r\n\t\t// \treturn this.payForGameToken()\r\n\t}\r\n\r\n\tprivate async check() {\r\n\t\treturn Promise.all([this.checkAccount(), this.checkNFT()])\r\n\t}\r\n\r\n\t@catchAsError(NFTThrow.NFTCreateError, \"\\\\L[ERR500010_DETAIL3]\")\r\n\tprivate async uploadImage() {\r\n\t\tconst gif = this.getGIFFormData();\r\n\t\tconst res = await nftMgr().uploadImage(this.picture, gif);\r\n\t\tconsole.log(\"uploadImage: \", res);\r\n\t\treturn res[\"data\"].toString();\r\n\t}\r\n\r\n\tprivate getGIFFormData(): FormData {\r\n\t\tlet binary = atob(this.gif.split(',')[1]);\r\n\t\tlet bits = new Uint8Array(new ArrayBuffer(binary.length));\r\n\t\tfor (let i = 0;i < binary.length;i++) bits[i] = binary.charCodeAt(i);\r\n\t\tlet file = new File([bits], this.name + \".gif\", {type: \"image/gif\"});\r\n\t\tlet res = new FormData();\r\n\t\tres.append(\"chainId\", nftMgr().chainId.toString());\r\n\t\tres.append(\"chainType\", nftMgr().chainType.toString());\r\n\t\tres.append(\"walletAddress\", nftMgr().defaultAccount.toString());\r\n\t\tres.append(\"file\", file);\r\n\t\treturn res;\r\n\t}\r\n\r\n\t@showLoading(NFTLoading.CreateNFT)\r\n\t@handleError(true)\r\n\t@catchAsError(NFTThrow.NFTCreateError)\r\n\t@blockLoading\r\n\tpublic async create() {\r\n\t\tawait nftMgr().connect();\r\n\t\tawait this.check();\r\n\t\tconst url = await this.uploadImage();\r\n\t\tconst data = await nftMgr().createNFT(this.name,\r\n\t\t\turl, this.bt1, this.bt2, this.partIds);\r\n\t\t// const res = await nftMgr().searchHash(hash);\r\n\t\tconst hero = heroMgr().convert(data);\r\n\r\n\t\tif (hero) {\r\n\t\t\t// const hero = await heroMgr().getLastNFT();\r\n\t\t\tconsole.log(\"NFT Result: \", hero);\r\n\t\t\t// const osRes = await nftMgr().createOS(hero.nftId);\r\n\t\t\t// console.log(\"Create OS: \", osRes);\r\n\t\t\tawait HeroInterface.CreateHero({ hero });\r\n\t\t\treturn hero;\r\n\t\t} else NFTThrow.NFTCreateError();\r\n\t\t\t// throw \"\\\\L[SCreate49]\";\r\n\t}\r\n}\r\n\r\nimport {HeroInterface} from \"../../HeroModule/Common/HeroCommon\";\r\n\r\n","import {MessageQueue} from \"../../CoreModule/Utils/MessageQueue\";\r\n\r\nexport const Web3Enable = false;\r\nexport const Testing = true;\r\n\r\nimport {BaseManager, getManager, manager} from \"../../CoreModule/Managers/BaseManager\";\r\nimport {Web3} from \"../Utils/Web3\";\r\nimport {PartType} from \"../../HeroModule/Data/PartType\";\r\nimport {showLoading} from \"../../CoreModule/Managers/LoadingManager\";\r\nimport {i18nMgr, LanguageType} from \"../../CoreModule/Managers/I18nManager\";\r\nimport {PromiseUtils} from \"../../../Utils/PromiseUtils\";\r\nimport {catchAsError, handleError} from \"../../CoreModule/Managers/AlertManager\";\r\nimport {NFTInterface, NFTLoading, NFTThrow} from \"../Common/NFTCommon\";\r\nimport {playerMgr} from \"../../PlayerModule/Managers/PlayerManager\";\r\nimport {partRepo} from \"../../HeroModule/Data/Part\";\r\n\r\nexport type ChainId = 1 | 4 | 56 | 97;\r\nexport type ChainType = \"BSC\" | \"ETH\";\r\nexport type WalletType = 'Metamask' | 'WalletConnect';\r\nexport type TokenType = 'BUSD' | 'ETH' | 'USDC';\r\n\r\nexport const DefaultChainId: ChainId = Testing ? 97 : 56;\r\nexport const DefaultChainType: ChainType = \"BSC\";\r\nexport const DefaultWalletType: WalletType = 'Metamask';\r\nexport const DefaultTokenType: TokenType = 'BUSD';\r\n\r\nexport const DefaultBt1: number = 2;\r\nexport const DefaultBt2: number = 6;\r\n\r\nexport const NFTTestServerPath: string = \"http://static.nftmake.io\"; // \"https://test-hkaws-20220318-9927311a69be.nftmake.io/platform/\";\r\nexport const NFTServerPath: string = \"https://static.nftmake.com\"; // \"https://www.nftmake.com/platform/\";\r\n\r\n// export const PartIdOffset: number = 6896;\r\n// export function PartIdOffset(id: number): number {\r\n// \tlet keys = Object.keys(PartIdOffsetDic).map(Number).sort((a, b) => b - a);\r\n// \tfor (let i = 0;i < keys.length;i++)\r\n// \t\tif (id >= keys[i]) return PartIdOffsetDic[keys[i]] - keys[i];\r\n// \treturn 0;\r\n// }\r\n// const PartIdOffsetDic: { [key: number]: number; } = {0: 6896, 4380: 13608};\r\nexport function nftMakeId2PartId(nftMakeId: number): number {\r\n\treturn partRepo().getByNftMakeId(nftMakeId).id;\r\n}\r\nexport function partId2NftMakeId(partId: number): number {\r\n\treturn partRepo().getById(partId).nftMakeId;\r\n}\r\n\r\nexport const PartTypeIdOffset: number = 331;\r\n\r\nconst HashSearchInterval = 1000;\r\nconst MaxHashSearchTimes = 60;\r\n\r\nconst PriceZeroCount = 18; // 价格后加0数\r\n\r\nexport function nftMgr() : NFTManager {\r\n\treturn getManager(NFTManager);\r\n}\r\n\r\nexport function data() {\r\n\treturn nftMgr().data;\r\n}\r\nexport function chainId() {\r\n\treturn nftMgr().chainId;\r\n}\r\nexport function walletType() {\r\n\treturn nftMgr().walletType;\r\n}\r\nexport function defaultAccount() {\r\n\treturn nftMgr().defaultAccount;\r\n}\r\n\r\nconst scripts = Testing ? [\r\n\t// \"https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js\",\r\n\t// \"https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js\",\r\n\t// \"https://unpkg.com/@walletconnect/qrcode-modal@1.6.6/dist/umd/index.min.js\",\r\n\t// \"https://unpkg.com/@walletconnect/client@1.6.6/dist/umd/index.min.js\",\r\n\t// // \"https://static.nftmake.com/static/getWeb3.js\"\r\n\t// \"https://static.nftmake.io/static/getWeb3.2.0.0.js\",\r\n\t\"https://cdn.jsdelivr.net/npm/web3@1.2.7/dist/web3.min.js\",\r\n\t\"https://unpkg.com/@walletconnect/qrcode-modal@1.6.6/dist/umd/index.min.js\",\r\n\t\"https://unpkg.com/@walletconnect/client@1.6.6/dist/umd/index.min.js\",\r\n\t\"https://unpkg.com/axios/dist/axios.min.js\",\r\n\t// \"https://static.nftmake.io/static/getWeb3.2.0.0.js\",\r\n\t\"https://static.nftmake.io/static/CREATELIB.js\",\r\n] : [\r\n\t\"https://cdn.jsdelivr.net/npm/web3@1.2.7/dist/web3.min.js\",\r\n\t\"https://unpkg.com/@walletconnect/qrcode-modal@1.6.6/dist/umd/index.min.js\",\r\n\t\"https://unpkg.com/@walletconnect/client@1.6.6/dist/umd/index.min.js\",\r\n\t\"https://unpkg.com/axios/dist/axios.min.js\",\r\n\t// \"https://static.nftmake.io/static/getWeb3.2.0.0.js\",\r\n\t\"https://static.nftmake.com/static/CREATELIB.js\",\r\n];\r\n\r\nclass NFTMakeData {\r\n\tlang?: LanguageType;\r\n\twindowSize?: number[];\r\n\tinviteAddress?: string;\r\n\taddress?: string;\r\n}\r\n\r\nfunction waitForInit(objOrDefault: any, key?, desc?): any {\r\n\tlet default_ = null;\r\n\tconst process = (obj, key, desc) => {\r\n\t\tconst oriFunc = desc.value;\r\n\t\tdesc.value = function () {\r\n\t\t\tconst args = arguments;\r\n\t\t\treturn new Promise(async (resolve, reject) => {\r\n\t\t\t\tif (!Web3Enable) resolve(default_);\r\n\t\t\t\telse {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst cond = await PromiseUtils.waitFor(() => this.initialized);\r\n\t\t\t\t\t\tif (cond) resolve(await oriFunc.apply(this, args));\r\n\t\t\t\t\t\telse reject(\"初始化失败！\");\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\treject(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tif (key === undefined && desc === undefined) { // 只有一个参数\r\n\t\tdefault_ = objOrDefault;\r\n\t\treturn process;\r\n\t}\r\n\tprocess(objOrDefault, key, desc);\r\n}\r\n\r\n@manager\r\nclass NFTManager extends BaseManager {\r\n\r\n\tpublic w3: Web3;\r\n\tpublic data: NFTMakeData = {};\r\n\r\n\tpublic chainId: ChainId = DefaultChainId;\r\n\tpublic chainType: ChainType = DefaultChainType;\r\n\tpublic walletType: WalletType = DefaultWalletType;\r\n\tpublic tokenType: TokenType = DefaultTokenType;\r\n\tpublic defaultAccount: string;\r\n\r\n\tprivate initialized = false;\r\n\tprivate dataRes: any;\r\n\tprivate dataRej: any;\r\n\r\n\t// region 初始化\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tif (Web3Enable) this.initialize().then();\r\n\t}\r\n\r\n\tprivate async initialize() {\r\n\t\tawait this.loadScripts();\r\n\t\tthis.setupLanguage();\r\n\t\tthis.createWeb3();\r\n\r\n\t\tconsole.log(\"NFT Managers\", this);\r\n\t}\r\n\r\n\tprivate async loadScripts() {\r\n\t\tconsole.log(\"loadScripts\");\r\n\t\tfor (const script of scripts)\r\n\t\t\tawait this.loadScript(script);\r\n\t}\r\n\r\n\tprivate loadScript(src): Promise<any> {\r\n\t\tconst head = document.children[0].children[0];\r\n\t\tconsole.log({head});\r\n\t\treturn new Promise(res => {\r\n\t\t\tlet script = document.createElement('script');\r\n\t\t\tscript.src = src;\r\n\t\t\thead.appendChild(script);\r\n\t\t\tscript.onload = () => res(true);\r\n\t\t\tscript.onerror = () => res(false);\r\n\t\t})\r\n\t}\r\n\r\n\tprivate setupLanguage() {\r\n\t\tPromiseUtils.waitFor(() => !!this.data.lang, 100, 100)\r\n\t\t\t.then(res => res && i18nMgr().setLanguage(this.data.lang));\r\n\t}\r\n\r\n\tprivate createWeb3() {\r\n\t\t// @ts-ignore\r\n\t\tthis.w3 = new getWeb3Lib() as Web3;\r\n\t\t// this.init().then();\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 更新\r\n\r\n\tupdate(dt: number) {\r\n\t\tsuper.update(dt);\r\n\t\tthis.updateMessage();\r\n\t}\r\n\r\n\tprivate updateMessage() {\r\n\t\tconst e = MessageQueue.message();\r\n\t\te && this.processMessage(e);\r\n\t}\r\n\r\n\tprivate processMessage(e) {\r\n\t\tconsole.log(\"processMessage: \", e, e.data);\r\n\t\tif ((e.data.target as string)?.includes(\"metamask\")) return;\r\n\t\tif (e.data.key == \"createNFTProgressCallBack\") return;\r\n\t\tif (e.data.nftData) this.dataRes(e.data.nftData);\r\n\t\tif (e.data.lang || e.data.windowSize ||\r\n\t\t\te.data.inviteAddress || e.data.address) {\r\n\t\t\tthis.data = Object.assign(this.data, e.data);\r\n\t\t\twindow['defaultAccount'] = this.defaultAccount = this.data.address;\r\n\t\t}\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region Web3函数简单封装\r\n\r\n\t// region 游戏内容部分\r\n\r\n\t/**\r\n\t * 获取组件数量是否足够（点击组件列表时调用）\r\n\t */\r\n\t// @showLoading\r\n\t@waitForInit(true)\r\n\tpublic async getEnoughStock(bt1, bt2, componentId: number | number[]) {\r\n\t\tconst componentIds = typeof componentId == 'number' ?\r\n\t\t\t[componentId] : componentId;\r\n\r\n\t\treturn await this.w3.getEnoughStock(\r\n\t\t\tbt1, bt2, componentIds, this.chainId\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取当前组件搭配所需库存是否足够\r\n\t */\r\n\t// @showLoading\r\n\t@waitForInit([])\r\n\tpublic async getPartsStock(bt1, bt2, partIds) {\r\n\t\treturn await this.w3.getFilterComponentStock(\r\n\t\t\tbt1, bt2, partIds, this.chainId\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * 判断当前组件搭配是否唯一\r\n\t */\r\n\t// @showLoading\r\n\t@waitForInit(false)\r\n\tpublic async notUniqueParts(partIds) {\r\n\t\treturn await this.w3.filterUniqueComponent(partIds, this.chainId, this.chainType);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取全局NFT列表\r\n\t */\r\n\t// @showLoading\r\n\t@waitForInit([])\r\n\tpublic async getAllNFTList(pageNum, bt1, bt2, pageSize) {\r\n\t\treturn await this.w3.getALLNFTList(pageNum, bt1, bt2, pageSize, this.chainId, this.chainType);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取我的NFT列表\r\n\t */\r\n\t// @showLoading\r\n\t@waitForInit([])\r\n\tpublic async getMyNFTList(pageNum, bt1, bt2, pageSize) {\r\n\t\treturn await this.w3.getMyNFTList(pageNum, bt1, bt2, pageSize, this.chainId, this.chainType);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取单个NFT详情\r\n\t */\r\n\t@showLoading\r\n\t@waitForInit({})\r\n\tpublic async getNFTDetail(nftId) {\r\n\t\treturn await this.w3.getTokenExtraView(nftId, this.chainId, this.chainType);\r\n\t}\r\n\r\n\t/**\r\n\t * 创建NFT\r\n\t */\r\n\t@showLoading\r\n\t@waitForInit\r\n\tpublic createNFT(name, imgUrl, bt1, bt2, componentIds) {\r\n\t\treturn new Promise<any>(async (resolve, reject) => {\r\n\t\t\tthis.dataRes = resolve; this.dataRej = reject;\r\n\t\t\t// const imgUrl_ = (Testing ? NFTTestServerPath : NFTServerPath) + \"/\" + imgUrl;\r\n\t\t\tconst price = await this.getNFTPrice(bt1, bt2, componentIds);\r\n\t\t\tconst symbolInfo = await this.checkPaySymbol(this.chainType, this.chainId)\r\n\t\t\tthis.tokenType = symbolInfo[0].symbolName;\r\n\r\n\t\t\tdebugger;\r\n\r\n\t\t\tthis.NFTMAKECreateNFTProgress(this.data.inviteAddress,\r\n\t\t\t\tthis.tokenType, name, imgUrl, bt1, bt2, componentIds,\r\n\t\t\t\tthis.chainId, this.chainType, this.walletType,\r\n\t\t\t\tprice, null);\r\n\t\t})\r\n\t\t// return this.w3.createNFT(this.data.inviteAddress,\r\n\t\t// \t\"\", name, Testing ? NFTTestServerPath : NFTServerPath + \"/\" + imgUrl,\r\n\t\t// \tbt1, bt2, componentIds, this.chainId, this.walletType, await this.getNFTPrice(bt1, bt2, componentIds), null, null);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取指定分类下组件列表\r\n\t */\r\n\t// @showLoading\r\n\t@waitForInit([])\r\n\tpublic async getPartList(bt1, bt2, partType: PartType) {\r\n\t\tconst ct = PartTypeIdOffset + partType.id;\r\n\t\treturn await this.w3.getNFTComponent(bt1, bt2, ct, this.chainId);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取用户创建NFT个数\r\n\t */\r\n\t// @showLoading\r\n\t@waitForInit(0)\r\n\tpublic async getUserNFTCount() {\r\n\t\treturn Number(await this.w3.getNFTBalance(this.chainId));\r\n\t}\r\n\r\n\t// /**\r\n\t//  * 查询用户make数量\r\n\t//  */\r\n\t// public async getUserMakeCount() {\r\n\t// \treturn Number(await this.w3.getMakeBalance(this.chainId));\r\n\t// }\r\n\r\n\t/**\r\n\t * 获取当前系列制作数和总量\r\n\t */\r\n\t// @showLoading\r\n\t@waitForInit({\r\n\t\tcreateCount: 0,\r\n\t\tlimitCreateCount: 99999,\r\n\t\trestCount: 99999\r\n\t})\r\n\tpublic async getNFTCount(bt1, bt2) {\r\n\t\tconst cnt = await this.w3.getNftCount(bt1, bt2, this.chainId);\r\n\t\treturn {\r\n\t\t\tcreateCount: Number(cnt.createCount),\r\n\t\t\tlimitCreateCount: Number(cnt.limitCreateCount),\r\n\t\t\trestCount: Number(cnt.limitCreateCount) - Number(cnt.createCount)\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * 获取NFT组合价格\r\n\t */\r\n\t// @showLoading\r\n\t@waitForInit(0)\r\n\tpublic async getNFTPrice(bt1, bt2, componentIds) {\r\n\t\treturn Number(await this.w3.getNFTPrice(bt1, bt2,\r\n\t\t\tcomponentIds, this.chainId, this.chainType, this.tokenType));\r\n\t}\r\n\r\n\t/**\r\n\t * 获取最新（刚刚创建）的NFT\r\n\t * @param hash\r\n\t */\r\n\t// @showLoading\r\n\t@waitForInit({})\r\n\tpublic async getLastestNFT(hash: string) {\r\n\t\treturn await this.w3.getLastestCreateNFT(this.chainId, this.chainType, hash);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 手动请求\r\n\r\n\t/**\r\n\t * 上传图片\r\n\t */\r\n\t@showLoading\r\n\t@waitForInit({imgurl: \"\"})\r\n\tpublic async uploadImage(baseimgurl: string, basegiffile: FormData) {\r\n\t\treturn await this.NFTMAKECreateimg(this.chainType, this.chainId, this.defaultAccount, baseimgurl, basegiffile);\r\n\t\t// return await NFTInterface.UploadImgInterface({\r\n\t\t// \tbaseimgurl, imgName, ac: this.defaultAccount, ci: this.chainId, gifUrl: \"\"\r\n\t\t// });\r\n\t}\r\n\r\n\t// /**\r\n\t//  * createOS\r\n\t//  */\r\n\t// @showLoading\r\n\t// @waitForInit\r\n\t// public async createOS(ti) {\r\n\t// \treturn await NFTInterface.CreateOSInterface({\r\n\t// \t\tti, ac: this.defaultAccount, ci: this.chainId\r\n\t// \t})\r\n\t// }\r\n\r\n\t// endregion\r\n\r\n\t// region 交易部分\r\n\r\n\t/**\r\n\t * 获取Gas费用\r\n\t */\r\n\t// @showLoading\r\n\t@waitForInit(0)\r\n\tpublic async getGasPrice() {\r\n\t\treturn Number(await this.w3.getGasPrice(this.chainId));\r\n\t}\r\n\r\n\t/**\r\n\t * 获取用户USTD余额\r\n\t */\r\n\t// @showLoading\r\n\t@waitForInit(0)\r\n\tpublic async getUSTDBalance() {\r\n\t\tawait PromiseUtils.waitFor(() => this.initialized);\r\n\r\n\t\treturn Number(await this.w3.getBalanceOf(this.chainId));\r\n\t}\r\n\r\n\t/**\r\n\t * 获取用户BNB余额\r\n\t */\r\n\t// @showLoading\r\n\t@waitForInit(0)\r\n\tpublic async getBNBBalance() {\r\n\t\treturn Number(await this.w3.getBalance(this.chainId));\r\n\t}\r\n\r\n\t/**\r\n\t * 获取用户授权代币数量\r\n\t */\r\n\t// @showLoading\r\n\t@waitForInit(0)\r\n\tpublic async getAllowance() {\r\n\t\treturn Number(await this.w3.getAllowance(this.chainId));\r\n\t}\r\n\r\n\t// /**\r\n\t//  * 获取Make币价\r\n\t//  */\r\n\t// public async getPrice() {\r\n\t// \treturn Number(await this.w3.getPrice(this.chainId));\r\n\t// }\r\n\r\n\t/**\r\n\t * 查询代币总量\r\n\t */\r\n\t// @showLoading\r\n\t@waitForInit(0)\r\n\tpublic async getTotalSupply() {\r\n\t\treturn Number(await this.w3.searchTotalSupply(this.chainId));\r\n\t}\r\n\r\n\t/**\r\n\t * 用户授权合约扣除代币\r\n\t */\r\n\t// @showLoading\r\n\t@waitForInit\r\n\tpublic async payForIt(price) {\r\n\t\treturn await this.w3.payForIt(price, this.chainId, this.walletType);\r\n\t}\r\n\r\n\t/**\r\n\t * 查询哈希值\r\n\t */\r\n\t@showLoading\r\n\t@waitForInit\r\n\tpublic searchHash(hash): Promise<boolean> {\r\n\t\treturn PromiseUtils.waitFor(() =>\r\n\t\t\tthis.w3.searchHash(hash, this.chainId),\r\n\t\t\tHashSearchInterval, MaxHashSearchTimes,\r\n\t\t\t\"interval\", \"SearchHash\");\r\n\t}\r\n\t// private searchHashPromise(hash): Promise<boolean> {\r\n\t// \tlet cnt = 0;\r\n\t// \treturn new Promise<boolean>((resolve) => {\r\n\t// \t\tlet interval = setInterval(async () => {\r\n\t// \t\t\tconst res = await this.w3.searchHash(hash, this.chainId);\r\n\t// \t\t\t// 如果已经成功了，或者超出最大次数\r\n\t// \t\t\tif (res || ++cnt >= MaxHashSearchTimes) {\r\n\t// \t\t\t\tclearInterval(interval);\r\n\t// \t\t\t\tresolve(res)\r\n\t// \t\t\t}\r\n\t// \t\t}, HashSearchInterval)\r\n\t// \t})\r\n\t// }\r\n\r\n\t// endregion\r\n\r\n\t// endregion\r\n\r\n\t// region 数据转化\r\n\r\n\tpublic convertPrice(data: string | number): number {\r\n\t\tif (!data) return 0;\r\n\t\tif (typeof data == 'number') return data;\r\n\r\n\t\tconst len = data.length;\r\n\t\treturn Number(len < PriceZeroCount ? data :\r\n\t\t\tdata.substr(0, len - PriceZeroCount));\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 具体业务操作封装\r\n\r\n\t/**\r\n\t * 链接钱包\r\n\t */\r\n\t@showLoading(NFTLoading.Web3Init)\r\n\t@handleError(true)\r\n\t@catchAsError(NFTThrow.Web3InitError)\r\n\tpublic async connect() {\r\n\t\t// let res = await PromiseUtils.waitForResult(\r\n\t\t// \tthis.w3.init(this.chainId, this.walletType)\r\n\t\t// );\r\n\t\t// console.log(\"INIT: \", res);\r\n\t\t// if (res) {\r\n\t\twhile (!(await PromiseUtils.waitFor(\r\n\t\t\t() => !!this.defaultAccount)))\r\n\t\t\t// @ts-ignore\r\n\t\t\tawait window.NFTMAKEDisconnect();\r\n\t\tawait playerMgr().login(this.defaultAccount,\r\n\t\t\tthis.chainId, this.walletType);\r\n\t\t// } else\r\n\t\t// \tthrow \"Wallet Not Connected!\";\r\n\t}\r\n\r\n\t/**\r\n\t * 初始化钱包\r\n\t */\r\n\t@showLoading(NFTLoading.Web3Init)\r\n\t@handleError\r\n\t@catchAsError(NFTThrow.Web3InitError)\r\n\tpublic async init(connect = true) {\r\n\t\tawait PromiseUtils.waitFor(() => !!this.w3);\r\n\t\tthis.initialized = true;\r\n\t\t// this.defaultAccount = window['defaultAccount'];\r\n\r\n\t\tif (connect) await this.connect();\r\n\r\n\t\t// if (this.initialized) return;\r\n\t\t// // await playerMgr().login(this.defaultAccount,\r\n\t\t// // \tthis.chainId, this.walletType);\r\n\t\t//\r\n\t\t// let res = true;\r\n\t\t// // let res = await PromiseUtils.waitForResult(\r\n\t\t// // \tthis.w3.init(this.chainId, this.walletType)\r\n\t\t// // );\r\n\t\t// console.log(\"INIT: \", res);\r\n\t\t//\r\n\t\t// if (res) {\r\n\t\t// \tthis.defaultAccount = window['defaultAccount'];\r\n\t\t// \tawait playerMgr().login(this.defaultAccount,\r\n\t\t// \t\tthis.chainId, this.walletType);\r\n\t\t// \tthis.initialized = true;\r\n\t\t// } else throw null;\r\n\r\n\t\t// const res = await alertMgr().alert(\"操作失败\", InitFailAlertText, AlertDialogType.OK);\r\n\t\t// if (res == AlertResult.OK) await this.init();\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region window方法封装\r\n\r\n\tprivate NFTMAKECreateNFTProgress(inviteAddress, token, nickname, imgUrl, bt1, bt2, componentIds, chainId, chainType, walletType, amount, callback) {\r\n\t\t// @ts-ignore\r\n\t\twindow.NFTMAKECreateNFTProgress(inviteAddress,\r\n\t\t\ttoken, nickname, imgUrl,\r\n\t\t\tbt1, bt2, componentIds, chainId, chainType, walletType,\r\n\t\t\tamount, callback);\r\n\t}\r\n\r\n\tprivate async NFTMAKECreateimg (chainType, chainId, walletAddress, base64, formData) {\r\n\t\t// @ts-ignore\r\n\t\twindow.chainId = this.chainId;\r\n\t\t// @ts-ignore\r\n\t\treturn await window.NFTMAKECreateimg(chainType, chainId, walletAddress, null, base64, formData, 1);\r\n\t}\r\n\r\n\tprivate async checkPaySymbol (chainType, chainId) {\r\n\t\t// @ts-ignore\r\n\t\treturn await window.checkPaySymbol(\"createNft\",\tchainType, chainId);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n","import {BaseManager, getManager, manager} from \"./BaseManager\";\r\nimport {loadingMgr, LoadingParam, LoadingOptions} from \"./LoadingManager\";\r\nimport {alertMgr, ErrorData} from \"./AlertManager\";\r\nimport {ParamCodec} from \"../Utils/ParamCodec\";\r\n\r\n// const Host = \"https://www.exermon.com:8088\";\r\nconst Host = \"https://zooworld-server-1836805-1255510304.ap-shanghai.run.tcloudbase.com\";\r\n// const Host = \"http://localhost:8088\"\r\n\r\nconst EncryptEnable = false;\r\nconst EncryptParamKey = \"e_params\";\r\n\r\nexport type Method = 'get' | 'post';\r\n\r\nexport type InterfaceLoading = LoadingParam | boolean;\r\n\t// 为false则不显示Loading，不填则使用默认值\r\n\r\nexport interface InterfaceOptions {\r\n\tmethod: Method;\r\n\thost?: string;\r\n\troute: string;\r\n\tuseToken?: boolean;\r\n\tuseEncrypt?: boolean;\r\n\tloading?: InterfaceLoading;\r\n}\r\n\r\nexport class Interface implements InterfaceOptions {\r\n\r\n\tpublic method: Method;\r\n\tpublic host: string = Host;\r\n\tpublic route: string;\r\n\tpublic useToken: boolean = true;\r\n\tpublic useEncrypt: boolean = true;\r\n\tpublic loading: InterfaceLoading = true;\r\n\r\n\tpublic get isGet() {return this.method == 'get'}\r\n\tpublic get isPost() {return this.method == 'post'}\r\n\r\n\tprivate _loadingSetting: LoadingOptions = null;\r\n\tpublic get loadingSetting(): LoadingOptions {\r\n\t\tif (!this._loadingSetting) {\r\n\t\t\tlet res: LoadingOptions = {};\r\n\t\t\tif (typeof this.loading == 'function')\r\n\t\t\t\tres = this.loading();\r\n\t\t\telse if (this.loading === null || this.loading === true)\r\n\t\t\t\tres = CoreLoading.Request(); // 为null使用默认值\r\n\t\t\telse if (this.loading === false)\r\n\t\t\t\tres.enable = false;\r\n\t\t\telse\r\n\t\t\t\tres = this.loading;\r\n\r\n\t\t\tthis._loadingSetting = res;\r\n\t\t}\r\n\t\treturn this._loadingSetting;\r\n\t}\r\n\r\n\tconstructor(options: InterfaceOptions) {\r\n\t\tObject.assign(this, options);\r\n\t}\r\n}\r\n\r\nexport type PostErrHandlerFunc = ((errorData: RequestErrorData) => boolean) | (() => boolean);\r\n\r\n/**\r\n * 标注网络请求发生错误时的处理函数<p>\r\n *\r\n * 示例1：当调用login，服务器返回403错误时<p>\r\n * 标注了<code>@postErrorHandler(Interface.Login, 0, 403)</code>的函数被执行<p>\r\n *\r\n * 示例2：当调用updateToken，服务器正常返回200，但数据的错误码为2时<p>\r\n * 标注了<code>@postErrorHandler(Interface.UpdateToken, 2)</code>的函数被执行\r\n *\r\n *\r\n * @param interface_ Interface对象\r\n * @param code 处理的服务器返回状态码\r\n * @param status 处理的http状态码，默认为200\r\n */\r\nexport function requestErrorHandler(\r\n\tinterface_: Interface, code: number, status: number = 200) {\r\n\treturn (obj, key, desc) => {\r\n\t\tnetworkMgr().registerErrorHandler(interface_, code, status, desc.value);\r\n\t}\r\n}\r\n\r\ninterface RequestErrorData extends ErrorData {\r\n\tinterface_: Interface\r\n\tstatus: number\r\n\tcode?: number\r\n\terrMsg?: string\r\n\tdetail?: string\r\n\tdata?: any\r\n\thandled?: boolean\r\n}\r\n\r\nclass RequestErrorHandler {\r\n\r\n\tprivate funcDict: any = {};\r\n\r\n\tconstructor() { }\r\n\r\n\tprivate getKey(interface_: Interface) {\r\n\t\treturn interface_.host + interface_.route;\r\n\t}\r\n\r\n\tpublic register(func: PostErrHandlerFunc, interface_: Interface | RequestErrorData,\r\n\t\t\t\t\t\t\t\t\tstatus?: number, code?: number) {\r\n\t\tif (interface_ instanceof Interface) {\r\n\t\t\tconst key = this.getKey(interface_);\r\n\t\t\tthis.funcDict[key] ||= {};\r\n\t\t\tthis.funcDict[key][status] ||= {};\r\n\t\t\tthis.funcDict[key][status][code] = func;\r\n\r\n\t\t} else this.register(func, interface_.interface_,\r\n\t\t\tinterface_.status, interface_.code);\r\n\t}\r\n\r\n\tpublic getHandler(interface_: Interface | RequestErrorData,\r\n\t\t\t\t\t\t\t\t\t\tstatus?: number, code?: number): PostErrHandlerFunc {\r\n\t\tif (interface_ instanceof Interface) {\r\n\t\t\tconst key = this.getKey(interface_);\r\n\t\t\tif (!this.funcDict[key]) return null;\r\n\t\t\tif (!this.funcDict[key][status]) return null;\r\n\t\t\treturn this.funcDict[key][status][code];\r\n\r\n\t\t} else return this.getHandler(interface_.interface_,\r\n\t\t\tinterface_.status, interface_.code);\r\n\t}\r\n\r\n\tpublic handle(errorData: RequestErrorData): boolean {\r\n\t\tlet func = this.getHandler(errorData);\r\n\t\tif (!func) return false;\r\n\r\n\t\tif (errorData.handled) return;\r\n\r\n\t\tconst res = func(errorData);\r\n\t\treturn errorData.handled = res == null ? true : res;\r\n\t}\r\n}\r\n\r\nexport function networkMgr(): NetworkManager {\r\n\treturn getManager(NetworkManager);\r\n}\r\n\r\n@manager\r\nclass NetworkManager extends BaseManager {\r\n\r\n\tprivate errorHandler: RequestErrorHandler = new RequestErrorHandler();\r\n\r\n\t/**\r\n\t * 发起请求\r\n\t */\r\n\tpublic async request<T = any>(interface_: Interface, data: object = {}): Promise<T> {\r\n\r\n\t\tdata = DataLoader.convert(data);\r\n\t\tconst dataStr = this.makeQueryParam(data, interface_.useEncrypt);\r\n\r\n\t\tlet url = interface_.host + interface_.route;\r\n\t\tif (interface_.isGet) url += \"?\" + dataStr;\r\n\r\n\t\tconst xhr = cc.loader.getXMLHttpRequest();\r\n\t\txhr.open(interface_.method, url, true);\r\n\t\txhr.setRequestHeader(\"Content-Type\",\r\n\t\t\t\"application/x-www-form-urlencoded\");\r\n\r\n\t\tif (interface_.useToken)\r\n\t\t\txhr.setRequestHeader(\"Token\", gameMgr().getToken());\r\n\r\n\t\treturn await this.getRequestPromise<T>(xhr, interface_, dataStr);\r\n\t}\r\n\r\n\tprivate getRequestPromise<T>(xhr: XMLHttpRequest, interface_: Interface, dataStr): Promise<T> {\r\n\r\n\t\treturn new Promise<T>((resolve, reject) => {\r\n\t\t\tconst loadingInfo = loadingMgr()\r\n\t\t\t\t.startLoading(interface_.loadingSetting);\r\n\r\n\t\t\txhr.onreadystatechange = () => {\r\n\t\t\t\tif (xhr.readyState !== 4) return;\r\n\r\n\t\t\t\tconst response = xhr.responseText;\r\n\t\t\t\tconst status = xhr.status;\r\n\r\n\t\t\t\tconsole.log(\"Response: \", xhr, status, response);\r\n\r\n\t\t\t\t// 从response里获取数据\r\n\t\t\t\tlet json, code, data, decoded;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tjson = JSON.parse(response);\r\n\t\t\t\t\t// 如果JSON是string，表示有加密\r\n\t\t\t\t\tif (typeof json == \"string\")\r\n\t\t\t\t\t\tjson = JSON.parse(decoded = ParamCodec.decode(json));\r\n\r\n\t\t\t\t\t// 虽然一般情况下不可能出现解不了码的情况，但万一真的不行如何处理？报500错误？\r\n\t\t\t\t\t// if (!json) throw \"Decode error!\";\r\n\t\t\t\t\t// else json = JSON.parse(json);\r\n\r\n\t\t\t\t\tcode = json[\"code\"] || 0;\r\n\t\t\t\t\tdata = json[\"data\"] || json;\r\n\r\n\t\t\t\t\tconsole.log(\"Response JSON: \", json, code, data);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error(\"Parse JSON failed!\", decoded, e);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 完全成功\r\n\t\t\t\tif (status >= 200 && status < 300 && code === 0)\r\n\t\t\t\t\tresolve(data);\r\n\t\t\t\t// 如果服务器错误或解析不到JSON\r\n\t\t\t\telse {\r\n\t\t\t\t\t// json有值：自定义错误，json无值：系统错误\r\n\t\t\t\t\tlet errMsg, detail = \"\";\r\n\t\t\t\t\tif (json) {\r\n\t\t\t\t\t\terrMsg = json[\"errMsg\"];\r\n\t\t\t\t\t\tdetail = json[\"detail\"];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\terrMsg = \"\\\\L[ERR_SYSTEM]\" + status;\r\n\t\t\t\t\t\tdata = response;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst errData: RequestErrorData = {\r\n\t\t\t\t\t\tinterface_, status, code, errMsg, detail, data\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.handleError(errData);\r\n\t\t\t\t\treject(errData);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tloadingInfo?.finish();\r\n\t\t\t};\r\n\r\n\t\t\tif (interface_.isGet) xhr.send();\r\n\t\t\telse xhr.send(dataStr);\r\n\t\t})\r\n\t}\r\n\r\n\tprivate makeQueryParam(data, useEncrypt) {\r\n\t\tlet res = Object.keys(data).reduce(\r\n\t\t\t(res, key) => (res + key + '=' +\r\n\t\t\t\tthis.convertParam(data[key]) + '&'), '');\r\n\t\tif (res !== '')\r\n\t\t\tres = res.substr(0, res.lastIndexOf('&'));\r\n\r\n\t\t// 处理加密参数的情况\r\n\t\tif (EncryptEnable && useEncrypt)\r\n\t\t\treturn EncryptParamKey + \"=\" + ParamCodec.encode(res);\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tprivate convertParam(data) {\r\n\t\tlet res = data;\r\n\t\tif (typeof data === 'object') res = JSON.stringify(res);\r\n\t\treturn encodeURIComponent(res);\r\n\t}\r\n\r\n\tprivate handleError(errorData: RequestErrorData) {\r\n\t\tlet success = this.errorHandler.handle(errorData);\r\n\t\tif (!success) alertMgr().handleError(errorData);\r\n\t}\r\n\r\n\tpublic registerErrorHandler(interface_: Interface, code: number, status: number, func: PostErrHandlerFunc) {\r\n\t\tthis.errorHandler.register(func, interface_, status, code);\r\n\t}\r\n}\r\n\r\nimport {gameMgr} from \"./GameManager\";\r\nimport {DataLoader} from \"../Utils/DataLoader\";\r\nimport {CoreLoading} from \"../Common/CoreCommon\";\r\n","\r\nexport function autoUnitConvert(obj, key, desc) {\r\n    const oriFunc = desc.value;\r\n    desc.value = function(...p) {\r\n        const oriUC = NumberUtils.autoUnitConvert;\r\n        try {\r\n            NumberUtils.autoUnitConvert = true;\r\n            return oriFunc.apply(this, p);\r\n        } finally {\r\n            NumberUtils.autoUnitConvert = oriUC;\r\n        }\r\n    }\r\n}\r\n\r\nconst oriNumber_toString = Number.prototype.toString;\r\nNumber.prototype.toString = function (radix?: number) {\r\n    return NumberUtils.autoUnitConvert ?\r\n      NumberUtils.toString(this) :\r\n      oriNumber_toString.call(this, radix);\r\n}\r\n\r\nexport class NumberUtils {\r\n\r\n    public static autoUnitConvert = false;\r\n\r\n    private static units: string[] = [\"\", \"K\", \"M\", \"B\", \"T\", \"aa\"];\r\n    public static toString(val: number): string {\r\n        if (val < 1000) return val % 1 === 0 ? \"\" + val : val.toFixed(2);\r\n        for (let i = 0; i < 5; i++) {\r\n            if (val >= 1000) {\r\n                val /= 1000;\r\n                continue;\r\n            }\r\n            if (val > 100) return val.toFixed(1) + this.units[i];\r\n            return val.toFixed(2) + this.units[i];\r\n        }\r\n        return val.toFixed(2) + this.units[5];\r\n    }\r\n\r\n}\r\n","import BattleDisplay from \"../BattleDisplay\";\r\nimport {battleScene} from \"../../../../Scenes/BattleScene\";\r\nimport PVPBattlerState from \"./PVPBattlerState\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PVPBattleDisplay extends BattleDisplay {\r\n\r\n    isSettled: boolean = false;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n        // if (this.isStarted) return;\r\n        super.start();\r\n    }\r\n\r\n    // region 战斗者获取\r\n\r\n    selfBattler() {\r\n        return this.battlers.find(b => b.camp == 0);\r\n    }\r\n\r\n    opponentBattler() {\r\n        return this.battlers.find(b => b.camp == 1);\r\n    }\r\n\r\n    // endregion\r\n\r\n    // region 界面绘制\r\n\r\n    @property([PVPBattlerState])\r\n    battlerStates: PVPBattlerState[] = [];\r\n\r\n    refresh() {\r\n        this.isSettled = false;\r\n        if (!this.item) return;\r\n        super.refresh();\r\n        this.setupHeroes();\r\n    }\r\n\r\n    setupHeroes() {\r\n        this.battlerStates.forEach((b, i) => b.setItem(this.battlers[i].item));\r\n    }\r\n\r\n    // endregion\r\n\r\n    // region 更新控制\r\n\r\n    protected update(dt: number) {\r\n        if (!this.item) return;\r\n        super.update(dt);\r\n        this.judgeCopySettlement();\r\n    }\r\n\r\n    judgeCopySettlement() {\r\n        if (this.item.winner != 0 || this.isSettled) return;\r\n        // let r = this.item.result.rewards;\r\n        // console.log(123456, r);\r\n        battleScene().settlementWindow.open([]);\r\n        this.isSettled = true;\r\n    }\r\n\r\n    // endregion\r\n\r\n}\r\n","import {ItemDisplay} from \"../../../CoreModule/Components/ItemDisplay\";\r\nimport {Battler} from \"../../Data/Battler\";\r\nimport Skeleton = sp.Skeleton;\r\nimport Label = cc.Label;\r\nimport Sprite = cc.Sprite;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport ProgressBar = cc.ProgressBar;\r\nimport {HeroSkeleton} from \"../../../../Utils/SpineUtils\";\r\nimport Node = cc.Node;\r\nimport Bone = sp.spine.Bone;\r\nimport Slot = sp.spine.Slot;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PVPBattlerState extends ItemDisplay<Battler> {\r\n\r\n    @property(Label)\r\n    heroLevelLabel: Label = null;\r\n    @property(Skeleton)\r\n    heroAvatarSkeleton: Skeleton = null;\r\n    @property(Sprite)\r\n    heroQualitySprite: Sprite = null;\r\n    @property(Sprite)\r\n    heroRestraintSprite: Sprite = null;\r\n\r\n    @property([SpriteFrame])\r\n    heroQualityPictures: SpriteFrame[] = [];\r\n    @property([SpriteFrame])\r\n    heroRestraintPictures: SpriteFrame[] = [];\r\n\r\n    @property(ProgressBar)\r\n    heroHpProgressBar: ProgressBar = null;\r\n    @property(Label)\r\n    heroHpLabel: Label = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    protected update(dt: number) {\r\n        if (!this.item) return;\r\n        this.updateHpBars();\r\n    }\r\n\r\n    private updateHpBars() {\r\n        this.heroHpLabel.string = this.item.hp + \"/\" + this.item.mhp;\r\n        this.heroHpProgressBar.progress = this.item.hp / this.item.mhp;\r\n    }\r\n\r\n    refresh() {\r\n        super.refresh();\r\n        this.heroLevelLabel.string = this.item.hero().level.level.toString();\r\n        this.heroQualitySprite.spriteFrame = this.heroQualityPictures[this.item.hero().quality];\r\n        this.heroRestraintSprite.spriteFrame = this.heroRestraintPictures[this.item.hero().restraint];\r\n        this.heroHpProgressBar.reverse = this.item.camp == 1;\r\n        this.drawAvatar();\r\n    }\r\n\r\n    private size: number = 93;\r\n    private avatarHeight: number = 0;\r\n    private avatarWidth: number = 0;\r\n    private avatarOffsetX: number = 0;\r\n    private avatarOffsetY: number = 0;\r\n\r\n    private drawAvatar(){\r\n        let node = new Node('node');\r\n        let temp = node.addComponent(Skeleton);\r\n        let hero = new HeroSkeleton(this.heroAvatarSkeleton, temp, this.item.hero().heroTypeId);\r\n        this.item.hero().parts.forEach(part => { hero.addPart(part); });\r\n        hero.refresh().then(res => {\r\n            node.destroy();\r\n            let bone: Bone = hero.findBone(\"head_1\");\r\n\r\n            hero.skeleton.updateWorldTransform();\r\n            let offsetX = bone.worldX, offsetY = bone.worldY;\r\n            while (bone.parent) bone = bone.parent;\r\n            bone.x -= offsetX;\r\n            bone.y -= offsetY;\r\n\r\n            let slot: Slot = hero.findSlot(\"head_1\");\r\n            if (!slot.getAttachment()) return;\r\n            this.avatarHeight = slot.getAttachment()[\"height\"];\r\n            this.avatarWidth = slot.getAttachment()[\"width\"];\r\n            this.avatarOffsetY = slot.getAttachment()[\"x\"];\r\n            this.avatarOffsetX = slot.getAttachment()[\"y\"];\r\n            this.sizeFilter();\r\n        });\r\n    }\r\n\r\n    private sizeFilter() {\r\n        let k = Math.min(this.avatarWidth / this.size, this.avatarHeight / this.size);\r\n        k *= 1.2;\r\n        // this.avatar.node.x = - this.avatarOffsetX / k;\r\n        this.heroAvatarSkeleton.node.y = - this.avatarOffsetY / k;\r\n        if (k > 1) this.heroAvatarSkeleton.node.scale = 1 / k;\r\n        else this.heroAvatarSkeleton.node.scale = 1;\r\n        this.heroAvatarSkeleton.node.scaleX *= this.item.camp == 1 ? 1 : -1;\r\n    }\r\n}\r\n","import Sprite = cc.Sprite;\r\nimport Label = cc.Label;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport Node = cc.Node;\r\nimport {battleScene} from \"../../../../Scenes/BattleScene\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PVPRoomDisplay extends cc.Component {\r\n\r\n    @property(Number)\r\n    index: number = -1;\r\n    @property(Sprite)\r\n    icon: Sprite = null;\r\n    @property(Sprite)\r\n    levelFrame: Sprite = null;\r\n    @property(Label)\r\n    levelValue: Label = null;\r\n    @property(Label)\r\n    tips1: Label = null;\r\n    @property(Label)\r\n    tips2: Label = null;\r\n    @property(Node)\r\n    frame: Node = null;\r\n    @property(Node)\r\n    lock: Node = null;\r\n\r\n    start () {\r\n        if (this.index >= 0) this.onIndexChange();\r\n    }\r\n\r\n    update (dt) {\r\n        if (this.index == -1) this.node.active = false;\r\n        this.frame.active = this.index == battleScene().currentPVPRoomIndex;\r\n        this.lock.active = battleScene().currentPVPSelect ? battleScene().currentPVPSelect.level.level <= this.index * 20 : true;\r\n    }\r\n\r\n    setIndex(i: number) {\r\n        this.index = i;\r\n        this.onIndexChange();\r\n    }\r\n\r\n    @property([SpriteFrame])\r\n    iconPictures: SpriteFrame[] = [];\r\n    @property([SpriteFrame])\r\n    framePictures: SpriteFrame[] = [];\r\n\r\n    onIndexChange() {\r\n        this.node.active = true;\r\n        if (this.index < 0) return;\r\n        this.icon.spriteFrame = this.iconPictures[this.index];\r\n        this.levelFrame.spriteFrame = this.framePictures[this.index];\r\n        this.levelValue.string = this.index == 0 ? \"01-20\" : (this.index * 20 + 1) + \"-\" + ((this.index + 1) * 20);\r\n    }\r\n\r\n    onClick() {\r\n        if (battleScene().currentPVPRoomIndex == this.index) return battleScene().currentPVPRoomIndex = -1;\r\n        if (!this.lock.active) battleScene().currentPVPRoomIndex = this.index;\r\n    }\r\n}\r\n","import {data, StaticData} from \"../../CoreModule/Data/StaticData\";\r\nimport {BaseRepository, getRepository, repository} from \"../../CoreModule/Data/BaseRepository\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {field} from \"../../CoreModule/Data/BaseData\";\r\n\r\nconst DefaultRoomPlayerCount = 8;\r\n\r\n@data(\"PVPRoom\")\r\nexport class PVPRoom extends StaticData {\r\n\r\n\t@field([Number])\r\n\tpublic levelRange: number[] = [0, 20];\r\n\t@field([Number])\r\n\tpublic rankRange: number[] = [-0.01, 0.05];\r\n\t@field\r\n\tpublic playerCount: number = DefaultRoomPlayerCount;\r\n\r\n}\r\n\r\nexport function pvpRoomRepo() {\r\n\treturn getRepository(PVPRoomRepo);\r\n}\r\n\r\n@repository\r\nexport class PVPRoomRepo extends BaseRepository<PVPRoom> {\r\n\r\n\tget clazz(): Constructor<PVPRoom> { return PVPRoom; }\r\n\r\n}\r\n","import Node = cc.Node;\r\nimport {battleScene} from \"../../../../Scenes/BattleScene\";\r\nimport Label = cc.Label;\r\nimport {playerMgr, waitForLogin} from \"../../../PlayerModule/Managers/PlayerManager\";\r\nimport {PlayerBattle} from \"../../Data/PlayerBattle\";\r\nimport SkillItemContainer from \"./SkillItemContainer\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PVPWindowController extends cc.Component {\r\n\r\n\t@property(Node)\r\n\troomsSelectNode: Node = null;\r\n\t@property(Node)\r\n\tplayersSelectNode: Node = null;\r\n\t@property(Node)\r\n\theroesSelectNode: Node = null;\r\n\t@property(Node)\r\n\trankNode: Node = null;\r\n\t@property(Node)\r\n\tskillNode: Node = null;\r\n\r\n\t@property(Node)\r\n\tbattleChanceNode: Node = null;\r\n\t@property(Label)\r\n\tbattleChance: Label = null;\r\n\r\n\tfighting: boolean = false;\r\n\theroSelecting: boolean = true;\r\n\r\n\tprotected update(dt: number) {\r\n\t\tthis.updateNodes();\r\n\t\tif (this.fighting && battleScene().pvpBattle.isSettled) {\r\n\t\t\tbattleScene().endPVPBattle();\r\n\t\t\tthis.fighting = false;\r\n\t\t}\r\n\t}\r\n\r\n\tupdateNodes() {\r\n\t\tthis.roomsSelectNode.active = !this.fighting && !battleScene().roomSelected;\r\n\t\tthis.playersSelectNode.active = !this.fighting && battleScene().roomSelected;\r\n\t\tthis.battleChanceNode.active = !this.fighting;\r\n\t\tthis.heroesSelectNode.active = !this.fighting && this.heroSelecting;\r\n\t\tthis.rankNode.active = !this.fighting && !this.heroSelecting;\r\n\t\tthis.skillNode.active = this.fighting;\r\n\t}\r\n\r\n\tprotected onEnable() {\r\n\t\tthis.pvpBtn();\r\n\t\t// 当pvp界面打开时，如果上次已经上阵英雄，则将已选择上阵设置为true\r\n\t\tif (battleScene().currentPVPSelect) battleScene().heroSelected = true;\r\n\t\tthis.drawBattleChance();\r\n\t}\r\n\r\n\t@waitForLogin\r\n\tdrawBattleChance() {\r\n\t\tconst battle = playerMgr().getPlayerData(PlayerBattle)\r\n\t\tthis.battleChance.string = battle.battleChance.toString();\r\n\t}\r\n\r\n\tprotected onDisable() {\r\n\t\t// 当pvp界面隐藏时，重置部分选择\r\n\t\tbattleScene().roomSelected = false;\r\n\t\tbattleScene().heroSelected = false;\r\n\t\tbattleScene().currentPVPRoomIndex = -1;\r\n\t\tbattleScene().currentTargetSelect = null;\r\n\t}\r\n\r\n\tpvpBtn() {\r\n\t\tthis.heroSelecting = true;\r\n\t}\r\n\r\n\trankBtn() {\r\n\t\tthis.heroSelecting = false;\r\n\t}\r\n\r\n\tconfirmRoomBtn() {\r\n\t\tif (battleScene().currentPVPRoomIndex != -1)\r\n\t\t\tbattleScene().roomSelected = true;\r\n\t}\r\n\r\n\tbackBtn() {\r\n\t\tbattleScene().roomSelected = false;\r\n\t}\r\n\r\n\tconfirmBattleBtn() {\r\n\t\tbattleScene().startPVPBattle().then(() => {\r\n\t\t\tthis.skillNode.getComponent(SkillItemContainer)\r\n\t\t\t\t.setItems(battleScene().pvpBattle.selfBattler()\r\n\t\t\t\t\t.item.skills.filter(s => s.skillId > 1000).map(s => s.skill));\r\n\t\t});\r\n\t\tthis.fighting = true;\r\n\t}\r\n\r\n\trefreshBtn() {\r\n\t\t// if (true) {\r\n\t\t//     let items = BattleInterface.GetPVPPlayers();\r\n\t\t//     this.playersSelectNode.getComponent(PlayerCardContainer).setItems();\r\n\t\t// }\r\n\t}\r\n}\r\n","/**\r\n * 对字符串编码解码的工具，目前用来加密请求和返回结果的字符串。<p>\r\n * 基本原理是把字符串转为utf-8编码，然后对每一个byte进行位操作\r\n */\r\nexport class ParamCodec {\r\n    static charset: string = \"0123456789ABCDEF\";\r\n    static perms: number[][] = undefined;\r\n\r\n    /**\r\n     * 加密一个字符串\r\n     * @param params 要加密的字符串\r\n     */\r\n    public static encode(params: string): string {\r\n        if (this.perms == undefined) this.init();\r\n        let arr: Uint8Array = new TextEncoder().encode(params);\r\n        let seed = this.hash(arr);\r\n        let result = \"\";\r\n        for (let i = 0; i < 4; i++) {\r\n            result += this.charset[(seed >> (4 * i)) & 0xF];\r\n        }\r\n\r\n        for (let i = 0; i < arr.length; i++) {\r\n            let ch = arr[i];\r\n            seed = this.nextInt(seed);\r\n            ch = this.shuffleByte(ch, this.perms[seed % 40320]);\r\n            let hi = ch >> 4;\r\n            let lo = ch & 0xF;\r\n            result += this.charset[hi] + this.charset[lo];\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 解密一个被加密的字符串\r\n     * @param coded 被加密的字符串\r\n     * @return 字符串解密后的结果，如果传入的参数非法，则返回null\r\n     */\r\n    public static decode(coded: string): string {\r\n        if (this.perms == undefined) this.init();\r\n        let arr: Uint8Array = new TextEncoder().encode(coded);\r\n        if (arr.length < 4) return null;\r\n        if ((arr.length - 4) % 2 != 0) return null;\r\n        let seed = 0;\r\n        let result = [];\r\n        for (let i = 0, base = 1; i < 4; i++, base *= 16) {\r\n            let idx = this.charset.indexOf(String.fromCharCode(arr[i]));\r\n            if (idx < 0) return null;\r\n            seed += base * idx;\r\n        }\r\n        for (let i = 0; i < arr.length - 4; i += 2) {\r\n            let hi = this.charset.indexOf(String.fromCharCode(arr[i + 4]));\r\n            let lo = this.charset.indexOf(String.fromCharCode(arr[i + 5]));\r\n            if (hi < 0 || lo < 0) return null;\r\n            let ch = hi * 16 + lo;\r\n            seed = this.nextInt(seed);\r\n            ch = this.deshuffleByte(ch, this.perms[seed % 40320]);\r\n            result.push(ch)\r\n        }\r\n        let buf = new Uint8Array(result);\r\n        return new TextDecoder().decode(buf);\r\n    }\r\n\r\n    private static init() {\r\n        this.perms = [];\r\n        let p = [0, 1, 2, 3, 4, 5, 6, 7];\r\n        for (let i = 0; i < 40320; i++) {\r\n            this.perms.push(p.slice());\r\n            this.nextPermutation(p);\r\n        }\r\n        /*性能测试\r\n        let t = Date.now();\r\n        let teststr=\"1234567890\".repeat(100);\r\n        for (let i = 0; i < 5000; i++) {\r\n            let coded=this.encode(teststr);\r\n            if(this.decode(coded)!=teststr)\r\n                console.error(\"!!!\")\r\n        }\r\n        console.log((Date.now() - t) + \"ms\");*/\r\n    }\r\n\r\n    private static nextInt(seed: number) {\r\n        const A = 5461;\r\n        const C = 97;\r\n        const M = 65520;\r\n        return (seed * A + C) % M;\r\n    }\r\n\r\n    private static hash(arr: Uint8Array) {\r\n        let result = 43;\r\n        for (let i = 0; i < arr.length; i++)\r\n            result = (result * 97 + arr[i]) % 40320;\r\n        return result;\r\n    }\r\n\r\n    private static shuffleByte(bt: number, pm) {\r\n        let bts = [];\r\n        for (let i = 0; i < 8; i++) {\r\n            bts[pm[i]] = bt % 2;\r\n            bt >>= 1;\r\n        }\r\n        return this.array2byte(bts);\r\n    }\r\n\r\n    private static deshuffleByte(bt: number, pm) {\r\n        let bts = [], un = [];\r\n        for (let i = 0; i < 8; i++) {\r\n            bts[i] = bt % 2;\r\n            bt = bt >> 1;\r\n        }\r\n        for (let i = 0; i < 8; i++)\r\n            un[i] = bts[pm[i]];\r\n        return this.array2byte(un);\r\n    }\r\n\r\n    private static array2byte(arr) {\r\n        let w = 1, result = 0;\r\n        for (let i = 0; i < 8; i++) {\r\n            result += w * arr[i];\r\n            w *= 2;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    private static nextPermutation(nums) {\r\n        let n = nums.length, i, j;\r\n        for (i = n - 2; i >= 0; i--) {\r\n            if (nums[i + 1] <= nums[i]) continue;\r\n            for (j = n - 1; j > i; j--)\r\n                if (nums[j] > nums[i]) break;\r\n            this.swap(nums, i, j);\r\n            this.reverse(nums, i + 1);\r\n            return;\r\n        }\r\n        nums.reverse();\r\n    }\r\n\r\n    private static swap(nums, i, j) {\r\n        let tmp = nums[i];\r\n        nums[i] = nums[j];\r\n        nums[j] = tmp;\r\n    }\r\n\r\n    private static reverse(nums, i) {\r\n        let n = nums.length - 1;\r\n        while (i < n) {\r\n            this.swap(nums, i, n);\r\n            i++;\r\n            n--;\r\n        }\r\n    }\r\n}","import {data, StaticData} from \"../../CoreModule/Data/StaticData\";\r\nimport {BaseRepository, getRepository, repository} from \"../../CoreModule/Data/BaseRepository\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {field} from \"../../CoreModule/Data/BaseData\";\r\nimport {QualityType} from \"./Quality\";\r\n\r\n// noinspection SpellCheckingInspection\r\nexport enum ParamType {\r\n\tCP, // Computing Power: 算力\r\n\tCPB, // Computing Power Bonus: 算力增幅\r\n\tHID, // HIDden: 隐藏属性\r\n\tPOW, // POWer: 力量\r\n\tAGI, // AGIle: 敏捷\r\n\tINT, // INTelligence: 智力\r\n\tPOWB, // POWer Bonus: 力量增幅\r\n\tAGIB, // AGIle Bonus: 敏捷增幅\r\n\tINTB, // INTelligence Bonus: 智力增幅\r\n\tATK, // ATtacK: 攻击\r\n\tCRI, // CRItical: 暴击\r\n\tDMG, // Damage: 伤害\r\n\tATKB, // ATtacK Bonus: 攻击增幅\r\n\tCRIB, // CRItical Bonus: 暴击增幅\r\n\tDMGB, // Damage Bonus: 伤害增幅\r\n\tDEF, // DEFense: 防御\r\n\tAVO, // AVOidance: 减伤\r\n\tEVA, // EVAsion: 闪避\r\n\tDEFB, // DEFense Bonus: 防御增幅\r\n\tAVOB, // AVOidance Bonus: 减伤增幅\r\n\tEVAB, // EVAsion Bonus: 闪避增幅\r\n\tMHP, // Max HP: 生命\r\n\tSPD, // SPeeD: 速度\r\n\tHIT, // HIT: 命中\r\n\tMHPB, // Max HP Bonus: 生命增幅\r\n\tSPDB, // SPeeD Bonus: 速度增幅\r\n\tHITB, // HIT Bonus: 命中增幅\r\n\tAB1, // All Bonus 1: 万能增幅1\r\n\tAB2, // All Bonus 2: 万能增幅2\r\n\tAB3, // All Bonus 3: 万能增幅3\r\n\tAB4, // All Bonus 4: 万能增幅4\r\n\r\n\t// 以下为额外属性\r\n\tBP, // Battle Point: 战力\r\n\tBPB, // Battle Point Bonus: 战力\r\n\r\n}\r\n\r\n@data(\"Param\")\r\nexport class Param extends StaticData {\r\n\r\n\t@field(Number)\r\n\tpublic id: ParamType;\r\n\t@field(String)\r\n\tpublic attr: string;\r\n\t@field\r\n\tpublic default_: number = 0;\r\n\t@field\r\n\tpublic min: number = 0;\r\n\t@field\r\n\tpublic max: number = 999999;\r\n\t@field\r\n\tpublic isPercent: boolean = false;\r\n\t@field([Number])\r\n\tpublic bonus: number[];\r\n\t@field\r\n\tpublic battlePoint: number = 0;\r\n\r\n\t/**\r\n\t * 缩写\r\n\t */\r\n\tpublic get shortName() { return ParamType[this.id]; }\r\n}\r\n\r\nexport function paramRepo() {\r\n\treturn getRepository(ParamRepo);\r\n}\r\n\r\n@repository\r\nexport class ParamRepo extends BaseRepository<Param> {\r\n\r\n\tget clazz(): Constructor<Param> { return Param; }\r\n\r\n\tgetById(id: ParamType): Param {\r\n\t\treturn super.getById(id);\r\n\t}\r\n\r\n\t// @ts-ignore\r\n\tgetByAttr(attr: string): Param {}\r\n\r\n}\r\n","import {ItemContainer} from \"../../../../Modules/CoreModule/Components/ItemContainer\";\r\nimport {PartInfo} from \"../../../../Modules/HeroModule/Data/PartInfo\";\r\nimport PartsDisplay from \"../ItemPrefabs/PartsDisplay\";\r\nimport PreviewPictureDisplay from \"../ItemPrefabs/PreviewPictureDisplay\";\r\nimport PartsSelectionGroup from \"./PartsSelectionGroup\";\r\nimport SingleEditor from \"../Editor/SingleEditor\";\r\nimport {ScrollviewFilter} from \"../../../../Modules/CoreModule/Utils/ScrollviewFilter\";\r\nimport {PartType} from \"../../../../Modules/HeroModule/Data/PartType\";\r\nimport PartsSelection from \"../ItemPrefabs/PartsSelection\";\r\nimport {HeroType} from \"../../../../Modules/HeroModule/Data/HeroType\";\r\nimport {partMgr} from \"../../../../Modules/HeroModule/Managers/PartManager\";\r\nimport {DefaultBt1, DefaultBt2} from \"../../../../Modules/NFTModule/Managers/NFTManager\";\r\nimport PartScaler from \"../ItemPrefabs/PartScaler\";\r\nimport {Part} from \"../../../../Modules/HeroModule/Data/Part\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PartColorsContainer extends ItemContainer<PartInfo, PartsDisplay> {\r\n\r\n    @property(PreviewPictureDisplay)\r\n    preview: PreviewPictureDisplay = null;\r\n\r\n    selectionGroup: PartsSelectionGroup = null;\r\n    singleEditor: SingleEditor = null;\r\n    partScaler: PartScaler = null;\r\n\r\n    // region 数据控制\r\n\r\n    /**\r\n     * 英雄数据\r\n     */\r\n    public get hero() { return this.preview.item }\r\n\r\n    /**\r\n     * 部件类型ID\r\n     */\r\n    public get partTypeId() { return this.items[0]?.partTypeId; }\r\n\r\n    // endregion\r\n\r\n    // region 更新控制\r\n\r\n    /**\r\n     * 更新\r\n     */\r\n    protected update(dt: number) {\r\n        let nodes = this.itemsComponents\r\n            .map(item => item.node).filter(node => node.active);\r\n        ScrollviewFilter.filter(\"vertical\", this.container,\r\n            nodes, 20, this.node.height, 20,\r\n            Math.floor(this.container.width / 120));\r\n    }\r\n\r\n    //endregion\r\n\r\n    // region 操作控制\r\n\r\n    /**\r\n     * 构建选择Group\r\n     */\r\n    private makeSelectionGroup(){\r\n        this.selectionGroup = new PartsSelectionGroup();\r\n        this.itemsComponents.forEach(item => {\r\n            let selection = item.node.getComponent(PartsSelection);\r\n            selection.display = selection.getComponent(PartsDisplay);\r\n            selection.container = this;\r\n            this.selectionGroup.addElement(selection);\r\n        })\r\n        this.selectionGroup.select(this.selectionGroup.getElementAt(0));\r\n        this.node.active = true;\r\n    }\r\n\r\n    // endregion\r\n\r\n    // region 回调控制\r\n\r\n    /**\r\n     * ItemDisplay创建回调\r\n     * @param display\r\n     */\r\n    public onItemDisplayCreated(display: PartsDisplay) {\r\n        display.preview = this.preview;\r\n    }\r\n\r\n    /**\r\n     * 数据改变回调\r\n     */\r\n    public onItemsChanged() {\r\n        super.onItemsChanged();\r\n        this.makeSelectionGroup();\r\n    }\r\n\r\n    public currentHeroType: HeroType = null;\r\n    public currentPartType: PartType = null;\r\n\r\n    /**\r\n     * 英雄类型变化回调\r\n     */\r\n    public async onHeroTypeChange() {\r\n        await this.preview.setHeroType(this.currentHeroType);\r\n    }\r\n\r\n    /**\r\n     * 部件类型变化回调\r\n     */\r\n    public async onTypeChange() {\r\n        if (!this.currentHeroType || !this.currentPartType) return;\r\n        this.setItems(await partMgr().getList(\r\n            DefaultBt1, DefaultBt2, this.currentPartType));\r\n    }\r\n\r\n    /**\r\n     * 选择回调\r\n     */\r\n    public onSelectChanged(item: PartsDisplay) {\r\n        this.preview.addPart(item.item.part);\r\n        this.singleEditor?.setItem(item.item);\r\n        this.partScaler?.setItem(item.item);\r\n        this.node.active = false;\r\n    }\r\n\r\n    /**\r\n     * 取消选择回调\r\n     */\r\n    public onSelectCancel(item: PartsDisplay) {\r\n        this.selectionGroup.select(item.node.getComponent(PartsSelection));\r\n        this.singleEditor?.setItem(null);\r\n        this.partScaler?.setItem(null);\r\n    }\r\n\r\n    public reselect(last: Part) {\r\n        let i = this.itemsComponents.findIndex(i => i.item.part == last);\r\n        if (i < 0) return;\r\n        this.selectionGroup.select(this.selectionGroup.getElementAt(i));\r\n        this.node.active = true;\r\n    }\r\n\r\n    // endregion\r\n\r\n}\r\n","import {BaseConfig, config} from \"../../CoreModule/Data/BaseConfig\";\r\nimport {field} from \"../../CoreModule/Data/BaseData\";\r\n\r\n@config(\"PartConfig\")\r\nexport default class PartConfig extends BaseConfig {\r\n\r\n\t// @field\r\n\t// srcPartIds: number[] = [];\r\n\t//\r\n\t// @field\r\n\t// tarPartIds: number[] = [];\r\n\t//\r\n\t@field // 槽层次配置\r\n\tslotOrders: {[T: string]: number} = {}\r\n\r\n\t@field // 槽名称映射，用于在不影响骨骼名情况下添加部件类型\r\n\tslotNameMap: {[T: string]: string} = {}\r\n\r\n\t@field // PartType → HeroType 的缩放设置\r\n\tpHtScale: number[][][] = [\r\n\t\t// 三个下标分别表示：候选部件A的PartTypeId, A的HeroTypeId, 当前HeroTypeId\r\n\t\t// 当玩家选择A时，应用ptHtScale[A.partTypeId][A.heroTypeId][当前HeroTypeId]的缩放值\r\n\t\t// 缩放值设置为0时，表示互斥\r\n\r\n\t];\r\n\r\n\t@field // PartType → Base PartType 的缩放设置，key: oriId-bOriId\r\n\tptBptScale: {[T: string]: number} = {};\r\n\t// ptBptScale: [number, number, number][] = [\r\n\t// \t// 三个参数分别表示：候选部件A的oriId, 已有部件B的oriId, 缩放值C\r\n\t// \t// （需满足前提：A.partType.baseTypeId == B.partTypeId，否则不生效）\r\n\t// \t// 当玩家选择A时，如果当前已经装备了B，则A应用C缩放\r\n\t// \t// 如果C为0，表示A无法装备到B上，需要在界面中排除掉\r\n\t//\r\n\t// ];\r\n\r\n\t@field // PartType → Base PartType 的偏移设置，key: oriId-bOriId\r\n\tptBptOffset: {[T: string]: [number, number]} = {};\r\n\t// ptBptOffset: [number, number, [number, number]][] = [\r\n\t// \t// 三个参数分别表示：候选部件A的oriId, 已有部件B的oriId, 缩放值C\r\n\t// \t// （需满足前提：A.partType.baseTypeId == B.partTypeId，否则不生效）\r\n\t// \t// 当玩家选择A时，如果当前已经装备了B，则A应用C偏移量\r\n\t// \t// 如果C为0，表示A无法装备到B上，需要在界面中排除掉\r\n\t//\r\n\t// ];\r\n\r\n\t@field // PartType → Base PartType 的隐藏设置，key: oriId-bOriId\r\n\tptBptHidden: {[T: string]: string[]} = {};\r\n\t// ptBptHidden: [number, number, string[]][] = [\r\n\t// \t// 三个参数分别表示：候选部件A的oriId, 已有部件B的oriId, 缩放值C\r\n\t// \t// （需满足前提：A.partType.baseTypeId == B.partTypeId，否则不生效）\r\n\t// \t// 当玩家选择A时，如果当前已经装备了B，则A应用C隐藏\r\n\t//\r\n\t// ];\r\n\r\n\t@field // clothes6问题，key: oriId-hOriId\r\n\tclothes6Problem: {[T: string]: boolean} = {};\r\n\r\n\t@field // clothes6问题，key: oriId-bOriId\r\n\tweapon3Problem: {[T: string]: boolean} = {};\r\n\r\n\t@field // 每个body的offset\r\n\tfootOffset: {[T: number]: [number, number]} = {};\r\n\r\n}\r\n","import {BaseData} from \"../../CoreModule/Data/BaseData\";\r\nimport {Web3NFTComponentData} from \"../../NFTModule/Utils/Web3\";\r\nimport {Part, partRepo} from \"./Part\";\r\n\r\nexport class PartInfo extends BaseData {\r\n\r\n\tpublic partId: number; // 组件ID\r\n\tpublic name: string = \"\"; // 组件名称\r\n\tpublic partTypeId: number = -1; // 组件类别\r\n\tpublic price: number = 0; // 组件价格\r\n\tpublic stock: number = 0; // 组件库存\r\n\tpublic url: string = \"\"; // 图片地址\r\n\t// public ban: boolean = false; // 冲突\r\n\r\n\tpublic rawData: Web3NFTComponentData; // 原始数据\r\n\r\n\tprivate _part: Part;\r\n\tpublic get part(): Part {\r\n\t\treturn this._part ||= partRepo().getById(this.partId);\r\n\t}\r\n}\r\n","import {BaseManager, getManager, manager} from \"../../CoreModule/Managers/BaseManager\";\r\nimport {PartType} from \"../Data/PartType\";\r\nimport {Web3NFTComponentData, Web3NFTData} from \"../../NFTModule/Utils/Web3\";\r\nimport {\r\n\tnftMgr,\r\n\tnftMakeId2PartId,\r\n\tPartTypeIdOffset,\r\n\tWeb3Enable\r\n} from \"../../NFTModule/Managers/NFTManager\";\r\nimport {PartInfo} from \"../Data/PartInfo\";\r\nimport {partRepo} from \"../Data/Part\";\r\n\r\nconst UseTestData = true;\r\n\r\nexport function partMgr() {\r\n\treturn getManager(PartManager);\r\n}\r\n\r\n@manager\r\nclass PartManager extends BaseManager {\r\n\r\n\tpublic data = {};\r\n\r\n\t/**\r\n\t * 获取单个组件\r\n\t */\r\n\tpublic async getOne(bt1: number, bt2: number, partType: PartType,\r\n\t\t\t\t\t\t\t\t\t\t\tid: number, refresh?: boolean) {\r\n\t\tconst list = await this.getList(bt1, bt2, partType, refresh);\r\n\t\treturn list?.find(d => d.partId == id);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取类别下的组件（带缓存）\r\n\t */\r\n\tpublic async getList(bt1: number, bt2: number,\r\n\t\t\t\t\t\t\t\t\t\t\t partType: PartType, refresh?: boolean) {\r\n\t\tlet res = this.getCacheList(bt1, bt2, partType);\r\n\r\n\t\t// 如果没有缓存或强制刷新\r\n\t\tif (!res || refresh)\r\n\t\t\tif (UseTestData || !Web3Enable) {\r\n\t\t\t\tconst parts = partRepo().findByPartTypeId(partType.id);\r\n\t\t\t\tres = this.data[this.getKey(bt1, bt2, partType)] =\r\n\t\t\t\t\tparts.map(p => p.toPartInfo());\r\n\t\t\t} else {\r\n\t\t\t\tlet tmp = await nftMgr().getPartList(bt1, bt2, partType);\r\n\t\t\t\ttmp = tmp.filter(d => this.isValid(d));\r\n\t\t\t\ttmp.forEach(d => this.add(bt1, bt2, partType, d));\r\n\t\t\t\tres = this.getCacheList(bt1, bt2, partType);\r\n\t\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * 获取缓存单个英雄数据\r\n\t */\r\n\tpublic getCacheOne(bt1: number, bt2: number, partType: PartType, id: number) {\r\n\t\tconst list = this.getCacheList(bt1, bt2, partType);\r\n\t\treturn list?.find(d => d.partId == id);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取缓存列表数据\r\n\t */\r\n\tpublic getCacheList(bt1: number, bt2: number, partType: PartType): PartInfo[] {\r\n\t\treturn this.data[this.getKey(bt1, bt2, partType)];\r\n\t}\r\n\tpublic getOrCreateCacheList(bt1: number, bt2: number, partType: PartType): PartInfo[] {\r\n\t\treturn this.data[this.getKey(bt1, bt2, partType)] ||= [];\r\n\t}\r\n\r\n\t/**\r\n\t * 添加组件\r\n\t */\r\n\tprivate add(bt1: number, bt2: number, partType: PartType,\r\n\t\t\t\t\t\t\tdata: Web3NFTComponentData) {\r\n\t\tconst pid = nftMakeId2PartId(Number(data.componentId));\r\n\t\tconst list = this.getOrCreateCacheList(bt1, bt2, partType);\r\n\r\n\t\t// 获取缓存中单个数据\r\n\t\tlet res = this.getCacheOne(bt1, bt2, partType, pid);\r\n\t\t// 如果不存在数据，加到列表里\r\n\t\tif (!res) list.push(res = new PartInfo());\r\n\t\t// 转换数据\r\n\t\treturn this.convert(data, res);\r\n\t}\r\n\r\n\tprivate getKey(bt1: number, bt2: number, partType: PartType) {\r\n\t\treturn bt1 + \"_\" + bt2 + \"_\" + partType.id;\r\n\t}\r\n\r\n\tprivate isValid(data: Web3NFTComponentData) {\r\n\t\tconst pid = nftMakeId2PartId(Number(data.componentId));\r\n\t\treturn !!partRepo().getById(pid); // DataUtils.part(pid, \"id\");\r\n\t}\r\n\r\n\tpublic convert(data: Web3NFTComponentData, res?: PartInfo): PartInfo {\r\n\t\tres ||= new PartInfo();\r\n\t\tres.partId = nftMakeId2PartId(Number(data.componentId));\r\n\t\tres.name = data.name;\r\n\t\tres.partTypeId = Number(data.ct) - PartTypeIdOffset;\r\n\t\tres.price = nftMgr().convertPrice(data.prices[0].price);\r\n\t\tres.stock = Number(data.stock);\r\n\t\tres.rawData = data;\r\n\t\treturn res;\r\n\t}\r\n\r\n}\r\n","import {ItemDisplay} from \"../../../../Modules/CoreModule/Components/ItemDisplay\";\r\nimport Label = cc.Label;\r\nimport Node = cc.Node;\r\nimport {PartInfo} from \"../../../../Modules/HeroModule/Data/PartInfo\";\r\nimport {selectorScene} from \"../../SelectorScene\";\r\nimport PartsDisplay from \"../ItemPrefabs/PartsDisplay\";\r\nimport PreviewPictureDisplay from \"../ItemPrefabs/PreviewPictureDisplay\";\r\nimport {configMgr} from \"../../../../Modules/CoreModule/Managers/ConfigManager\";\r\nimport PartConfig from \"../../../../Modules/HeroModule/Configs/PartConfig\";\r\nimport Slider = cc.Slider;\r\nimport PartsContainer from \"../ItemContainers/PartsContainer\";\r\nimport EditBox = cc.EditBox;\r\nimport {editorMgr} from \"../../../../Modules/HeroModule/Managers/EditorManager\";\r\nimport TransformUtil from \"../../../../Utils/TransformUtils\";\r\nimport {partTypeRepo} from \"../../../../Modules/HeroModule/Data/PartType\";\r\nimport Button = cc.Button;\r\nimport {partRepo} from \"../../../../Modules/HeroModule/Data/Part\";\r\nimport PartColorsContainer from \"../ItemContainers/PartColorsContainer\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nconst MaxScale = 1.4;\r\nconst MinScale = 0.6;\r\n\r\n@ccclass\r\nexport default class PartScaler extends ItemDisplay<PartInfo> {\r\n\r\n\t@property(PartColorsContainer)\r\n\tpartsContainer: PartColorsContainer = null;\r\n\r\n\t@property(Label)\r\n\tpartTypeName: Label = null;\r\n\t@property(Slider)\r\n\tscaleBar: Slider = null;\r\n\r\n\t@property(PreviewPictureDisplay)\r\n\tpreview: PreviewPictureDisplay = null\r\n\r\n\tprotected onLoad() {\r\n\t\tthis.partsContainer.partScaler = this;\r\n\t}\r\n\r\n\t// region 数据获取\r\n\r\n\tpublic get part() { return this.item?.part; }\r\n\tpublic get partType() { return this.part?.partType; }\r\n\tpublic get basePartType() { return this.partType?.basePartType; }\r\n\tpublic get basePart() { return this.basePartType ?\r\n\t\tthis.preview.item?.findPart(this.basePartType) : null;\r\n\t}\r\n\r\n\tpublic get partSetting() {\r\n\t\treturn this.preview.item.getPartSetting(this.item.partId);\r\n\t}\r\n\r\n\tpublic get scale() { return this.partSetting.scale; }\r\n\tpublic set scale(val) { this.partSetting.scale = val; }\r\n\r\n\t// endregion\r\n\r\n\t// region 刷新控制\r\n\r\n\trefresh() {\r\n\t\tsuper.refresh();\r\n\r\n\t\tthis.preview.refresh();\r\n\r\n\t\tif (this.item == null) return;\r\n\r\n\t\tthis.drawScale();\r\n\t}\r\n\tprivate drawScale() {\r\n\t\tconst scale = this.scale;\r\n\t\tthis.partTypeName.string = this.partType.getDisplayName();\r\n\t\tthis.scaleBar.progress = (scale - MinScale) / (MaxScale - MinScale);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 操作\r\n\r\n\t/**\r\n\t * 设置缩放\r\n\t */\r\n\tpublic setScale(scale) {\r\n\t\tthis.scale = scale;\r\n\t\tthis.refresh();\r\n\t}\r\n\r\n\t/**\r\n\t * 重置\r\n\t */\r\n\tpublic reset() {\r\n\t\tthis.setScale(1);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 回调\r\n\r\n\tpublic onScaleSlide() {\r\n\t\tconst rate = this.scaleBar.progress;\r\n\t\tthis.setScale(rate * (MaxScale - MinScale) + MinScale);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n","import {ItemContainer} from \"../../../../Modules/CoreModule/Components/ItemContainer\";\r\nimport {PartType, partTypeRepo} from \"../../../../Modules/HeroModule/Data/PartType\";\r\nimport PartsContainer from \"./PartsContainer\";\r\nimport {ScrollviewFilter} from \"../../../../Modules/CoreModule/Utils/ScrollviewFilter\";\r\nimport Node = cc.Node;\r\nimport PartTypeDisplay from \"../ItemPrefabs/PartTypeDisplay\";\r\nimport PartTypeSelectionGroup from \"./PartTypeSelectionGroup\";\r\nimport PartTypeSelection from \"../ItemPrefabs/PartTypeSelection\";\r\nimport {waitForLogin} from \"../../../../Modules/PlayerModule/Managers/PlayerManager\";\r\nimport {waitForDataLoad} from \"../../../../Modules/CoreModule/Managers/DataManager\";\r\nimport GlobalEditor from \"../Editor/GlobalEditor\";\r\nimport Boolean = cc.Boolean;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PartTypeContainer extends ItemContainer<PartType, PartTypeDisplay> {\r\n\r\n\t@property(PartsContainer)\r\n\tpartsContainer: PartsContainer = null;\r\n\t@property(Boolean)\r\n\tincludeBackground: boolean = true;\r\n\r\n\t@property(PartTypeContainer)\r\n\trelative: PartTypeContainer = null;\r\n\r\n\tselectionGroup: PartTypeSelectionGroup = null;\r\n\tglobalEditor: GlobalEditor = null;\r\n\r\n\t// region 数据控制\r\n\r\n\tisInclude(item: PartType): boolean {\r\n\t\treturn super.isInclude(item) && (this.includeBackground || !item.isBackground);\r\n\t}\r\n\r\n\tprivate makeSelectionGroup(){\r\n\t\tthis.selectionGroup = new PartTypeSelectionGroup(false);\r\n\t\tthis.itemsComponents.forEach(item => {\r\n\t\t\tlet selection = item.node.getComponent(PartTypeSelection)\r\n\t\t\tselection.display = selection.getComponent(PartTypeDisplay)\r\n\t\t\tselection.container = this;\r\n\t\t\tthis.selectionGroup.addElement(selection);\r\n\t\t})\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t//region 更新控制\r\n\r\n\tprotected start() {\r\n\t\tthis.setup();\r\n\t}\r\n\r\n\t@waitForDataLoad\r\n\tsetup() {\r\n\t\tthis.setItems(partTypeRepo().list);\r\n\t}\r\n\r\n\tprotected update(dt: number) {\r\n\t\tthis.itemsComponents.forEach(i => i.node.active ? i.size = this.container.width / this.items.length : null);\r\n\t\t// let nodes : Node[] = [];\r\n\t\t// this.itemsComponents.forEach(item => { if(item.node.active == true) nodes.push(item.node) })\r\n\t\t// ScrollviewFilter.filter(\"horizontal\", this.container, nodes, 10, this.node.width);\r\n\t}\r\n\r\n\t//endregion\r\n\r\n\t//region 回调控制\r\n\r\n\tonItemsChanged() {\r\n\t\tsuper.onItemsChanged();\r\n\t\tthis.makeSelectionGroup();\r\n\t}\r\n\r\n\tpublic onSelectChanged(item: PartTypeDisplay) {\r\n\t\tif (this.relative) {\r\n\t\t\tconst curSel = this.selectionGroup.currentSelection();\r\n\t\t\tconst index = this.selectionGroup.indexOf(curSel);\r\n\t\t\tconst relSelGroup = this.relative?.selectionGroup;\r\n\t\t\trelSelGroup.select(relSelGroup.getElementAt(index));\r\n\t\t}\r\n\t\tif (this.partsContainer) {\r\n\t\t\tthis.partsContainer.optional = item.item.optional;\r\n\t\t\tthis.partsContainer.currentPartType = item.item;\r\n\t\t\tthis.partsContainer.onTypeChange().then();\r\n\t\t}\r\n\t\tthis.globalEditor?.setItem(item.item);\r\n\t}\r\n\r\n\t//endregion\r\n\r\n}\r\n","import {ItemDisplay} from \"../../../../Modules/CoreModule/Components/ItemDisplay\";\r\nimport {PartType} from \"../../../../Modules/HeroModule/Data/PartType\";\r\nimport Label = cc.Label;\r\nimport Node = cc.Node;\r\nimport Color = cc.Color;\r\nimport {selectorScene} from \"../../SelectorScene\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PartTypeDisplay extends ItemDisplay<PartType> {\r\n\r\n\t@property(Label)\r\n\tlabel: Label = null;\r\n\t@property(Node)\r\n\tbackground: Node = null;\r\n\t@property(Node)\r\n\tbottomLine: Node = null;\r\n\r\n\tpublic size: number = 0;\r\n\r\n\tprivate isSelected: boolean = false;\r\n\r\n\tstart () { }\r\n\r\n\t//region 更新控制\r\n\r\n\trefresh(){\r\n\t\tsuper.refresh();\r\n\t\tif (this.item == null) return;\r\n\t\tthis.isSelected = false;\r\n\t\tthis.label.string = this.item.getDisplayName();\r\n\t\tif (selectorScene().editorMode)\r\n\t\t\tthis.label.string = `${this.item.id} ${this.label.string}`;\r\n\t}\r\n\r\n\tprotected update(dt: number) {\r\n\t\tthis.node.width = Math.max(this.size, 40);\r\n\t\tthis.bottomLine.width = this.node.width + 10;\r\n\t\tthis.label.node.color = this.isSelected ? new Color(255, 255, 255) : new Color(159, 157, 180);\r\n\t\tthis.bottomLine.opacity = this.isSelected ? 255 : 0;\r\n\t\t// this.background.opacity = this.isSelected ? 255 : 0;\r\n\t}\r\n\r\n\t//endregion\r\n\r\n\t//region 回调控制\r\n\r\n\tpublic onSelectChanged(select: boolean){\r\n\t\tthis.isSelected = select;\r\n\t}\r\n\r\n\t//endregion\r\n\r\n}\r\n","import {SelectableGroup} from \"../../../../Modules/CoreModule/Components/SelectableGroup\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PartTypeSelectionGroup extends SelectableGroup {\r\n\r\n}","import {SelectableObject} from \"../../../../Modules/CoreModule/Components/SelectableObject\";\r\nimport PartTypeDisplay from \"./PartTypeDisplay\";\r\nimport PartTypeContainer from \"../ItemContainers/PartTypeContainer\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PartTypeSelection extends SelectableObject {\r\n\r\n    display: PartTypeDisplay = null;\r\n    container: PartTypeContainer = null;\r\n\r\n    //region 回调控制\r\n\r\n    onDeselected(): void {\r\n        this.display.onSelectChanged(false);\r\n    }\r\n\r\n    onSelected(): void {\r\n        this.display.onSelectChanged(true);\r\n        this.container.onSelectChanged(this.display);\r\n    }\r\n\r\n    //endregion\r\n\r\n}\r\n","import {BaseRepository, getRepository, repository} from \"../../CoreModule/Data/BaseRepository\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {data, StaticData} from \"../../CoreModule/Data/StaticData\";\r\nimport {field} from \"../../CoreModule/Data/BaseData\";\r\n\r\nexport enum SpecialPartType {\r\n\tNormal, Body, Head, Clothes, Foot, Weapon, Background //,Suit\r\n}\r\n\r\n@data(\"PartType\")\r\nexport class PartType extends StaticData {\r\n\r\n\t@field\r\n\tpublic name: string = \"\";\r\n\t@field\r\n\tpublic baseTypeId: number = -1; // 基于的类型ID\r\n\t@field\r\n\tpublic special: SpecialPartType = SpecialPartType.Normal;\r\n\t@field\r\n\tpublic optional: boolean = false;\r\n\t@field([String])\r\n\tpublic slotNames: string[] = [];\r\n\r\n\tpublic get isBody() {return this.special == SpecialPartType.Body;}\r\n\tpublic get isHead() {return this.special == SpecialPartType.Head;}\r\n\tpublic get isClothes() {return this.special == SpecialPartType.Clothes;}\r\n\tpublic get isFoot() {return this.special == SpecialPartType.Foot;}\r\n\tpublic get isWeapon() {return this.special == SpecialPartType.Weapon;}\r\n\tpublic get isBackground() {return this.special == SpecialPartType.Background;}\r\n\r\n\t/**\r\n\t * 基类型列表\r\n\t */\r\n\tpublic get basePartType() {\r\n\t\treturn this.baseTypeId < 0 ? null :\r\n\t\t\tpartTypeRepo().getById(this.baseTypeId);\r\n\t}\r\n\r\n\t/**\r\n\t * 子类型列表\r\n\t */\r\n\tpublic get subPartTypes() {\r\n\t\treturn partTypeRepo().findByBaseTypeId(this.id);\r\n\t}\r\n}\r\n\r\nexport function partTypeRepo() {\r\n\treturn getRepository(PartTypeRepo);\r\n}\r\n\r\n@repository\r\nexport class PartTypeRepo extends BaseRepository<PartType> {\r\n\r\n\tget clazz(): Constructor<PartType> { return PartType; }\r\n\r\n\t// @ts-ignore\r\n\tpublic findByBaseTypeId(bptId: number): PartType[] {}\r\n\t// @ts-ignore\r\n\tpublic getBySpecial(special: SpecialPartType): PartType {}\r\n\r\n\t/**\r\n\t * 根PartType\r\n\t */\r\n\tpublic rootPartTypes() {\r\n\t\treturn this.findByBaseTypeId(-1);\r\n\t}\r\n\r\n\t/**\r\n\t * 类型\r\n\t */\r\n\tpublic get body() { return this.getBySpecial(SpecialPartType.Body); }\r\n\tpublic get head() { return this.getBySpecial(SpecialPartType.Head); }\r\n\tpublic get clothes() { return this.getBySpecial(SpecialPartType.Clothes); }\r\n\tpublic get foot() { return this.getBySpecial(SpecialPartType.Foot); }\r\n\tpublic get weapon() { return this.getBySpecial(SpecialPartType.Weapon); }\r\n\tpublic get background() { return this.getBySpecial(SpecialPartType.Background); }\r\n}\r\n","import {ItemContainer} from \"../../../../Modules/CoreModule/Components/ItemContainer\";\r\nimport PartsDisplay from \"../ItemPrefabs/PartsDisplay\";\r\nimport PartsSelection from \"../ItemPrefabs/PartsSelection\";\r\nimport PartsSelectionGroup from \"./PartsSelectionGroup\";\r\nimport {ScrollviewFilter} from \"../../../../Modules/CoreModule/Utils/ScrollviewFilter\";\r\nimport PreviewPictureDisplay from \"../ItemPrefabs/PreviewPictureDisplay\";\r\nimport {PartInfo} from \"../../../../Modules/HeroModule/Data/PartInfo\";\r\nimport {PartType, SpecialPartType} from \"../../../../Modules/HeroModule/Data/PartType\";\r\nimport {HeroType} from \"../../../../Modules/HeroModule/Data/HeroType\";\r\nimport {partMgr} from \"../../../../Modules/HeroModule/Managers/PartManager\";\r\nimport {DefaultBt1, DefaultBt2} from \"../../../../Modules/NFTModule/Managers/NFTManager\";\r\nimport {selectorScene} from \"../../SelectorScene\";\r\nimport SingleEditor from \"../Editor/SingleEditor\";\r\nimport PartColorsContainer from \"./PartColorsContainer\";\r\nimport PartScaler from \"../ItemPrefabs/PartScaler\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PartsContainer extends ItemContainer<PartInfo, PartsDisplay> {\r\n\r\n\t@property(PreviewPictureDisplay)\r\n\tpreview: PreviewPictureDisplay = null;\r\n\t@property(PartColorsContainer)\r\n\tcolors: PartColorsContainer = null;\r\n\r\n\toptional: boolean = false;\r\n\tselectionGroup: PartsSelectionGroup = null;\r\n\tsingleEditor: SingleEditor = null;\r\n\tpartScaler: PartScaler = null;\r\n\r\n\t// banList: number[] = [];\r\n\r\n\t// region 数据控制\r\n\r\n\t/**\r\n\t * 英雄数据\r\n\t */\r\n\tpublic get hero() { return this.preview.item }\r\n\r\n\t/**\r\n\t * 部件类型ID\r\n\t */\r\n\tpublic get partTypeId() { return this.items[0]?.partTypeId; }\r\n\r\n\t/**\r\n\t * 获取上一次选择\r\n\t */\r\n\tprivate get lastSelection() {\r\n\t\treturn this.items.length <= 0 ? null :\r\n\t\t\tthis.hero?.parts.find(t => t.partTypeId == this.partTypeId);\r\n\t}\r\n\r\n\t/**\r\n\t * 是否包含\r\n\t * @param item\r\n\t */\r\n\tisInclude(item: PartInfo): boolean {\r\n\t\tif (selectorScene().editorMode && !this.currentPartType.isBody) return true;\r\n\t\treturn !this.preview.item || this.preview.item.calcScale(item.part) > 0;\r\n\r\n\t\t// if (!this.preview.item) {\r\n\t\t// \tconst config = configMgr().config(PartConfig);\r\n\t\t// \tconst ptId = item.partTypeId,\r\n\t\t// \t\thtId = item.part.heroTypeId,\r\n\t\t// \t\tchtId = this.currentHeroType.id;\r\n\t\t//\r\n\t\t// \treturn config.pHtScale[ptId]?.[htId]?.[chtId] > 0 &&\r\n\t\t// \t\t!this.preview.banList.includes(item.part.oriId);\r\n\t\t// } else\r\n\t\t// \treturn this.preview.item?.calcScale(item.part) > 0;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 更新控制\r\n\r\n\t/**\r\n\t * 更新\r\n\t */\r\n\tprotected update(dt: number) {\r\n\t\tlet nodes = this.itemsComponents\r\n\t\t\t.map(item => item.node).filter(node => node.active);\r\n\t\tScrollviewFilter.filter(\"vertical\", this.container,\r\n\t\t\tnodes, 20, this.node.height, 20,\r\n\t\t\tMath.floor(this.container.width / 120));\r\n\r\n\t\tif (this.preview.partsChanged) this.onPartsChanged();\r\n\t}\r\n\r\n\t//endregion\r\n\r\n\t// region 操作控制\r\n\r\n\t/**\r\n\t * 重选\r\n\t * @private\r\n\t */\r\n\tprivate reselect() {\r\n\t\tif (this.currentPartType.special == SpecialPartType.Background) {\r\n\t\t\tconst last = this.items.find(p => p.part == this.preview.backgroundPart);\r\n\t\t\tif (last)\r\n\t\t\t\tthis.selectionGroup.select(this.selectionGroup.getElementAt(\r\n\t\t\t\t\tthis.items.findIndex(item => item.partId == last.part.id)));\r\n\t\t\telse\r\n\t\t\t\tthis.selectionGroup.select(this.selectionGroup.getElementAt(0));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst last = this.lastSelection;\r\n\t\tif (!last) // 如果没有选择\r\n\t\t\tthis.selectionGroup.deselect(\r\n\t\t\t\tthis.selectionGroup.currentSelection());\r\n\t\telse {\r\n\t\t\tthis.selectionGroup.select(this.selectionGroup.getElementAt(\r\n\t\t\t\tthis.items.findIndex(item => item.partId == last.oriId)));\r\n\t\t\tthis.colors.reselect(last);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * 构建选择Group\r\n\t */\r\n\tprivate makeSelectionGroup(){\r\n\t\tthis.selectionGroup = new PartsSelectionGroup(this.optional)\r\n\t\tthis.itemsComponents.forEach(item => {\r\n\t\t\tlet selection = item.node.getComponent(PartsSelection);\r\n\t\t\tselection.display = selection.getComponent(PartsDisplay);\r\n\t\t\tselection.container = this;\r\n\t\t\tthis.selectionGroup.addElement(selection);\r\n\t\t})\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 回调控制\r\n\r\n\t/**\r\n\t * ItemDisplay创建回调\r\n\t * @param display\r\n\t */\r\n\tpublic onItemDisplayCreated(display: PartsDisplay) {\r\n\t\tdisplay.preview = this.preview;\r\n\t}\r\n\r\n\t/**\r\n\t * 数据改变回调\r\n\t */\r\n\tpublic onItemsChanged() {\r\n\t\tsuper.onItemsChanged();\r\n\t\tconst last = this.lastSelection;\r\n\t\tthis.makeSelectionGroup();\r\n\t\tthis.preview.addPart(last);\r\n\t\tthis.reselect();\r\n\t\tif (this.colors)\r\n\t\t\tthis.colors.node.active = false;\r\n\t}\r\n\r\n\tpublic currentHeroType: HeroType = null;\r\n\tpublic currentPartType: PartType = null;\r\n\tprivate currentTotalParts: PartInfo[] = [];\r\n\r\n\t/**\r\n\t * 英雄类型变化回调\r\n\t */\r\n\tpublic async onHeroTypeChange() {\r\n\t\tawait this.preview.setHeroType(this.currentHeroType);\r\n\t}\r\n\r\n\t/**\r\n\t * 部件类型变化回调\r\n\t */\r\n\tpublic async onTypeChange() {\r\n\t\tif (!this.currentHeroType || !this.currentPartType) return;\r\n\t\tthis.currentTotalParts = await partMgr().getList(DefaultBt1, DefaultBt2, this.currentPartType);\r\n\t\tthis.setItems(this.currentTotalParts.filter(p => p.part.id == p.part.oriId));\r\n\r\n\t\t// partMgr().getList(DefaultBt1, DefaultBt2,\r\n\t\t//   this.currentPartType).then((res) => {\r\n\t\t//     res = res.filter(p => this.currentPartType.exclusion\r\n\t\t//       [this.currentHeroType.id]?.find(t => t == p.part().heroTypeId) == undefined);\r\n\t\t//     this.setItems(res);\r\n\t\t// });\r\n\t}\r\n\r\n\t/**\r\n\t * 部件变化回调\r\n\t */\r\n\tpublic onPartsChanged() {\r\n\t\tthis.reselect();\r\n\t}\r\n\r\n\t/**\r\n\t * 选择回调\r\n\t */\r\n\tpublic onSelectChanged(item: PartsDisplay) {\r\n\t\tthis.preview.addPart(item.item.part);\r\n\t\tthis.singleEditor?.setItem(item.item);\r\n\t\tthis.partScaler?.setItem(item.item);\r\n\t\tif (this.colors) {\r\n\t\t\tthis.colors.node.active = true;\r\n\t\t\tthis.colors.setItems(this.currentTotalParts.filter(p => p.part.oriId == item.item.part.oriId && p.part.stock > 0));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 切换颜色选择开关\r\n\t */\r\n\tpublic switchColorSelector() {\r\n\t\tif (!this.colors) return;\r\n\t\tthis.colors.node.active = !this.colors.node.active;\r\n\t}\r\n\r\n\t/**\r\n\t * 取消选择回调\r\n\t */\r\n\tpublic onSelectCancel(item: PartsDisplay) {\r\n\t\tthis.preview.removePart(item.item.part);\r\n\t\tthis.singleEditor?.setItem(null);\r\n\t\tthis.partScaler?.setItem(null);\r\n\t\tthis.colors.node.active = false;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n\r\n","import {ItemDisplay} from \"../../../../Modules/CoreModule/Components/ItemDisplay\";\r\nimport Label = cc.Label;\r\nimport Node = cc.Node;\r\nimport Sprite = cc.Sprite;\r\nimport {PartInfo} from \"../../../../Modules/HeroModule/Data/PartInfo\";\r\nimport PartsSelection from \"./PartsSelection\";\r\nimport Color = cc.Color;\r\nimport {selectorScene} from \"../../SelectorScene\";\r\nimport PreviewPictureDisplay from \"./PreviewPictureDisplay\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PartsDisplay extends ItemDisplay<PartInfo> {\r\n\r\n\t@property(Sprite)\r\n\tpicture: Sprite = null;\r\n\t@property(Node)\r\n\tbackground: Node = null;\r\n\t@property(Node)\r\n\tframe: Node = null;\r\n\t@property(Number)\r\n\tpadding: number = 20;\r\n\r\n\t@property(Node)\r\n\teditor: Node = null;\r\n\t@property(Label)\r\n\tid: Label = null;\r\n\t@property(Label)\r\n\thtId: Label = null;\r\n\r\n\t@property(Node)\r\n\tban: Node = null;\r\n\r\n\t@property(PreviewPictureDisplay)\r\n\tpreview: PreviewPictureDisplay = null;\r\n\r\n\tisSelected: boolean = false;\r\n\r\n\t// onLoad () {}\r\n\r\n\t//region 更新控制\r\n\r\n\tprotected update(dt: number) {\r\n\t\tthis.frame.active = this.isSelected;\r\n\t\tthis.node.color = this.isSelected ? new Color(53, 48, 71) : new Color(36, 32, 47);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 绘制控制\r\n\r\n\t/**\r\n\t * 刷新\r\n\t */\r\n\trefresh() {\r\n\t\tsuper.refresh();\r\n\t\tif (this.item == null) return;\r\n\t\tthis.isSelected = false;\r\n\r\n\t\tthis.drawPicture();\r\n\t\tif (selectorScene().editorMode) {\r\n\t\t\tthis.drawBan();\r\n\t\t\tthis.drawEditorInfo();\r\n\t\t}\r\n\t}\r\n\tprivate drawEditorInfo() {\r\n\t\tif (!this.editor) return;\r\n\t\tthis.editor.active = true;\r\n\t\tconst id = this.item.partId, oriId = this.item.part.oriId;\r\n\t\tthis.id.string = id == oriId ? `#${id}` : `#${id} (${oriId})`;\r\n\t\tthis.htId.string = this.item.part.heroTypeId.toString();\r\n\t}\r\n\tprivate drawPicture(){\r\n\t\tlet temp = this.item;\r\n\t\tthis.picture.spriteFrame = null;\r\n\t\tthis.item.part.picture().then(res => {\r\n\t\t\tif (this.item != temp) return;\r\n\t\t\tthis.picture.spriteFrame = res?.clone();\r\n\t\t\tthis.filterPicture();\r\n\t\t});\r\n\t}\r\n\tprivate filterPicture(){\r\n\t\tlet k = Math.max(this.picture.node.width / (this.node.width - this.padding),\r\n\t\t\tthis.picture.node.height / (this.node.height - this.padding));\r\n\t\tif (k > 1) {\r\n\t\t\tthis.picture.node.width /= k;\r\n\t\t\tthis.picture.node.height /= k;\r\n\t\t}\r\n\t}\r\n\tprivate drawBan() {\r\n\t\tthis.ban.active = this.preview?.item?.calcScale(this.item.part) <= 0;\r\n\t}\r\n\r\n\t//endregion\r\n\r\n\t//region 回调控制\r\n\r\n\tpublic onSelectChanged(select: boolean){\r\n\t\tthis.isSelected = select;\r\n\t\tif (this.item.stock <= 0)\r\n\t\t\tthis.node.getComponent(PartsSelection)\r\n\t\t\t\t.selectableGroup.deselect(this.node.getComponent(PartsSelection).selectableGroup.currentSelection());\r\n\t}\r\n\r\n\t//endregion\r\n\r\n}\r\n","import {SelectableGroup} from \"../../../../Modules/CoreModule/Components/SelectableGroup\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PartsSelectionGroup extends SelectableGroup {\r\n\r\n}","import {SelectableObject} from \"../../../../Modules/CoreModule/Components/SelectableObject\";\r\nimport PartsDisplay from \"./PartsDisplay\";\r\nimport PartsContainer from \"../ItemContainers/PartsContainer\";\r\nimport PartColorsContainer from \"../ItemContainers/PartColorsContainer\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PartsSelection extends SelectableObject {\r\n\r\n    display: PartsDisplay = null;\r\n    container: PartsContainer | PartColorsContainer = null;\r\n\r\n    //region 回调控制\r\n\r\n    onDeselected(): void {\r\n        this.display.onSelectChanged(false);\r\n        if (this.selectableGroup.selectedIndex == -1)\r\n            this.container.onSelectCancel(this.display);\r\n    }\r\n\r\n    onSelected(): void {\r\n        this.display.onSelectChanged(true);\r\n        this.container.onSelectChanged(this.display);\r\n    }\r\n\r\n    toggleSelection() {\r\n        if (this.container instanceof PartsContainer)\r\n            this.container.switchColorSelector();\r\n        super.toggleSelection();\r\n    }\r\n\r\n    //endregion\r\n\r\n}\r\n","import {assetMgr, BundleName} from \"../../CoreModule/Managers/AssetBundleManager\";\r\nimport {assetField, field} from \"../../CoreModule/Data/BaseData\";\r\nimport {partTypeRepo} from \"./PartType\";\r\nimport SkeletonData = sp.SkeletonData;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport {DefaultBt1, DefaultBt2} from \"../../NFTModule/Managers/NFTManager\";\r\nimport {heroTypeRepo} from \"./HeroType\";\r\nimport {\r\n\tBaseRepository,\r\n\tfilterKeys,\r\n\tgetRepository,\r\n\trepository,\r\n\tthrowMessage\r\n} from \"../../CoreModule/Data/BaseRepository\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {data, StaticData} from \"../../CoreModule/Data/StaticData\";\r\nimport {PartInfo} from \"./PartInfo\";\r\nimport {SpineUtils} from \"../../../Utils/SpineUtils\";\r\nimport {AttackMotionGroupId} from \"../../BattleModule/Data/MotionGroup\";\r\nimport {blockLoading} from \"../../CoreModule/Managers/LoadingManager\";\r\nimport {configMgr} from \"../../CoreModule/Managers/ConfigManager\";\r\nimport PartConfig from \"../Configs/PartConfig\";\r\n\r\n@data(\"Part\")\r\nexport class Part extends StaticData {\r\n\r\n\t@field\r\n\tpublic bt1: number = DefaultBt1;\r\n\t@field\r\n\tpublic bt2: number = DefaultBt2;\r\n\t@field\r\n\tpublic oriId: number = -1;\r\n\t@field\r\n\tpublic heroTypeId: number = 0; // heroTypeId, bt2\r\n\t@field\r\n\tpublic partTypeId: number = 0; // partTypeId, ct\r\n\r\n\t@field\r\n\tpublic isEmpty: boolean = false;\r\n\r\n\t@field\r\n\tpublic name: string = \"\";\r\n\t@field\r\n\tpublic price: number = 0;\r\n\t@field\r\n\tpublic stock: number = 999999;\r\n\r\n\t@field\r\n\tpublic color: number = 1;\r\n\r\n\t@field([Number])\r\n\tpublic containCts: number[] = [];\r\n\r\n\t@field\r\n\tpublic skeletonName: string = \"\";\r\n\r\n\t@field\r\n\tpublic pictureName: string = \"\";\r\n\r\n\t@field(Number)\r\n\tpublic attackMotionId: number = AttackMotionGroupId;\r\n\r\n\t@field(Number)\r\n\tpublic nftMakeId: number;\r\n\r\n\tprivate _picture: SpriteFrame;\r\n\tpublic async picture(): Promise<SpriteFrame> {\r\n\t\treturn this._picture ||= await this.loadPicture();\r\n\t}\r\n\t@blockLoading\r\n\tprivate async loadPicture(): Promise<SpriteFrame> {\r\n\t\treturn await assetMgr().loadAsset(SpriteFrame, BundleName.Sprites, `partpictures/${this.pictureName}`);\r\n\t}\r\n\r\n\tprivate _allPicture: Map<string, SpriteFrame>;\r\n\tpublic async allPictures(): Promise<Map<string, SpriteFrame>> {\r\n\t\treturn this._allPicture ||= await this.loadAllPictures();\r\n\t}\r\n\t@blockLoading\r\n\tprivate async loadAllPictures(): Promise<Map<string, SpriteFrame>> {\r\n\t\tconst names = this.pictureName.split('_');\r\n\t\tconst orders = configMgr().config(PartConfig).slotOrders;\r\n\t\tconst keys = Object.keys(orders).filter(k => k.split('_')[0] == names[2]);\r\n\t\tlet res = new Map<string, SpriteFrame>();\r\n\t\tfor (const k of keys) {\r\n\t\t\tlet sf = await assetMgr().loadAsset(SpriteFrame, BundleName.Sprites, `partpictures/${names[0]}_${names[1]}_${k}_${names[4]}`);\r\n\t\t\tif (sf) res.set(k, sf);\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tprivate _skeleton: SkeletonData;\r\n\tpublic async skeleton(): Promise<SkeletonData> {\r\n\t\treturn this._skeleton ||= await this.loadSkeleton();\r\n\t}\r\n\t@blockLoading\r\n\tprivate async loadSkeleton(): Promise<SkeletonData> {\r\n\t\treturn await assetMgr().loadAsset(SkeletonData, BundleName.Sprites, `parts/${this.skeletonName}`);\r\n\t}\r\n\r\n\t/**\r\n\t * 槽类型（部件类型）实例\r\n\t */\r\n\tpublic get partType() {\r\n\t\treturn partTypeRepo().getById(this.partTypeId);\r\n\t}\r\n\r\n\t/**\r\n\t * 英雄类型实例\r\n\t */\r\n\tpublic get heroType() {\r\n\t\treturn heroTypeRepo().getById(this.heroTypeId);\r\n\t}\r\n\r\n\t/**\r\n\t * 原始部件实例\r\n\t */\r\n\tpublic get oriPart() {\r\n\t\treturn partRepo().getById(this.oriId);\r\n\t}\r\n\r\n\t/**\r\n\t * 槽名称列表\r\n\t */\r\n\tprivate _slotNames: string[] = null;\r\n\tpublic get slotNames(): string[] {\r\n\t\treturn this._slotNames ||= this.getSlotNames();\r\n\t}\r\n\tprivate getSlotNames() {\r\n\t\tconst cts = this.containCts?.length > 0 ?\r\n\t\t\tthis.containCts : [this.partTypeId];\r\n\t\treturn cts.map(ct => partTypeRepo().getById(ct))\r\n\t\t\t.reduce((res, pt) => res.concat(\r\n\t\t\t\tSpineUtils.getSlotNames(pt)\r\n\t\t\t), [] as string[]);\r\n\t}\r\n\r\n\t/**\r\n\t * 槽名称列表\r\n\t */\r\n\tprivate _boneNames: string[] = null;\r\n\tpublic get boneNames(): string[] {\r\n\t\treturn this._boneNames ||= this.getBoneNames();\r\n\t}\r\n\tprivate getBoneNames() {\r\n\t\tconst cts = this.containCts?.length > 0 ?\r\n\t\t\tthis.containCts : [this.partTypeId];\r\n\t\treturn cts.map(ct => partTypeRepo().getById(ct))\r\n\t\t\t.reduce((res, pt) => res.concat(\r\n\t\t\t\tSpineUtils.getBoneNames(pt)\r\n\t\t\t), [] as string[]);\r\n\t}\r\n\r\n\t/**\r\n\t * 转化为PartInfo，测试用\r\n\t */\r\n\tpublic toPartInfo() {\r\n\t\tconst res = new PartInfo();\r\n\t\tres.partId = this.id;\r\n\t\tres.name = this.name;\r\n\t\tres.partTypeId = this.partTypeId;\r\n\t\tres.price = this.price;\r\n\t\tres.stock = this.stock;\r\n\r\n\t\treturn res;\r\n\t}\r\n}\r\n\r\nexport function partRepo() {\r\n\treturn getRepository(PartRepo);\r\n}\r\n\r\n@repository\r\nexport class PartRepo extends BaseRepository<Part> {\r\n\r\n\tget clazz(): Constructor<Part> { return Part; }\r\n\r\n\t// @ts-ignore\r\n\tpublic findByHeroTypeId(heroTypeId: number): Part[] {}\r\n\t// @ts-ignore\r\n\tpublic findByPartTypeId(partTypeId: number): Part[] {}\r\n\t// @ts-ignore\r\n\tpublic getByPartTypeId(partTypeId: number): Part {}\r\n\t// @ts-ignore\r\n\tpublic getByNftMakeId(nftMakeId: number): Part {}\r\n\t@filterKeys<Part>(\"heroTypeId\", \"partTypeId\", \"color\") // @ts-ignore\r\n\tpublic findByTypes(htId: number, ptId: number, color: number): Part[] {}\r\n\r\n}\r\n","import {BaseManager, getManager, manager} from \"./BaseManager\";\r\n\r\nexport type Platform = 'web' | 'android' | 'test';\r\n\r\nexport function getPlatformType() : Platform {\r\n\tswitch (cc.sys.platform) {\r\n\t\tcase cc.sys.DESKTOP_BROWSER:\r\n\t\tcase cc.sys.MOBILE_BROWSER: return 'web';\r\n\t\tcase cc.sys.ANDROID: return 'android';\r\n\t\tdefault: return 'test';\r\n\t}\r\n}\r\n\r\nexport function platformMgr() : PlatformManager {\r\n\treturn getManager(PlatformManager);\r\n}\r\n\r\nexport function getPlatform() : BasePlatform {\r\n\treturn platformMgr().getPlatform(getPlatformType());\r\n}\r\n\r\n@manager\r\nclass PlatformManager extends BaseManager {\r\n\r\n\tplatformClasses = {};\r\n\tplatforms = {};\r\n\r\n\t/**\r\n\t * 注册平台\r\n\t */\r\n\tpublic registerPlatform<T extends BasePlatform>(\r\n\t\ttype: Platform, clazz: Constructor<T>) {\r\n\t\tthis.platformClasses[type] = clazz;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取平台实例\r\n\t */\r\n\tpublic getPlatform(type: Platform) : BasePlatform {\r\n\t\tconst ctor = this.platformClasses[type];\r\n\t\treturn this.platforms[type] ||= ctor ? new ctor(type) : null;\r\n\t}\r\n}\r\n\r\nimport { BasePlatform } from '../../../Platforms/BasePlatform';\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\n","import {BaseData, field} from \"../../CoreModule/Data/BaseData\";\r\nimport {QualityType} from \"../../HeroModule/Data/Quality\";\r\nimport {RestraintType} from \"../../HeroModule/Data/Hero\";\r\nimport {playerData} from \"../../PlayerModule/Managers/PlayerManager\";\r\nimport {PlayerData} from \"../../PlayerModule/Data/Player\";\r\nimport {cGte, ConditionGroup, ConditionType} from \"../../PlayerModule/Data/Condition\";\r\n\r\nexport class RoomNFTInfo extends BaseData {\r\n\r\n\t@field(String)\r\n\tpublic nftId: string;\r\n\t@field(String)\r\n\tpublic name: string;\r\n\t@field(String)\r\n\tpublic ownerAccount: string;\r\n\t@field(Number)\r\n\tpublic heroTypeId: number;\r\n\t@field([Number])\r\n\tpublic partIds: number[];\r\n\t@field(Number)\r\n\tpublic level: number;\r\n\t@field(Number)\r\n\tpublic star: number;\r\n\t@field(Number)\r\n\tpublic quality: QualityType;\r\n\t@field(Number)\r\n\tpublic restraint: RestraintType;\r\n\t@field(Number)\r\n\tpublic battlePoint: number;\r\n\t@field(Number)\r\n\tpublic rank: number;\r\n\r\n}\r\n\r\nexport class PlayerBattleItem extends BaseData {\r\n\r\n\t@field(Number)\r\n\tpublic roomId: number;\r\n\t@field([RoomNFTInfo])\r\n\tpublic opponents: RoomNFTInfo[] = []; // 房间对手缓存\r\n\r\n}\r\n\r\n@playerData(\"PlayerBattle\")\r\nexport class PlayerBattle extends PlayerData {\r\n\r\n\t@field([PlayerBattleItem])\r\n\tpublic battleData: PlayerBattleItem[] = [];\r\n\t@field\r\n\tpublic refreshCount: number = 0; // 刷新次数\r\n\t@field\r\n\tpublic battleChance: number = 0;// 剩余挑战次数\r\n\r\n\t/**\r\n\t * 获取玩家指定副本的进度\r\n\t */\r\n\tpublic getRoomData(roomId: number) {\r\n\t\tlet res = this.battleData.find(s => s.roomId == roomId);\r\n\t\tif (!res) {\r\n\t\t\tres = new PlayerBattleItem();\r\n\t\t\tres.roomId = roomId;\r\n\r\n\t\t\tthis.battleData.push(res);\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\t// region 战斗次数\r\n\r\n\t/**\r\n\t * 刷新价格\r\n\t * @param cnt\r\n\t */\r\n\tpublic battleBuyCosts(cnt) {\r\n\t\treturn ConditionGroup.create(\r\n\t\t\tcGte(ConditionType.Gold, cnt * 1000)\r\n\t\t);\r\n\t}\r\n\r\n\tpublic buyBattleChance(cnt) {\r\n\t\tthis.battleChance += cnt;\r\n\t}\r\n\r\n\t/**\r\n\t * 开始战斗\r\n\t */\r\n\tpublic startPVPBattle() {\r\n\t\tthis.battleChance = Math.max(0, this.battleChance - 1);\r\n\t}\r\n\r\n\t/**\r\n\t * 完成战斗\r\n\t */\r\n\tpublic finishPVPBattle(win, nftId, roomId) {\r\n\t\tif (!win) return;\r\n\t\t// 刷新指定的对手\r\n\t\tconst oppos = this.getRoomData(roomId).opponents;\r\n\t\tconst index = oppos.findIndex(o => o.nftId == nftId);\r\n\t\toppos.splice(index, 1);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 刷新次数\r\n\r\n\t/**\r\n\t * 刷新价格\r\n\t * @param cnt\r\n\t */\r\n\tpublic refreshBuyCosts(cnt) {\r\n\t\treturn ConditionGroup.create(\r\n\t\t\tcGte(ConditionType.Gold, cnt * 500)\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * 购买刷新次数\r\n\t */\r\n\tpublic buyRefreshCount(cnt, refresh = false) {\r\n\t\tthis.refreshCount += cnt;\r\n\t\tif (refresh && this.refreshCount > 0)\r\n\t\t\tthis.refreshPVP();\r\n\t}\r\n\r\n\t/**\r\n\t * 刷新对手\r\n\t */\r\n\tpublic refreshPVP() {\r\n\t\tthis.battleData.forEach(bd => bd.opponents = []);\r\n\t\tthis.refreshCount = Math.max(0, this.refreshCount - 1);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n","import {ItemContainer} from \"../../../CoreModule/Components/ItemContainer\";\r\nimport PlayerCardDisplay, {RoomNFTInfo} from \"./PlayerCardDisplay\";\r\nimport {waitForDataLoad} from \"../../../CoreModule/Managers/DataManager\";\r\nimport {waitForLogin} from \"../../../PlayerModule/Managers/PlayerManager\";\r\nimport ScrollView = cc.ScrollView;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PlayerCardContainer extends ItemContainer<RoomNFTInfo, PlayerCardDisplay> {\r\n\r\n    private currentDisplayRoomId: number = -1;\r\n    private roomInfos: RoomNFTInfo[][] = [];\r\n\r\n    start () {\r\n        this.setup().then();\r\n    }\r\n\r\n    @waitForDataLoad\r\n    @waitForLogin\r\n    private async setup() {\r\n        // const acc = playerMgr().player.account;\r\n        // let items: Hero[] = (await heroMgr().getListFromServer()).filter(h => h.ownerAccount == acc);\r\n        // items.forEach(h => {\r\n        //     h.params = [1000, 400, 12500, 20];\r\n        // })\r\n        let nfts: [];\r\n        let items: RoomNFTInfo[];\r\n        for (let i = 0;i < 5;i++) {\r\n            nfts = (await BattleInterface.GetPVPPlayers({ roomId: i })).nfts;\r\n            items = nfts.map(nft => DataLoader.load(RoomNFTInfo, nft));\r\n            this.roomInfos.push(items.filter(nft => !!nft));\r\n        }\r\n        this.currentDisplayRoomId = battleScene().currentPVPRoomIndex;\r\n        this.setItems(this.roomInfos[this.currentDisplayRoomId]);\r\n    }\r\n\r\n    update (dt) {\r\n        if (this.roomInfos.length < 5) return;\r\n        if (this.currentDisplayRoomId != battleScene().currentPVPRoomIndex) {\r\n            this.currentDisplayRoomId = battleScene().currentPVPRoomIndex;\r\n            this.setItems(this.roomInfos[this.currentDisplayRoomId]);\r\n        }\r\n    }\r\n\r\n    onItemsChanged() {\r\n        super.onItemsChanged();\r\n        this.getComponent(ScrollView).scrollToLeft();\r\n    }\r\n\r\n    protected onDisable() {\r\n        battleScene().currentTargetSelect = null;\r\n    }\r\n\r\n}\r\n\r\nimport {battleScene} from \"../../../../Scenes/BattleScene\";\r\nimport {BattleInterface} from \"../../BattleCommon\";\r\nimport {DataLoader} from \"../../../CoreModule/Utils/DataLoader\";\r\n","import {ItemDisplay} from \"../../../CoreModule/Components/ItemDisplay\";\r\nimport Label = cc.Label;\r\nimport Sprite = cc.Sprite;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport Skeleton = sp.Skeleton;\r\nimport {HeroSkeleton} from \"../../../../Utils/SpineUtils\";\r\nimport Node = cc.Node;\r\nimport {battleScene} from \"../../../../Scenes/BattleScene\";\r\nimport {BaseData, field} from \"../../../CoreModule/Data/BaseData\";\r\nimport {QualityType} from \"../../../HeroModule/Data/Quality\";\r\nimport {Part, partRepo} from \"../../../HeroModule/Data/Part\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PlayerCardDisplay extends ItemDisplay<RoomNFTInfo> {\r\n\r\n    @property(Label)\r\n    nameLabel: Label = null;\r\n    @property(Label)\r\n    qualityLabel: Label = null;\r\n    @property(Label)\r\n    levelLabel: Label = null;\r\n    @property(Label)\r\n    powerLabel: Label = null;\r\n    @property(Sprite)\r\n    qualityIcon: Sprite = null;\r\n    @property(Node)\r\n    frame: Node = null;\r\n\r\n    @property([SpriteFrame])\r\n    qualityPictures: SpriteFrame[] = [];\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    update (dt) {\r\n        this.frame.active = battleScene().currentTargetSelect == this.item;\r\n    }\r\n\r\n    refresh() {\r\n        super.refresh();\r\n        this.updateLabels();\r\n        this.updatePictures();\r\n        this.drawHero();\r\n    }\r\n\r\n    quality: string[] = [\"N\", \"R\", \"SR\", \"SSR\", \"UR\"];\r\n\r\n    updateLabels() {\r\n        this.nameLabel.string = this.item.name;\r\n        this.qualityLabel.string = this.quality[this.item.quality];\r\n        this.levelLabel.string = this.item.level.toString();\r\n        this.powerLabel.string = this.item.battlePoint.toString();\r\n    }\r\n\r\n    updatePictures() {\r\n        this.qualityIcon.spriteFrame = this.qualityPictures[this.item.quality];\r\n    }\r\n\r\n    @property(Skeleton)\r\n    hero: Skeleton = null;\r\n\r\n    private size: number = 120;\r\n\r\n    private drawHero(){\r\n        this.hero.node.scale = 0;\r\n        let node = new Node('node');\r\n        let temp = node.addComponent(Skeleton);\r\n        let hero = new HeroSkeleton(this.hero, temp, this.item.heroTypeId);\r\n        this.item.parts.forEach(part => { hero.addPart(part); });\r\n        hero.refresh().then(res => {\r\n            node.destroy();\r\n            this.sizeFilter();\r\n        });\r\n    }\r\n\r\n    private sizeFilter() {\r\n        let k = Math.max(\r\n            this.hero.node.width / this.size,\r\n            this.hero.node.height / this.size);\r\n        if (k > 1) this.hero.node.scale = 1 / k;\r\n        else this.hero.node.scale = 1;\r\n        this.hero.node.y = - this.size / 2;\r\n    }\r\n\r\n    onClick() {\r\n        if (battleScene().currentTargetSelect == this.item) return battleScene().currentTargetSelect = null;\r\n        battleScene().currentTargetSelect = this.item;\r\n    }\r\n\r\n}\r\n\r\nexport class RoomNFTInfo extends BaseData {\r\n\r\n    @field(String)\r\n    public nftId: string;\r\n    @field(String)\r\n    public name: string;\r\n    @field(Number)\r\n    public heroTypeId: number;\r\n    @field([Number])\r\n    public partIds: number[];\r\n    @field(Number)\r\n    public level: number;\r\n    @field(Number)\r\n    public quality: QualityType;\r\n    @field(Number)\r\n    public battlePoint: number;\r\n\r\n    /**\r\n     * 部件列表\r\n     */\r\n    private _parts: Part[];\r\n    public get parts() {\r\n        return this._parts ||= this.partIds.map(\r\n            pid => partRepo().getById(pid)) // DataUtils.part(pid, \"id\"));\r\n    }\r\n\r\n}\r\n","import {get, post} from \"../../CoreModule/Common/CoreCommon\";\r\n\r\nexport class PlayerInterface {\r\n\r\n\t@post(\"/player/player/login\", undefined, false) static Login(d?): any {}\r\n\t@post(\"/player/player/logout\") static Logout(d?): any {}\r\n\t@get(\"/player/player_info/get\") static GetInfo(d?): any {}\r\n\t@post(\"/player/player_data/get\") static GetData(d?): any {}\r\n\t@post(\"/player/player_info/edit\") static EditInfo(d?): any {}\r\n\r\n}\r\n","import {BaseData, field, PK, pkType} from \"../../CoreModule/Data/BaseData\";\r\nimport {PlayerData} from \"../../PlayerModule/Data/Player\";\r\nimport {playerData} from \"../../PlayerModule/Managers/PlayerManager\";\r\nimport {copyRepo, CopyType} from \"./Copy\";\r\nimport {heroMgr} from \"../../HeroModule/Managers/HeroManager\";\r\n\r\nexport class PlayerCopyItem extends BaseData {\r\n\r\n\t@field(Number)\r\n\tpublic copyId: number;\r\n\t@field\r\n\tpublic curLevel: number = 0;\r\n\t@field\r\n\tpublic maxLevel: number = 0\r\n\r\n\tpublic get copy() {\r\n\t\treturn copyRepo().getById(this.copyId);\r\n\t}\r\n\r\n\tpublic next() {\r\n\t\tthis.maxLevel = Math.max(this.curLevel, this.maxLevel);\r\n\t\tthis.curLevel++;\r\n\t}\r\n\r\n\tpublic prev() {\r\n\t\tthis.curLevel--;\r\n\t}\r\n\r\n}\r\n\r\nexport class PlayerCopySetting extends BaseData {\r\n\r\n\t@field\r\n\tpublic copyType: CopyType = CopyType.Main;\r\n\t@field([String])\r\n\tpublic nftIds: string[] = []; // 出战的NFT\r\n\t@field\r\n\tpublic speedUpTime: number = 0;\r\n\r\n\t/**\r\n\t * 战斗速度\r\n\t */\r\n\tpublic get battleSpeed() {\r\n\t\treturn Date.now() > this.speedUpTime ? 1 : 2;\r\n\t}\r\n\r\n\t/**\r\n\t * 加速\r\n\t */\r\n\tpublic boost(time, force = false) {\r\n\t\tthis.speedUpTime = force ? Date.now() + time :\r\n\t\t\tMath.max(this.speedUpTime, Date.now()) + time;\r\n\t}\r\n\r\n}\r\n\r\n@playerData(\"PlayerCopy\")\r\nexport class PlayerCopy extends PlayerData {\r\n\r\n\t@field([PlayerCopyItem])\r\n\tpublic copies: PlayerCopyItem[] = [];\r\n\r\n\t@field([PlayerCopySetting])\r\n\tpublic settings: PlayerCopySetting[] = [];\r\n\r\n\t/**\r\n\t * 获取玩家指定副本的进度\r\n\t */\r\n\tpublic copy(copyId: number) {\r\n\t\treturn this.copies.find(s => s.copyId == copyId);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取玩家的副本设置\r\n\t */\r\n\tpublic setting(copyType: CopyType) {\r\n\t\treturn this.settings.find(s => s.copyType == copyType);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取玩家闯关进度\r\n\t */\r\n\tpublic mainCopy() {\r\n\t\treturn this.copy(copyRepo().main().id);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取玩家闯关设定\r\n\t */\r\n\tpublic mainSetting() {\r\n\t\treturn this.setting(CopyType.Main);\r\n\t}\r\n\r\n}\r\n","import Label = cc.Label;\r\nimport {ItemDisplay} from \"../../../CoreModule/Components/ItemDisplay\";\r\nimport {Player} from \"../../../PlayerModule/Data/Player\";\r\nimport Sprite = cc.Sprite;\r\nimport {PlayerMoney} from \"../../../EconomicModule/Data/PlayerMoney\";\r\nimport {playerMgr, waitForLogin} from \"../../../PlayerModule/Managers/PlayerManager\";\r\nimport {autoUnitConvert} from \"../../../../Utils/NumberUtils\";\r\nimport Node = cc.Node;\r\nimport {waitForDataLoad} from \"../../../CoreModule/Managers/DataManager\";\r\nimport {battleScene} from \"../../../../Scenes/BattleScene\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class playerInfoDisplay extends ItemDisplay<Player> {\r\n\r\n    @property(Label)\r\n    playerName: Label = null;\r\n    @property(Label)\r\n    force: Label = null;\r\n    @property(Sprite)\r\n    avatar: Sprite = null;\r\n    @property(Label)\r\n    gold: Label = null;\r\n    @property(Label)\r\n    diamond: Label = null;\r\n    @property(Label)\r\n    stableCoin: Label = null;\r\n\r\n    @property(Node)\r\n    heroInfoNode: Node = null\r\n\r\n    private money: PlayerMoney = null;\r\n\r\n    // region 初始化\r\n\r\n    start () {\r\n        this.setup();\r\n    }\r\n\r\n    @waitForLogin\r\n    @waitForDataLoad\r\n    private setup() {\r\n        let player = playerMgr().player;\r\n        this.setItem(player);\r\n    }\r\n\r\n    protected onItemChanged() {\r\n        super.onItemChanged();\r\n        this.money = playerMgr().getPlayerData(PlayerMoney);\r\n    }\r\n\r\n    // endregion\r\n\r\n    protected update(dt: number) {\r\n        if (battleScene().heroSelected) {\r\n            this.heroInfoNode.active = true;\r\n            this.node.active = false;\r\n            return;\r\n        }\r\n        if (!this.item) return;\r\n        this.updateLabels();\r\n    }\r\n\r\n    @autoUnitConvert\r\n    private updateLabels() {\r\n        this.playerName.string = this.item.name;\r\n        // this.force.string = null;\r\n        this.gold.string = this.money.gold.toString();\r\n        this.diamond.string = this.money.diamond.toString();\r\n        this.stableCoin.string = this.money.token.toString();\r\n    }\r\n\r\n}\r\n","import {BaseData, field} from \"../../CoreModule/Data/BaseData\";\r\nimport {PlayerData} from \"../../PlayerModule/Data/Player\";\r\nimport {playerData} from \"../../PlayerModule/Managers/PlayerManager\";\r\n\r\nexport class PlayerJobItem extends BaseData {\r\n\r\n\t@field(Number)\r\n\tpublic jobId: number;\r\n\t@field\r\n\tpublic curLevel: number = 0;\r\n\t@field\r\n\tpublic maxLevel: number = 0;\r\n\t@field\r\n\tpublic lastProfitTime: number = 0;\r\n\t@field\r\n\tpublic profitCount: number = 0;\r\n\r\n\tpublic pJob: PlayerJob;\r\n\r\n\tconstructor(index?, parent?) {\r\n\t\tsuper(index);\r\n\t\tthis.pJob = parent;\r\n\t}\r\n\r\n\t/**\r\n\t * 打工点\r\n\t */\r\n\tpublic get job() {\r\n\t\treturn jobRepo().getById(this.jobId);\r\n\t}\r\n\r\n\t/**\r\n\t * 升级花销\r\n\t */\r\n\tpublic upgradeCosts() {\r\n\t\tconst gold = this.job.upgradeGold(this.curLevel);\r\n\t\treturn ConditionGroup.create(\r\n\t\t\tcGte(ConditionType.Gold, gold)\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * 升级条件\r\n\t */\r\n\tpublic upgradeConditions() {\r\n\t\treturn ConditionGroup.create(\r\n\t\t\tcFun(() => this.curLevel > 0, EconomicThrow.JobNotUnlocked),\r\n\t\t\tcFun(() => this.curLevel < this.job.maxLevel, EconomicThrow.ReachJobMaxLevel),\r\n\t\t\tthis.upgradeCosts()\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * 升级条件\r\n\t */\r\n\tpublic unlockCosts() {\r\n\t\treturn ConditionGroup.create(\r\n\t\t\tcGte(ConditionType.Gold, this.job.unlockGold)\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * 升级条件\r\n\t */\r\n\tpublic unlockConditions() {\r\n\t\treturn ConditionGroup.create(\r\n\t\t\tcFun(() => this.curLevel <= 0, EconomicThrow.JobAlreadyUnlocked),\r\n\t\t\tcGte(ConditionType.ReturnTime, this.job.unlockReturnTime),\r\n\t\t\tthis.unlockCosts()\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * 是否自动领取\r\n\t */\r\n\tpublic get isAutoProfit() { return this.pJob.isAutoProfit; }\r\n\r\n\t/**\r\n\t * 能否领取收益\r\n\t */\r\n\tpublic get isValidProfitTime() {\r\n\t\treturn Date.now() >= this.lastProfitTime + this.job.time * 1000;\r\n\t}\r\n\r\n\t/**\r\n\t * 升级条件\r\n\t */\r\n\tpublic profitConditions() {\r\n\t\treturn ConditionGroup.create(\r\n\t\t\tcFun(() => this.curLevel > 0, EconomicThrow.JobNotUnlocked),\r\n\t\t\tcFun(() => this.isValidProfitTime, EconomicThrow.NotJobProfitTime)\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * 领取奖励\r\n\t */\r\n\tpublic profitRewards() {\r\n\t\tconst gold = this.job.profit(this.curLevel);\r\n\t\treturn RewardGroup.create(r(RewardType.Gold, gold));\r\n\t}\r\n\r\n\t/**\r\n\t * 升级\r\n\t */\r\n\tpublic upgrade() {\r\n\t\tconst maxLevel = this.job.maxLevel;\r\n\t\tif (this.curLevel >= maxLevel) return;\r\n\r\n\t\t// this.curLevel = MathUtils.clamp(this.curLevel + 1, 0, maxLevel);\r\n\t\tthis.maxLevel = Math.max(this.maxLevel, ++this.curLevel);\r\n\r\n\t\tif (this.lastProfitTime == 0) // 针对初次升级\r\n\t\t\tthis.lastProfitTime = Date.now();\r\n\t}\r\n\r\n\t/**\r\n\t * 领取收益\r\n\t */\r\n\tpublic profit() {\r\n\t\tthis.lastProfitTime = Date.now();\r\n\t\tthis.profitCount++;\r\n\t}\r\n\r\n\tprivate _icon: SpriteFrame;\r\n\tpublic async icon(): Promise<SpriteFrame> {\r\n\t\treturn this._icon ||= await this.loadIcon();\r\n\t}\r\n\tprivate async loadIcon(): Promise<SpriteFrame> {\r\n\t\treturn await assetMgr().loadAsset(SpriteFrame, BundleName.Sprites, `icons/job${this.jobId}`);\r\n\t}\r\n\r\n}\r\n\r\n@playerData(\"PlayerJob\")\r\nexport class PlayerJob extends PlayerData {\r\n\r\n\t@field\r\n\tpublic id: number = -1;\r\n\t@field(Number)\r\n\tpublic returnTimes: number = 0; // 回城次数\r\n\t@field([PlayerJobItem])\r\n\tpublic jobs: PlayerJobItem[] = []; // 打工数据记录\r\n\t@field\r\n\tpublic autoProfitTime: number = 0; // 自动领取截止时间\r\n\r\n\t// region 数据获取\r\n\r\n\t/**\r\n\t * 获取指定打工点数据\r\n\t */\r\n\tpublic job(jobId: number) {\r\n\t\tlet res = this.jobs.find(j => j.jobId == jobId);\r\n\t\tif (!res) {\r\n\t\t\tres = new PlayerJobItem(this.jobs.length, this);\r\n\t\t\tres.jobId = jobId;\r\n\r\n\t\t\tthis.jobs.push(res);\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 是否自动领取\r\n\t */\r\n\tpublic get isAutoProfit() { return Date.now() <= this.autoProfitTime; }\r\n\r\n\t// endregion\r\n\r\n}\r\nimport {jobRepo} from \"./Job\";\r\nimport {cFun, cGte, ConditionGroup, ConditionType} from \"../../PlayerModule/Data/Condition\";\r\nimport {r, RewardGroup, RewardType} from \"../../PlayerModule/Data/Reward\";\r\nimport {EconomicThrow} from \"../Common/EconomicCommon\";\r\nimport {assetMgr, BundleName} from \"../../CoreModule/Managers/AssetBundleManager\";\r\nimport SpriteFrame = cc.SpriteFrame;\r\n","import {BaseManager, getManager, manager} from \"../../CoreModule/Managers/BaseManager\";\r\nimport {Player, PlayerData} from \"../Data/Player\";\r\nimport {ChainId, DefaultChainId, DefaultWalletType, WalletType} from \"../../NFTModule/Managers/NFTManager\";\r\nimport {DataLoader} from \"../../CoreModule/Utils/DataLoader\";\r\nimport {gameMgr} from \"../../CoreModule/Managers/GameManager\";\r\n\r\nexport function playerData<T extends PlayerData>(name: string) {\r\n\treturn (clazz: Constructor<T>) =>\r\n\t\tplayerMgr().registerPlayerData(clazz, name);\r\n}\r\n\r\nexport function waitForLogin(obj, key, desc) {\r\n\tconst oriFunc = desc.value;\r\n\tdesc.value = async function (...p) {\r\n\t\tawait PromiseUtils.waitFor(() => !!playerMgr().player);\r\n\t\treturn oriFunc.apply(this, p);\r\n\t}\r\n}\r\n\r\nexport function playerMgr() {\r\n\treturn getManager(PlayerManager)\r\n}\r\n\r\nconst AutoAccountKey = \"autoAccount\";\r\n\r\n@manager\r\nclass PlayerManager extends BaseManager {\r\n\r\n\tpublic player: Player = null;\r\n\r\n\tpublic playerData: {[T: string]: PlayerData} = {};\r\n\tpublic playerDataClasses: {[T: string]: Constructor<any>} = {};\r\n\r\n\tpublic needLogin = true;\r\n\r\n\t// region 玩家操作\r\n\r\n\t/**\r\n\t * 登陆\r\n\t */\r\n\tpublic async login(account: string, chainId = DefaultChainId,\r\n\t\t\t\t\t\t\t\t\t\t wallet = DefaultWalletType) {\r\n\t\tconst res = await PlayerInterface.Login({\r\n\t\t\tchainId, account, wallet\r\n\t\t});\r\n\t\tthis.player = DataLoader.load(Player, res['player']);\r\n\t\tthis.setAllPlayerData(res['data']);\r\n\t\tgameMgr().setToken(res['token']);\r\n\t}\r\n\r\n\t/**\r\n\t * TODO: 自动登录\r\n\t */\r\n\tpublic async autoLogin() {\r\n\t\tif (!!this.player) return;\r\n\t\tlet account = cc.sys.localStorage.getItem(AutoAccountKey);\r\n\t\tif (!account) cc.sys.localStorage.setItem(AutoAccountKey,\r\n\t\t\taccount = MathUtils.randomString());\r\n\t\tconsole.log(\"AutoLogin: \", account);\r\n\t\tawait this.login(account);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 玩家数据操作\r\n\r\n\t/**\r\n\t * 注册玩家数据\r\n\t */\r\n\tpublic registerPlayerData<T extends PlayerData>(\r\n\t\tclazz: Constructor<T>, name: string) {\r\n\t\tthis.playerDataClasses[name] = clazz;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取玩家数据名\r\n\t */\r\n\tpublic getPlayerDataName<T extends PlayerData>(\r\n\t\tclazz: Constructor<T>) {\r\n\t\tfor (const key in this.playerDataClasses) {\r\n\t\t\tconst pdClazz = this.playerDataClasses[key];\r\n\t\t\tif (clazz == pdClazz) return key;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 获取玩家数据类\r\n\t */\r\n\tpublic getPlayerDataClass<T extends PlayerData>(name: string) {\r\n\t\treturn this.playerDataClasses[name];\r\n\t}\r\n\r\n\t/**\r\n\t * 获取玩家数据\r\n\t * @param clazz 需要获取的数据类型\r\n\t */\r\n\tpublic getPlayerData<T extends PlayerData>(clazz: Constructor<T>): T {\r\n\t\treturn this.playerData[this.getPlayerDataName(clazz)] as T;\r\n\t}\r\n\r\n\t/**\r\n\t * 刷新玩家数据\r\n\t * @param clazz 需要刷新的数据类型，默认刷新全部数据\r\n\t */\r\n\tpublic async refreshPlayerData<T extends PlayerData>(\r\n\t\tclazz?: Constructor<T>) {\r\n\t\tif (clazz) {\r\n\t\t\tconst name = this.getPlayerDataName(clazz);\r\n\t\t\tconst res = await PlayerInterface.GetData({name});\r\n\t\t\tthis.setPlayerData(clazz, res[\"data\"]);\r\n\t\t} else {\r\n\t\t\tconst res = await PlayerInterface.GetData();\r\n\t\t\tthis.setAllPlayerData(res['data']);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 设置玩家数据\r\n\t */\r\n\tpublic setPlayerData<T extends PlayerData>(\r\n\t\tclazz: Constructor<T>, data: object) {\r\n\t\tconst name = this.getPlayerDataName(clazz);\r\n\t\tif (name) this.playerData[name] = DataLoader.load(clazz, data);\r\n\t}\r\n\r\n\t/**\r\n\t * 设置玩家数据\r\n\t */\r\n\tpublic setAllPlayerData<T extends PlayerData>(dict: object) {\r\n\t\tfor (const key in dict) {\r\n\t\t\tconst clazz = this.getPlayerDataClass(key);\r\n\t\t\tif (clazz) this.setPlayerData(clazz, dict[key]);\r\n\t\t}\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n\r\nimport {PlayerInterface} from \"../Common/PlayerCommon\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {PromiseUtils} from \"../../../Utils/PromiseUtils\";\r\nimport {MathUtils} from \"../../../Utils/MathUtils\";\r\nimport {selectorScene} from \"../../../Scenes/SelectorScene/SelectorScene\";\r\n","import {PlayerData} from \"../../PlayerModule/Data/Player\";\r\nimport {playerData} from \"../../PlayerModule/Managers/PlayerManager\";\r\nimport {field} from \"../../CoreModule/Data/BaseData\";\r\n\r\nexport type MoneyType = \"gold\" | \"diamond\" | \"fragment\" | \"medal\" | \"token\";\r\n\r\n@playerData(\"PlayerMoney\")\r\nexport class PlayerMoney extends PlayerData {\r\n\r\n\t@field\r\n\tpublic gold: number = 0;\r\n\t@field\r\n\tpublic diamond: number = 0;\r\n\t@field\r\n\tpublic fragment: number = 0;\r\n\t@field\r\n\tpublic medal: number = 0;\r\n\r\n\t// 代币\r\n\t@field\r\n\tpublic token: number = 0;\r\n\r\n\t/**\r\n\t * 获得货币快捷访问\r\n\t */\r\n\tpublic gainGold(val: number) { return this.gain(\"gold\", val); }\r\n\tpublic gainDiamond(val: number) { return this.gain(\"diamond\", val); }\r\n\tpublic gainFragment(val: number) { return this.gain(\"fragment\", val); }\r\n\tpublic gainMedal(val: number) { return this.gain(\"medal\", val); }\r\n\r\n\t/**\r\n\t * 获得货币\r\n\t */\r\n\tpublic gain(type: MoneyType, val: number) {\r\n\t\treturn this[type] = Math.max(this[type] + val, 0);\r\n\t}\r\n\r\n}\r\n","import {PlayerData} from \"../../PlayerModule/Data/Player\";\r\nimport {RankContent} from \"./RankRecord\";\r\nimport {field} from \"../../CoreModule/Data/BaseData\";\r\n\r\n/**\r\n * 玩家的排行数据\r\n */\r\nexport class PlayerRank extends PlayerData {\r\n\r\n\t@field(Object)\r\n\tpublic data: RankContent = {};\r\n\r\n}\r\n","import {dataPK, field, GameData} from \"../../CoreModule/Data/BaseData\";\r\nimport {ChainId, DefaultChainId, WalletType} from \"../../NFTModule/Managers/NFTManager\";\r\nimport {DynamicData} from \"../../CoreModule/Data/DynamicData\";\r\n\r\nexport enum PlayerState {\r\n\tNormal, Banned\r\n}\r\n\r\nexport abstract class PlayerData extends DynamicData {\r\n\r\n\t@field(String) @dataPK\r\n\tpublic uuid: string;\r\n\r\n}\r\n\r\nexport class Player extends GameData {\r\n\r\n\t@field\r\n\tpublic uuid: string = \"\"; // UUID\r\n\r\n\t@field\r\n\tpublic chainId: ChainId = DefaultChainId; // 链ID\r\n\t@field\r\n\tpublic account: string = \"\"; // 钱包地址\r\n\t@field\r\n\tpublic wallet: WalletType = 'Metamask'; // 钱包类型\r\n\r\n\t@field\r\n\tpublic name: string = \"\"; // 玩家名\r\n\t@field\r\n\tpublic avatarUrl: string = \"\"; // 头像URL\r\n\r\n\t@field(Number)\r\n\tpublic createdAt: number;\r\n\r\n\t@field\r\n\tpublic state: PlayerState = PlayerState.Normal;\r\n\t@field(Number)\r\n\tpublic stateTime: number;\r\n\t@field(String)\r\n\tpublic stateDesc: string;\r\n\r\n\t// region 基本操作\r\n\r\n\t/**\r\n\t * 登陆\r\n\t */\r\n\tpublic login() {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * 登出\r\n\t */\r\n\tpublic logout() {\r\n\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n","import {ItemDisplay} from \"../../../../Modules/CoreModule/Components/ItemDisplay\";\r\nimport {Part, partRepo} from \"../../../../Modules/HeroModule/Data/Part\";\r\nimport {HeroType} from \"../../../../Modules/HeroModule/Data/HeroType\";\r\nimport {NFTCreator} from \"../../../../Modules/NFTModule/Utils/NFTCreator\";\r\nimport {DefaultBt1, DefaultBt2, nftMgr, Web3Enable} from \"../../../../Modules/NFTModule/Managers/NFTManager\";\r\nimport CreatedWindow from \"../CreatedWindow\";\r\nimport {blockLoading, showLoading} from \"../../../../Modules/CoreModule/Managers/LoadingManager\";\r\nimport {HeroSkeleton} from \"../../../../Utils/SpineUtils\";\r\nimport {PartType, partTypeRepo, SpecialPartType} from \"../../../../Modules/HeroModule/Data/PartType\";\r\nimport {waitForDataLoad} from \"../../../../Modules/CoreModule/Managers/DataManager\";\r\nimport {Hero} from \"../../../../Modules/HeroModule/Data/Hero\";\r\nimport {HeroInterface} from \"../../../../Modules/HeroModule/Common/HeroCommon\";\r\nimport {QualityType} from \"../../../../Modules/HeroModule/Data/Quality\";\r\nimport {playerMgr} from \"../../../../Modules/PlayerModule/Managers/PlayerManager\";\r\nimport {MathUtils} from \"../../../../Utils/MathUtils\";\r\nimport Skeleton = sp.Skeleton;\r\nimport Label = cc.Label;\r\nimport EditBox = cc.EditBox;\r\nimport Camera = cc.Camera;\r\nimport RenderTexture = cc.RenderTexture;\r\nimport Sprite = cc.Sprite;\r\nimport {NFTLoading} from \"../../../../Modules/NFTModule/Common/NFTCommon\";\r\nimport {PromiseUtils} from \"../../../../Utils/PromiseUtils\";\r\nimport GIFUtils from \"../../../../Utils/GIFUtils\";\r\nimport {selectorScene} from \"../../SelectorScene\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nexport const DefaultStand: string = 'stand';\r\nexport const DefaultAttack: string = 'attack_1';\r\n\r\n@ccclass\r\nexport default class PreviewPictureDisplay extends ItemDisplay<HeroSkeleton> {\r\n\r\n\t@property(Skeleton)\r\n\tskeleton: Skeleton = null;\r\n\t@property(Skeleton)\r\n\ttemp: Skeleton = null;\r\n\t@property(Label)\r\n\tprice: Label = null;\r\n\t@property(Label)\r\n\theroName: Label = null;\r\n\t@property(Label)\r\n\tlastCount: Label = null;\r\n\t@property(CreatedWindow)\r\n\tcreatedWindow: CreatedWindow = null;\r\n\t@property(Sprite)\r\n\theroBackground: Sprite = null;\r\n\r\n\t// region 初始化\r\n\r\n\tprotected onLoad() {\r\n\t\tthis.initScreenShot();\r\n\t}\r\n\r\n\t@waitForDataLoad\r\n\tprotected start() {\r\n\t\tthis.setItem(new HeroSkeleton(this.skeleton, this.temp));\r\n\t}\r\n\r\n\t/**\r\n\t * 设置默认骨骼\r\n\t */\r\n\tpublic async setHeroType(type: HeroType) {\r\n\t\tlet parts = type.getDefaultParts();\r\n\t\tfor (const part of parts) {\r\n\t\t\t// const pt = part.partType;\r\n\t\t\t// // 没有才添加，但身体除外（貌似不需要？）\r\n\t\t\t// if (pt.special == SpecialPartType.Body ||\r\n\t\t\t// \t!this.item.findPart(pt))\r\n\t\t\t// await\r\n\t\t\tthis.addPart(part);\r\n\t\t}\r\n\t\t// 这里不能用foreach，因为必须保证body是第一个添加的part，其实是slot数量不一致导致的报错\r\n\t\t// type.getDefaultParts().forEach( p => {\r\n\t\t// \tthis.item.addPart(p);\r\n\t\t// })\r\n\t\tthis.refresh();\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 绘制控制\r\n\r\n\t/**\r\n\t * 刷新界面\r\n\t */\r\n\trefresh() {\r\n\t\tsuper.refresh();\r\n\t\tif (this.item == null) return;\r\n\r\n\t\tthis.refreshHeroType();\r\n\t\tthis.refreshAnimation();\r\n\t\t// this.refreshBanList();\r\n\t\tthis.refreshHeroBackground();\r\n\t\tthis.refreshPrice().then();\r\n\r\n\t\tthis.item.refresh(selectorScene().editorMode).then();\r\n\t}\r\n\trefreshHeroType() {\r\n\t\tthis.heroName.string = this.item.heroType.getDisplayName();\r\n\r\n\t\tif (this.lastCount)\r\n\t\t\tnftMgr().getNFTCount(DefaultBt1, DefaultBt2).then(res =>\r\n\t\t\t\tthis.lastCount.string = res.restCount + \"/\" + res.limitCreateCount\r\n\t\t\t)\r\n\t}\r\n\trefreshAnimation() {\r\n\t\tthis.skeleton.clearTrack(0);\r\n\t\tthis.skeleton.setAnimation(0, DefaultStand, true);\r\n\t}\r\n\t// refreshBanList() {\r\n\t// \tthis.banList = [];\r\n\t// \tconst config = configMgr().config(PartConfig);\r\n\t// \tthis.item.parts.forEach(p => {\r\n\t// \t\tconst items = config.ptBptScale.filter(\r\n\t// \t\t\titem => item[1] == p.oriId && item[2] == 0); // 寻找互斥搭配\r\n\t// \t\titems.forEach(item => {\r\n\t// \t\t\tconst np = partRepo().getById(item[0]);\r\n\t// \t\t\tif (np.partType.baseTypeId == p.partTypeId)\r\n\t// \t\t\t\tthis.banList.push(item[0]);\r\n\t// \t\t})\r\n\t// \t\t// if (index >= 0) this.banList.push(config.tarPartIds[index]);\r\n\t//\r\n\t// \t\t// let index = config.srcPartIds.findIndex(i => i == p.index);\r\n\t// \t\t// if (index >= 0) this.banList.push(config.tarPartIds[index]);\r\n\t// \t\t// index = config.tarPartIds.findIndex(i => i == p.index);\r\n\t// \t\t// if (index >= 0) this.banList.push(config.srcPartIds[index]);\r\n\t// \t});\r\n\t// }\r\n\t@blockLoading\r\n\tasync refreshPrice() {\r\n\t\t// const res = await nftMgr().getNFTPrice(DefaultBt1, DefaultBt2, this.item.nftPartIds)\r\n\t\t// this.price.string = res.toString();\r\n\t}\r\n\tbackgroundPart: Part = null;\r\n\trefreshHeroBackground() {\r\n\t\tif (!this.backgroundPart) return;\r\n\t\tlet item = this.item;\r\n\t\tthis.backgroundPart.picture().then(res => item == this.item ? this.heroBackground.spriteFrame = res : null);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 部件控制\r\n\r\n\t/**\r\n\t * 添加部件\r\n\t */\r\n\tpublic addPart(part: Part) {\r\n\t\tif (!part) return;\r\n\t\tif (part.partType.isBody)\r\n\t\t\tthis.item?.setHeroTypeId(part.heroTypeId);\r\n\t\tthis.item?.addPart(part);\r\n\t\tif (part.partType.special == SpecialPartType.Background) this.backgroundPart = part;\r\n\t\tthis.refresh();\r\n\r\n\t\t// let idx = this.selectedParts.findIndex(\r\n\t\t// \tp => p.partTypeId == part.partTypeId);\r\n\t\t// const lastPart = this.selectedParts[idx];\r\n\t\t// idx == -1 ? this.selectedParts.push(part) : this.selectedParts[idx] = part;\r\n\t\t//\r\n\t\t// const target = SpineUtils.skeleton(this.skeleton);\r\n\t\t// if (lastPart) SpineUtils.removePart(target, lastPart);\r\n\t\t//\r\n\t\t// this.temp.skeletonData = part.skeleton;\r\n\t\t//\r\n\t\t// const source = SpineUtils.skeleton(this.temp);\r\n\t\t//\r\n\t\t// SpineUtils.addPart(this.selectedHeroType, target, source, part);\r\n\t\t//\r\n\t\t// // part.slotNames.forEach(name => {\r\n\t\t// // \tconst slot = this.getSlot(name);\r\n\t\t// // \tconst tSlot = this.getTmpSlot(name, part.heroTypeId);\r\n\t\t// // \t// tSlot原则上是存在Attachment的\r\n\t\t// // \tslot?.setAttachment(tSlot.getAttachment().copy());\r\n\t\t// // });\r\n\t\t//\r\n\t}\r\n\r\n\t/**\r\n\t * 移除部件\r\n\t */\r\n\tpublic removePart(part: Part) {\r\n\t\tif (!part) return;\r\n\t\tthis.item?.removePart(part);\r\n\t\tthis.refresh();\r\n\r\n\t\t// let idx = this.selectedParts.findIndex(\r\n\t\t// \tp => p.partTypeId == part.partTypeId);\r\n\t\t// this.selectedParts.splice(idx, 1);\r\n\t\t//\r\n\t\t// const target = SpineUtils.skeleton(this.skeleton);\r\n\t\t//\r\n\t\t// SpineUtils.removePart(target, part);\r\n\t\t//\r\n\t\t// // part.slotNames.forEach(name =>\r\n\t\t// // \tthis.getSlot(name)?.setAttachment(null)\r\n\t\t// // );\r\n\t\t//\r\n\r\n\t\t// if(this.skeleton.findSlot(part.slotType().name + this.getSuffixString(0)))\r\n\t\t// \tfor (let i = 0; this.skeleton.findSlot(part.slotType().name + this.getSuffixString(0)) ; i++)\r\n\t\t// \t\tthis.skeleton.findSlot(part.slotType().name + this.getSuffixString(i)).setAttachment(null);\r\n\t\t// else this.skeleton.findSlot(part.slotType().name).setAttachment(null);\r\n\t}\r\n\r\n\tprivate _partsChanged: boolean = false;\r\n\tpublic get partsChanged() {\r\n\t\tconst res = this._partsChanged;\r\n\t\tthis._partsChanged = false\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 选择随机部件\r\n\t */\r\n\t@showLoading\r\n\t@blockLoading\r\n\tpublic async random() {\r\n\t\t// TODO: 上链与唯一性检查\r\n\t\tawait this.randomParts();\r\n\t\tthis._partsChanged = true;\r\n\t}\r\n\tasync randomParts(partType?: PartType){\r\n\t\tif (partType === undefined) { // 如果没有该参数\r\n\t\t\tconst roots = partTypeRepo().rootPartTypes();\r\n\t\t\tfor (const root of roots)\r\n\t\t\t\troot && await this.randomParts(root);\r\n\t\t} else {\r\n\t\t\tif (partType.special == SpecialPartType.Background) return;\r\n\t\t\tconst parts = partRepo().findByPartTypeId(partType.id)\r\n\t\t\t\t.filter(p => this.item.calcScale(p) > 0 && p.stock > 0);\r\n\t\t\tif (partType.optional) parts.push(null);\r\n\t\t\tconst part = MathUtils.randomPick(parts);\r\n\t\t\tif (part) this.addPart(part);\r\n\t\t\telse { // 移除\r\n\t\t\t\tthis.addPart(parts[0]);\r\n\t\t\t\tthis.removePart(parts[0]);\r\n\t\t\t}\r\n\r\n\t\t\tconst subs = partType.subPartTypes;\r\n\t\t\tfor (const sub of subs) await this.randomParts(sub); // 继续处理sub\r\n\t\t}\r\n\r\n\t\t// partTypeRepo().list.forEach(pt => {\r\n\t\t// \tlet parts = partRepo().findByPartTypeId(pt.id)\r\n\t\t// \t\t.filter(p => {\r\n\t\t// \t\t\tconst htId = p.heroTypeId,\r\n\t\t// \t\t\t\tchtId = this.item.heroTypeId;\r\n\t\t// \t\t\treturn p.stock > 0\r\n\t\t// \t\t\t\t&& config.pHtScale[pt.id]?.[htId]?.[chtId] > 0\r\n\t\t// \t\t\t\t&& !!this.banList.find(i => i == p.oriId);\r\n\t\t// \t\t});\r\n\t\t//\r\n\t\t// \tif (parts.length == 0) return;\r\n\t\t//\r\n\t\t// \tlet i = Math.floor(Math.random() *\r\n\t\t// \t\t(parts.length + (pt.optional ? 1 : 0)));\r\n\t\t// \tif (i == parts.length) { // 清空\r\n\t\t// \t\tthis.addPart(parts[0]);\r\n\t\t// \t\tthis.removePart(parts[0]);\r\n\t\t// \t} else this.addPart(parts[i]);\r\n\t\t// })\r\n\t\t// let pids: number[] = [], parts: Part[] = [];\r\n\t\t// do {\r\n\t\t// \tpids = [];\r\n\t\t// \tparts = [];\r\n\t\t// \t// DataUtils.heroType(this.item.heroTypeId, \"id\").getChildren().forEach(t => {\r\n\t\t// \tpartTypeRepo().list.forEach(t => {\r\n\t\t// \t\tlet pts = partRepo().list.filter(p => p.partTypeId == t.id && p.stock > 0);\r\n\t\t// \t\tif (pts.length == 0) return;\r\n\t\t// \t\tlet i = Math.floor(Math.random() * (pts.length + (t.optional ? 1 : 0)));\r\n\t\t// \t\tif(i == pts.length) {\r\n\t\t// \t\t\tpids.push(-1);\r\n\t\t// \t\t\tparts.push(pts[0]);\r\n\t\t// \t\t} else {\r\n\t\t// \t\t\tpids.push(pts[i].partTypeId + PartIdOffset);\r\n\t\t// \t\t\tparts.push(pts[i]);\r\n\t\t// \t\t}\r\n\t\t// \t})\r\n\t\t// } while (await nftMgr().notUniqueParts(pids.filter(e => e != -1)));\r\n\t\t// pids.forEach((e, i) => {\r\n\t\t// \tif(e == -1) {\r\n\t\t// \t\tthis.addPart(parts[i]);\r\n\t\t// \t\tthis.removePart(parts[i]);\r\n\t\t// \t}else this.addPart(parts[i]);\r\n\t\t// })\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 更新控制\r\n\r\n\t/**\r\n\t * 更新\r\n\t */\r\n\tprotected update(dt: number) {\r\n\t\tthis.updateScale();\r\n\t\tif (this.recording) {\r\n\t\t\tthis.skeleton.setAnimation(0, DefaultStand, true);\r\n\t\t\t// @ts-ignore\r\n\t\t\tthis.skeleton.update(this.images.length / 60);\r\n\t\t\tthis.images.push(this.shot());\r\n\t\t}\r\n\t}\r\n\r\n\tpublic skeletonSize: number = 300;\r\n\r\n\tprivate updateScale(){\r\n\t\tconst xRate = this.skeleton.node.scaleX / this.skeletonSize;\r\n\t\tconst yRate = this.skeleton.node.scaleY / this.skeletonSize;\r\n\t\tlet k = Math.max(\r\n\t\t\tthis.skeleton.node.width * xRate,\r\n\t\t\tthis.skeleton.node.height * yRate);\r\n\t\tif (k > 1) {\r\n\t\t\tthis.skeleton.node.scaleX /= k;\r\n\t\t\tthis.skeleton.node.scaleY /= k;\r\n\t\t}\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 创建NFT\r\n\r\n\t@property(EditBox)\r\n\tnickname: EditBox = null;\r\n\r\n\t@showLoading\r\n\tasync createNFT(){\r\n\t\tconst picture = this.shot();\r\n\r\n\t\tthis.startRecording();\r\n\t\tlet recordingTime = Math.floor(this.skeleton.findAnimation(DefaultStand).duration * 60);\r\n\t\tawait PromiseUtils.waitFor(() => this.images.length >= recordingTime);\r\n\t\tthis.recording = false;\r\n\t\tconst gif = await GIFUtils.makeGIF(this.images.filter((e, i) => i < recordingTime));\r\n\r\n\t\tconsole.log(\"this.item.nftPartIds\", this.item.nftPartIds)\r\n\r\n\t\tif (Web3Enable) {\r\n\t\t\tconst creator = new NFTCreator();\r\n\t\t\tcreator.name = this.nickname.string;\r\n\t\t\tcreator.picture = picture;\r\n\t\t\tcreator.gif = gif;\r\n\t\t\tcreator.partIds = this.item.nftPartIds;\r\n\t\t\tcreator.create().then(res => {\r\n\t\t\t\tthis.createdWindow.setPicture(creator.picture);\r\n\t\t\t\tthis.createdWindow.setQuality(Number(res.rawData.quality));\r\n\t\t\t\tthis.createdWindow.show();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// TODO: 本地创建\r\n\t\t\tconsole.log(\"本地创建\");\r\n\t\t\tconst hero = Hero.create(playerMgr().player.account,\r\n\t\t\t\tthis.item.heroTypeId, this.item.partSettings, this.nickname.string);\r\n\r\n\t\t\tHeroInterface.CreateHero({hero}).then(res => {\r\n\t\t\t\tconst hero: Hero = res.hero;\r\n\t\t\t\tthis.createdWindow.setPicture(picture);\r\n\t\t\t\t// 此处的品质是平台的品质\r\n\t\t\t\tthis.createdWindow.setQuality(QualityType.UR - hero.quality + 1);\r\n\t\t\t\tthis.createdWindow.show();\r\n\t\t\t})\r\n\t\t}\r\n\t\t// .catch(e => {\r\n\t\t// \talertMgr().alert(\"操作失败\", e, AlertDialogType.OK).then();\r\n\t\t// \tconsole.error(e);\r\n\t\t// });\r\n\t}\r\n\r\n\t//endregion\r\n\r\n\t//region 截图处理\r\n\r\n\t@property(Camera)\r\n\tcamera: Camera = null;\r\n\r\n\ttexture: RenderTexture = null;\r\n\twindowSize: number = Math.max(cc.winSize.width, cc.winSize.height);\r\n\ttargetSize: number = 600;\r\n\r\n\tinitScreenShot() {\r\n\t\tthis.camera.enabled = false;\r\n\t\tthis.texture = new RenderTexture();\r\n\t\tthis.texture.initWithSize(this.windowSize, this.windowSize, cc.RenderTexture.DepthStencilFormat.RB_FMT_S8)\r\n\t\tthis.camera.targetTexture = this.texture;\r\n\t}\r\n\r\n\tshot(): string {\r\n\t\t// 截图\r\n\t\tthis.camera.render(undefined);\r\n\r\n\t\t// 处理截图数据\r\n\t\tlet texture = this.texture;\r\n\t\tlet data = texture.readPixels();\r\n\t\tlet width = texture.width;\r\n\t\tlet height = texture.height;\r\n\t\tlet canvasTemp = document.createElement('canvas');\r\n\t\tlet ctxTemp = canvasTemp.getContext('2d');\r\n\t\tcanvasTemp.width = width;\r\n\t\tcanvasTemp.height = height;\r\n\r\n\t\t// 上下翻转\r\n\t\tlet rowBytes = width * 4;\r\n\t\tfor (let row = 0; row < height; row++) {\r\n\t\t\tlet srow = height - 1 - row;\r\n\t\t\tlet imageData = ctxTemp.createImageData(width, 1);\r\n\t\t\tlet start = srow*width*4;\r\n\t\t\tfor (let i = 0; i < rowBytes; i++)\r\n\t\t\t\timageData.data[i] = data[start+i];\r\n\t\t\tctxTemp.putImageData(imageData, 0, row);\r\n\t\t}\r\n\r\n\t\t// 提取中心部分人物\r\n\t\tlet canvas = document.createElement('canvas');\r\n\t\tlet ctx = canvas.getContext('2d');\r\n\t\tcanvas.width = this.targetSize;\r\n\t\tcanvas.height = this.targetSize;\r\n\t\tctx.drawImage(canvasTemp, (this.windowSize - this.targetSize) / 2, (this.windowSize - this.targetSize) / 2, this.targetSize, this.targetSize, 0, 0, this.targetSize, this.targetSize);\r\n\r\n\t\t// 生成并返回base64URL\r\n\t\treturn canvas.toDataURL(\"image/png\");\r\n\t}\r\n\r\n\tdownloadScreenShot(url: string){\r\n\t\t// 把图片生成后download到本地\r\n\t\tdocument.location.href = url.replace(\r\n\t\t\t/^data:image[^;]*/, \"data:image/octet-stream\");\r\n\t}\r\n\r\n\trecording: boolean = false;\r\n\timages: string[] = [];\r\n\r\n\tprivate startRecording() {\r\n\t\tthis.images = [];\r\n\t\tthis.recording = true;\r\n\t}\r\n\r\n\t//endregion\r\n\r\n}\r\n","export class PromiseUtils {\r\n\tpublic static wait(time) {\r\n\t\treturn new Promise<boolean>(resolve =>\r\n\t\t\tsetTimeout(() => resolve(true), time)\r\n\t\t)\r\n\t}\r\n\r\n\tpublic static waitFor(cond, interval: number = 100, maxTimes: number = 10000,\r\n\t\t\t\t\t\t\t\t\t\t\t\tmode: 'timeout' | 'interval' = 'timeout', title?: string) {\r\n\t\treturn new Promise<boolean>(resolve => {\r\n\t\t\tconst check = async (success?, fail?) => {\r\n\t\t\t\tif (title) console.log(\"Waiting for:\", title, cond);\r\n\t\t\t\tconst res = await cond();\r\n\t\t\t\tif (title) console.log(\"Current result:\", title, res);\r\n\r\n\t\t\t\tif (res || --maxTimes <= 0) {\r\n\t\t\t\t\tsuccess && success(); resolve(res);\r\n\t\t\t\t} else fail && fail();\r\n\t\t\t}\r\n\t\t\tlet check_;\r\n\r\n\t\t\tswitch (mode) {\r\n\t\t\t\tcase \"timeout\":\r\n\t\t\t\t\tcheck_ = () => check(null,\r\n\t\t\t\t\t\t() => setTimeout(check_, interval));\r\n\t\t\t\t\tcheck_().then();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"interval\":\r\n\t\t\t\t\tcheck_ = () => check(() => clearInterval(handle));\r\n\t\t\t\t\tconst handle = setInterval(check_, interval);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * 相当于在一个promise的基础上加上一个超时检测机制\r\n\t */\r\n\tpublic static waitForResult<T>(promise: Promise<T>, maxWaitTime: number = 30000,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t default_?: any, useReject: boolean = false) {\r\n\t\treturn new Promise<T>((resolve, reject) => {\r\n\t\t\tsetTimeout(() =>\r\n\t\t\t\tuseReject ? reject(default_) : resolve(default_)\r\n\t\t\t, maxWaitTime);\r\n\t\t\tpromise.then(resolve).catch(reject);\r\n\t\t})\r\n\t}\r\n\r\n\tprivate static retryColdDownTime: number = 3000;\r\n\r\n\tpublic static waitForRetry<T>(promise: () => Promise<T>, maxRetryTimes: number = 20,\r\n\t\t\t\t\t\t\t\t  \t\t\t\t\t\t\t\tdefault_?: any, useReject: boolean = false) {\r\n\t\treturn new Promise<T>((resolve, reject) => {\r\n\t\t\tlet retryTimes = 0;\r\n\t\t\tlet retry = () => {\r\n\t\t\t\tretryTimes++;\r\n\t\t\t\t// console.log(\"第\" + retryTimes + \"次尝试\");\r\n\t\t\t\tif (retryTimes > maxRetryTimes)\r\n\t\t\t\t\treject();\r\n\t\t\t\telse\r\n\t\t\t\t\tpromise().then(res => resolve(res)).catch(rej => {setTimeout(retry, this.retryColdDownTime)});\r\n\t\t\t}\r\n\t\t\tretry();\r\n\t\t})\r\n\t}\r\n\r\n\tpublic static funcWrapper(main: Function, before: Function, after: Function) {\r\n\t\tbefore();\r\n\t\ttry { return main() }\r\n\t\tfinally { after(); }\r\n\t}\r\n}\r\n","import {field, GameData} from \"../../CoreModule/Data/BaseData\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {BaseRepository, getRepository, repository} from \"../../CoreModule/Data/BaseRepository\";\r\nimport {data, StaticData} from \"../../CoreModule/Data/StaticData\";\r\nimport {i18nMgr} from \"../../CoreModule/Managers/I18nManager\";\r\n\r\nexport enum QualityType {\r\n\tN, R, SR, SSR, UR\r\n}\r\n\r\n@data(\"Quality\")\r\nexport class Quality extends StaticData {\r\n\r\n\t@field\r\n\tpublic id: QualityType = QualityType.N;\r\n\t@field\r\n\tpublic color: string = \"FFFFFF\";\r\n\t@field\r\n\tpublic rate: number = 1;\r\n\r\n\t/**\r\n\t * 缩写\r\n\t */\r\n\tpublic get shortName() { return QualityType[this.id]; }\r\n\r\n\t// \treturn i18nMgr().makeStr(`QualityShort${this.id}`, QualityType[this.id]);\r\n\t// }\r\n\t// public get fullName() {\r\n\t// \treturn i18nMgr().makeStr(`QualityFull${this.id}`, QualityType[this.id]);\r\n\t// }\r\n\r\n}\r\n\r\nexport function qualityRepo() {\r\n\treturn getRepository(QualityRepo);\r\n}\r\n\r\n@repository\r\nexport class QualityRepo extends BaseRepository<Quality> {\r\n\r\n\tget clazz(): Constructor<Quality> { return Quality; }\r\n\r\n\t// @ts-ignore\r\n\tgetById(id: QualityType): Quality { }\r\n\r\n\t/**\r\n\t * 获取数据\r\n \t */\r\n\tpublic n() { return this.getById(QualityType.N); }\r\n\tpublic r() { return this.getById(QualityType.R); }\r\n\tpublic sr() { return this.getById(QualityType.SR); }\r\n\tpublic ssr() { return this.getById(QualityType.SSR); }\r\n\tpublic ur() { return this.getById(QualityType.UR); }\r\n\r\n}\r\n","import property = cc._decorator.property;\r\nimport ccclass = cc._decorator.ccclass;\r\nimport executeInEditMode = cc._decorator.executeInEditMode;\r\nimport disallowMultiple = cc._decorator.disallowMultiple;\r\nimport requireComponent = cc._decorator.requireComponent;\r\nimport menu = cc._decorator.menu;\r\n\r\ncc.macro.ENABLE_WEBGL_ANTIALIAS = true;\r\n\r\n@ccclass()\r\n//@ts-ignore\r\n@executeInEditMode(true)\r\n//@ts-ignore\r\n@disallowMultiple(true)\r\n@requireComponent(cc.Mask)\r\n@menu(\"渲染组件/圆角遮罩\")\r\nexport class RadiusMask extends cc.Component {\r\n\r\n    @property()\r\n    private _radius: number = 50;\r\n\r\n    @property({tooltip: \"圆角半径:\\n0-1之间为最小边长比例值, \\n>1为具体像素值\"})\r\n\r\n    public get radius(): number {\r\n        return this._radius;\r\n    }\r\n\r\n//    public radius: number = 50;\r\n    public set radius(r: number) {\r\n        this._radius = r;\r\n        this.updateMask(r);\r\n    }\r\n\r\n    // @property(cc.Mask)\r\n    protected mask: cc.Mask = null;\r\n\r\n    protected onEnable(): void {\r\n        this.mask = this.getComponent(cc.Mask);\r\n        this.updateMask(this.radius);\r\n    }\r\n\r\n    private updateMask(r: number) {\r\n        let _radius = r >= 0 ? r : 0;\r\n        if (_radius < 1) {\r\n            _radius = Math.min(this.node.width, this.node.height) * _radius;\r\n        }\r\n        this.mask[\"radius\"] = _radius;\r\n        this.mask[\"onDraw\"] = this.onDraw.bind(this.mask);\r\n        this.mask[\"_updateGraphics\"] = this._updateGraphics.bind(this.mask);\r\n        this.mask.type = cc.Mask.Type.RECT;\r\n    }\r\n\r\n    private _updateGraphics() {\r\n\r\n        // @ts-ignore.\r\n        let graphics = this._graphics;\r\n        if (!graphics) {\r\n            return;\r\n        }\r\n        this.onDraw(graphics);\r\n    }\r\n\r\n    /**\r\n     * mask 用于绘制罩子的函数.\r\n     * this 指向mask 对象,需要特别注意.\r\n     * @param graphics\r\n     */\r\n    protected onDraw(graphics: cc.Graphics) {\r\n        // Share render data with graphics content\r\n        graphics.clear(false);\r\n        let node = this.node;\r\n        let width = node.width;\r\n        let height = node.height;\r\n        let x = -width * node.anchorX;\r\n        let y = -height * node.anchorY;\r\n        graphics.roundRect(x, y, width, height, this.radius || 0);\r\n        if (cc.game.renderType === cc.game.RENDER_TYPE_CANVAS) {\r\n            graphics.stroke();\r\n        } else {\r\n            graphics.fill();\r\n        }\r\n    }\r\n}","import Animation = cc.Animation;\r\nimport requireComponent = cc._decorator.requireComponent;\r\nimport menu = cc._decorator.menu;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\n@requireComponent(Animation)\r\n@menu(\"其他组件/随机动画辅助\")\r\nexport default class RandomAnimation extends cc.Component {\r\n\r\n    @property(Animation)\r\n    animation: Animation = null;\r\n\r\n    @property(Number)\r\n    timeOffset: number = 0; // 随机时间偏移量最大值\r\n    @property(Number)\r\n    timeOffsetAdd: number = 0; // 随机时间偏移量附加值\r\n    @property(Number)\r\n    xOffset: number = 0; // 随机X轴位置偏移量最大值（绝对值）\r\n    @property(Number)\r\n    yOffset: number = 0; // 随机Y轴位置偏移量最大值（绝对值）\r\n    @property(Number)\r\n    speedUp: number = 0; // 随机速度增量最大值\r\n    @property(Boolean)\r\n    resetPositionEveryLoop: boolean = true; // 是否再每个动画循环完成后都随机位置\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    private centerX: number = 0;\r\n    private centerY: number = 0;\r\n\r\n    protected start() {\r\n        this.reset();\r\n        if (this.resetPositionEveryLoop)\r\n            this.animation.on(\"lastframe\", this.resetPosition, this);\r\n    }\r\n\r\n    protected onEnable() {\r\n        this.centerX = this.node.x;\r\n        this.centerY = this.node.y;\r\n        this.reset();\r\n    }\r\n\r\n    private reset() {\r\n        if (!this.animation)\r\n            this.animation = this.getComponent(Animation);\r\n        this.animation.play();\r\n        this.animation.sample(this.animation.defaultClip.name);\r\n        this.animation.stop();\r\n        this.resetPosition();\r\n        this.timer = Math.random() * this.timeOffset;\r\n        this.animation.defaultClip.speed = 1 + Math.random() * this.speedUp;\r\n        this.isPlaying = false;\r\n    }\r\n\r\n    private timer: number = 0;\r\n    private isPlaying: boolean = false;\r\n\r\n    protected update(dt: number) {\r\n        if (!this.isPlaying) {\r\n            if (this.timer <= 0) {\r\n                this.animation.play();\r\n                this.isPlaying = true;\r\n            }\r\n            this.timer -= dt;\r\n        }\r\n    }\r\n\r\n    private resetPosition() {\r\n        this.node.x = this.centerX + Math.random() * this.xOffset * 2 - this.xOffset;\r\n        this.node.y = this.centerY + Math.random() * this.yOffset * 2 - this.yOffset;\r\n    }\r\n\r\n}\r\n","import {get, post} from \"../../CoreModule/Common/CoreCommon\";\r\n\r\nexport class RankInterface {\r\n\r\n    @get(\"/rank/pvp/get\") static GetPVPRank(d?): any {}\r\n\r\n}\r\n","import {ItemContainer} from \"../../../CoreModule/Components/ItemContainer\";\r\nimport {Hero} from \"../../../HeroModule/Data/Hero\";\r\nimport RankItemDisplay from \"./RankItemDisplay\";\r\nimport {waitForDataLoad} from \"../../../CoreModule/Managers/DataManager\";\r\nimport {waitForLogin} from \"../../../PlayerModule/Managers/PlayerManager\";\r\nimport {RankInterface} from \"../../../RankModule/Common/RankCommon\";\r\nimport {ScrollviewFilter} from \"../../../CoreModule/Utils/ScrollviewFilter\";\r\nimport Node = cc.Node;\r\nimport {DataLoader} from \"../../../CoreModule/Utils/DataLoader\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class RankItemContainer extends ItemContainer<Hero, RankItemDisplay> {\r\n\r\n    start () {\r\n        this.setup().then();\r\n    }\r\n\r\n    @waitForDataLoad\r\n    @waitForLogin\r\n    private async setup() {\r\n        let nfts: [] = (await RankInterface.GetPVPRank()).nfts;\r\n        let items: Hero[] = nfts.map(nft => DataLoader.load(Hero, nft)).sort((a, b) => a.rank - b.rank);\r\n        this.setItems(items);\r\n    }\r\n\r\n    update (dt) {\r\n    }\r\n\r\n    onItemsChanged() {\r\n        super.onItemsChanged();\r\n        let nodes : Node[] = [];\r\n        this.itemsComponents.forEach(item => { if(item.node.active == true) nodes.push(item.node) })\r\n        ScrollviewFilter.filter(\"vertical\", this.container, nodes, 5, this.node.height, 170);\r\n    }\r\n}\r\n","import Label = cc.Label;\r\nimport Sprite = cc.Sprite;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport {battleScene} from \"../../../../Scenes/BattleScene\";\r\nimport HeroWithAvatar from \"../HeroWithAvatar\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class RankItemDisplay extends HeroWithAvatar {\r\n\r\n    @property(Label)\r\n    nameLabel: Label = null;\r\n    @property(Label)\r\n    powerLabel: Label = null;\r\n    @property(Label)\r\n    rankLabel: Label = null;\r\n    @property(Label)\r\n    qualityLabel: Label = null;\r\n    @property(Label)\r\n    levelLabel: Label = null;\r\n\r\n    @property(Sprite)\r\n    rankSprite: Sprite = null;\r\n    @property(Sprite)\r\n    restraintSprite: Sprite = null;\r\n    @property(Sprite)\r\n    qualitySprite: Sprite = null;\r\n    @property([SpriteFrame])\r\n    rankPictures: SpriteFrame[] = [];\r\n    @property([SpriteFrame])\r\n    restraintPictures: SpriteFrame[] = [];\r\n    @property([SpriteFrame])\r\n    qualityPictures: SpriteFrame[] = [];\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    // update (dt) {}\r\n\r\n    private quality: string[] = [\"N\", \"R\", \"SR\", \"SSR\", \"UR\"];\r\n\r\n    refresh() {\r\n        super.refresh();\r\n        this.nameLabel.string = this.item.name;\r\n        this.powerLabel.string = this.item.battlePoint.toString();\r\n        this.rankLabel.string = this.item.rank > 3 ? this.item.rank.toString() : \"\";\r\n        this.qualityLabel.string = this.quality[this.item.quality];\r\n        this.levelLabel.string = \"Lv.\" + this.item.level.level.toString();\r\n\r\n        this.rankSprite.spriteFrame = this.item.rank < 4 ? this.rankPictures[this.item.rank - 1] : null;\r\n        this.restraintSprite.spriteFrame = this.restraintPictures[this.item.restraint];\r\n        this.qualitySprite.spriteFrame = this.qualityPictures[this.item.quality];\r\n    }\r\n\r\n    fightBtn() {\r\n        battleScene().startPVPBattle(this.item.nftId).then();\r\n    }\r\n}\r\n","import {BaseData, field, GameData, PK, pkType} from \"../../CoreModule/Data/BaseData\";\r\nimport {ChainId, DefaultChainId, WalletType} from \"../../NFTModule/Managers/NFTManager\";\r\n\r\nexport type RankContent = {\r\n\t[key in RankType]?: number\r\n}\r\nexport type RankType = 'battle' | 'gold' | 'diamond' | 'pvp';\r\n\r\nexport const RankTypes: RankType[] = ['battle', 'gold', 'diamond', 'pvp'];\r\n\r\nexport class RankItem extends BaseData {\r\n\r\n\t@field(String)\r\n\tpublic uuid: string;\r\n\t@field(Number)\r\n\tpublic value: number;\r\n\r\n\t@field\r\n\tpublic chainId?: ChainId = DefaultChainId; // 链ID\r\n\t@field\r\n\tpublic account?: string = \"\"; // 钱包地址\r\n\t@field\r\n\tpublic wallet?: WalletType = 'Metamask'; // 钱包类型\r\n\r\n\t@field\r\n\tpublic name?: string = \"\"; // 玩家名\r\n\t@field\r\n\tpublic avatarUrl?: string = \"\"; // 头像URL\r\n\r\n}\r\n\r\nexport class RankRecord extends GameData {\r\n\r\n\t@field(String)\r\n\tpublic type: RankType;\r\n\t@field(Number)\r\n\tpublic createdAt: number;\r\n\t@field([RankItem])\r\n\tpublic list: RankItem[] = [];\r\n\r\n\t/**\r\n\t * 创建\r\n\t */\r\n\tpublic static create(type: RankType, list: RankItem[]) {\r\n\t\tconst res = new RankRecord();\r\n\t\tres.type = type;\r\n\t\tres.createdAt = Date.now();\r\n\t\tres.list = list;\r\n\t\treturn res;\r\n\t}\r\n}\r\n","\r\nimport {Result} from \"../Data/Result\";\r\nimport {Battler} from \"../Data/Battler\";\r\n\r\nexport type MotionState = 'not_started' | 'playing' | 'ended' | 'finished';\r\n\r\nexport class ResultProcessor {\r\n\r\n\tpublic battler: Battler;\r\n\tpublic result: Result;\r\n\r\n\tpublic static create(battler: Battler, result: Result) {\r\n\t\tconst res = new ResultProcessor();\r\n\t\tres.result = result;\r\n\t\tres.battler = battler;\r\n\t\treturn res;\r\n\t}\r\n\r\n\tpublic process() {\r\n\t\tthis.doProcess();\r\n\t}\r\n\r\n\tprivate doProcess() {\r\n\r\n\t}\r\n}\r\n","import {BaseData, field} from \"../../CoreModule/Data/BaseData\";\r\nimport {Action} from \"./Action\";\r\n\r\nexport type ResultType = \"damage\" | \"recover\" | \"drain\" | \"miss\";\r\n\r\nexport class Result extends BaseData {\r\n\r\n\t@field\r\n\tpublic hpDamage: number = 0; // HP伤害\r\n\t@field\r\n\tpublic hpRecover: number = 0; // HP回复\r\n\t@field\r\n\tpublic hpDrain: number = 0; // HP吸收\r\n\r\n\t@field\r\n\tpublic isMiss: boolean = false; // 是否闪避\r\n\t@field\r\n\tpublic isCritical: boolean = false; // 是否暴击\r\n\r\n\t// @field([StatusChange])\r\n\t// public statusChanges: StatusChange[] = [];\r\n\r\n\tpublic action: Action;\r\n\r\n\tconstructor(index?, parent?) {\r\n\t\tsuper(index);\r\n\t\tthis.action = parent;\r\n\t}\r\n\r\n\tpublic static create(action: Action, type: ResultType,\r\n\t\t\t\t\t\t\t\t\t\t\t point = 0, isCritical = false) {\r\n\t\tconst res = new Result(undefined, action);\r\n\r\n\t\tswitch (type) {\r\n\t\t\tcase \"damage\": res.hpDamage = point; break;\r\n\t\t\tcase \"recover\": res.hpRecover = point; break;\r\n\t\t\tcase \"drain\": res.hpDrain = point; break;\r\n\t\t\tcase \"miss\": res.isMiss = true; break;\r\n\t\t}\r\n\t\tres.isCritical = isCritical;\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tpublic static testData() {\r\n\t\tlet res = new Result();\r\n\t\tres.hpDamage = Math.floor(Math.random() * 128);\r\n\t\treturn res;\r\n\t}\r\n}\r\n","import {Reward, RewardType} from \"../Data/Reward\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\n\r\nexport function rewardProcessor(type: RewardType) {\r\n\treturn (clazz) => {\r\n\t\tRewardProcessor.processorSettings[type] = clazz;\r\n\t}\r\n}\r\n\r\nexport function createProcessor(reward: Reward) {\r\n\tconst clazz = RewardProcessor.processorSettings[reward.type];\r\n\treturn new clazz(reward);\r\n}\r\n\r\nexport abstract class RewardProcessor {\r\n\r\n\tpublic static processorSettings:\r\n\t\t{ [K: string]: Constructor<RewardProcessor> } = {};\r\n\r\n\tpublic reward: Reward;\r\n\r\n\tprotected constructor(reward: Reward) {\r\n\t\tthis.reward = reward;\r\n\t}\r\n\r\n\tpublic get value() { return this.reward.value; }\r\n\r\n\tpublic abstract invoke(rate?);\r\n}\r\n","import {BaseData, field} from \"../../CoreModule/Data/BaseData\";\r\n\r\nexport enum RewardType {\r\n\tGold = \"gold\",\r\n\tDiamond = \"diamond\",\r\n\tFragment = \"fragment\",\r\n\tMedal = \"medal\",\r\n\r\n\tToken = \"token\", // 代币\r\n\r\n\t// TODO: 补充更多\r\n}\r\n\r\nexport function r(type: RewardType, value: number, params = {}) {\r\n\treturn Reward.create(type, value, params);\r\n}\r\n\r\nexport class Reward extends BaseData {\r\n\r\n\t@field\r\n\tpublic type: RewardType = RewardType.Gold;\r\n\t@field\r\n\tpublic value: number = 0;\r\n\t@field(Object)\r\n\tpublic params: object = {};\r\n\r\n\tpublic static create(type: RewardType,\r\n\t\t\t\t\t\t\t\t\t\t\t value: number, params = {}) {\r\n\t\tconst res = new Reward();\r\n\t\tres.type = type;\r\n\t\tres.value = value;\r\n\t\tres.params = params;\r\n\t\treturn res;\r\n\t}\r\n\r\n}\r\n\r\nimport {createProcessor} from \"../Utils/RewardProcessor\";\r\n\r\nexport class RewardGroup extends BaseData {\r\n\r\n\t@field([Reward])\r\n\tpublic rewards: Reward[] = [];\r\n\r\n\tpublic static create(...rewards: (Reward | RewardGroup)[]) {\r\n\t\tconst res = new RewardGroup();\r\n\t\trewards.forEach(reward => res.add(reward));\r\n\t\treturn res;\r\n\t}\r\n\r\n\tpublic add(reward: Reward | RewardGroup) {\r\n\t\tif (reward instanceof Reward) {\r\n\t\t\tconst curCond = this.find(reward.type);\r\n\t\t\tif (curCond) curCond.value += reward.value;\r\n\t\t\telse this.rewards.push(reward.clone());\r\n\t\t} else\r\n\t\t\treward.rewards.forEach(c => this.add(c))\r\n\t}\r\n\r\n\tpublic push(reward: Reward) {\r\n\t\tthis.rewards.push(reward);\r\n\t}\r\n\r\n\tpublic invoke(rate = 1) {\r\n\t\tconst processors = this.rewards.map(\r\n\t\t\tr => createProcessor(r));\r\n\r\n\t\tfor (const p of processors) p.invoke(rate);\r\n\t}\r\n\r\n\tpublic find(type: RewardType) {\r\n\t\treturn this.rewards.find(c => c.type == type);\r\n\t}\r\n\r\n\t// region 快捷查找\r\n\r\n\tpublic get gold() { return this.find(RewardType.Gold); }\r\n\tpublic get diamond() { return this.find(RewardType.Diamond); }\r\n\tpublic get medal() { return   this.find(RewardType.Medal); }\r\n\tpublic get token() { return this.find(RewardType.Token); }\r\n\r\n\tpublic get fragment() { return this.find(RewardType.Fragment); }\r\n\r\n\t// endregion\r\n}\r\n","import {BaseManager, getManager, manager} from \"./BaseManager\";\r\nimport {BaseScene} from \"../../../Scenes/BaseScene\";\r\nimport Component = cc.Component;\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\n\r\nconst CACHE_KEY = '__exermonCache__';\r\n\r\nexport function sceneMgr(): SceneManager {\r\n\treturn getManager(SceneManager);\r\n}\r\n\r\nexport function curScene(): BaseScene {\r\n\treturn sceneMgr().curScene;\r\n}\r\n\r\nexport function singletonComponent<T extends Component>(\r\n\tclazz: Constructor<T>) {\r\n\r\n\tlet oriStart = clazz.prototype.start;\r\n\tlet oriOnDestroy = clazz.prototype.onDestroy;\r\n\r\n\tclazz.prototype.start = function() {\r\n\t\tconst scene = curScene();\r\n\t\tconst key = findSceneSingletonTarget(scene, clazz);\r\n\t\tkey && (scene[key] = this);\r\n\r\n\t\toriStart?.call(this);\r\n\t}\r\n\tclazz.prototype.onDestroy = function() {\r\n\t\tconst scene = curScene();\r\n\t\tconst key = findSceneSingletonTarget(scene, clazz);\r\n\t\tkey && (scene[key] = null);\r\n\r\n\t\toriOnDestroy?.call(this);\r\n\t}\r\n}\r\n\r\nexport function singletonTarget<T extends Component>(\r\n\tclazz: Constructor<T>) {\r\n\r\n\treturn (obj, key) => {\r\n\t\tconst cache = getOrCreateCache(obj.constructor);\r\n\t\tcache.targets[key] = clazz;\r\n\t}\r\n}\r\n\r\nexport function getOrCreateCache<T extends BaseScene>(\r\n\ttype: Constructor<T> | Object) {\r\n\tif (!type) return {};\r\n\tif (typeof type !== 'function')\r\n\t\treturn getOrCreateCache(type.constructor);\r\n\r\n\treturn type[CACHE_KEY] ||= {\r\n\t\ttargets: {} // 每个单例组件目标的定义\r\n\t};\r\n}\r\n\r\nfunction findSceneSingletonTarget(obj, clazz: Constructor) {\r\n\tconst cache = getOrCreateCache(obj);\r\n\r\n\tfor (const key in cache.targets)\r\n\t\tif (cache.targets[key] == clazz) return key;\r\n\r\n\treturn null;\r\n}\r\n\r\n@manager\r\nclass SceneManager extends BaseManager {\r\n\r\n\tpublic curScene: BaseScene = null;\r\n\r\n}\r\n","import Node = cc.Node;\r\nimport ScrollView = cc.ScrollView;\r\n\r\nexport class ScrollviewFilter {\r\n\r\n\tstatic filter(type: \"horizontal\" | \"vertical\", container: Node, children: Node[], spacing: number, minLength: number, padding: number = 0, step: number = 1){\r\n\t\tlet length = -spacing + padding;\r\n\t\tlet scroll: ScrollView = null;\r\n\t\tfor (let i = container; i.parent ; i = i.parent) {\r\n\t\t\tlet temp = i.getComponent(ScrollView);\r\n\t\t\tif (temp && temp.content == container) {\r\n\t\t\t\tscroll = temp;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tswitch (type){\r\n\t\t\tcase \"horizontal\":\r\n\t\t\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\t\t\tif (i % step != 0) continue;\r\n\t\t\t\t\tlength += children[i].width + spacing;\r\n\t\t\t\t}\r\n\t\t\t\tif(length > minLength){\r\n\t\t\t\t\tif(length != container.width)\r\n\t\t\t\t\t\tif (scroll) scroll.scrollToLeft();\r\n\t\t\t\t\t\telse container.x = (length - minLength) / 2;\r\n\t\t\t\t\tcontainer.width = length;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif (scroll) scroll.scrollToLeft();\r\n\t\t\t\t\telse container.x = 0;\r\n\t\t\t\t\tcontainer.width = minLength;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"vertical\":\r\n\t\t\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\t\t\tif (i % step != 0) continue;\r\n\t\t\t\t\tlength += children[i].height + spacing;\r\n\t\t\t\t}\r\n\t\t\t\tif(length > minLength){\r\n\t\t\t\t\tif(length != container.height)\r\n\t\t\t\t\t\tif (scroll) scroll.scrollToTop();\r\n\t\t\t\t\t\telse container.y = (minLength - length + container.height) / 2;\r\n\t\t\t\t\tcontainer.height = length;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif (scroll) scroll.scrollToTop();\r\n\t\t\t\t\telse container.y = minLength / 2;\r\n\t\t\t\t\tcontainer.height = minLength;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import {ISelectableObject} from \"./ISelectableObject\";\r\n\r\n/**\r\n * 单选组，同一时刻组中的元素只允许最多一个被选中\r\n */\r\nexport class SelectableGroup {\r\n\r\n    elements: ISelectableObject[] = [];\r\n    selectedIndex: number = -1;\r\n    allowNoSelection: boolean;\r\n\r\n    /**\r\n     * 创建一个选择组\r\n     * @param allowNoSelection 是否允许一个元素都不选（允许取消当前唯一的选择）\r\n     */\r\n    constructor(allowNoSelection: boolean = true) {\r\n        this.allowNoSelection = allowNoSelection;\r\n    }\r\n\r\n    /**\r\n     * 添加一个元素\r\n     */\r\n    public addElement(e: ISelectableObject): void {\r\n        if (this.indexOf(e) != -1) return;\r\n        e.selectableGroup = this;\r\n        this.elements.push(e);\r\n        if (this.size() == 1 && !this.allowNoSelection) {\r\n            this.select(e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 删除一个元素\r\n     */\r\n    public removeElement(e: ISelectableObject): void {\r\n        let idx = this.indexOf(e);\r\n        if (idx == -1) return;\r\n        if (this.isSelected(e)) {\r\n            this.selectedIndex = -1;\r\n            this.elements.splice(idx, 1);\r\n            e.onDeselected();\r\n            // 如果不允许不选，则自动选第0个\r\n            if (!this.allowNoSelection && this.size() > 0) {\r\n                this.select(this.getElementAt(0));\r\n            }\r\n        } else {\r\n            this.elements.splice(idx, 1);\r\n            if (idx < this.selectedIndex) this.selectedIndex--;\r\n        }\r\n        e.selectableGroup = null;\r\n    }\r\n\r\n    /**\r\n     * 查找元素的下标，不存在则返回-1\r\n     */\r\n    public indexOf(e: ISelectableObject): number {\r\n        return this.elements.indexOf(e);\r\n    }\r\n\r\n\r\n    /**\r\n     * 获取当前单选组里有多少元素\r\n     */\r\n    public size(): number {\r\n        return this.elements.length;\r\n    }\r\n\r\n    /**\r\n     * 获取第i个单选组里的元素\r\n     */\r\n    public getElementAt(index: number): ISelectableObject {\r\n        return this.elements[index];\r\n    }\r\n\r\n    /**\r\n     * 获取指定对象是否是被选择的那个\r\n     */\r\n    public isSelected(e: ISelectableObject): boolean {\r\n        return this.currentSelection() == e;\r\n    }\r\n\r\n    /**\r\n     * 选择指定对象\r\n     */\r\n    public select(e: ISelectableObject): void {\r\n        let newIdx = this.indexOf(e);\r\n        if (newIdx == -1) return;\r\n        if (this.selectedIndex == newIdx) return;//是否应该return？\r\n        let old = this.currentSelection();\r\n        /*\r\n        this.selectedIndex = -1;\r\n        old?.onDeselected();\r\n        this.selectedIndex = newIdx;\r\n        e.onSelected();\r\n        */\r\n        this.selectedIndex = newIdx;\r\n        old?.onDeselected();\r\n        e.onSelected();\r\n    }\r\n\r\n    /**\r\n     * 取消选择指定对象\r\n     */\r\n    public deselect(e: ISelectableObject): void {\r\n        if(!e) return;\r\n        let newIdx = this.indexOf(e);\r\n        if (newIdx == -1) return;\r\n        if (!this.allowNoSelection) return;\r\n        this.selectedIndex = -1;\r\n        e.onDeselected();\r\n    }\r\n\r\n    /**\r\n     * 获取当前选择的对象\r\n     */\r\n    public currentSelection(): ISelectableObject | null {\r\n        if (this.selectedIndex == -1) return null;\r\n        return this.getElementAt(this.selectedIndex);\r\n    }\r\n\r\n}\r\n","import {ISelectableObject} from \"./ISelectableObject\";\r\nimport { SelectableGroup } from \"./SelectableGroup\";\r\n\r\n\r\nexport abstract class SelectableObject extends cc.Component implements ISelectableObject {\r\n    selectableGroup: SelectableGroup;\r\n\r\n    /**\r\n     * 如果被加进了一个选择组里，则选择自己\r\n     */\r\n    public selectSelf(): void {\r\n        this.selectableGroup?.select(this);\r\n    }\r\n\r\n    /**\r\n     * 如果被加进了一个选择组里，则取消选择自己\r\n     */\r\n    public deselectSelf(): void {\r\n        this.selectableGroup?.deselect(this);\r\n    }\r\n\r\n    public toggleSelection(): void {\r\n        if (this.selectableGroup == null) return;\r\n        if (this.selectableGroup!.isSelected(this)) {\r\n            this.selectableGroup!.deselect(this);\r\n        } else {\r\n            this.selectableGroup.select(this);\r\n        }\r\n    }\r\n\r\n    public removeSelf(): void {\r\n        this.selectableGroup?.removeElement(this);\r\n    }\r\n\r\n    /**\r\n     * 被取消选择时回调\r\n     */\r\n    abstract onSelected(): void;\r\n\r\n    /**\r\n     * 被选择时回调\r\n     */\r\n    abstract onDeselected(): void;\r\n\r\n}","import Label = cc.Label;\r\nimport {battleScene} from \"../../../../Scenes/BattleScene\";\r\nimport {playerMgr} from \"../../../PlayerModule/Managers/PlayerManager\";\r\nimport {PlayerMoney} from \"../../../EconomicModule/Data/PlayerMoney\";\r\nimport Sprite = cc.Sprite;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport {Hero} from \"../../../HeroModule/Data/Hero\";\r\nimport {HeroSkeleton} from \"../../../../Utils/SpineUtils\";\r\nimport {heroMgr} from \"../../../HeroModule/Managers/HeroManager\";\r\nimport Skeleton = sp.Skeleton;\r\nimport Node = cc.Node;\r\nimport Bone = sp.spine.Bone;\r\nimport Slot = sp.spine.Slot;\r\nimport {autoUnitConvert} from \"../../../../Utils/NumberUtils\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SelectedHeroDisplay extends cc.Component {\r\n\r\n    @property(Label)\r\n    nameLabel: Label = null;\r\n    @property(Label)\r\n    levelLabel: Label = null;\r\n    @property(Label)\r\n    qualityLabel: Label = null;\r\n    @property(Label)\r\n    powerLabel: Label = null;\r\n    @property(Label)\r\n    coinLabel: Label = null;\r\n\r\n    @property(Sprite)\r\n    qualitySprite: Sprite = null;\r\n    @property(Sprite)\r\n    restraintSprite: Sprite = null;\r\n\r\n    @property(Node)\r\n    playerInfoNode: Node = null;\r\n\r\n    private hero: Hero = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    update (dt) {\r\n        if (!battleScene().heroSelected) {\r\n            this.playerInfoNode.active = true;\r\n            this.node.active = false;\r\n            return;\r\n        }\r\n        let hero = battleScene().currentPVPSelect;\r\n        if (hero != this.hero) {\r\n            this.hero = hero;\r\n            this.onHeroChanged(this.hero);\r\n        }\r\n        this.updateLabels(this.hero);\r\n    }\r\n\r\n    private quality: string[] = [\"N\", \"R\", \"SR\", \"SSR\", \"UR\"];\r\n\r\n    @autoUnitConvert\r\n    updateLabels(hero: Hero) {\r\n        this.levelLabel.string = \"Lv.\" + hero.level.level;\r\n        this.powerLabel.string = \"99999999\";\r\n        this.coinLabel.string = playerMgr().getPlayerData(PlayerMoney).gold.toString();\r\n    }\r\n\r\n    @property([SpriteFrame])\r\n    qualityPictures: SpriteFrame[] = [];\r\n    @property([SpriteFrame])\r\n    restraintPictures: SpriteFrame[] = [];\r\n\r\n    onHeroChanged(hero: Hero) {\r\n        this.nameLabel.string = hero.name;\r\n        this.qualityLabel.string = this.quality[hero.quality];\r\n        this.qualitySprite.spriteFrame = this.qualityPictures[hero.quality];\r\n        this.restraintSprite.spriteFrame = this.restraintPictures[hero.restraint];\r\n        this.drawAvatar(hero);\r\n    }\r\n\r\n    // region 头像绘制\r\n\r\n    @property(Skeleton)\r\n    avatar: Skeleton = null;\r\n\r\n    private size: number = 120;\r\n    private avatarHeight: number = 0;\r\n    private avatarWidth: number = 0;\r\n    private avatarOffsetX: number = 0;\r\n    private avatarOffsetY: number = 0;\r\n\r\n    private drawAvatar(hero: Hero) {\r\n        this.avatar.node.scale = 0;\r\n        let node = new Node('node');\r\n        let temp = node.addComponent(Skeleton);\r\n        let skeleton = new HeroSkeleton(this.avatar, temp, heroMgr().getCacheOneFromServer(hero.nftId).heroTypeId);\r\n        hero.parts.forEach(part => { skeleton.addPart(part); });\r\n        skeleton.refresh().then(res => {\r\n            node.destroy();\r\n            let bone: Bone = skeleton.findBone(\"head_1\");\r\n\r\n            skeleton.skeleton.updateWorldTransform();\r\n            let offsetX = bone.worldX, offsetY = bone.worldY;\r\n            while (bone.parent) bone = bone.parent;\r\n            bone.x -= offsetX;\r\n            bone.y -= offsetY;\r\n\r\n            let slot: Slot = skeleton.findSlot(\"head_1\");\r\n            if (!slot.getAttachment()) return;\r\n            this.avatarHeight = slot.getAttachment()[\"height\"];\r\n            this.avatarWidth = slot.getAttachment()[\"width\"];\r\n            this.avatarOffsetY = slot.getAttachment()[\"x\"];\r\n            this.avatarOffsetX = slot.getAttachment()[\"y\"];\r\n            this.sizeFilter();\r\n        });\r\n    }\r\n\r\n    private sizeFilter() {\r\n        let k = Math.min(this.avatarWidth / this.size, this.avatarHeight / this.size);\r\n        k *= 1.2;\r\n        // this.avatar.node.x = - this.avatarOffsetX / k;\r\n        this.avatar.node.y = - this.avatarOffsetY / k;\r\n        if (k > 1) this.avatar.node.scale = 1 / k;\r\n        else this.avatar.node.scale = 1;\r\n    }\r\n\r\n    // endregion\r\n}\r\n","import {getSingleton, singleton} from \"../../Modules/CoreModule/Utils/SingletonUtils\";\r\nimport {BaseScene} from \"../BaseScene\";\r\nimport GlobalEditor from \"./Components/Editor/GlobalEditor\";\r\nimport SingleEditor from \"./Components/Editor/SingleEditor\";\r\nimport director = cc.director;\r\nimport {gameMgr} from \"../../Modules/CoreModule/Managers/GameManager\";\r\nimport {editorMgr} from \"../../Modules/HeroModule/Managers/EditorManager\";\r\nimport {showLoading} from \"../../Modules/CoreModule/Managers/LoadingManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nexport function selectorScene() {\r\n\treturn getSingleton(SelectorScene);\r\n}\r\n\r\n@ccclass\r\n@singleton\r\nexport default class SelectorScene extends BaseScene {\r\n\r\n\t@property\r\n\tpublic editorMode = false;\r\n\t@property(GlobalEditor)\r\n\tpublic globalEditor: GlobalEditor = null;\r\n\t@property(SingleEditor)\r\n\tpublic singleEditor: SingleEditor = null;\r\n\r\n\tprotected get autoConnect() { return false; }\r\n\r\n\tprotected onLoad() {\r\n\t\tsuper.onLoad();\r\n\t\tgameMgr().needUpdateToken = !this.editorMode;\r\n\t\t// nftMgr().init().then();\r\n\t}\r\n\r\n\tupdate (dt) {\r\n\t\tsuper.update(dt);\r\n\t\t// console.log(\"progress\", dataMgr().loadingProgress());\r\n\t}\r\n\r\n\tpublic enterGame() {\r\n\t\tdirector.loadScene(\"BattleScene\");\r\n\t}\r\n\r\n\tpublic exportAllConfigs() {\r\n\t\teditorMgr().exportAll();\r\n\t}\r\n\r\n\tpublic importConfigs() {\r\n\t\teditorMgr().import();\r\n\t}\r\n\tpublic exportConfigs() {\r\n\t\teditorMgr().export();\r\n\t}\r\n\t@showLoading\r\n\tpublic async pushConfigs() {\r\n\t\tawait editorMgr().push();\r\n\t}\r\n\t@showLoading\r\n\tpublic async pullConfigs() {\r\n\t\tawait editorMgr().pull();\r\n\t\tthis.globalEditor.refresh();\r\n\t\tthis.singleEditor.refresh();\r\n\t}\r\n\r\n\tpublic toggleGlobalEditor() {\r\n\t\tthis.globalEditor.node.active = !this.globalEditor.node.active;\r\n\t}\r\n\r\n}\r\n","import BattleRewardContainer from \"./Main/BattleRewardContainer\";\r\nimport {Reward} from \"../../PlayerModule/Data/Reward\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SettlementWindowController extends cc.Component {\r\n\r\n    @property(BattleRewardContainer)\r\n    container: BattleRewardContainer = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    // update (dt) {}\r\n\r\n    open(rewards: Reward[]) {\r\n        if (this.node.active) return;\r\n        this.node.active = true;\r\n        this.container.setItems(rewards);\r\n    }\r\n\r\n    quit() {\r\n        this.container.setItems([]);\r\n        this.node.active = false;\r\n    }\r\n\r\n}\r\n","import {ItemDisplay} from \"../../../../Modules/CoreModule/Components/ItemDisplay\";\r\nimport Label = cc.Label;\r\nimport Node = cc.Node;\r\nimport {PartInfo} from \"../../../../Modules/HeroModule/Data/PartInfo\";\r\nimport {selectorScene} from \"../../SelectorScene\";\r\nimport PartsDisplay from \"../ItemPrefabs/PartsDisplay\";\r\nimport PreviewPictureDisplay from \"../ItemPrefabs/PreviewPictureDisplay\";\r\nimport {configMgr} from \"../../../../Modules/CoreModule/Managers/ConfigManager\";\r\nimport PartConfig from \"../../../../Modules/HeroModule/Configs/PartConfig\";\r\nimport Slider = cc.Slider;\r\nimport PartsContainer from \"../ItemContainers/PartsContainer\";\r\nimport EditBox = cc.EditBox;\r\nimport {editorMgr} from \"../../../../Modules/HeroModule/Managers/EditorManager\";\r\nimport TransformUtil from \"../../../../Utils/TransformUtils\";\r\nimport {partTypeRepo} from \"../../../../Modules/HeroModule/Data/PartType\";\r\nimport Button = cc.Button;\r\nimport {partRepo} from \"../../../../Modules/HeroModule/Data/Part\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nconst MaxScale = 4;\r\nconst MinScale = 0;\r\n\r\nconst OffsetRange = 256;\r\nconst OffsetDelta = 5;\r\nconst OffsetWait = 500;\r\nconst OffsetInterval = 50;\r\n\r\n@ccclass\r\nexport default class SingleEditor extends ItemDisplay<PartInfo> {\r\n\r\n\t@property(PartsContainer)\r\n\tpartsContainer: PartsContainer = null;\r\n\r\n\t@property(PartsDisplay)\r\n\tcurPartDisplay: PartsDisplay = null;\r\n\t@property(PartsDisplay)\r\n\tbasePartDisplay: PartsDisplay = null;\r\n\r\n\t@property(Node)\r\n\tscaleNode: Node = null;\r\n\t@property(Slider)\r\n\tscaleBar: Slider = null;\r\n\t@property(EditBox)\r\n\tscaleValue: EditBox = null;\r\n\r\n\t@property(Node)\r\n\txNode: Node = null;\r\n\t@property(Slider)\r\n\txBar: Slider = null;\r\n\t@property(EditBox)\r\n\txValue: EditBox = null;\r\n\r\n\t@property(Node)\r\n\tyNode: Node = null;\r\n\t@property(Slider)\r\n\tyBar: Slider = null;\r\n\t@property(EditBox)\r\n\tyValue: EditBox = null;\r\n\r\n\t@property(Node)\r\n\tfootXNode: Node = null;\r\n\t@property(Slider)\r\n\tfootXBar: Slider = null;\r\n\t@property(EditBox)\r\n\tfootXValue: EditBox = null;\r\n\r\n\t@property(Node)\r\n\tfootYNode: Node = null;\r\n\t@property(Slider)\r\n\tfootYBar: Slider = null;\r\n\t@property(EditBox)\r\n\tfootYValue: EditBox = null;\r\n\r\n\t@property(Button)\r\n\tapplyButton: Button = null;\r\n\t@property(Button)\r\n\tclothes6Button: Button = null;\r\n\t@property(Button)\r\n\tweapon3Button: Button = null;\r\n\r\n\t@property(PreviewPictureDisplay)\r\n\tpreview: PreviewPictureDisplay = null\r\n\r\n\t@property(Node)\r\n\ttouchNode: Node;\r\n\r\n\tpublic get globalEditor() {\r\n\t\treturn selectorScene().globalEditor;\r\n\t}\r\n\r\n\tonLoad () {\r\n\t\tthis.partsContainer.singleEditor = this;\r\n\t\tthis.curPartDisplay.preview = this.preview;\r\n\t\tthis.basePartDisplay.preview = this.preview;\r\n\r\n\t\tthis.addKeyListeners();\r\n\t}\r\n\r\n\taddKeyListeners() {\r\n\t\tcc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n\t\tcc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n\r\n\t\tthis.touchNode.on(\"touchstart\", this.onTouchStart, this);\r\n\t}\r\n\r\n\t// region 数据获取\r\n\r\n\tpublic get part() { return this.item?.part; }\r\n\tpublic get partType() { return this.part?.partType; }\r\n\tpublic get basePartType() { return this.partType?.basePartType; }\r\n\tpublic get basePart() { return this.basePartType ?\r\n\t\tthis.preview.item?.findPart(this.basePartType) : null;\r\n\t}\r\n\tpublic get headPart() {\r\n\t\treturn this.preview.item?.findPart(partTypeRepo().head);\r\n\t}\r\n\tpublic get bodyPart() {\r\n\t\treturn this.preview.item?.findPart(partTypeRepo().body);\r\n\t}\r\n\tpublic get footPart() {\r\n\t\treturn this.preview.item?.findPart(partTypeRepo().foot);\r\n\t}\r\n\r\n\tpublic get scale() {\r\n\t\treturn editorMgr().getPtBptScale(this.part.oriId, this.basePart.oriId);\r\n\t}\r\n\tpublic set scale(val) {\r\n\t\teditorMgr().changePtBptScale(this.part.oriId, this.basePart.oriId, val);\r\n\t}\r\n\r\n\tpublic get offset() {\r\n\t\treturn editorMgr().getPtBptOffset(this.part.oriId, this.basePart.oriId);\r\n\t}\r\n\tpublic set offset(val) {\r\n\t\teditorMgr().changePtBptOffset(this.part.oriId, this.basePart.oriId, val);\r\n\t}\r\n\r\n\tpublic get hidden() {\r\n\t\treturn editorMgr().getPtBptHidden(this.part.oriId, this.basePart.oriId);\r\n\t}\r\n\tpublic set hidden(val) {\r\n\t\teditorMgr().changePtBptHidden(this.part.oriId, this.basePart.oriId, val);\r\n\t}\r\n\r\n\tpublic get clothes6() {\r\n\t\treturn editorMgr().getClothes6Problem(this.part.oriId, this.headPart.oriId);\r\n\t}\r\n\tpublic set clothes6(val) {\r\n\t\teditorMgr().changeClothes6Problem(this.part.oriId, this.headPart.oriId, val);\r\n\t}\r\n\r\n\tpublic get weapon3() {\r\n\t\treturn editorMgr().getWeapon3Problem(this.part.oriId, this.bodyPart.oriId);\r\n\t}\r\n\tpublic set weapon3(val) {\r\n\t\teditorMgr().changeWeapon3Problem(this.part.oriId, this.bodyPart.oriId, val);\r\n\t}\r\n\r\n\tpublic get footOffset() {\r\n\t\treturn editorMgr().getFootOffset(this.footPart?.oriId);\r\n\t}\r\n\tpublic set footOffset(val) {\r\n\t\tconst footPart = this.footPart;\r\n\t\tif (!footPart) return;\r\n\t\teditorMgr().changeFootOffset(footPart.oriId, val);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 刷新控制\r\n\r\n\trefresh() {\r\n\t\tsuper.refresh();\r\n\r\n\t\tthis.preview.refresh();\r\n\t\tthis.partsContainer.refresh();\r\n\r\n\t\tif (this.item == null) return;\r\n\r\n\t\tthis.globalEditor?.refresh();\r\n\r\n\t\tthis.drawParts();\r\n\t\tthis.drawScaleOffset();\r\n\t\tthis.drawFootOffset();\r\n\t\tthis.drawOthers();\r\n\t}\r\n\tprivate drawParts() {\r\n\t\tthis.curPartDisplay.setItem(this.item);\r\n\t\tif (this.basePart) {\r\n\t\t\tthis.basePartDisplay.node.active = true;\r\n\t\t\tthis.basePartDisplay.setItem(this.basePart.toPartInfo());\r\n\t\t} else\r\n\t\t\tthis.basePartDisplay.node.active = false;\r\n\t}\r\n\tprivate drawScaleOffset() {\r\n\t\tthis.xNode.active = this.yNode.active =\r\n\t\t\tthis.scaleNode.active = !!this.basePart;\r\n\r\n\t\tif (!this.basePart) return;\r\n\r\n\t\tconst scale = this.scale;\r\n\t\tthis.scaleBar.progress = (scale - MinScale) / (MaxScale - MinScale);\r\n\t\tthis.scaleValue.string = scale.toFixed(3);\r\n\r\n\t\tthis.drawOffsetBar(this.xBar, this.xValue,\r\n\t\t\tthis.yBar, this.yValue, this.offset);\r\n\t}\r\n\tprivate drawFootOffset() {\r\n\t\tthis.footXNode.active = this.footYNode.active = !!this.footPart;\r\n\r\n\t\tthis.drawOffsetBar(this.footXBar, this.footXValue,\r\n\t\t\tthis.footYBar, this.footYValue, this.footOffset);\r\n\t}\r\n\tprivate drawOffsetBar(xBar, xValue, yBar, yValue, offset) {\r\n\t\txBar.progress = (offset[0] - -OffsetRange) / (OffsetRange * 2);\r\n\t\txValue.string = offset[0].toFixed(1);\r\n\t\tyBar.progress = (offset[1] - -OffsetRange) / (OffsetRange * 2);\r\n\t\tyValue.string = offset[1].toFixed(1);\r\n\t}\r\n\tprivate drawOthers() {\r\n\t\tthis.applyButton.interactable = !!this.basePart;\r\n\t\tthis.clothes6Button.interactable = this.item.part.partType.isClothes;\r\n\t\tthis.weapon3Button.interactable = this.item.part.partType.isWeapon;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 操作\r\n\r\n\t/**\r\n\t * 设置缩放\r\n\t */\r\n\tpublic setScale(scale) {\r\n\t\tthis.scale = scale;\r\n\t\tthis.refresh();\r\n\t}\r\n\r\n\t/**\r\n\t * 设置缩放\r\n\t */\r\n\tpublic setOffset(x?: number, y?: number) {\r\n\t\tconst ori = this.offset;\r\n\t\tif (x != undefined) ori[0] = x;\r\n\t\tif (y != undefined) ori[1] = y;\r\n\t\tthis.offset = ori;\r\n\r\n\t\tthis.refresh();\r\n\t}\r\n\tpublic setX(val: number) {return this.setOffset(val);}\r\n\tpublic setY(val: number) {return this.setOffset(undefined, val);}\r\n\r\n\t/**\r\n\t * 设置缩放\r\n\t */\r\n\tpublic setFootOffset(x?: number, y?: number) {\r\n\t\tconst ori = this.footOffset;\r\n\t\tif (x != undefined) ori[0] = x;\r\n\t\tif (y != undefined) ori[1] = y;\r\n\t\tthis.footOffset = ori;\r\n\r\n\t\tthis.refresh();\r\n\t}\r\n\tpublic setFootX(val: number) {return this.setFootOffset(val);}\r\n\tpublic setFootY(val: number) {return this.setFootOffset(undefined, val);}\r\n\r\n\t/**\r\n\t * 重置\r\n\t */\r\n\tpublic reset() {\r\n\t\tthis.setScale(1);\r\n\t\tthis.setOffset();\r\n\t}\r\n\r\n\t/**\r\n\t * toggle槽隐藏情况\r\n\t * @param name\r\n\t */\r\n\tpublic toggleSlot(name) {\r\n\t\tconst hidden = this.hidden;\r\n\t\tconst idx = hidden.indexOf(name);\r\n\t\tif (idx >= 0) hidden.splice(idx, 1);\r\n\t\telse hidden.push(name);\r\n\t\tthis.hidden = hidden;\r\n\r\n\t\tthis.refresh();\r\n\t}\r\n\r\n\t/**\r\n\t * toggle Clothes6问题\r\n\t */\r\n\tpublic toggleClothes6() {\r\n\t\tthis.clothes6 = !this.clothes6;\r\n\t\tthis.refresh();\r\n\t}\r\n\r\n\t/**\r\n\t * toggle Weapon3问题\r\n\t */\r\n\tpublic toggleWeapon3() {\r\n\t\tthis.weapon3 = !this.weapon3;\r\n\t\tthis.refresh();\r\n\t}\r\n\r\n\t/**\r\n\t * 处理方向移动\r\n\t */\r\n\tprivate processDir(dir, rate = 1) {\r\n\t\tconst delta = OffsetDelta * rate;\r\n\t\tconst func = this.footMode ? \"setFoot\" : \"set\";\r\n\t\tconst offset = this.footMode ? this.footOffset : this.offset;\r\n\t\tswitch (dir) {\r\n\t\t\tcase cc.macro.KEY.down: this[func+\"Y\"](offset[1] - delta); break;\r\n\t\t\tcase cc.macro.KEY.left: this[func+\"X\"](offset[0] - delta); break;\r\n\t\t\tcase cc.macro.KEY.right: this[func+\"X\"](offset[0] + delta); break;\r\n\t\t\tcase cc.macro.KEY.up: this[func+\"Y\"](offset[1] + delta); break;\r\n\t\t}\r\n\t\tthis.refresh();\r\n\t}\r\n\r\n\t/**\r\n\t * 应用到相同基本型\r\n\t */\r\n\tpublic applySameHeroType() {\r\n\t\tconst curBp = this.basePart;\r\n\t\tif (!curBp) return;\r\n\r\n\t\tconst curPart = this.part;\r\n\t\tconst pOriId = curPart.oriId;\r\n\t\tconst bhtId = curBp.heroTypeId, bptId = curBp.partTypeId;\r\n\t\tconst baseParts = partRepo().findByTypes(bhtId, bptId, 1);\r\n\r\n\t\tbaseParts.forEach(bp => {\r\n\t\t\tif (bp == curBp) return;\r\n\t\t\teditorMgr().changePtBptScale(pOriId, bp.oriId, this.scale);\r\n\t\t\teditorMgr().changePtBptOffset(pOriId, bp.oriId, this.offset);\r\n\t\t\teditorMgr().changePtBptHidden(pOriId, bp.oriId, this.hidden);\r\n\t\t\t// if (pt.isClothes)\r\n\t\t\t// \teditorMgr().changeClothes6Problem(bp.oriId,\r\n\t\t\t// \t\tthis.basePart.oriId, this.clothes6);\r\n\t\t})\r\n\r\n\t\t// 同步同一个基本型的Body\r\n\t\tif (this.partType.isWeapon && this.weapon3 !== undefined) {\r\n\t\t\tconst curBp2 = this.bodyPart\r\n\t\t\tconst bhtId2 = curBp2.heroTypeId, bptId2 = curBp2.partTypeId;\r\n\t\t\tconst bodyParts = partRepo().findByTypes(bhtId2, bptId2, 1);\r\n\r\n\t\t\tbodyParts.forEach(bp => {\r\n\t\t\t\tif (bp == curBp2) return;\r\n\t\t\t\teditorMgr().changeWeapon3Problem(pOriId, bp.oriId, this.weapon3);\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (this.partType.isClothes && this.clothes6 !== undefined) {\r\n\t\t\t// 同步同一个基本型的Head\r\n\t\t\tconst curHp = this.headPart\r\n\t\t\tconst hhtId = curHp.heroTypeId, hptId = curHp.partTypeId;\r\n\t\t\tconst headParts = partRepo().findByTypes(hhtId, hptId, 1);\r\n\r\n\t\t\theadParts.forEach(hp => {\r\n\t\t\t\tif (hp == curHp) return;\r\n\t\t\t\teditorMgr().changeClothes6Problem(pOriId, hp.oriId, this.clothes6);\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tthis.refresh();\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 回调\r\n\r\n\tpublic onScaleSlide() {\r\n\t\tconst rate = this.scaleBar.progress;\r\n\t\tthis.setScale(rate * (MaxScale - MinScale) + MinScale);\r\n\t}\r\n\tpublic onScaleEdit() {\r\n\t\tconst num = Number(this.scaleValue.string);\r\n\t\tif (isNaN(num)) this.setScale(this.scale);\r\n\t\telse this.setScale(num);\r\n\t}\r\n\r\n\tpublic onXSlide() {\r\n\t\tconst rate = this.xBar.progress;\r\n\t\tthis.setX(rate * (OffsetRange * 2) - OffsetRange);\r\n\t}\r\n\tpublic onXEdit() {\r\n\t\tconst num = Number(this.xValue.string);\r\n\t\tif (isNaN(num)) this.setX(this.offset[0]);\r\n\t\telse this.setX(num);\r\n\t}\r\n\r\n\tpublic onYSlide() {\r\n\t\tconst rate = this.yBar.progress;\r\n\t\tthis.setY(rate * (OffsetRange * 2) - OffsetRange);\r\n\t}\r\n\tpublic onYEdit() {\r\n\t\tconst num = Number(this.yValue.string);\r\n\t\tif (isNaN(num)) this.setY(this.offset[1]);\r\n\t\telse this.setY(num);\r\n\t}\r\n\r\n\tpublic onFootXSlide() {\r\n\t\tconst rate = this.footXBar.progress;\r\n\t\tthis.setFootX(rate * (OffsetRange * 2) - OffsetRange);\r\n\t}\r\n\tpublic onFootXEdit() {\r\n\t\tconst num = Number(this.footXValue.string);\r\n\t\tif (isNaN(num)) this.setFootX(this.offset[0]);\r\n\t\telse this.setFootX(num);\r\n\t}\r\n\r\n\tpublic onFootYSlide() {\r\n\t\tconst rate = this.footYBar.progress;\r\n\t\tthis.setFootY(rate * (OffsetRange * 2) - OffsetRange);\r\n\t}\r\n\tpublic onFootYEdit() {\r\n\t\tconst num = Number(this.footYValue.string);\r\n\t\tif (isNaN(num)) this.setFootY(this.offset[1]);\r\n\t\telse this.setFootY(num);\r\n\t}\r\n\r\n\t// region 输入事件控制\r\n\r\n\tprivate keyTimes = {};\r\n\tprivate footMode = false;\r\n\tprivate onKeyDown(e) {\r\n\t\tif (e.keyCode == cc.macro.KEY.shift)\r\n\t\t\tthis.footMode = true;\r\n\t\telse {\r\n\t\t\tconst keyCode = this.convertKeyCode(e.keyCode);\r\n\t\t\tthis.keyTimes[keyCode] = {time: Date.now(), dt: 0};\r\n\t\t\tthis.processDir(keyCode);\r\n\t\t}\r\n\t}\r\n\tprivate onKeyUp(e) {\r\n\t\tif (e.keyCode == cc.macro.KEY.shift)\r\n\t\t\tthis.footMode = false;\r\n\t\telse {\r\n\t\t\tconst keyCode = this.convertKeyCode(e.keyCode);\r\n\t\t\tdelete this.keyTimes[keyCode];\r\n\t\t}\r\n\t}\r\n\tprivate convertKeyCode(code) {\r\n\t\tswitch (code) {\r\n\t\t\tcase cc.macro.KEY.s: return cc.macro.KEY.down;\r\n\t\t\tcase cc.macro.KEY.a: return cc.macro.KEY.left;\r\n\t\t\tcase cc.macro.KEY.d: return cc.macro.KEY.right;\r\n\t\t\tcase cc.macro.KEY.w: return cc.macro.KEY.up;\r\n\t\t\tdefault: return code;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onTouchStart(e) {\r\n\t\tconst skNode = this.preview.skeleton.node;\r\n\t\tconst skPos = TransformUtil.getWorldPosition2(skNode);\r\n\t\tconst touch: cc.Touch = e.currentTouch;\r\n\t\tconst loc = touch.getLocation().clone();\r\n\t\tconst dt = loc.sub(skPos).multiply(\r\n\t\t\tnew cc.Vec2(1 / skNode.scaleX, 1 / skNode.scaleY));\r\n\r\n\t\tconsole.log(\"Delta\", loc.x, loc.y, dt.x, dt.y, skNode, this.preview.skeleton);\r\n\r\n\t\tconst names = this.item.part.slotNames;\r\n\t\tfor (const name of names) {\r\n\t\t\tconst slot = this.preview.item.slotTouchTest(name, dt);\r\n\t\t\tconsole.log(\"Slot: \", name, slot);\r\n\t\t\tif (slot) {\r\n\t\t\t\tthis.toggleSlot(slot.data.name)\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// endregion\r\n\r\n\t// region 更新控制\r\n\r\n\tprotected update(dt: number) {\r\n\t\tconst now = Date.now();\r\n\r\n\t\tObject.keys(this.keyTimes).forEach(key => {\r\n\t\t\tconst data = this.keyTimes[key];\r\n\t\t\tif (!data || now - data.time < OffsetWait) return;\r\n\r\n\t\t\tif ((data.dt += dt) > OffsetInterval) {\r\n\t\t\t\tdata.dt = 0; this.processDir(Number(key));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// endregion\r\n}\r\n","import {BaseContext, Constructor} from \"../../../Utils/BaseContext\";\r\n\r\nclass SingletonContext extends BaseContext {\r\n\tpublic get contentName() { return \"Singleton\"; }\r\n}\r\n\r\nclass SingletonUtils {\r\n\r\n\tpublic static context = new SingletonContext();\r\n\r\n}\r\n\r\nexport function singleton<T>(clazz: Constructor<T>) {\r\n\r\n\tif (cc.js.isChildClassOf(clazz, cc.Component)) {\r\n\t\tlet oriOnLoad = clazz.prototype.onLoad;\r\n\t\tlet oriOnDestroy = clazz.prototype.onDestroy;\r\n\r\n\t\tclazz.prototype.onLoad = function() {\r\n\t\t\tif (SingletonUtils.context.instance(clazz) == null)\r\n\t\t\t\tSingletonUtils.context.create(clazz, this);\r\n\r\n\t\t\toriOnLoad?.call(this);\r\n\t\t}\r\n\t\tclazz.prototype.onDestroy = function() {\r\n\t\t\tif (SingletonUtils.context.instance(clazz) === this)\r\n\t\t\t\tSingletonUtils.context.remove(clazz);\r\n\r\n\t\t\toriOnDestroy?.call(this);\r\n\t\t}\r\n\t} else\r\n\t\tSingletonUtils.context.create(clazz, new clazz());\r\n}\r\n\r\n// export function singleton<T>(clazz: Constructor<T>) {\r\n// \tSingletonUtils.context.create(clazz, new clazz());\r\n// }\r\n\r\nexport function singletonValue<T>(clazz: Constructor<T>) {\r\n\treturn (target, key) => {\r\n\t\tconsole.log(\"[USE] \", {clazz, target, key});\r\n\t\ttarget[key] = getSingleton(clazz);\r\n\t}\r\n}\r\nexport function singletonGetter<T>(clazz: Constructor<T>) {\r\n\treturn (target, key, desc) => {\r\n\t\tdesc.value = (): T =>\r\n\t\t\ttarget[key + '_CACHE'] ||= getSingleton(clazz)\r\n\t};\r\n}\r\n\r\nexport function getSingleton<T>(clazz: Constructor<T>) {\r\n\t// console.error(\"[USE] \", clazz);\r\n\treturn SingletonUtils.context.instance(clazz);\r\n}\r\n","import menu = cc._decorator.menu;\r\nimport requireComponent = cc._decorator.requireComponent;\r\nimport Skeleton = sp.Skeleton;\r\nimport Animation = cc.Animation;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\n@requireComponent(Animation)\r\n@requireComponent(Skeleton)\r\n@menu(\"其他组件/骨骼动画控制\")\r\nexport default class SkeletonAnimationBridge extends cc.Component {\r\n\r\n    static SkeletonAnimationName: string = \"attack\";\r\n\r\n    animation: Animation = null;\r\n    skeleton: Skeleton = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.animation = this.getComponent(Animation);\r\n        this.skeleton = this.getComponent(Skeleton);\r\n        this.createCallback();\r\n    }\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    update (dt) {\r\n        this.skeleton.timeScale = this.animation.getAnimationState(this.animation.defaultClip.name).speed;\r\n    }\r\n\r\n    createCallback() {\r\n        this.animation.on(\"play\", this.startCallback, this);\r\n    }\r\n\r\n    startCallback() {\r\n        this.skeleton.clearTracks();\r\n        this.skeleton.setAnimation(0, SkeletonAnimationBridge.SkeletonAnimationName, false);\r\n    }\r\n}\r\n","import {ItemContainer} from \"../../../CoreModule/Components/ItemContainer\";\r\nimport {ScrollviewFilter} from \"../../../CoreModule/Utils/ScrollviewFilter\";\r\nimport {waitForLogin} from \"../../../PlayerModule/Managers/PlayerManager\";\r\nimport {waitForDataLoad} from \"../../../CoreModule/Managers/DataManager\";\r\nimport SkillItemDisplay from \"./SkillItemDisplay\";\r\nimport {Skill, skillRepo} from \"../../../HeroModule/Data/Skill\";\r\nimport {battleScene} from \"../../../../Scenes/BattleScene\";\r\nimport {PromiseUtils} from \"../../../../Utils/PromiseUtils\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n\r\n@ccclass\r\nexport default class SkillItemContainer extends ItemContainer<Skill, SkillItemDisplay> {\r\n\r\n    // private isLoad: boolean = false;\r\n\r\n    start() {\r\n        this.setup();\r\n    }\r\n\r\n    // update (dt) {\r\n    // \tif (!this.isLoad) {\r\n    // \t\tthis.setup();\r\n    // \t\tif (!this.isLoad) return;\r\n    // \t}\r\n    // }\r\n\r\n    @waitForDataLoad\r\n    @waitForLogin\r\n    private async setup() {\r\n        await PromiseUtils.waitFor(() => battleScene().currentPVPSelect != null);\r\n        this.updateSkills();\r\n    }\r\n\r\n    onItemsChanged() {\r\n        super.onItemsChanged();\r\n        const nodes = [];\r\n        this.itemsComponents.forEach(item =>\r\n            item.node.active && nodes.push(item.node)\r\n        )\r\n        ScrollviewFilter.filter(\"vertical\", this.container,\r\n            nodes, 5, this.node.height, 10);\r\n    }\r\n\r\n    public updateSkills() {\r\n        let skillIds = battleScene().currentPVPSelect.skillIds;\r\n        let skills = skillIds.map(id => skillRepo().getById(id));\r\n        this.setItems(skills);\r\n    }\r\n\r\n}\r\n","import {ItemDisplay} from \"../../../CoreModule/Components/ItemDisplay\";\r\nimport Label = cc.Label;\r\nimport Node = cc.Node;\r\nimport Button = cc.Button;\r\nimport Sprite = cc.Sprite;\r\nimport ProgressBar = cc.ProgressBar;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport {autoUnitConvert} from \"../../../../Utils/NumberUtils\";\r\nimport {DateUtils} from \"../../../../Utils/DateUtils\";\r\nimport {Skill} from \"../../../HeroModule/Data/Skill\";\r\nimport {BattleInterface} from \"../../BattleCommon\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n\r\n@ccclass\r\nexport default class SkillItemDisplay extends ItemDisplay<Skill> {\r\n\r\n    @property(Label)\r\n    boostCostLabel: Label = null;\r\n    @property(Label)\r\n    boostTipsLabel: Label = null;\r\n    @property(Label)\r\n    nameLabel: Label = null;\r\n    @property(Label)\r\n    infoLabel: Label = null;\r\n    @property(Label)\r\n    coldTimeLabel: Label = null;\r\n    @property(Label)\r\n    levelLabel: Label = null;\r\n\r\n    @property(Button)\r\n    private boostButton: Button = null;\r\n\r\n    @property(ProgressBar)\r\n    coldTimeBar: ProgressBar = null;\r\n\r\n    // onLoad () {}\r\n\r\n    start() { }\r\n\r\n    // region 界面绘制\r\n\r\n    private get restSecond() {\r\n        return 1;\r\n    }\r\n\r\n    private get restSecondRate() {\r\n        return 1;\r\n    }\r\n\r\n    public refresh() {\r\n        super.refresh();\r\n\r\n        this.drawLabels();\r\n    }\r\n\r\n    private drawLabels() {\r\n        this.nameLabel.string = \"\\\\L[SKILL_\" + this.item.id + \"]\";\r\n        this.infoLabel.string = \"skill info\";\r\n        this.levelLabel.string = \"\";\r\n    }\r\n\r\n    private get canBoost() {\r\n        return true;\r\n    }\r\n\r\n    // endregion\r\n\r\n    // region 操作控制\r\n\r\n    public async upgradeBtn() {\r\n        await BattleInterface.StartTest()\r\n        await BattleInterface.BoostPVP({battleId: \"5\", skillId: this.item.id});\r\n    }\r\n\r\n    // endregion\r\n\r\n    // region 更新控制\r\n\r\n    update(dt) {\r\n        if (!this.item) return;\r\n\r\n        this.updateLabels();\r\n        this.updateNodes();\r\n    }\r\n\r\n    @autoUnitConvert\r\n    private updateLabels() {\r\n        this.boostCostLabel.string = this.item.boostCost.toString();\r\n        this.boostTipsLabel.string = \"\\\\L[SBattle23]\";\r\n        this.coldTimeLabel.string = \"0\";\r\n    }\r\n\r\n    private updateNodes() {\r\n        this.boostButton.interactable = this.canBoost;\r\n        this.coldTimeBar.progress = this.restSecondRate;\r\n    }\r\n\r\n    // endregion\r\n\r\n}\r\n","import {field} from \"../../CoreModule/Data/BaseData\";\r\nimport {Effect} from \"../../BattleModule/Data/Effect\";\r\nimport {BaseRepository, getRepository, repository} from \"../../CoreModule/Data/BaseRepository\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {HurtMotionGroupId, motionGroupRepo} from \"../../BattleModule/Data/MotionGroup\";\r\nimport {cache} from \"../../../Utils/DecoratorUtils\";\r\nimport {data, StaticData} from \"../../CoreModule/Data/StaticData\";\r\nimport {HeroRace} from \"./HeroType\";\r\nimport {Trait} from \"../../BattleModule/Data/Trait\";\r\n\r\nexport enum TargetType {\r\n\tSelf, // 自己\r\n\tFriendsNotSelf, // 己方（不包括自己）\r\n\tFriends, // 己方（包括自己）\r\n\tEnemies, // 敌方\r\n\tAllNotSelf, // 全体（不包括自己）\r\n\tAll // 全体（包括自己）\r\n}\r\n\r\n// 主属性：1 => POW, 2 => INT, 3 => 无\r\nexport type MainParam = 1 | 2 | 3;\r\n\r\nexport const NormalAttackId = 0;\r\nexport const PartAttackId = -1;\r\n\r\n@data(\"Skill\")\r\nexport class Skill extends StaticData {\r\n\r\n\t@field\r\n\tpublic freezeTime: number = -1; // 冻结时间（以回合为单位，-1为不冻结）\r\n\t@field\r\n\tpublic boostCost: number = 0; // 加速花费（为0表示不可加速，用于被动技能）\r\n\r\n\t@field(Number)\r\n\tpublic subjectMotionId: number = PartAttackId;\r\n\t@field(Number)\r\n\tpublic targetMotionId: number = HurtMotionGroupId;\r\n\r\n\t@field\r\n\tpublic race: HeroRace = HeroRace.None; // 种族（表示元素类型）\r\n\t@field\r\n\tpublic mainParam: MainParam = 3; // 主属性\r\n\r\n\t// TODO: 完善目标系统\r\n\t@field\r\n\tpublic targetType: TargetType = TargetType.Enemies; // 目标类型\r\n\t@field(Number)\r\n\tpublic targetCount: number = 1; // 目标个数（最大数目，为0表示全部，在符合条件的目标中随机抽取指定数量的目标）\r\n\r\n\t@field([Effect])\r\n\tpublic effects: Effect[] = []; // 效果\r\n\t@field([Trait])\r\n\tpublic traits: Trait[] = []; // 特性\r\n\r\n\t@field\r\n\tpublic isPassive: boolean = false; // 被动技能\r\n\t@field\r\n\tpublic mustHit: boolean = false; // 必定命中\r\n\r\n\t@cache\r\n\tpublic subjectMotion() {\r\n\t\treturn motionGroupRepo().getById(this.subjectMotionId);\r\n\t}\r\n\t@cache\r\n\tpublic targetMotion() {\r\n\t\treturn motionGroupRepo().getById(this.targetMotionId);\r\n\t}\r\n\r\n}\r\n\r\nexport function skillRepo() {\r\n\treturn getRepository(SkillRepo);\r\n}\r\n\r\n@repository\r\nexport class SkillRepo extends BaseRepository<Skill> {\r\n\r\n\tget clazz(): Constructor<Skill> { return Skill; }\r\n\r\n\tpublic normalAttack() {\r\n\t\treturn this.getById(NormalAttackId);\r\n\t}\r\n\r\n}\r\n\r\n","import {battleScene} from \"../../../../Scenes/BattleScene\";\r\nimport Label = cc.Label;\r\nimport ProgressBar = cc.ProgressBar;\r\nimport {BattleInterface} from \"../../BattleCommon\";\r\nimport {copyMgr} from \"../../../CopyModule/Managers/CopyManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SpeedButtonController extends cc.Component {\r\n\r\n    @property(ProgressBar)\r\n    speedUpProgress: ProgressBar = null;\r\n    @property(Label)\r\n    tipsLabel: Label = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    update (dt) {\r\n        if (!copyMgr().getMainPlayerCopySettings()) return;\r\n        let lastTime = (copyMgr().getMainPlayerCopySettings().speedUpTime - Date.now()) / 1000;\r\n        if (lastTime < 0) {\r\n            this.tipsLabel.string = \"\\\\L[SMain1]\";\r\n            this.speedUpProgress.progress = 1;\r\n            return;\r\n        }\r\n        this.tipsLabel.string = this.toTime(lastTime);\r\n        this.speedUpProgress.progress = Math.max(lastTime / 120, 0.08);\r\n    }\r\n\r\n    speedUp() {\r\n        if (Date.now() > copyMgr().getMainPlayerCopySettings().speedUpTime)\r\n            BattleInterface.BoostMainBattle().then(res => copyMgr().getMainPlayerCopySettings().speedUpTime = Date.now() + 1000 * 120);\r\n    }\r\n\r\n    toTime(time: number) {\r\n        let min = Math.floor(time / 60);\r\n        let sec = Math.floor(time % 60);\r\n        return (min < 10 ? \"0\" + min : min) + \":\" + (sec < 10 ? \"0\" + sec : sec);\r\n    }\r\n}\r\n","import {PartType, partTypeRepo, SpecialPartType} from \"../Modules/HeroModule/Data/PartType\";\r\nimport {HeroType, heroTypeRepo} from \"../Modules/HeroModule/Data/HeroType\";\r\nimport {Part, partRepo} from \"../Modules/HeroModule/Data/Part\";\r\nimport {BaseData} from \"../Modules/CoreModule/Data/BaseData\";\r\nimport {partId2NftMakeId} from \"../Modules/NFTModule/Managers/NFTManager\";\r\nimport {PromiseUtils} from \"./PromiseUtils\";\r\nimport {configMgr} from \"../Modules/CoreModule/Managers/ConfigManager\";\r\nimport PartConfig from \"../Modules/HeroModule/Configs/PartConfig\";\r\nimport {editorMgr} from \"../Modules/HeroModule/Managers/EditorManager\";\r\nimport Slot = sp.spine.Slot;\r\nimport Skeleton = sp.spine.Skeleton;\r\nimport SlotData = sp.spine.SlotData;\r\nimport Bone = sp.spine.Bone;\r\nimport RegionAttachment = sp.spine.RegionAttachment;\r\nimport BoneData = sp.spine.BoneData;\r\nimport Vec2 = cc.Vec2;\r\nimport Texture2D = cc.Texture2D;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport {PartSetting} from \"../Modules/HeroModule/Data/Hero\";\r\n\r\n// 重写位置更新函数\r\nconst oriUpdateWorldTransformWith = Bone.prototype.updateWorldTransformWith;\r\nBone.prototype.updateWorldTransformWith = function(\r\n\tx, y, rotation, scaleX, scaleY, shearX, shearY) {\r\n\r\n\tscaleX *= this.scaleX2 == undefined ? 1 : this.scaleX2; // * (this.scaleX3 || 1);\r\n\tscaleY *= this.scaleY2 == undefined ? 1 : this.scaleY2; // * (this.scaleY3 || 1);\r\n\r\n\toriUpdateWorldTransformWith.call(this, x, y, rotation, scaleX, scaleY, shearX, shearY);\r\n\r\n\tthis.worldX += this.offsetX || 0;\r\n\tthis.worldY += this.offsetY || 0;\r\n\t// this.worldX += this.offsetX2 || 0;\r\n\t// this.worldY += this.offsetY2 || 0;\r\n};\r\n\r\nexport class HeroSkeleton extends BaseData {\r\n\r\n\tpublic sk: sp.Skeleton;\r\n\tpublic tmpSk: sp.Skeleton;\r\n\r\n\tpublic constructor(sk: sp.Skeleton,\r\n\t\t\t\t\t\t\t\t\t\t tmpSk: sp.Skeleton,\r\n\t\t\t\t\t\t\t\t\t\t heroTypeId: number = 0) {\r\n\t\tsuper();\r\n\t\tthis.sk = sk; this.tmpSk = tmpSk;\r\n\t\tthis.setHeroTypeId(heroTypeId);\r\n\t}\r\n\r\n\t// region 数据封装\r\n\r\n\t/**\r\n\t * 骨骼数据实例\r\n\t */\r\n\tpublic get skeleton(): Skeleton {\r\n\t\treturn this.sk[\"_skeleton\"];\r\n\t}\r\n\t/**\r\n\t * 骨骼数据实例\r\n\t */\r\n\tpublic get tmpSkeleton(): Skeleton {\r\n\t\treturn this.tmpSk[\"_skeleton\"];\r\n\t}\r\n\r\n\t/**\r\n\t * 英雄类型数据\r\n\t */\r\n\tprivate _heroTypeId: number;\r\n\tpublic get heroType() {\r\n\t\treturn heroTypeRepo().getById(this._heroTypeId);\r\n\t}\r\n\tpublic get heroTypeId() { return this._heroTypeId; }\r\n\r\n\t/**\r\n\t * 部件数据\r\n\t */\r\n\tprivate _partSettings: PartSetting[] = [];\r\n\t// private _partIds: number[] = [];\r\n\tpublic get partSettings() { return this._partSettings; }\r\n\t// public get partIds() { return this._partSettings.map(ps => ps.partId); }\r\n\tpublic get nftPartIds() {\r\n\t\treturn this._partSettings.filter(ps => !ps.part().isEmpty)\r\n\t\t\t.map(ps => partId2NftMakeId(ps.partId));\r\n\t}\r\n\tpublic get parts() {\r\n\t\treturn this._partSettings.map(ps => partRepo().getById(ps.partId));\r\n\t}\r\n\r\n\t/**\r\n\t * 获取部件设置\r\n\t */\r\n\tpublic getPartSetting(partId: number) {\r\n\t\treturn this._partSettings.find(ps => ps.partId == partId);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 基本操作\r\n\r\n\t/**\r\n\t * 设置英雄类型\r\n\t */\r\n\tpublic setHeroTypeId(heroTypeId: number) {\r\n\t\tthis._heroTypeId = heroTypeId;\r\n\t\tthis.removeExclusionParts();\r\n\r\n\t\tthis.sk.skeletonData = this.heroType.defaultSkeleton;\r\n\t\tthis.removeNotExistParts();\r\n\r\n\t\tthis.adjustDrawOrder();\r\n\t\t// this.initSkeleton();\r\n\t\tthis.refresh().then();\r\n\t}\r\n\r\n\t/**\r\n\t * 添加部件\r\n\t */\r\n\tpublic addPart(part: Part, force = false) {\r\n\t\t// console.error(\"[addPart]\", {part, name: part.name, force});\r\n\t\tif (!part || part.partType.isBackground) return; // 背景不会被添加\r\n\r\n\t\tlet ps = this.getPartSetting(part.id);\r\n\t\tif (!ps) {\r\n\t\t\tps = PartSetting.create(part.id);\r\n\t\t\tlet idx = this.parts.findIndex(p => p.partTypeId == part.partTypeId);\r\n\t\t\tidx == -1 ? this._partSettings.push(ps) : this._partSettings[idx] = ps;\r\n\t\t}\r\n\r\n\t\tconsole.log(\"addPart\", this._partSettings);\r\n\r\n\t\t// 考虑互斥\r\n\t\tif (!force) this.removeExclusionParts(part);\r\n\t}\r\n\r\n\t/**\r\n\t * 移除部件\r\n\t */\r\n\tpublic removePart(part: Part, force = false) {\r\n\t\t// console.error(\"[removePart]\", {part, name: part.name, force});\r\n\t\tif (!part) return;\r\n\t\tif (!force && !part.partType.optional) // 如果必选\r\n\t\t\tthis.addPart(partRepo().getByPartTypeId(part.partTypeId));\r\n\t\telse {\r\n\t\t\tlet idx = this.parts.findIndex(p => p.partTypeId == part.partTypeId);\r\n\t\t\tthis._partSettings.splice(idx, 1);\r\n\r\n\t\t\tpart.slotNames.forEach(sName =>\r\n\t\t\t\tthis.skeleton?.findSlot(sName)?.setAttachment(null)\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 寻找部件\r\n\t */\r\n\tpublic findPart(partTypeOrId: PartType | number) {\r\n\t\tconst ptId = (typeof partTypeOrId == \"number\" ? partTypeOrId : partTypeOrId.id);\r\n\t\treturn this.parts.find(p => p.partTypeId == ptId);\r\n\t}\r\n\r\n\t/**\r\n\t * 移除没有被装备上的部件（扒光）\r\n\t */\r\n\tprivate removeNotExistParts() {\r\n\t\tpartTypeRepo().find().forEach(pt => {\r\n\t\t\tif (pt.special == SpecialPartType.Background) return;\r\n\t\t\tif (this.parts.find(p => p.partType == pt)) return;\r\n\t\t\tlet temp = partRepo().find({partTypeId: pt.id})[0];\r\n\t\t\tthis.addPart(temp, true); this.removePart(temp);\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * 调整绘制顺序\r\n\t */\r\n\tprivate adjustDrawOrder() {\r\n\t\tconst orders = configMgr().config(PartConfig).slotOrders;\r\n\t\tthis.skeleton?.drawOrder.sort((a, b) =>\r\n\t\t\torders[a.data.name] - orders[b.data.name]);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 缩放处理\r\n\r\n\t/**\r\n\t * 计算缩放\r\n\t */\r\n\tpublic calcScale(part: Part) {\r\n\t\tconst ht = part.heroType, cht = this.heroType;\r\n\t\tconst pt = part.partType, bptId = pt.baseTypeId;\r\n\r\n\t\tlet res = cht.scale / ht.scale; // pt.isBody ? ht.scale : (cht.scale / ht.scale);\r\n\r\n\t\tconst ps = this.getPartSetting(part.id);\r\n\t\tres *= ps?.scale || 1;\r\n\r\n\t\tif (bptId == -1) // 如果是根\r\n\t\t\t// 只考虑 Part → HeroType 缩放\r\n\t\t\tres *= editorMgr().getPHtScale(pt.id, cht.id, ht.id);\r\n\t\telse {\r\n\t\t\tconst bpt = pt.basePartType, bp = this.findPart(bpt);\r\n\r\n\t\t\t// 考虑 Part → HeroType 缩放\r\n\t\t\tconst htId = part.heroTypeId, bhtId = bp?.heroTypeId;\r\n\t\t\tconst scale1 = editorMgr().getPHtScale(pt.id, bhtId, htId);\r\n\t\t\tconst scale2 = editorMgr().getPtBptScale(part.oriId, bp?.oriId);\r\n\t\t\tres *= scale1 * scale2;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 计算偏移\r\n\t */\r\n\tpublic calcOffset(part: Part) {\r\n\t\tconst pt = part.partType, bptId = pt.baseTypeId;\r\n\t\tif (bptId == -1) return [0, 0];\r\n\r\n\t\tconst bpt = pt.basePartType, bp = this.findPart(bpt);\r\n\t\treturn editorMgr().getPtBptOffset(part.oriId, bp?.oriId);\r\n\t}\r\n\r\n\t/**\r\n\t * 计算隐藏\r\n\t */\r\n\tpublic calcHidden(part: Part) {\r\n\t\tconst pt = part.partType, bptId = pt.baseTypeId;\r\n\t\tif (bptId == -1) return [];\r\n\r\n\t\tconst bpt = pt.basePartType, bp = this.findPart(bpt);\r\n\t\treturn editorMgr().getPtBptHidden(part.oriId, bp?.oriId);\r\n\t}\r\n\r\n\t/**\r\n\t * 计算Clothes6问题\r\n\t */\r\n\tpublic calcClothes6(part: Part) {\r\n\t\t// if (!part.partType.isClothes) return false;\r\n\t\tconst hp = this.findPart(partTypeRepo().head);\r\n\t\treturn editorMgr().getClothes6Problem(part.oriId, hp?.oriId);\r\n\t}\r\n\r\n\t/**\r\n\t * 计算Weapon3问题\r\n\t */\r\n\tpublic calcWeapon3(part: Part) {\r\n\t\t// if (!part.partType.isClothes) return false;\r\n\t\tconst bp = this.findPart(partTypeRepo().body);\r\n\t\treturn editorMgr().getWeapon3Problem(part.oriId, bp?.oriId);\r\n\t}\r\n\r\n\t/**\r\n\t * 计算偏移\r\n\t */\r\n\tpublic calcFootOffset(part: Part) {\r\n\t\tconst isFoot = part.partType.isFoot;\r\n\t\tif (!isFoot) return [0, 0];\r\n\t\treturn editorMgr().getFootOffset(part.oriId);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 互斥处理\r\n\r\n\t/**\r\n\t * 移除互斥的部件\r\n\t * @param part 父Part，不填则会从根Part开始遍历\r\n\t */\r\n\tprivate removeExclusionParts(part?: Part) {\r\n\t\tif (part === undefined) { // 如果没有该参数\r\n\t\t\tconst roots = partTypeRepo().rootPartTypes();\r\n\t\t\tconst rParts = roots.map(pt => this.findPart(pt));\r\n\t\t\tfor (const rPart of rParts)\r\n\t\t\t\trPart && this.removeExclusionParts(rPart)\r\n\t\t} else {\r\n\t\t\tconst pt = part.partType;\r\n\r\n\t\t\tconst subs = pt.subPartTypes;\r\n\t\t\tfor (const sub of subs) {\r\n\t\t\t\tconst sPart = this.findPart(sub);\r\n\t\t\t\tif (!sPart) continue;\r\n\r\n\t\t\t\tif (this.calcScale(sPart) == 0)\r\n\t\t\t\t\tthis.removePart(sPart);\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.removeExclusionParts(sPart); // 继续处理sub\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 骨头操作\r\n\r\n\t/**\r\n\t * 查找骨骼\r\n\t */\r\n\tpublic findBone(boneOrName: Bone | string, tmp = false): Bone {\r\n\t\tif (!boneOrName) return null;\r\n\t\tif (typeof boneOrName === \"string\")\r\n\t\t\treturn (tmp ? this.tmpSk : this.sk).findBone(boneOrName);\r\n\t\treturn this.findBone(boneOrName.data.name, tmp);\r\n\t}\r\n\r\n\t/**\r\n\t * 查找所有Children\r\n\t */\r\n\tpublic findAllChildren(boneOrName: Bone | string, tmp = false): Bone[] {\r\n\t\tconst bone = this.findBone(boneOrName, tmp);\r\n\t\tif (!bone) return [];\r\n\r\n\t\tlet res = [bone, ...bone.children];\r\n\t\tfor (const child of bone.children)\r\n\t\t\tres = res.concat(this.findAllChildren(child, tmp));\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 应用骨骼\r\n\t */\r\n\tpublic applyBone(bone: Bone, tBoneOrAssign?: Bone | boolean, assign = true) {\r\n\t\tlet tBone: Bone;\r\n\t\tif (typeof tBoneOrAssign == \"boolean\") assign = tBoneOrAssign;\r\n\t\telse tBone = tBoneOrAssign;\r\n\r\n\t\tconst sBone = tBone || this.findBone(bone);\r\n\t\tif (!sBone) return;\r\n\t\tif (assign) SpineUtils.assignBone(bone, sBone);\r\n\r\n\t\tbone.children.forEach(c => this.applyBone(c));\r\n\t\treturn sBone;\r\n\t}\r\n\r\n\t/**\r\n\t * 变换骨头\r\n\t */\r\n\tprivate transformBone(bone: Bone, scale = 1, offset = [0, 0]) {\r\n\t\t// const sBone = this.findBone(bone);\r\n\t\t// if (!sBone) return;\r\n\t\t//\r\n\t\t// sBone.scaleX = sBone.data.scaleX * scale;\r\n\t\t// sBone.scaleY = sBone.data.scaleY * scale;\r\n\t\t//\r\n\t\t// sBone[\"offsetX\"] = offset[0];\r\n\t\t// sBone[\"offsetY\"] = offset[1];\r\n\r\n\t\tconst children = this.findAllChildren(bone);\r\n\r\n\t\tif (children.length <= 0) return;\r\n\r\n\t\tchildren[0][\"scaleX2\"] = scale;\r\n\t\tchildren[0][\"scaleY2\"] = scale;\r\n\t\tchildren[0][\"offsetX\"] = offset[0];\r\n\t\tchildren[0][\"offsetY\"] = offset[1];\r\n\r\n\t\t// children.slice(1).forEach(bone => {\r\n\t\t// \tif (bone.data.transformMode == TransformMode.NoScale ||\r\n\t\t// \t\tbone.data.transformMode == TransformMode.NoScaleOrReflection) {\r\n\t\t//\r\n\t\t// \t\tbone[\"scaleX3\"] = scale;\r\n\t\t// \t\tbone[\"scaleY3\"] = scale;\r\n\t\t// \t}\r\n\t\t// })\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 槽操作\r\n\r\n\t/**\r\n\t * 查找槽\r\n\t */\r\n\tpublic findSlot(slotOrName: Slot | string, tmp = false): sp.spine.Slot {\r\n\t\tif (!slotOrName) return null;\r\n\t\tif (typeof slotOrName === \"string\")\r\n\t\t\treturn (tmp ? this.tmpSk : this.sk).findSlot(slotOrName);\r\n\t\treturn this.findSlot(slotOrName.data.name, tmp);\r\n\t}\r\n\r\n\t/**\r\n\t * 应用槽\r\n\t */\r\n\tpublic applySlot(slot: Slot, tSlot?: Slot) {\r\n\t\tconst res = tSlot || this.findSlot(slot);\r\n\t\tif (res) SpineUtils.assignSlot(slot, res);\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 槽点击测试\r\n\t */\r\n\tpublic slotTouchTest(slotName: string, dt: Vec2) {\r\n\t\tconst res = this.findSlot(slotName);\r\n\r\n\t\tif (!res) return;\r\n\t\t// @ts-ignore\r\n\t\tconst lLoc = res.bone.worldToLocal({x: dt.x, y: dt.y});\r\n\t\tconst attach = res.getAttachment() as sp.spine.RegionAttachment;\r\n\t\tif (!attach) return;\r\n\r\n\t\tconst aLoc = {x: lLoc.x - attach.x, y: lLoc.y - attach.y};\r\n\r\n\t\t// 当前点与当前坐标系的夹角\r\n\t\tconst dist = Math.sqrt(aLoc.x * aLoc.x + aLoc.y * aLoc.y);\r\n\t\tconst ang = Math.atan(aLoc.y / aLoc.x) / Math.PI * 180;\r\n\t\tconst newAng = ang - attach.rotation;\r\n\t\tconst newRad = newAng / 180 * Math.PI;\r\n\t\tconst newLoc = {\r\n\t\t\tx: dist * Math.cos(newRad), y: dist * Math.sin(newRad)\r\n\t\t};\r\n\t\tconst aw = attach.width * attach.scaleX;\r\n\t\tconst ah = attach.height * attach.scaleY;\r\n\r\n\t\treturn newLoc.x >= -aw / 2 && newLoc.x <= aw / 2\r\n\t\t\t&& newLoc.y >= -ah / 2 && newLoc.y <= ah / 2 ? res : null;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 附件操作\r\n\r\n\t/**\r\n\t * 将某插槽内attachment的贴图替换为指定图片\r\n\t */\r\n\tprivate setAttachment(slot: Slot, texture: SpriteFrame) {\r\n\t\tlet att = slot.getAttachment();\r\n\t\tconst region = SpineUtils.changeTexture2DToRegion(texture.getTexture());\r\n\r\n\t\tif (!att) slot.setAttachment(att = new RegionAttachment(texture.name))\r\n\r\n\t\tatt[\"region\"] = region;\r\n\t\tatt[\"setRegion\"](region);\r\n\t\tatt[\"updateOffset\"]();\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// // region 骨骼操作\r\n\t//\r\n\t// /**\r\n\t//  * 初始化骨骼\r\n\t//  */\r\n\t// public initSkeleton() {\r\n\t// \t// this.skeleton.slots.forEach(slot => slot.setAttachment(null));\r\n\t// }\r\n\t//\r\n\t// // endregion\r\n\r\n\t// region 绘制控制\r\n\r\n\tpublic drawing = false;\r\n\r\n\t/**\r\n\t * 刷新\r\n\t */\r\n\tpublic async refresh(editorMode = false) {\r\n\t\tawait PromiseUtils.waitFor(() => !this.drawing);\r\n\t\tthis.drawing = true;\r\n\t\tawait this.drawParts(editorMode);\r\n\t\tthis.adjustSkeleton();\r\n\t\tthis.drawing = false;\r\n\t}\r\n\tprivate adjustSkeleton() {\r\n\t\tconst footPart = this.findPart(partTypeRepo().foot);\r\n\t\tconst footOffset = this.calcFootOffset(footPart);\r\n\r\n\t\tthis.skeleton.scaleX = this.skeleton.scaleY = this.heroType.scale;\r\n\t\tthis.skeleton.x = footOffset[0];\r\n\t\tthis.skeleton.y = footOffset[1];\r\n\t}\r\n\tprivate async drawParts(partOrEditorMode: Part | boolean = false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditorMode = false) {\r\n\t\tif (typeof partOrEditorMode == \"boolean\")\r\n\t\t\treturn this.drawParts(null, partOrEditorMode);\r\n\r\n\t\tconst part = partOrEditorMode;\r\n\t\tif (part == undefined) { // 如果没有该参数\r\n\t\t\tconst roots = partTypeRepo().rootPartTypes();\r\n\t\t\tconst rParts = roots.map(pt => this.findPart(pt));\r\n\t\t\tfor (const rPart of rParts)\r\n\t\t\t\trPart && await this.drawParts(rPart, editorMode);\r\n\t\t} else {\r\n\t\t\tconst pt = part.partType;\r\n\t\t\tawait this.drawPart(part, editorMode);\r\n\r\n\t\t\t// 考虑 PartType → Base PartType 缩放\r\n\t\t\t// 查询配置表中，当前装备的所有互斥子装备\r\n\t\t\t// const scales = config.ptBptScale.filter(\r\n\t\t\t// \titem => item[1] == part.oriId && item[2] > 0);\r\n\r\n\t\t\tconst subs = pt.subPartTypes;\r\n\t\t\tfor (const sub of subs) {\r\n\t\t\t\tconst sPart = this.findPart(sub);\r\n\t\t\t\tif (!sPart) continue;\r\n\r\n\t\t\t\tawait this.drawParts(sPart, editorMode);\r\n\t\t\t}\r\n\r\n\t\t\t// const subs = pt.subPartTypes();\r\n\t\t\t// for (const sub of subs) {\r\n\t\t\t// }\r\n\t\t}\r\n\t}\r\n\tprivate async drawPart(part: Part, editorMode = false) {\r\n\t\tif (part.isEmpty) {\r\n\t\t\tconst names = part.slotNames;\r\n\t\t\tnames.forEach(name => {\r\n\t\t\t\tconst slot = this.findSlot(name);\r\n\t\t\t\tslot.setAttachment(null);\r\n\t\t\t})\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.tmpSk.skeletonData = await part.skeleton();\r\n\r\n\t\tconst scale = this.calcScale(part);\r\n\t\tconst offset = this.calcOffset(part);\r\n\t\tconst hidden = this.calcHidden(part);\r\n\r\n\t\tif (part.partType.isBody) {\r\n\t\t\tconst bone = this.findBone(\"center\", true);\r\n\t\t\tthis.applyBone(bone, false);\r\n\t\t\tthis.transformBone(bone, scale, offset);\r\n\t\t}\r\n\r\n\t\tlet visNames = [], names = part.boneNames;\r\n\r\n\t\tnames.forEach(name => {\r\n\r\n\t\t\tif (visNames.includes(name)) return;\r\n\r\n\t\t\tconst children = this.findAllChildren(name, true);\r\n\t\t\tchildren.forEach(child => {\r\n\t\t\t\tif (!names.includes(child.data.name)) return;\r\n\t\t\t\tvisNames.push(child.data.name);\r\n\t\t\t\tthis.transformBone(child);\r\n\t\t\t});\r\n\r\n\t\t\tconst bone = children[0];\r\n\t\t\t// 处理Clothes6问题\r\n\t\t\t// if (this.isClothes6(name)) {\r\n\t\t\t// \tconst curBone = this.findBone(name);\r\n\t\t\t// \tconst subBone = this.findBone(name == \"clothes_6\" ? \"clothes_1\" : \"clothes_6\");\r\n\t\t\t//\r\n\t\t\t// \tthis.applyBone(bone, clothes6 ? subBone : curBone, false);\r\n\t\t\t// } else this.applyBone(bone, false);\r\n\r\n\t\t\tthis.applyBone(bone, false);\r\n\t\t\tthis.transformBone(bone, scale, offset);\r\n\t\t})\r\n\r\n\t\t// part.boneNames.forEach(name => this.applyBone(\r\n\t\t// \tthis.findBone(name, true), false, scale, offset)\r\n\t\t// );\r\n\r\n\t\t// part.slotNames.forEach(name => {\r\n\t\t// \tconst slot = this.applySlot(this.findSlot(name, true))\r\n\t\t// \tif (hidden.includes(name)) slot.color.a = editorMode ? 0.5 : 0;\r\n\t\t// });\r\n\r\n\t\t// const attachments = await part.allPictures();\r\n\t\tnames = part.slotNames;\r\n\t\tnames.forEach(name => {\r\n\t\t\t// let slot;\r\n\t\t\t// const sSlot = this.findSlot(name, true);\r\n\t\t\t// // slot = this.applySlot(sSlot);\r\n\t\t\t//\r\n\t\t\t// // 处理Clothes6问题\r\n\t\t\t// if (this.isClothes6(name)) {\r\n\t\t\t// \tconst curSlot = this.findSlot(name);\r\n\t\t\t// \tconst subSlot = this.findSlot(name == \"clothes_6\" ? \"clothes_1\" : \"clothes_6\");\r\n\t\t\t//\r\n\t\t\t// \tif (clothes6) {\r\n\t\t\t// \t\tslot = this.applySlot(sSlot, subSlot);\r\n\t\t\t// \t\tcurSlot.setAttachment(null);\r\n\t\t\t// \t} else {\r\n\t\t\t// \t\tslot = this.applySlot(sSlot);\r\n\t\t\t// \t\tsubSlot.setAttachment(null);\r\n\t\t\t// \t}\r\n\t\t\t// } else slot = this.applySlot(sSlot);\r\n\r\n\t\t\tconst slot = this.applySlot(this.findSlot(name, true));\r\n\t\t\t// 处理隐藏\r\n\t\t\tif (hidden.includes(name))\r\n\t\t\t\tslot.color.a = slot.data.color.a = editorMode ? 0.5 : 0;\r\n\t\t\telse if (slot) slot.color.a = slot.data.color.a = 1;\r\n\t\t\t// else {\r\n\t\t\t// \tconst attachment = attachments.get(name);\r\n\t\t\t// \tif (attachment) this.setAttachment(slot, attachment);\r\n\t\t\t// }\r\n\t\t});\r\n\r\n\t\t// 处理变色\r\n\t\tconst attachments = await part.allPictures();\r\n\t\tnames.forEach(name => {\r\n\t\t\t// if (name == \"clothes_1\" && clothes6) return;\r\n\t\t\t// const slot = this.findSlot(this.isClothes6(name) ?\r\n\t\t\t// \tclothes6 ? \"clothes_1\" : \"clothes_6\" : name);\r\n\r\n\t\t\tconst slot = this.findSlot(name);\r\n\t\t\tconst attachment = attachments.get(name);\r\n\t\t\tif (attachment) this.setAttachment(slot, attachment);\r\n\t\t})\r\n\r\n\t\t// 处理Weapon3问题\r\n\t\tif (part.partType.isWeapon) {\r\n\t\t\tconst w1 = \"weapon_1\", w6 = \"weapon_6\", w3 = \"weapon_3\";\r\n\t\t\tconst isW1 = !!this.findSlot(w1).getAttachment();\r\n\t\t\tconst isW6 = !!this.findSlot(w6).getAttachment();\r\n\t\t\tif ((isW1 || isW6) && !(isW1 && isW6)) { // 不能同时存在\r\n\r\n\t\t\t\tconst weapon3 = this.calcWeapon3(part);\r\n\r\n\t\t\t\tconst sw6Bone = this.findBone(w6, true), sw1Bone = this.findBone(w1, true);\r\n\t\t\t\tconst sw3Bone = this.findBone(w3, true);\r\n\t\t\t\tconst sw6Slot = this.findSlot(w6, true), sw1Slot = this.findSlot(w1, true);\r\n\t\t\t\tconst sw3Slot = this.findSlot(w3, true);\r\n\r\n\t\t\t\tconst w6Bone = this.findBone(w6), w1Bone = this.findBone(w1);\r\n\t\t\t\tconst w3Bone = this.findBone(w3);\r\n\t\t\t\tconst w6Slot = this.findSlot(w6), w1Slot = this.findSlot(w1);\r\n\t\t\t\tconst w3Slot = this.findSlot(w3);\r\n\r\n\t\t\t\tif (isW1) {\r\n\t\t\t\t\tthis.applyBone(sw1Bone, weapon3 ? w3Bone : w1Bone, false);\r\n\t\t\t\t\tthis.applyBone(sw3Bone, weapon3 ? w1Bone : w3Bone, false);\r\n\r\n\t\t\t\t\tthis.applySlot(sw1Slot, weapon3 ? w3Slot : w1Slot);\r\n\t\t\t\t\tthis.applySlot(sw3Slot, weapon3 ? w1Slot : w3Slot);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.applyBone(sw6Bone, weapon3 ? w3Bone : w6Bone, false);\r\n\t\t\t\t\tthis.applyBone(sw3Bone, weapon3 ? w6Bone : w3Bone, false);\r\n\r\n\t\t\t\t\tthis.applySlot(sw6Slot, weapon3 ? w3Slot : w6Slot);\r\n\t\t\t\t\tthis.applySlot(sw3Slot, weapon3 ? w6Slot : w3Slot);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 处理Clothes6问题\r\n\t\tif (part.partType.isClothes) {\r\n\t\t\tconst c6 = \"clothes_6\", c4 = \"clothes_4\";\r\n\t\t\tconst isC6 = !!this.findSlot(c6).getAttachment();\r\n\t\t\tconst isC1 = !!this.findSlot(c4).getAttachment();\r\n\t\t\tif ((isC6 || isC1) && !(isC6 && isC1)) {\r\n\t\t\t\tconst clothes6 = this.calcClothes6(part);\r\n\r\n\t\t\t\tconst sc6Bone = this.findBone(c6, true), sc1Bone = this.findBone(c4, true);\r\n\t\t\t\tconst sc6Slot = this.findSlot(c6, true), sc1Slot = this.findSlot(c4, true);\r\n\r\n\t\t\t\tconst c6Bone = this.findBone(c6), c1Bone = this.findBone(c4);\r\n\t\t\t\tconst c6Slot = this.findSlot(c6), c1Slot = this.findSlot(c4);\r\n\r\n\t\t\t\tthis.applyBone(sc6Bone, clothes6 ? c1Bone : c6Bone, false);\r\n\t\t\t\tthis.applyBone(sc1Bone, clothes6 ? c6Bone : c1Bone, false);\r\n\r\n\t\t\t\tthis.applySlot(sc6Slot, clothes6 ? c1Slot : c6Slot);\r\n\t\t\t\tthis.applySlot(sc1Slot, clothes6 ? c6Slot : c1Slot);\r\n\r\n\t\t\t\tif (isC1 && clothes6) { // 失败的尝试\r\n\t\t\t\t\t// c6Bone.data.x = c1Bone.data.x; // SpineUtils.assignBone(c6Bone, c1Bone);\r\n\t\t\t\t\t// c6Bone.data.y = c1Bone.data.y;\r\n\t\t\t\t}\r\n\t\t\t\tif (isC6 && clothes6) { // 失败的尝试\r\n\t\t\t\t\t// c1Bone.data.x = c6Bone.data.x; // SpineUtils.assignBone(c6Bone, c1Bone);\r\n\t\t\t\t\t// c1Bone.data.y = c6Bone.data.y;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// this.transformBone(c1Bone, scale, offset);\r\n\t\t\t\t// this.transformBone(c6Bone, scale, offset);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n\r\nexport class SpineUtils {\r\n\r\n\t// region 槽控制\r\n\r\n\t// region 槽名称控制\r\n\r\n\t/**\r\n\t * 获取指定类型指定骨骼的槽名字序列\r\n\t */\r\n\tpublic static getSlotNames(partType: PartType) {\r\n\r\n\t\tconst res = [];\r\n\t\tconst config = configMgr().config(PartConfig);\r\n\t\tconst orders = config.slotOrders;\r\n\t\tconst map = config.slotNameMap;\r\n\r\n\t\tconst slots = Object.keys(orders).map(\r\n\t\t\tkey => [key, map[key] || key]);\r\n\r\n\t\t// 在不影响骨骼名情况下添加部件\r\n\t\tslots.forEach(slot => {\r\n\t\t\tif (partType.name == slot[1].split('_')[0])\r\n\t\t\t\tres.push(slot[0]);\r\n\t\t});\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取指定类型指定索引的槽名字\r\n\t */\r\n\tpublic static getSlotName(partType: PartType, index: number = 0) {\r\n\t\treturn partType.name + \"_\" + index;\r\n\t}\r\n\r\n\t// /**\r\n\t//  * 获取指定类型指定索引的槽名字\r\n\t//  */\r\n\t// public static getHeroSlotName(heroTypeOrId: HeroType | number,\r\n\t// \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpartTypeOrName: PartType | string, index: number = 0) {\r\n\t//\r\n\t// \tconst hid = (typeof heroTypeOrId === \"number\" ?\r\n\t// \t\theroTypeOrId : heroTypeOrId.id) + 1;\r\n\t// \tconst name = typeof partTypeOrName === \"string\" ?\r\n\t// \t\tpartTypeOrName : this.getSlotName(partTypeOrName, index)\r\n\t//\r\n\t// \treturn hid + \"_\" + name;\r\n\t// }\r\n\r\n\t// endregion\r\n\r\n\t// region 槽动态控制\r\n\r\n\t/**\r\n\t * 赋值骨头变换信息\r\n\t */\r\n\tpublic static assignSlot(slot: Slot, targetSlot: Slot) {\r\n\t\tif (!targetSlot || slot == targetSlot) return targetSlot;\r\n\r\n\t\tconst dataKeys: (keyof SlotData)[] = [\r\n\t\t\t\"color\", \"darkColor\", \"blendMode\"];\r\n\r\n\t\ttargetSlot.data = Object.assign({}, targetSlot.data);\r\n\t\t// @ts-ignore\r\n\t\tdataKeys.forEach(key => targetSlot.data[key] = slot.data[key]);\r\n\t\ttargetSlot.setToSetupPose();\r\n\r\n\t\ttargetSlot.setAttachment(slot.getAttachment()?.copy())\r\n\r\n\t\treturn targetSlot;\r\n\t}\r\n\r\n\t/**\r\n\t * 判断绘制顺序\r\n\t */\r\n\tpublic static judgeDrawOrder(slot: Slot, skeleton: Skeleton) {\r\n\t\tconst sOrder = skeleton.drawOrder;\r\n\t\tconst sSlot = skeleton.findSlot(slot.data.name);\r\n\t\tif (sSlot) return sOrder.indexOf(sSlot);\r\n\r\n\t\tconst order = slot.getSkeleton().drawOrder;\r\n\t\tconst index = order.indexOf(slot);\r\n\r\n\t\tlet downMax = 0, upMin = sOrder.length - 1;\r\n\t\tfor (let i = index - 1; i >= 0; --i) {\r\n\t\t\tconst sName = order[i].data.name;\r\n\t\t\tconst tmpSlot = skeleton.findSlot(sName);\r\n\t\t\tif (!tmpSlot) continue;\r\n\r\n\t\t\tdownMax = Math.max(downMax, sOrder.indexOf(tmpSlot));\r\n\t\t}\r\n\t\tfor (let i = index + 1; i < order.length; ++i) {\r\n\t\t\tconst sName = order[i].data.name;\r\n\t\t\tconst tmpSlot = skeleton.findSlot(sName);\r\n\t\t\tif (!tmpSlot) continue;\r\n\r\n\t\t\tupMin = Math.min(upMin, sOrder.indexOf(tmpSlot));\r\n\t\t}\r\n\r\n\t\treturn Math.ceil((downMax + upMin) / 2);\r\n\t}\r\n\r\n\t/**\r\n\t * 复制槽到骨骼中\r\n\t */\r\n\tpublic static copySlotToSkeleton(\r\n\t\tslot: Slot, skeleton: Skeleton, drawOrder?: number) {\r\n\t\tif (drawOrder === undefined)\r\n\t\t\tdrawOrder = this.judgeDrawOrder(slot, skeleton);\r\n\r\n\t\tlet sSlot = skeleton.findSlot(slot.data.name);\r\n\t\tif (!sSlot) { // 如果没有指定的槽\r\n\t\t\tconst sBone = skeleton.findBone(slot.bone.data.name);\r\n\t\t\tif (!sBone) return null; // 如果没有指定的骨头\r\n\r\n\t\t\tsSlot = this.createSlot(skeleton,\r\n\t\t\t\tsBone, slot.data.name, drawOrder);\r\n\t\t}\r\n\t\treturn sSlot;\r\n\t}\r\n\r\n\t/**\r\n\t * 创建一个Slot\r\n\t */\r\n\tpublic static createSlot(skeleton: Skeleton, bone: Bone, name: string, drawOrder?: number) {\r\n\t\tconst len = skeleton.slots.length;\r\n\t\tconst data = new SlotData(len, name, bone.data);\r\n\t\tconst res = new Slot(data, bone);\r\n\r\n\t\tif (drawOrder === undefined)\r\n\t\t\tskeleton.drawOrder.push(res);\r\n\t\telse skeleton.drawOrder.splice(drawOrder, 0, res);\r\n\t\tskeleton.slots.push(res);\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 复制一个Slot\r\n\t */\r\n\tpublic static copySlot(skeleton: Skeleton, slot: Slot, name: string) {\r\n\t\treturn this.createSlot(skeleton, slot.bone, name,\r\n\t\t\tskeleton.drawOrder.indexOf(slot) + 1);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// endregion\r\n\r\n\t// region 附件控制\r\n\r\n\t/**\r\n\t * 调整附件缩放\r\n\t */\r\n\tpublic static scaleAttachment(bone: Bone, att: RegionAttachment,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscaleX: number, scaleY: number) {\r\n\t\tatt.scaleX = scaleX;\r\n\t\tatt.scaleY = scaleY;\r\n\r\n\t\tthis.updateAttachmentOffset(bone, att);\r\n\t}\r\n\t// 参考源码为RegionAttachment.updateOffset\r\n\tprivate static updateAttachmentOffset(bone: Bone, att: RegionAttachment) {\r\n\t\tconst regionScaleX = att.width / att.region.originalWidth * att.scaleX;\r\n\t\tconst regionScaleY = att.height / att.region.originalHeight * att.scaleY;\r\n\r\n\t\tconst localX = -att.width / 2 * att.scaleX + att.region.offsetX * regionScaleX;\r\n\t\tconst localY = -att.height / 2 * att.scaleY + att.region.offsetY * regionScaleY;\r\n\t\tconst localX2 = localX + att.region.width * regionScaleX;\r\n\t\tconst localY2 = localY + att.region.height * regionScaleY;\r\n\t\tconst radians = att.rotation * Math.PI / 180;\r\n\t\tconst cos = Math.cos(radians);\r\n\t\tconst sin = Math.sin(radians);\r\n\r\n\t\t// const bonePos = this.boneDataWorldPos(bone);\r\n\t\t// const dx = att.x - bone.data.x;\r\n\t\t// const dy = att.y - bone.data.y;\r\n\r\n\t\tconst x = att.scaleX * att.x; // + (att.scaleX - 1) * att.x;\r\n\t\tconst y = att.scaleY * att.y; // + (att.scaleY - 1) * att.y;\r\n\r\n\t\tconst localXCos = localX * cos + x;\r\n\t\tconst localXSin = localX * sin;\r\n\t\tconst localYCos = localY * cos + y;\r\n\t\tconst localYSin = localY * sin;\r\n\t\tconst localX2Cos = localX2 * cos + x;\r\n\t\tconst localX2Sin = localX2 * sin;\r\n\t\tconst localY2Cos = localY2 * cos + y;\r\n\t\tconst localY2Sin = localY2 * sin;\r\n\t\tconst offset = att.offset;\r\n\t\toffset[RegionAttachment.OX1] = localXCos - localYSin;\r\n\t\toffset[RegionAttachment.OY1] = localYCos + localXSin;\r\n\t\toffset[RegionAttachment.OX2] = localXCos - localY2Sin;\r\n\t\toffset[RegionAttachment.OY2] = localY2Cos + localXSin;\r\n\t\toffset[RegionAttachment.OX3] = localX2Cos - localY2Sin;\r\n\t\toffset[RegionAttachment.OY3] = localY2Cos + localX2Sin;\r\n\t\toffset[RegionAttachment.OX4] = localX2Cos - localYSin;\r\n\t\toffset[RegionAttachment.OY4] = localYCos + localX2Sin;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 骨头控制\r\n\r\n\t// region 骨头名称控制\r\n\r\n\t/**\r\n\t * 获取指定类型指定骨骼的骨头名字序列\r\n\t */\r\n\tpublic static getBoneNames(partType: PartType) {\r\n\r\n\t\tconst res = [];\r\n\r\n\t\tconst config = configMgr().config(PartConfig);\r\n\t\tconst orders = config.slotOrders;\r\n\t\tconst map = config.slotNameMap;\r\n\r\n\t\tconst slots = Object.keys(orders).map(\r\n\t\t\tkey => [key, map[key] || key]);\r\n\r\n\t\t// 在不影响骨骼名情况下添加部件\r\n\t\tslots.forEach(slot => {\r\n\t\t\tif (partType.name == slot[1].split('_')[0])\r\n\t\t\t\tres.push(slot[0]);\r\n\t\t});\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取指定类型指定索引的骨头名字\r\n\t */\r\n\tpublic static getBoneName(partType: PartType, index: number = 0) {\r\n\t\treturn partType.name + \"_\" + index;\r\n\t}\r\n\r\n\t// /**\r\n\t//  * 获取指定类型指定索引的槽名字\r\n\t//  */\r\n\t// public static getHeroSlotName(heroTypeOrId: HeroType | number,\r\n\t// \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpartTypeOrName: PartType | string, index: number = 0) {\r\n\t//\r\n\t// \tconst hid = (typeof heroTypeOrId === \"number\" ?\r\n\t// \t\theroTypeOrId : heroTypeOrId.id) + 1;\r\n\t// \tconst name = typeof partTypeOrName === \"string\" ?\r\n\t// \t\tpartTypeOrName : this.getSlotName(partTypeOrName, index)\r\n\t//\r\n\t// \treturn hid + \"_\" + name;\r\n\t// }\r\n\r\n\t// endregion\r\n\r\n\t/**\r\n\t * 获取骨骼的绝对世界坐标\r\n\t */\r\n\tpublic static boneDataWorldPos(bone: Bone | BoneData) {\r\n\t\tif (bone instanceof Bone) bone = bone.data;\r\n\t\tconst res = Vec2.ZERO.clone();\r\n\t\tdo {\r\n\t\t\tres.x += bone.x; res.y += bone.y;\r\n\t\t\tbone = bone.parent;\r\n\t\t} while (bone.parent);\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取Skeleton中的spine.Skeleton数据\r\n\t */\r\n\tpublic static skeleton(sk: sp.Skeleton): Skeleton {\r\n\t\treturn sk[\"_skeleton\"];\r\n\t}\r\n\r\n\t/**\r\n\t * 寻找骨头的父亲\r\n\t */\r\n\tpublic static findBoneParent(bone: Bone, skeleton: Skeleton)\r\n\t\t: {bone?: Bone, parent?: Bone, sParent?: Bone} {\r\n\t\tconst parent = bone.parent;\r\n\t\tif (!parent) return null;\r\n\t\tconst sParent = skeleton.findBone(parent.data.name);\r\n\t\treturn sParent ? {bone, parent, sParent} :\r\n\t\t\tthis.findBoneParent(parent, skeleton);\r\n\t}\r\n\r\n\t/**\r\n\t * 赋值骨头变换信息\r\n\t */\r\n\tpublic static assignBone(bone: Bone, targetBone: Bone) {\r\n\t\tif (!targetBone || bone == targetBone) return targetBone;\r\n\r\n\t\tconst dataKeys: (keyof BoneData)[] = [\r\n\t\t\t\"x\", \"y\", \"length\", \"rotation\", \"scaleX\", \"scaleY\",\r\n\t\t\t\"shearX\", \"shearY\", \"color\", \"transformMode\", \"skinRequired\"];\r\n\r\n\t\ttargetBone.data = Object.assign({}, targetBone.data);\r\n\t\t// @ts-ignore\r\n\t\tdataKeys.forEach(key => targetBone.data[key] = bone.data[key]);\r\n\t\ttargetBone.setToSetupPose();\r\n\t\treturn targetBone;\r\n\t}\r\n\r\n\t/**\r\n\t * 复制骨头到骨骼中\r\n\t */\r\n\tpublic static copyBoneToSkeleton(bone: Bone, skeleton: Skeleton) {\r\n\t\t// 判断需要复制的骨头是否已经在骨骼中存在\r\n\t\tconst sBone = skeleton.findBone(bone.data.name);\r\n\t\tif (!sBone) { // 如果不存在，寻找骨骼中的父节点\r\n\t\t\tconst parentInfo = this.findBoneParent(bone, skeleton);\r\n\t\t\tif (!parentInfo) return; // 如果找不到父节点，终止操作\r\n\r\n\t\t\t// 执行copy操作，因为所有子节点均为空，直接copy即可\r\n\t\t\treturn this.copyBone(parentInfo.bone, parentInfo.sParent);\r\n\t\t} else // 如果存在，执行replace操作\r\n\t\t\treturn this.replaceBone(bone, sBone, false);\r\n\t}\r\n\r\n\t/**\r\n\t * 复制骨头\r\n\t */\r\n\tpublic static copyBone(bone: Bone, parent: Bone) {\r\n\t\tconst target = parent.skeleton;\r\n\r\n\t\tconst res = new Bone(bone.data, target, parent);\r\n\t\tbone.children.forEach(cBone => this.copyBone(cBone, res));\r\n\r\n\t\tparent.children.push(res);\r\n\r\n\t\ttarget.bones.push(res);\r\n\t\ttarget.sortBone(res);\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 替换骨头\r\n\t */\r\n\tpublic static replaceBone(bone: Bone, targetBone: Bone, assign: boolean = true) {\r\n\t\tif (!targetBone.parent) throw \"无法替换根骨骼\";\r\n\r\n\t\tif (assign) this.assignBone(bone, targetBone);\r\n\r\n\t\ttargetBone.active = true;\r\n\t\t// 先将所有孩子禁用\r\n\t\ttargetBone.children.forEach(c => c.active = false);\r\n\r\n\t\tbone.children.forEach(c => {\r\n\t\t\tconst name = c.data.name;\r\n\t\t\tconst tc = targetBone.children.find(tc => tc.data.name == name);\r\n\t\t\tif (tc) // 如果存在名字相同的孩子，使用replace\r\n\t\t\t\tthis.replaceBone(c, tc);\r\n\t\t\telse // 否则，使用copy\r\n\t\t\t\tthis.copyBone(c, targetBone);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * 添加部件\r\n\t */\r\n\tpublic static addPart(heroType: HeroType,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttarget: Skeleton, source: Skeleton, part: Part) {\r\n\t\tconst pHeroType = part.heroType;\r\n\t\tconst scale = heroType.scale / pHeroType.scale;\r\n\r\n\t\tpart.slotNames.forEach(name => {\r\n\t\t\tconst sSlot = source.findSlot(name);\r\n\t\t\tlet tSlot = target.findSlot(name), tBone;\r\n\t\t\tif (!tSlot) {\r\n\t\t\t\ttBone = target.findBone(sSlot.bone.data.name);\r\n\t\t\t\tif (!tBone) return;\r\n\r\n\t\t\t\ttSlot = this.createSlot(target, tBone, name);\r\n\t\t\t} else tBone = tSlot.bone;\r\n\r\n\t\t\tconst att = sSlot.getAttachment().copy() as RegionAttachment;\r\n\t\t\t// this.scaleAttachment(tBone, att, scale, scale);\r\n\t\t\ttSlot.setAttachment(att);\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * 添加部件\r\n\t */\r\n\tpublic static removePart(target: Skeleton, part: Part) {\r\n\t\tpart.slotNames.forEach(name =>\r\n\t\t\ttarget.findSlot(name)?.setAttachment(null)\r\n\t\t);\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 附件控制\r\n\r\n\t/*\r\n\t * Texture2D转化为TextureAtlasRegion\r\n\t */\r\n \tpublic static changeTexture2DToRegion(texture: Texture2D) {\r\n\r\n\t\t// texture[\"_premultiplyAlpha\"] = (true);\r\n\t\tlet skeletonTexture = new sp[\"SkeletonTexture\"]();\r\n\t\tskeletonTexture.setRealTexture(texture);\r\n\r\n\t\tlet page = new sp.spine.TextureAtlasPage();\r\n\t\tpage.name = texture.name;\r\n\t\tpage.uWrap = sp.spine.TextureWrap.ClampToEdge;\r\n\t\tpage.vWrap = sp.spine.TextureWrap.ClampToEdge;\r\n\t\tpage.texture = skeletonTexture;\r\n\t\tpage.texture.setWraps(page.uWrap, page.vWrap);\r\n\t\tpage.width = texture.width;\r\n\t\tpage.height = texture.height;\r\n\r\n\t\tlet region = new sp.spine.TextureAtlasRegion();\r\n\t\tregion.page = page;\r\n\t\tregion.width = texture.width;\r\n\t\tregion.height = texture.height;\r\n\t\tregion.originalWidth = texture.width;\r\n\t\tregion.originalHeight = texture.height;\r\n\r\n\t\tregion.rotate = false;\r\n\t\tregion.u = 0;\r\n\t\tregion.v = 0;\r\n\t\tregion.u2 = 1;\r\n\t\tregion.v2 = 1;\r\n\t\tregion.texture = skeletonTexture;\r\n\r\n\t\treturn region;\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n","import Label = cc.Label;\r\nimport Animation = cc.Animation;\r\nimport Node = cc.Node;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class StageProgressController extends cc.Component {\r\n\r\n    @property(Animation)\r\n    animation: Animation = null;\r\n    @property(Label)\r\n    value: Label = null;\r\n    @property([Node])\r\n    enemies: Node[] = [];\r\n\r\n    @property(Number)\r\n    speed: number = 2.5; // 配置移动速度，完整移动动画时间 1s / speed\r\n    stageIndex: number = 1;\r\n    enemyIndex: number = 0;\r\n    private isCurrent: boolean = false;\r\n    private position: number = 2;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    init(index: number, position: number = 2) {\r\n        this.stageIndex = index;\r\n        this.value.string = this.stageIndex + \"\";\r\n        this.position = position;\r\n        this.node.x = 80 * position;\r\n        this.node.y = 0;\r\n    }\r\n\r\n    update (dt) {\r\n        this.updateNode(dt);\r\n        this.updateAnimation();\r\n        this.updateEnemies();\r\n    }\r\n\r\n    updateNode(dt: number) {\r\n        if (this.node.x > 80 * this.position) this.node.x = Math.max(this.node.x - 80 * dt * this.speed, 80 * this.position);\r\n        else this.node.x = Math.min(this.node.x + 80 * dt * this.speed, 80 * this.position);\r\n        let currentPosition = Math.abs(this.node.x);\r\n        this.node.scale = 1 - 3 * currentPosition / 1600;\r\n        this.node.opacity = 255 - 255 * Math.pow(currentPosition / 160, 2);\r\n    }\r\n\r\n    updateAnimation() {\r\n        if (Math.abs(this.node.x) <= 32) {\r\n            if (!this.isCurrent) {\r\n                this.animation.play(\"stageEnter\", 0);\r\n                this.isCurrent = true;\r\n            }\r\n        }\r\n        else {\r\n            if (this.isCurrent) {\r\n                this.animation.play(\"stageLeave\", 0);\r\n                this.isCurrent = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    updateEnemies() {\r\n        this.enemies.forEach((e, i) => e.active = i < this.enemyIndex);\r\n    }\r\n\r\n    nextStage() {\r\n        this.position--;\r\n        if (this.position < -2 && this.node.opacity == 0) this.node.destroy();\r\n    }\r\n\r\n    lastStage() {\r\n        this.position++;\r\n        if (this.position > 2 && this.node.opacity == 0) this.node.destroy();\r\n    }\r\n\r\n}\r\n","import HeroInfoDisplay from \"../HeroInfoDisplay\";\r\nimport CultivateWindowController from \"../CultivateWindowController\";\r\nimport {autoUnitConvert} from \"../../../../../Utils/NumberUtils\";\r\nimport {playerMgr} from \"../../../../PlayerModule/Managers/PlayerManager\";\r\nimport {PlayerMoney} from \"../../../../EconomicModule/Data/PlayerMoney\";\r\nimport Sprite = cc.Sprite;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport Node = cc.Node;\r\nimport Label = cc.Label;\r\nimport {heroMgr} from \"../../../../HeroModule/Managers/HeroManager\";\r\nimport Button = cc.Button;\r\nimport {battleScene} from \"../../../../../Scenes/BattleScene\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class StarUpWindowDisplay extends cc.Component {\r\n\r\n    // region Background中组件及资源引用\r\n\r\n    @property(HeroInfoDisplay)\r\n    heroInfo: HeroInfoDisplay = null;\r\n\r\n    // endregion\r\n\r\n    // region Content中组件及资源引用\r\n\r\n    @property([Sprite])\r\n    currentStarSprites: Sprite[] = [];\r\n    @property([Sprite])\r\n    nextStarSprites: Sprite[] = [];\r\n    @property(Label)\r\n    tipsValue: Label = null;\r\n    @property([SpriteFrame])\r\n    starPictures: SpriteFrame[] = [];\r\n    @property([Node])\r\n    skillPictureNodes: Node[] = [];\r\n    @property([Node])\r\n    skillLevelNodes: Node[] = [];\r\n    @property(Label)\r\n    fragmentLabel: Label = null;\r\n    @property(Node)\r\n    starUpNode: Node = null;\r\n    starUpSprite: Sprite = null;\r\n    starUpButton: Button = null;\r\n    @property([SpriteFrame])\r\n    upgradePictures: SpriteFrame[] = [];\r\n\r\n    // endregion\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    private cultivateController: CultivateWindowController = null;\r\n\r\n    start () {\r\n        this.cultivateController = battleScene().cultivateWindow;\r\n        this.starUpSprite = this.starUpNode.getComponent(Sprite);\r\n        this.starUpButton = this.starUpNode.getComponent(Button);\r\n    }\r\n\r\n    // region 更新控制\r\n\r\n    update (dt) {\r\n        if (this.cultivateController.refreshHero) {\r\n            this.heroInfo.refresh();\r\n            this.updateLabels();\r\n            this.updatePictures();\r\n            this.cultivateController.refreshHero = false;\r\n        }\r\n    }\r\n\r\n    @autoUnitConvert\r\n    updateLabels() {\r\n        let hero = this.cultivateController.currentHero;\r\n        if (!hero) return;\r\n        this.tipsValue.string = hero.star.level * 20 + \"%\";\r\n        const pDiamond = playerMgr().getPlayerData(PlayerMoney).diamond;\r\n        if (hero.star.level == 5) {\r\n            this.fragmentLabel.string = pDiamond.toString() + \"/0\";\r\n            return;\r\n        }\r\n        const diamond = hero.star.costs().diamond.value;\r\n        this.fragmentLabel.string = pDiamond.toString() + \"/\" + diamond.toString();\r\n    }\r\n\r\n    updatePictures() {\r\n        let hero = this.cultivateController.currentHero;\r\n        if (!hero) return;\r\n        this.currentStarSprites.forEach((s, i) => {\r\n            s.spriteFrame = this.starPictures[i < hero.star.level ? 1 : 0];\r\n        });\r\n        this.nextStarSprites.forEach((s, i) => {\r\n            s.spriteFrame = this.starPictures[i < hero.star.level + 1 ? 1 : 0];\r\n        });\r\n        this.skillLevelNodes.forEach((s, i) => {\r\n            s.active = i >= hero.star.level;\r\n        });\r\n        this.skillPictureNodes.forEach((s, i) => {\r\n            s.active = i >= hero.star.level;\r\n        });\r\n\r\n        const cond = hero.star.conditions().judge();\r\n        this.starUpButton.interactable = cond;\r\n        this.starUpSprite.spriteFrame = this.upgradePictures[cond ? 0 : 1];\r\n    }\r\n\r\n    protected onEnable() {\r\n        this.heroInfo.node.active = true;\r\n        this.heroInfo.refresh();\r\n    }\r\n\r\n    // endregion\r\n\r\n    onHeroChange() {\r\n        this.cultivateController.refreshHero = true;\r\n    }\r\n\r\n    // region 按钮点击回调\r\n\r\n    starUpBtn() {\r\n        heroMgr().starUp(this.cultivateController.currentHero).then(res => {\r\n            this.onHeroChange();\r\n            this.heroInfo.playAnimation(\"effectStarUp\");\r\n        });\r\n    }\r\n\r\n    // endregion\r\n\r\n}\r\n","import {dataPK, field, GameData} from \"./BaseData\";\r\nimport {Constructor} from \"../../../Utils/BaseContext\";\r\nimport {dataMgr} from \"../Managers/DataManager\";\r\nimport {DataLoader} from \"../Utils/DataLoader\";\r\n\r\nexport function data<T extends GameData>(name: string): any {\r\n\treturn (clazz: Constructor<T>) => {\r\n\t\tdataMgr().registerData(clazz, name).then();\r\n\t}\r\n}\r\n\r\nexport abstract class StaticData extends GameData {\r\n\r\n\t@field @dataPK\r\n\tpublic id: number = -1;\r\n\t@field(String)\r\n\tpublic displayName: string = null;\r\n\r\n\t/**\r\n\t * 业务主键\r\n\t */\r\n\tpublic get dataId(): number { return this.id }\r\n\r\n\t/**\r\n\t * 多语言键（默认使用类名）\r\n\t */\r\n\tpublic get languageKey(): string {\r\n\t\t// @ts-ignore\r\n\t\treturn dataMgr().getDataName(this.constructor);\r\n\t}\r\n\r\n\t/**\r\n\t * 实际显示名称\r\n\t */\r\n\tpublic getDisplayName() {\r\n\t\treturn this.displayName || `\\\\L[${this.languageKey + this.id}]`;\r\n\t}\r\n\r\n}\r\n","import HeroInfoDisplay from \"../HeroInfoDisplay\";\r\nimport Label = cc.Label;\r\nimport CultivateWindowController from \"../CultivateWindowController\";\r\nimport {battleScene} from \"../../../../../Scenes/BattleScene\";\r\nimport Slider = cc.Slider;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SummonWindowDisplay extends cc.Component {\r\n\r\n    // region Background中组件及资源引用\r\n\r\n    @property(HeroInfoDisplay)\r\n    heroInfo: HeroInfoDisplay = null;\r\n    @property(Label)\r\n    stablePrice: Label = null;\r\n\r\n    // endregion\r\n\r\n    // region Content中组件及资源引用\r\n\r\n    @property(Label)\r\n    USTDValues: Label[] = [];\r\n    @property(Label)\r\n    USTDBalance: Label = null;\r\n    @property(Label)\r\n    HCTValues: Label[] = [];\r\n    @property(Label)\r\n    HCTBalance: Label = null;\r\n    @property(Label)\r\n    pricePercent: Label = null;\r\n    @property(Slider)\r\n    priceSlider: Slider = null;\r\n\r\n    // endregion\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    private cultivateController: CultivateWindowController = null;\r\n\r\n    start () {\r\n        this.cultivateController = battleScene().cultivateWindow;\r\n    }\r\n\r\n    // region 更新控制\r\n\r\n    update (dt) {\r\n        this.updateLabels();\r\n        this.updatePictures();\r\n    }\r\n\r\n    updateLabels() {\r\n        let percent = this.priceSlider.progress;\r\n        this.USTDValues.forEach(v => v.string = Math.floor(20 * percent).toString());\r\n        this.HCTValues.forEach(v => v.string = Math.floor(400 * percent).toString());\r\n\r\n        this.pricePercent.string = Math.floor(100 * percent) + \"%\";\r\n    }\r\n\r\n    updatePictures() {\r\n\r\n    }\r\n\r\n    protected onEnable() {\r\n        this.heroInfo.node.active = false;\r\n    }\r\n\r\n    // endregion\r\n\r\n    // region 组件点击回调\r\n\r\n    summonBtn() {\r\n\r\n    }\r\n\r\n    // endregion\r\n}\r\n","import {PlayerJob} from \"../Modules/EconomicModule/Data/PlayerJob\";\r\nimport {playerMgr} from \"../Modules/PlayerModule/Managers/PlayerManager\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class TestAutoProfit extends cc.Component {\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    addTime() {\r\n        playerMgr().getPlayerData(PlayerJob).autoProfitTime = 15000 + Math.max(Date.now(), playerMgr().getPlayerData(PlayerJob).autoProfitTime);\r\n    }\r\n\r\n}\r\n","import BattleDisplay from \"../Modules/BattleModule/Components/BattleDisplay\";\r\nimport Prefab = cc.Prefab;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class TestGetHero extends cc.Component {\r\n\r\n\t@property(BattleDisplay)\r\n\tbd: BattleDisplay = null;\r\n\t@property(Prefab)\r\n\thit: Prefab = null;\r\n\t@property(Boolean)\r\n\tshouldUpdate: boolean = false;\r\n\r\n\tpublic getOne(){\r\n\t\tconsole.log(\"One Hero:\", heroMgr().getOneFromServer(\"140\"));\r\n\t}\r\n\r\n\tpublic getList(){\r\n\t\tconsole.log(\"Hero List:\", heroMgr().getListFromServer());\r\n\t}\r\n\r\n\tpublic getCount(){\r\n\t\tconsole.log(\"Hero Count\", heroMgr().getCountFromServer());\r\n\t}\r\n\r\n\tpublic trySynchronize(){\r\n\t\theroMgr().synchronizeAllHeroes().then();\r\n\t}\r\n\r\n\tpublic async testBattle() {\r\n\r\n\t\tawait heroMgr().getOneFromServer(\"99\");\r\n\t\tawait heroMgr().getOneFromServer(\"118\");\r\n\t\tawait heroMgr().getOneFromServer(\"121\");\r\n\r\n\t\tconst battle = await battleMgr().startMainBattle();\r\n\t\tthis.bd.setItem(battle);\r\n\t}\r\n\r\n\tpublic async testCopy() {\r\n\t\tawait heroMgr().getOneFromServer(\"121\");\r\n\t\tconst battle = await battleMgr().startCopy();\r\n\t\tthis.bd.setItem(battle);\r\n\t}\r\n\r\n\tpublic testHit(){\r\n\t\tlet hitNode = cc.instantiate(this.hit);\r\n\t\thitNode.parent = this.node;\r\n\t\thitNode.getComponent(HitDamage).setRange(200, 200);\r\n\t}\r\n\r\n\tprotected update(dt: number) {\r\n\t\t// if (this.shouldUpdate)\r\n\t\t// \tupdateContext(dt);\r\n\t}\r\n\r\n\tpublic testRealBattle() {\r\n\t\theroMgr().getListFromServer().then(res => {\r\n\t\t\tthis.testBattle().then();\r\n\t\t})\r\n\t}\r\n\r\n\tpublic testRefreshRank() {\r\n\t\t// HeroInterface.RefreshAllRank().then(res => console.log(res));\r\n\t\tHeroInterface.EmptyCache().then(res => console.log(res));\r\n\t}\r\n}\r\n\r\nimport {heroMgr} from \"../Modules/HeroModule/Managers/HeroManager\";\r\nimport {battleMgr} from \"../Modules/BattleModule/Managers/BattleManager\";\r\nimport {HeroInterface} from \"../Modules/HeroModule/Common/HeroCommon\";\r\nimport HitDamage from \"../Modules/BattleModule/Components/IndependentController/HitDamage\";\r\n","import {BaseData, field} from \"../Modules/CoreModule/Data/BaseData\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class TestHeroItem extends BaseData {\r\n\r\n    @field\r\n    name: string = null;\r\n    @field\r\n    atk: number = 0;\r\n    @field\r\n    def: number = 0;\r\n    @field\r\n    mhp: number = 0;\r\n    @field\r\n    level: number = 1;\r\n\r\n    @field\r\n    quality: number = 0;\r\n    @field\r\n    stars: number = 1;\r\n    @field\r\n    scissorsType: number = 0;\r\n\r\n    getRealUpgrade(): number {\r\n        return this.level * 1000 + 2500;\r\n    }\r\n\r\n    getRealAttack(): number {\r\n        return this.atk * this.level;\r\n    }\r\n\r\n    getRealDefense(): number {\r\n        return this.def * this.level;\r\n    }\r\n\r\n    getRealHealth(): number {\r\n        return this.mhp * this.level;\r\n    }\r\n\r\n\r\n    public static testData(): TestHeroItem {\r\n        let res = new TestHeroItem();\r\n        res.name = \"Little Y\";\r\n        res.atk = 400;\r\n        res.def = 120;\r\n        res.mhp = 15000;\r\n        res.quality = Math.floor(Math.random() * 4);\r\n        res.stars = Math.floor(Math.random() * 6);\r\n        res.scissorsType = Math.floor(Math.random() * 3);\r\n        return res;\r\n    }\r\n\r\n}\r\n","import {BasePlatform, platform} from \"./BasePlatform\";\r\nimport {Platform} from \"../Modules/CoreModule/Managers/PlatformManager\";\r\nimport {MathUtils} from \"../Utils/MathUtils\";\r\n\r\nconst OpenidKey = \"openid\";\r\n\r\n@platform('test')\r\nexport class TestPlatform extends BasePlatform {\r\n\r\n\tpublic constructor(type: Platform) {\r\n\t\tsuper(type);\r\n\t}\r\n\r\n\t// region 用户信息\r\n\r\n\t/**\r\n\t * 获取Openid\r\n\t */\r\n\tpublic async getOpenid() : Promise<string> {\r\n\t\tlet openid = cc.sys.localStorage.getItem(OpenidKey);\r\n\t\tif (!openid) {\r\n\t\t\topenid = \"test_\" + MathUtils.randomString()\r\n\t\t\tcc.sys.localStorage.setItem(OpenidKey, openid);\r\n\t\t}\r\n\t\treturn openid;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取用户信息\r\n\t */\r\n\tpublic async getUserInfo() : Promise<any> {\r\n\t\treturn {}; // 空对象\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\t// region 广告\r\n\r\n\t// initAds() {}\r\n\r\n\tprotected async doShowAds() : Promise<boolean> {\r\n\t\tif (!await super.doShowAds()) return false;\r\n\r\n\t\treturn await new Promise((resolve) => {\r\n\t\t\talert(\"当前平台为浏览器，假装这是广告窗口。关闭后过2秒就当作看完了广告\");\r\n\t\t\t// 假设2s后看完了广告\r\n\t\t\tsetTimeout(() => resolve(true), 2000);\r\n\t\t});\r\n\t}\r\n\r\n\t// endregion\r\n\r\n}\r\n","import Skeleton = sp.Skeleton;\r\nimport {SpineUtils} from \"../Utils/SpineUtils\";\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport Texture2D = cc.Texture2D;\r\nimport {partRepo} from \"../Modules/HeroModule/Data/Part\";\r\nimport {partTypeRepo} from \"../Modules/HeroModule/Data/PartType\";\r\nimport {heroTypeRepo} from \"../Modules/HeroModule/Data/HeroType\";\r\nimport EditBox = cc.EditBox;\r\nimport {EditorInterface} from \"../Modules/HeroModule/Common/EditorCommon\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class TestSpine extends cc.Component {\r\n\r\n\t@property(Skeleton)\r\n\tsk: Skeleton = null;\r\n\t@property(SpriteFrame)\r\n\tpic1: SpriteFrame = null;\r\n\t@property(SpriteFrame)\r\n\tpic2: SpriteFrame = null;\r\n\r\n\t@property(EditBox)\r\n\tsource: EditBox = null;\r\n\t@property(EditBox)\r\n\tout: EditBox = null;\r\n\r\n\tstart () {\r\n\t\t// this.sk.setAnimation(0, \"stand\", true);\r\n\t\t// this.node.on(\"touchstart\", this.onTouchStart, this);\r\n\t}\r\n\r\n\t// region Import\r\n\r\n\tpublic import() {\r\n\t\tEditorInterface.ImportParts({\r\n\t\t\tsource: this.source.string,\r\n\t\t\tout: this.out.string,\r\n\t\t\tdoImport: true\r\n\t\t})\r\n\t}\r\n\r\n\t// endregion\r\n\r\n\tonTouchStart(e) {\r\n\t\tconst skPos = this.sk.node.getPosition();\r\n\t\tconst touch: cc.Touch = e.currentTouch;\r\n\t\tconst loc = touch.getLocation().clone();\r\n\t\tconst dt = loc.sub(skPos);\r\n\r\n\t\tconsole.log(\"Delta\", e, dt.x, dt.y, this.sk, cc);\r\n\r\n\t\tconst sk: sp.spine.Skeleton = this.sk[\"_skeleton\"];\r\n\r\n\t\t// const tSlot = sk.findSlot(\"hand_1\");\r\n\t\t// // @ts-ignore\r\n\t\t// const tLoc = tSlot.bone.worldToLocal({x: dt.x, y: dt.y});\r\n\t\t// console.log(\"tLoc\", tLoc, tLoc.x, tLoc.y);\r\n\t\t// const tAttach = tSlot.getAttachment() as sp.spine.RegionAttachment;\r\n\t\t// console.log(\"tAttach\", tAttach, tAttach.x, tAttach.y, tAttach.width, tAttach.height);\r\n\t\t// const tALoc = {x: tLoc.x - tAttach.x, y: tLoc.y - tAttach.y};\r\n\t\t// const dist = Math.sqrt(tALoc.x * tALoc.x + tALoc.y * tALoc.y);\r\n\t\t// const ang = Math.atan(tALoc.y / tALoc.x) / Math.PI * 180;\r\n\t\t// const newAng = ang - tAttach.rotation;\r\n\t\t// const newRad = newAng / 180 * Math.PI;\r\n\t\t// const tNewLoc = {\r\n\t\t// \tx: dist * Math.cos(newRad), y: dist * Math.sin(newRad)\r\n\t\t// };\r\n\t\t// console.log(\"tNewLoc\", tNewLoc);\r\n\r\n\t\tsk.slots.forEach((slot, i) => {\r\n\t\t\t// @ts-ignore\r\n\t\t\tconst lLoc = slot.bone.worldToLocal({x: dt.x, y: dt.y});\r\n\t\t\tconst attach = slot.getAttachment() as sp.spine.RegionAttachment;\r\n\t\t\tif (!attach) return;\r\n\r\n\t\t\tconst aLoc = {x: lLoc.x - attach.x, y: lLoc.y - attach.y};\r\n\r\n\t\t\t// const newLoc = lLoc;\r\n\r\n\t\t\t// 当前点与当前坐标系的夹角\r\n\t\t\tconst dist = Math.sqrt(aLoc.x * aLoc.x + aLoc.y * aLoc.y);\r\n\t\t\tconst ang = Math.atan(aLoc.y / aLoc.x) / Math.PI * 180;\r\n\t\t\tconst newAng = ang - attach.rotation;\r\n\t\t\tconst newRad = newAng / 180 * Math.PI;\r\n\t\t\tconst newLoc = {\r\n\t\t\t\tx: dist * Math.cos(newRad), y: dist * Math.sin(newRad)\r\n\t\t\t};\r\n\r\n\t\t\t// console.log(\"Slot1\", slot.data.name, newLoc);\r\n\t\t\t// console.log(\"Slot2\", slot.data.name, attach.x, attach.y, attach.width, attach.height);\r\n\r\n\t\t\tif (newLoc.x >= -attach.width / 2 && newLoc.x <= attach.width / 2\r\n\t\t\t\t&& newLoc.y >= -attach.height / 2 && newLoc.y <= attach.height / 2)\r\n\t\t\t\tslot.color.a = 0.5;\r\n\t\t\telse\r\n\t\t\t\tslot.color.a = 1;\r\n\r\n\t\t\t// if (newLoc.x >= attach.x && newLoc.x <= newLoc.x + attach.width\r\n\t\t\t// \t&& newLoc.y >= attach.y && newLoc.y <= newLoc.y + attach.height) {\r\n\t\t\t// \tslot.color.a = 0.5;\r\n\t\t\t// } else\r\n\t\t\t// \tslot.color.a = 1;\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tpublic color1() {\r\n\t\tconsole.log(1);\r\n\t\tthis.sk.findSlot(\"head_1\").getAttachment()[\"setRegion\"](this.CreateRegion(this.pic1.getTexture()));\r\n\t}\r\n\r\n\tpublic color2() {\r\n\t\tconsole.log(2);\r\n\t\tthis.sk.findSlot(\"head_1\").getAttachment()[\"setRegion\"](this.CreateRegion(this.pic2.getTexture()));\r\n\t}\r\n\r\n\tCreateRegion(texture: Texture2D) {\r\n\t\tlet skeletonTexture = new sp[\"SkeletonTexture\"]();\r\n\t\tskeletonTexture.setRealTexture(texture);\r\n\t\tlet page = new sp.spine.TextureAtlasPage();\r\n\t\tpage.name = texture.name;\r\n\t\tpage.uWrap = sp.spine.TextureWrap.ClampToEdge;\r\n\t\tpage.vWrap = sp.spine.TextureWrap.ClampToEdge;\r\n\t\tpage.texture = skeletonTexture;\r\n\t\tpage.texture.setWraps(page.uWrap, page.vWrap);\r\n\t\tpage.width = texture.width;\r\n\t\tpage.height = texture.height;\r\n\r\n\t\tlet region = new sp.spine.TextureAtlasRegion();\r\n\t\tregion.page = page;\r\n\t\tregion.width = texture.width;\r\n\t\tregion.height = texture.height;\r\n\t\tregion.originalWidth = texture.width;\r\n\t\tregion.originalHeight = texture.height;\r\n\r\n\t\tregion.rotate = false;\r\n\t\tregion.u = 0;\r\n\t\tregion.v = 0;\r\n\t\tregion.u2 = 1;\r\n\t\tregion.v2 = 1;\r\n\t\tregion.texture = skeletonTexture;\r\n\t\treturn region;\r\n\t}\r\n}\r\n","import {BaseData, field} from \"../../CoreModule/Data/BaseData\";\r\n\r\nexport enum TraitType {\r\n\tNone = \"None\",\r\n\tBonusParam = \"BonusParam\", // 属性附加：pid 属性ID, rate 百分比\r\n}\r\n\r\nclass LevelSetting extends BaseData {\r\n\t@field(Number)\r\n\tpublic idx: number = 0;\r\n\t@field(Number)\r\n\tpublic value: number = 0;\r\n\t@field(String)\r\n\tpublic method: \"add\" | \"mult\" = \"add\";\r\n}\r\n\r\nexport class Trait extends BaseData {\r\n\r\n\t@field(String)\r\n\tpublic type: TraitType = TraitType.None;\r\n\t@field([Object])\r\n\tpublic params: any[] = [];\r\n\t@field([LevelSetting])\r\n\tpublic levelSettings: LevelSetting[] = [];\r\n\r\n\t/**\r\n\t * 创建\r\n\t */\r\n\tpublic static create(type: TraitType, params: any[]) {\r\n\t\tconst res = new Trait();\r\n\t\tres.type = type;\r\n\t\tres.params = params;\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * 应用等级\r\n\t */\r\n\tpublic applyLevel(level) {\r\n\t\tconst params = this.params.slice();\r\n\t\tthis.levelSettings.forEach(ls => {\r\n\t\t\tswitch (ls.method) {\r\n\t\t\t\tcase \"add\": params[ls.idx] += ls.value * level; break;\r\n\t\t\t\tcase \"mult\": params[ls.idx] *= ls.value * level; break;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn Trait.create(this.type, params);\r\n\t}\r\n\r\n}\r\n\r\nexport class TraitGroup {\r\n\r\n\tpublic traits: Trait[] = [];\r\n\r\n\tconstructor(...traits: Trait[]) {\r\n\t\tthis.traits = traits;\r\n\t}\r\n\r\n\tpublic add(...traits: Trait[]) {\r\n\t\tthis.traits.push(...traits);\r\n\t}\r\n\r\n\tpublic filter(type: TraitType, idx?, val?) {\r\n\t\treturn new TraitGroup(...this.traits.filter(\r\n\t\t\tt => t.type == type && (!idx || t.params[idx] == val)));\r\n\t}\r\n\tpublic sum(idx, default_ = 0) {\r\n\t\treturn this.traits.reduce((res, t) =>\r\n\t\t\tres + t.params[idx], default_);\r\n\t}\r\n\tpublic prod(idx, default_ = 1) {\r\n\t\treturn this.traits.reduce((res, t) =>\r\n\t\t\tres * t.params[idx], default_);\r\n\t}\r\n}\r\n","const { ccclass, property } = cc._decorator;\r\n\r\n/**\r\n * TransformUtil\r\n * 变换工具类\r\n * @ author: SlowFeather\r\n * @ wechat: BackedByTheWT\r\n * @ data: 2020-07-14 13:44\r\n */\r\nexport default class TransformUtil {\r\n\r\n\t/**\r\n\t * 拿到世界坐标\r\n\t *\r\n\t * @static\r\n\t * @param {cc.Node} node\r\n\t * @returns {cc.Vec2}\r\n\t * @memberof TransformUtil\r\n\t */\r\n\tpublic static getWorldPosition2(node: cc.Node): cc.Vec2 {\r\n\t\tif (node.parent == null) return node.getPosition()\r\n\t\treturn node.parent.convertToWorldSpaceAR(node.getPosition())\r\n\t}\r\n\r\n\t/**\r\n\t * 拿到世界坐标\r\n\t *\r\n\t * @static\r\n\t * @param {cc.Node} node\r\n\t * @returns {cc.Vec3}\r\n\t * @memberof TransformUtil\r\n\t */\r\n\tpublic static getWorldPosition3(node: cc.Node): cc.Vec3 {\r\n\t\tif (node.parent == null) return node.position\r\n\t\treturn node.parent.convertToWorldSpaceAR(node.position)\r\n\t}\r\n\r\n\t/**\r\n\t * 将世界坐标转换为当前node的坐标\r\n\t *\r\n\t * @static\r\n\t * @param {cc.Node} node 当前的node\r\n\t * @param {cc.Vec2} worldPos 世界坐标\r\n\t * @returns {cc.Vec2}\r\n\t * @memberof TransformUtil\r\n\t */\r\n\tpublic static getNodePosition2(node: cc.Node, worldPos: cc.Vec2): cc.Vec2 {\r\n\t\tif (node.parent == null) return worldPos;\r\n\t\treturn node.parent.convertToNodeSpaceAR(worldPos)\r\n\t}\r\n\r\n}\r\n","\r\n/**\r\n * 获取/创建元数据\r\n */\r\nexport function getMetaData<T>(type, key, default_?: T): T {\r\n\tlet res = type[key] ||= default_;\r\n\tif (res?.type != type) {\r\n\t\tconst keys = res ? Object.keys(res) : [];\r\n\t\ttype[key] = keys.reduce((_res, key) => {\r\n\t\t\tconst val = res[key];\r\n\t\t\tif (val instanceof Array)\r\n\t\t\t\t_res[key] = val.slice(0); // 复制数组\r\n\t\t\telse if (typeof val == \"object\")\r\n\t\t\t\t_res[key] = Object.assign({}, val); // 复制对象（浅复制）\r\n\t\t\telse\r\n\t\t\t\t_res[key] = val;\r\n\t\t\treturn _res;\r\n\t\t}, {});\r\n\t\ttype[key].type = type\r\n\t}\r\n\treturn type[key];\r\n}\r\n","import Label = cc.Label;\r\nimport Sprite = cc.Sprite;\r\nimport SpriteFrame = cc.SpriteFrame;\r\nimport CultivateWindowController from \"../CultivateWindowController\";\r\nimport Node = cc.Node;\r\nimport Button = cc.Button;\r\nimport {playerMgr} from \"../../../../PlayerModule/Managers/PlayerManager\";\r\nimport {PlayerMoney} from \"../../../../EconomicModule/Data/PlayerMoney\";\r\nimport {autoUnitConvert} from \"../../../../../Utils/NumberUtils\";\r\nimport HeroInfoDisplay from \"../HeroInfoDisplay\";\r\nimport {heroMgr} from \"../../../../HeroModule/Managers/HeroManager\";\r\nimport {battleScene} from \"../../../../../Scenes/BattleScene\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class UpgradeWindowDisplay extends cc.Component {\r\n\r\n    // region Background中组件及资源引用\r\n\r\n    @property(HeroInfoDisplay)\r\n    heroInfo: HeroInfoDisplay = null;\r\n\r\n    @property([Sprite])\r\n    contentSelectCards: Sprite[] = [];\r\n    @property([SpriteFrame])\r\n    selectCardsPictures: SpriteFrame[] = [];\r\n\r\n    // endregion\r\n\r\n    // region Content中组件及资源引用\r\n\r\n    @property(Node)\r\n    heroProperty: Node = null;\r\n    @property(Node)\r\n    heroGrow: Node = null;\r\n    @property(Node)\r\n    skillsNode: Node = null;\r\n    @property(Label)\r\n    attackLabel: Label = null;\r\n    @property(Label)\r\n    defenceLabel: Label = null;\r\n    @property(Label)\r\n    healthLabel: Label = null;\r\n    @property(Label)\r\n    atkSpeedLabel: Label = null;\r\n    @property(Label)\r\n    criticalLabel: Label = null;\r\n    @property(Label)\r\n    evasionLabel: Label = null;\r\n    @property([Label])\r\n    skillNames: Label[] = [];\r\n    @property([Label])\r\n    skillLevels: Label[] = [];\r\n    @property([Label])\r\n    skillDescriptions: Label[] = [];\r\n    @property(Label)\r\n    medalLabel: Label = null;\r\n    @property(Node)\r\n    upgradeNode: Node = null;\r\n    upgradeSprite: Sprite = null;\r\n    upgradeButton: Button = null;\r\n    @property([SpriteFrame])\r\n    upgradePictures: SpriteFrame[] = [];\r\n\r\n    // endregion\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    private cultivateController: CultivateWindowController = null;\r\n\r\n    start () {\r\n        this.cultivateController = battleScene().cultivateWindow;\r\n        this.upgradeSprite = this.upgradeNode.getComponent(Sprite);\r\n        this.upgradeButton = this.upgradeNode.getComponent(Button);\r\n    }\r\n\r\n    // region 更新控制\r\n\r\n    update (dt) {\r\n        if (this.cultivateController.refreshHero) {\r\n            this.heroInfo.refresh();\r\n            this.updateLabels();\r\n            this.updatePictures();\r\n            this.cultivateController.refreshHero = false;\r\n        }\r\n    }\r\n\r\n    @autoUnitConvert\r\n    updateLabels() {\r\n        let hero = this.cultivateController.currentHero;\r\n        if (!hero) return;\r\n        this.attackLabel.string = hero.atk.toString();\r\n        this.defenceLabel.string = hero.def.toString();\r\n        this.healthLabel.string = hero.mhp.toString();\r\n        this.atkSpeedLabel.string = hero.spd.toString();\r\n        this.criticalLabel.string = hero.cri.toString();\r\n        this.evasionLabel.string = hero.eva.toString();\r\n\r\n        // this.skillNames.forEach((l, i) => { l.string = \"Skill\" + i; })\r\n        // this.skillDescriptions.forEach((l, i) => { l.string = \"Description\" + i; })\r\n        this.skillLevels.forEach(l => { l.string = \"Lv.\" + hero.star.level; })\r\n\r\n        this.medalLabel.string = playerMgr().getPlayerData(PlayerMoney).medal.toString();\r\n    }\r\n\r\n    updatePictures() {\r\n        let hero = this.cultivateController.currentHero;\r\n        if (!hero) return;\r\n\r\n        const cond = hero.strengthen.conditions().judge();\r\n        this.upgradeButton.interactable = cond;\r\n        this.upgradeSprite.spriteFrame = this.upgradePictures[cond ? 0 : 1];\r\n    }\r\n\r\n    protected onEnable() {\r\n        this.showHeroProperty();\r\n        this.heroInfo.node.active = true;\r\n        this.heroInfo.refresh();\r\n    }\r\n\r\n    // endregion\r\n\r\n    onHeroChange() {\r\n        this.cultivateController.refreshHero = true;\r\n    }\r\n\r\n    // region 选项卡及按钮点击回调\r\n\r\n    showHeroProperty() {\r\n        this.contentSelectCards[0].spriteFrame = this.selectCardsPictures[1];\r\n        this.contentSelectCards[1].spriteFrame = this.selectCardsPictures[0];\r\n        this.contentSelectCards[1].node.parent = this.node;\r\n        this.contentSelectCards[0].node.parent = this.contentSelectCards[1].node;\r\n        this.contentSelectCards[0].node.x = -150; this.contentSelectCards[0].node.y = 0;\r\n        this.contentSelectCards[1].node.x = -60; this.contentSelectCards[1].node.y = -195;\r\n        this.heroGrow.active = false;\r\n        this.skillsNode.y = 170;\r\n    }\r\n\r\n    showHeroGrow() {\r\n        this.contentSelectCards[0].spriteFrame = this.selectCardsPictures[0];\r\n        this.contentSelectCards[1].spriteFrame = this.selectCardsPictures[1];\r\n        this.contentSelectCards[0].node.parent = this.node;\r\n        this.contentSelectCards[1].node.parent = this.contentSelectCards[0].node;\r\n        this.contentSelectCards[0].node.x = -210; this.contentSelectCards[0].node.y = -195;\r\n        this.contentSelectCards[1].node.x = 150; this.contentSelectCards[1].node.y = 0;\r\n        this.heroGrow.active = true;\r\n        this.skillsNode.y = 140;\r\n    }\r\n\r\n    upgradeBtn() {\r\n        heroMgr().strengthen(this.cultivateController.currentHero).then(res => {\r\n            this.onHeroChange();\r\n            this.heroInfo.playAnimation(\"effectUpgrade\");\r\n        });\r\n    }\r\n\r\n    // endregion\r\n\r\n}\r\n","/****************************************************************************\r\n Copyright (c) 2013-2016 Chukong Technologies Inc.\r\n Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.\r\n\r\n https://www.cocos.com/\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining a copy\r\n of this software and associated engine source code (the \"Software\"), a limited,\r\n  worldwide, royalty-free, non-assignable, revocable and non-exclusive license\r\n to use Cocos Creator solely to develop games on your target platforms. You shall\r\n  not use Cocos Creator software for developing other software or tools that's\r\n  used for developing games. You are not granted to publish, distribute,\r\n  sublicense, and/or sell copies of Cocos Creator.\r\n\r\n The software or tools in this License Agreement are licensed, not sold.\r\n Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n THE SOFTWARE.\r\n ****************************************************************************/\r\nimport ValueType = cc.ValueType;\r\nimport misc = cc.misc;\r\nimport Mat4 = cc.Mat4;\r\nimport EPSILON = cc.EPSILON;\r\n\r\nlet _x: number = 0.0;\r\nlet _y: number = 0.0;\r\n\r\nexport interface IVec1Like {\r\n\tx: number;\r\n}\r\n\r\n/**\r\n * !#en Representation of 1D vectors and points.\r\n * !#zh 表示 1D 向量和坐标\r\n *\r\n * @class Vec1\r\n * @extends ValueType\r\n */\r\nexport class Vec1 extends ValueType {\r\n\t// deprecated\r\n\tstatic sub   = Vec1.subtract;\r\n\tstatic mul   = Vec1.multiply;\r\n\tstatic scale = Vec1.multiplyScalar;\r\n\tstatic mag   = Vec1.len;\r\n\tstatic squaredMagnitude = Vec1.lengthSqr;\r\n\tstatic div = Vec1.divide;\r\n\t/**\r\n\t * !#en Returns the length of this vector.\r\n\t * !#zh 返回该向量的长度。\r\n\t * @method mag\r\n\t * @return {number} the result\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.mag(); // return 14.142135623730951;\r\n\t */\r\n\tmag  = Vec1.prototype.len;\r\n\t/**\r\n\t * !#en Returns the squared length of this vector.\r\n\t * !#zh 返回该向量的长度平方。\r\n\t * @method magSqr\r\n\t * @return {number} the result\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.magSqr(); // return 200;\r\n\t */\r\n\tmagSqr = Vec1.prototype.lengthSqr;\r\n\t/**\r\n\t * !#en Subtracts one vector from this. If you want to save result to another vector, use sub() instead.\r\n\t * !#zh 向量减法。如果你想保存结果到另一个向量，可使用 sub() 代替。\r\n\t * @method subSelf\r\n\t * @param {Vec1} vector\r\n\t * @return {Vec1} returns this\r\n\t * @chainable\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.subSelf(cc.v2(5, 5));// return Vec1 {x: 5, y: 5};\r\n\t */\r\n\tsubSelf  = Vec1.prototype.subtract;\r\n\t/**\r\n\t * !#en Subtracts one vector from this, and returns the new result.\r\n\t * !#zh 向量减法，并返回新结果。\r\n\t * @method sub\r\n\t * @param {Vec1} vector\r\n\t * @param {Vec1} [out] - optional, the receiving vector, you can pass the same Vec1 to save result to itself, if not provided, a new Vec1 will be created\r\n\t * @return {Vec1} the result\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.sub(cc.v2(5, 5));      // return Vec1 {x: 5, y: 5};\r\n\t * var v1 = new Vec1;\r\n\t * v.sub(cc.v2(5, 5), v1);  // return Vec1 {x: 5, y: 5};\r\n\t */\r\n\tsub (vector: Vec1, out?: Vec1): Vec1 {\r\n\t\treturn Vec1.subtract(out || new Vec1(), this, vector);\r\n\t}\r\n\t/**\r\n\t * !#en Multiplies this by a number. If you want to save result to another vector, use mul() instead.\r\n\t * !#zh 缩放当前向量。如果你想结果保存到另一个向量，可使用 mul() 代替。\r\n\t * @method mulSelf\r\n\t * @param {number} num\r\n\t * @return {Vec1} returns this\r\n\t * @chainable\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.mulSelf(5);// return Vec1 {x: 50, y: 50};\r\n\t */\r\n\tmulSelf  = Vec1.prototype.multiplyScalar;\r\n\t/**\r\n\t * !#en Multiplies by a number, and returns the new result.\r\n\t * !#zh 缩放向量，并返回新结果。\r\n\t * @method mul\r\n\t * @param {number} num\r\n\t * @param {Vec1} [out] - optional, the receiving vector, you can pass the same Vec1 to save result to itself, if not provided, a new Vec1 will be created\r\n\t * @return {Vec1} the result\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.mul(5);      // return Vec1 {x: 50, y: 50};\r\n\t * var v1 = new Vec1;\r\n\t * v.mul(5, v1);  // return Vec1 {x: 50, y: 50};\r\n\t */\r\n\tmul (num: number, out?: Vec1): Vec1 {\r\n\t\treturn Vec1.multiplyScalar(out || new Vec1(), this, num);\r\n\t}\r\n\t/**\r\n\t * !#en Divides by a number. If you want to save result to another vector, use div() instead.\r\n\t * !#zh 向量除法。如果你想结果保存到另一个向量，可使用 div() 代替。\r\n\t * @method divSelf\r\n\t * @param {number} num\r\n\t * @return {Vec1} returns this\r\n\t * @chainable\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.divSelf(5); // return Vec1 {x: 2, y: 2};\r\n\t */\r\n\tdivSelf  = Vec1.prototype.divide;\r\n\t/**\r\n\t * !#en Divides by a number, and returns the new result.\r\n\t * !#zh 向量除法，并返回新的结果。\r\n\t * @method div\r\n\t * @param {number} num\r\n\t * @param {Vec1} [out] - optional, the receiving vector, you can pass the same Vec1 to save result to itself, if not provided, a new Vec1 will be created\r\n\t * @return {Vec1} the result\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.div(5);      // return Vec1 {x: 2, y: 2};\r\n\t * var v1 = new Vec1;\r\n\t * v.div(5, v1);  // return Vec1 {x: 2, y: 2};\r\n\t */\r\n\tdiv (num: number, out?: Vec1): Vec1 {\r\n\t\treturn Vec1.multiplyScalar(out || new Vec1(), this, 1/num);\r\n\t}\r\n\t/**\r\n\t * !#en Multiplies two vectors.\r\n\t * !#zh 分量相乘。\r\n\t * @method scaleSelf\r\n\t * @param {Vec1} vector\r\n\t * @return {Vec1} returns this\r\n\t * @chainable\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.scaleSelf(cc.v2(5, 5));// return Vec1 {x: 50, y: 50};\r\n\t */\r\n\tscaleSelf = Vec1.prototype.multiply;\r\n\t/**\r\n\t * !#en Multiplies two vectors, and returns the new result.\r\n\t * !#zh 分量相乘，并返回新的结果。\r\n\t * @method scale\r\n\t * @param {Vec1} vector\r\n\t * @param {Vec1} [out] - optional, the receiving vector, you can pass the same Vec1 to save result to itself, if not provided, a new Vec1 will be created\r\n\t * @return {Vec1} the result\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.scale(cc.v2(5, 5));      // return Vec1 {x: 50, y: 50};\r\n\t * var v1 = new Vec1;\r\n\t * v.scale(cc.v2(5, 5), v1);  // return Vec1 {x: 50, y: 50};\r\n\t */\r\n\tscale (vector: Vec1, out?: Vec1): Vec1 {\r\n\t\treturn Vec1.multiply(out || new Vec1(), this, vector);\r\n\t}\r\n\t/**\r\n\t * !#en Negates the components. If you want to save result to another vector, use neg() instead.\r\n\t * !#zh 向量取反。如果你想结果保存到另一个向量，可使用 neg() 代替。\r\n\t * @method negSelf\r\n\t * @return {Vec1} returns this\r\n\t * @chainable\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.negSelf(); // return Vec1 {x: -10, y: -10};\r\n\t */\r\n\tnegSelf = Vec1.prototype.negate;\r\n\t/**\r\n\t * !#en Negates the components, and returns the new result.\r\n\t * !#zh 返回取反后的新向量。\r\n\t * @method neg\r\n\t * @param {Vec1} [out] - optional, the receiving vector, you can pass the same Vec1 to save result to itself, if not provided, a new Vec1 will be created\r\n\t * @return {Vec1} the result\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * var v1 = new Vec1;\r\n\t * v.neg(v1);  // return Vec1 {x: -10, y: -10};\r\n\t */\r\n\tneg (out?: Vec1): Vec1 {\r\n\t\treturn Vec1.negate(out || new Vec1(), this);\r\n\t}\r\n\r\n\t/**\r\n\t * !#en return a Vec1 object with x = 1 and y = 1.\r\n\t * !#zh 新 Vec1 对象。\r\n\t * @property ONE\r\n\t * @type Vec1\r\n\t * @static\r\n\t */\r\n\tstatic get ONE () { return new Vec1(1) };\r\n\tstatic readonly ONE_R = Vec1.ONE;\r\n\r\n\t/**\r\n\t * !#en return a Vec1 object with x = 0 and y = 0.\r\n\t * !#zh 返回 x = 0 和 y = 0 的 Vec1 对象。\r\n\t * @property {Vec1} ZERO\r\n\t * @static\r\n\t */\r\n\tstatic get ZERO () { return new Vec1(0) };\r\n\t/**\r\n\t * !#en return a readonly Vec1 object with x = 0 and y = 0.\r\n\t * !#zh 返回一个 x = 0 和 y = 0 的 Vec1 只读对象。\r\n\t * @property {Vec1} ZERO_R\r\n\t * @readonly\r\n\t * @static\r\n\t */\r\n\tstatic readonly ZERO_R = Vec1.ZERO;\r\n\r\n\t/**\r\n\t * !#en return a readonly Vec1 object with x = 1 and y = 0.\r\n\t * !#zh 返回 x = 1 和 y = 0 的 Vec1 只读对象。\r\n\t * @property {Vec1} RIGHT\r\n\t * @static\r\n\t */\r\n\tstatic get RIGHT () { return new Vec1(1) };\r\n\t/**\r\n\t * !#en return a Vec1 object with x = 1 and y = 0.\r\n\t * !#zh 返回 x = 1 和 y = 0 的 Vec1 对象。\r\n\t * @property {Vec1} RIGHT_R\r\n\t * @static\r\n\t * @readonly\r\n\t */\r\n\tstatic readonly RIGHT_R = Vec1.RIGHT;\r\n\r\n\t/**\r\n\t * !#zh 获得指定向量的拷贝\r\n\t * @method clone\r\n\t * @typescript\r\n\t * clone <Out extends IVec1Like> (a: Out): Vec1\r\n\t * @static\r\n\t */\r\n\tstatic clone <Out extends IVec1Like> (a: Out) {\r\n\t\treturn new Vec1(a.x);\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 复制指定向量的值\r\n\t * @method copy\r\n\t * @typescript\r\n\t * copy <Out extends IVec1Like> (out: Out, a: Out): Out\r\n\t * @static\r\n\t */\r\n\tstatic copy <Out extends IVec1Like> (out: Out, a: Out) {\r\n\t\tout.x = a.x;\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh  设置向量值\r\n\t * @method set\r\n\t * @typescript\r\n\t * set <Out extends IVec1Like> (out: Out, x: number, y: number): Out\r\n\t * @static\r\n\t */\r\n\tstatic set <Out extends IVec1Like> (out: Out, x: number, y: number) {\r\n\t\tout.x = x;\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 逐元素向量加法\r\n\t * @method add\r\n\t * @typescript\r\n\t * add <Out extends IVec1Like> (out: Out, a: Out, b: Out): Out\r\n\t * @static\r\n\t */\r\n\tstatic add <Out extends IVec1Like> (out: Out, a: Out, b: Out) {\r\n\t\tout.x = a.x + b.x;\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 逐元素向量减法\r\n\t * @method subtract\r\n\t * @typescript\r\n\t * subtract <Out extends IVec1Like> (out: Out, a: Out, b: Out): Out\r\n\t * @static\r\n\t */\r\n\tstatic subtract <Out extends IVec1Like> (out: Out, a: Out, b: Out) {\r\n\t\tout.x = a.x - b.x;\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 逐元素向量乘法\r\n\t * @method multiply\r\n\t * @typescript\r\n\t * multiply <Out extends IVec1Like> (out: Out, a: Out, b: Out): Out\r\n\t * @static\r\n\t */\r\n\tstatic multiply <Out extends IVec1Like> (out: Out, a: Out, b: Out) {\r\n\t\tout.x = a.x * b.x;\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 逐元素向量除法\r\n\t * @method divide\r\n\t * @typescript\r\n\t * divide <Out extends IVec1Like> (out: Out, a: Out, b: Out): Out\r\n\t * @static\r\n\t */\r\n\tstatic divide <Out extends IVec1Like> (out: Out, a: Out, b: Out) {\r\n\t\tout.x = a.x / b.x;\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 逐元素向量向上取整\r\n\t * @method ceil\r\n\t * @typescript\r\n\t * ceil <Out extends IVec1Like> (out: Out, a: Out): Out\r\n\t * @static\r\n\t */\r\n\tstatic ceil <Out extends IVec1Like> (out: Out, a: Out) {\r\n\t\tout.x = Math.ceil(a.x);\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 逐元素向量向下取整\r\n\t * @method floor\r\n\t * @typescript\r\n\t * floor <Out extends IVec1Like> (out: Out, a: Out): Out\r\n\t * @static\r\n\t */\r\n\tstatic floor <Out extends IVec1Like> (out: Out, a: Out) {\r\n\t\tout.x = Math.floor(a.x);\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 逐元素向量最小值\r\n\t * @method min\r\n\t * @typescript\r\n\t * min <Out extends IVec1Like> (out: Out, a: Out, b: Out): Out\r\n\t * @static\r\n\t */\r\n\tstatic min <Out extends IVec1Like> (out: Out, a: Out, b: Out) {\r\n\t\tout.x = Math.min(a.x, b.x);\r\n\t\treturn out;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * !#zh 逐元素向量最大值\r\n\t * @method max\r\n\t * @typescript\r\n\t * max <Out extends IVec1Like> (out: Out, a: Out, b: Out): Out\r\n\t * @static\r\n\t */\r\n\tstatic max <Out extends IVec1Like> (out: Out, a: Out, b: Out) {\r\n\t\tout.x = Math.max(a.x, b.x);\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 逐元素向量四舍五入取整\r\n\t * @method round\r\n\t * @typescript\r\n\t * round <Out extends IVec1Like> (out: Out, a: Out): Out\r\n\t * @static\r\n\t */\r\n\tstatic round <Out extends IVec1Like> (out: Out, a: Out) {\r\n\t\tout.x = Math.round(a.x);\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 向量标量乘法\r\n\t * @method multiplyScalar\r\n\t * @typescript\r\n\t * multiplyScalar <Out extends IVec1Like> (out: Out, a: Out, b: number): Out\r\n\t * @static\r\n\t */\r\n\tstatic multiplyScalar <Out extends IVec1Like> (out: Out, a: Out, b: number) {\r\n\t\tout.x = a.x * b;\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 逐元素向量乘加: A + B * scale\r\n\t * @method scaleAndAdd\r\n\t * @typescript\r\n\t * scaleAndAdd <Out extends IVec1Like> (out: Out, a: Out, b: Out, scale: number): Out\r\n\t * @static\r\n\t */\r\n\tstatic scaleAndAdd <Out extends IVec1Like> (out: Out, a: Out, b: Out, scale: number) {\r\n\t\tout.x = a.x + (b.x * scale);\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 求两向量的欧氏距离\r\n\t * @method distance\r\n\t * @typescript\r\n\t * distance <Out extends IVec1Like> (a: Out, b: Out): number\r\n\t * @static\r\n\t */\r\n\tstatic distance <Out extends IVec1Like> (a: Out, b: Out) {\r\n\t\treturn b.x - a.x;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 求两向量的欧氏距离平方\r\n\t * @method squaredDistance\r\n\t * @typescript\r\n\t * squaredDistance <Out extends IVec1Like> (a: Out, b: Out): number\r\n\t * @static\r\n\t */\r\n\tstatic squaredDistance <Out extends IVec1Like> (a: Out, b: Out) {\r\n\t\t_x = b.x - a.x;\r\n\t\treturn _x * _x;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 求向量长度\r\n\t * @method len\r\n\t * @typescript\r\n\t * len <Out extends IVec1Like> (a: Out): number\r\n\t * @static\r\n\t */\r\n\tstatic len <Out extends IVec1Like> (a: Out) {\r\n\t\treturn a.x;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 求向量长度平方\r\n\t * @method lengthSqr\r\n\t * @typescript\r\n\t * lengthSqr <Out extends IVec1Like> (a: Out): number\r\n\t * @static\r\n\t */\r\n\tstatic lengthSqr <Out extends IVec1Like> (a: Out) {\r\n\t\treturn a.x * a.x;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 逐元素向量取负\r\n\t * @method negate\r\n\t * @typescript\r\n\t * negate <Out extends IVec1Like> (out: Out, a: Out): Out\r\n\t * @static\r\n\t */\r\n\tstatic negate <Out extends IVec1Like> (out: Out, a: Out) {\r\n\t\tout.x = -a.x;\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 逐元素向量取倒数，接近 0 时返回 Infinity\r\n\t * @method inverse\r\n\t * @typescript\r\n\t * inverse <Out extends IVec1Like> (out: Out, a: Out): Out\r\n\t * @static\r\n\t */\r\n\tstatic inverse <Out extends IVec1Like> (out: Out, a: Out) {\r\n\t\tout.x = 1.0 / a.x;\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 逐元素向量取倒数，接近 0 时返回 0\r\n\t * @method inverseSafe\r\n\t * @typescript\r\n\t * inverseSafe <Out extends IVec1Like> (out: Out, a: Out): Out\r\n\t * @static\r\n\t */\r\n\tstatic inverseSafe <Out extends IVec1Like> (out: Out, a: Out) {\r\n\t\t_x = a.x;\r\n\r\n\t\tif (Math.abs(_x) < EPSILON) {\r\n\t\t\tout.x = 0;\r\n\t\t} else {\r\n\t\t\tout.x = 1.0 / _x;\r\n\t\t}\r\n\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 归一化向量\r\n\t * @method normalize\r\n\t * @typescript\r\n\t * normalize <Out extends IVec1Like, Vec1Like extends IVec1Like> (out: Out, a: Vec1Like): Out\r\n\t * @static\r\n\t */\r\n\tstatic normalize <Out extends IVec1Like, Vec1Like extends IVec1Like> (out: Out, a: Vec1Like) {\r\n\t\tout.x = 1;\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 向量点积（数量积）\r\n\t * @method dot\r\n\t * @typescript\r\n\t * dot <Out extends IVec1Like> (a: Out, b: Out): number\r\n\t * @static\r\n\t */\r\n\tstatic dot <Out extends IVec1Like> (a: Out, b: Out) {\r\n\t\treturn a.x * b.x;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 逐元素向量线性插值： A + t * (B - A)\r\n\t * @method lerp\r\n\t * @typescript\r\n\t * lerp <Out extends IVec1Like> (out: Out, a: Out, b: Out, t: number): Out\r\n\t * @static\r\n\t */\r\n\tstatic lerp <Out extends IVec1Like> (out: Out, a: Out, b: Out, t: number) {\r\n\t\t_x = a.x;\r\n\t\tout.x = _x + t * (b.x - _x);\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 生成一个在单位圆上均匀分布的随机向量\r\n\t * @method random\r\n\t * @typescript\r\n\t * random <Out extends IVec1Like> (out: Out, scale?: number): Out\r\n\t * @static\r\n\t */\r\n\tstatic random <Out extends IVec1Like> (out: Out, scale?: number) {\r\n\t\tscale = scale || 1.0;\r\n\t\tout.x = Math.random() * scale;\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 向量与三维矩阵乘法，默认向量第三位为 1。\r\n\t * @method transformMat3\r\n\t * @typescript\r\n\t * transformMat3 <Out extends IVec1Like, MatLike extends IMat3Like> (out: Out, a: Out, mat: IMat3Like): Out\r\n\t * @static\r\n\t */\r\n\tstatic transformMat3 <Out extends IVec1Like, MatLike extends IMat3Like> (out: Out, a: Out, mat: MatLike) {\r\n\t\t_x = a.x;\r\n\t\tlet m = mat.m;\r\n\t\tout.x = m[0] * _x + m[3] * _y + m[6];\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 向量与四维矩阵乘法，默认向量第三位为 0，第四位为 1。\r\n\t * @method transformMat4\r\n\t * @typescript\r\n\t * transformMat4 <Out extends IVec1Like, MatLike extends IMat4Like> (out: Out, a: Out, mat: MatLike): Out\r\n\t * @static\r\n\t */\r\n\tstatic transformMat4 <Out extends IVec1Like, MatLike extends IMat4Like> (out: Out, a: Out, mat: MatLike) {\r\n\t\t_x = a.x;\r\n\t\tlet m = mat.m;\r\n\t\tout.x = m[0] * _x + m[4] * _y + m[12];\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 向量等价判断\r\n\t * @method strictEquals\r\n\t * @typescript\r\n\t * strictEquals <Out extends IVec1Like> (a: Out, b: Out): boolean\r\n\t * @static\r\n\t */\r\n\tstatic strictEquals <Out extends IVec1Like> (a: Out, b: Out) {\r\n\t\treturn a.x === b.x;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 排除浮点数误差的向量近似等价判断\r\n\t * @method equals\r\n\t * @typescript\r\n\t * equals <Out extends IVec1Like> (a: Out, b: Out,  epsilon?: number): boolean\r\n\t * @static\r\n\t */\r\n\tstatic equals <Out extends IVec1Like> (a: Out, b: Out,  epsilon = EPSILON) {\r\n\t\treturn (\r\n\t\t\tMath.abs(a.x - b.x) <=\r\n\t\t\tepsilon * Math.max(1.0, Math.abs(a.x), Math.abs(b.x))\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 向量转数组\r\n\t * @method toArray\r\n\t * @typescript\r\n\t * toArray <Out extends IWritableArrayLike<number>> (out: Out, v: IVec1Like, ofs?: number): Out\r\n\t * @static\r\n\t */\r\n\tstatic toArray <Out extends IWritableArrayLike<number>> (out: Out, v: IVec1Like, ofs = 0) {\r\n\t\tout[ofs] = v.x;\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#zh 数组转向量\r\n\t * @method fromArray\r\n\t * @typescript\r\n\t * fromArray <Out extends IVec1Like> (out: Out, arr: IWritableArrayLike<number>, ofs?: number): Out\r\n\t * @static\r\n\t */\r\n\tstatic fromArray <Out extends IVec1Like> (out: Out, arr: IWritableArrayLike<number>, ofs = 0) {\r\n\t\tout.x = arr[ofs];\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * @property {Number} x\r\n\t */\r\n\tx: number;\r\n\r\n\t// compatible with vec2\r\n\ty: number = 0;\r\n\r\n\t// compatible with vec3\r\n\t// z: number = 0;\r\n\r\n\t/**\r\n\t * !#en\r\n\t * Constructor\r\n\t * see {{#crossLink \"cc/Vec1:method\"}}cc.v2{{/crossLink}} or {{#crossLink \"cc/p:method\"}}cc.p{{/crossLink}}\r\n\t * !#zh\r\n\t * 构造函数，可查看 {{#crossLink \"cc/Vec1:method\"}}cc.v2{{/crossLink}} 或者 {{#crossLink \"cc/p:method\"}}cc.p{{/crossLink}}\r\n\t * @method constructor\r\n\t * @param {Number} [x=0]\r\n\t * @param {Number} [y=0]\r\n\t */\r\n\tconstructor (x: number | Vec1 = 0) {\r\n\t\tsuper();\r\n\r\n\t\tif (x && typeof x === 'object') {\r\n\t\t\tthis.x = x.x || 0;\r\n\t\t} else {\r\n\t\t\tthis.x = x as number || 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * !#en clone a Vec1 object\r\n\t * !#zh 克隆一个 Vec1 对象\r\n\t * @method clone\r\n\t * @return {Vec1}\r\n\t */\r\n\tclone (): Vec1 {\r\n\t\treturn new Vec1(this.x);\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Sets vector with another's value\r\n\t * !#zh 设置向量值。\r\n\t * @method set\r\n\t * @param {Vec1} newValue - !#en new value to set. !#zh 要设置的新值\r\n\t * @return {Vec1} returns this\r\n\t * @chainable\r\n\t */\r\n\tset (newValue: Vec1): this {\r\n\t\tthis.x = newValue.x;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Check whether two vector equal\r\n\t * !#zh 当前的向量是否与指定的向量相等。\r\n\t * @method equals\r\n\t * @param {Vec1} other\r\n\t * @return {Boolean}\r\n\t */\r\n\tequals (other: Vec1): boolean {\r\n\t\treturn other && this.x === other.x;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Check whether two vector equal with some degree of variance.\r\n\t * !#zh\r\n\t * 近似判断两个点是否相等。<br/>\r\n\t * 判断 2 个向量是否在指定数值的范围之内，如果在则返回 true，反之则返回 false。\r\n\t * @method fuzzyEquals\r\n\t * @param {Vec1} other\r\n\t * @param {Number} variance\r\n\t * @return {Boolean}\r\n\t */\r\n\tfuzzyEquals (other: Vec1, variance): boolean {\r\n\t\treturn this.x - variance <= other.x && other.x <= this.x + variance;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Transform to string with vector informations\r\n\t * !#zh 转换为方便阅读的字符串。\r\n\t * @method toString\r\n\t * @return {string}\r\n\t */\r\n\ttoString (): string {\r\n\t\treturn \"(\" +\r\n\t\t\tthis.x.toFixed(2) + \")\"\r\n\t\t\t;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Calculate linear interpolation result between this vector and another one with given ratio\r\n\t * !#zh 线性插值。\r\n\t * @method lerp\r\n\t * @param {Vec1} to\r\n\t * @param {Number} ratio - the interpolation coefficient\r\n\t * @param {Vec1} [out] - optional, the receiving vector, you can pass the same Vec1 to save result to itself, if not provided, a new Vec1 will be created\r\n\t * @return {Vec1}\r\n\t */\r\n\tlerp (to: Vec1, ratio: number, out?: Vec1): Vec1 {\r\n\t\tconst x = this.x;\r\n\t\tout = out || new Vec1();\r\n\t\tout.x = x + (to.x - x) * ratio;\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Clamp the vector between from float and to float.\r\n\t * !#zh\r\n\t * 返回指定限制区域后的向量。<br/>\r\n\t * 向量大于 max_inclusive 则返回 max_inclusive。<br/>\r\n\t * 向量小于 min_inclusive 则返回 min_inclusive。<br/>\r\n\t * 否则返回自身。\r\n\t * @method clampf\r\n\t * @param {Vec1} min_inclusive\r\n\t * @param {Vec1} max_inclusive\r\n\t * @return {Vec1}\r\n\t * @example\r\n\t * var min_inclusive = cc.v2(0, 0);\r\n\t * var max_inclusive = cc.v2(20, 20);\r\n\t * var v1 = cc.v2(20, 20).clampf(min_inclusive, max_inclusive); // Vec1 {x: 20, y: 20};\r\n\t * var v2 = cc.v2(0, 0).clampf(min_inclusive, max_inclusive);   // Vec1 {x: 0, y: 0};\r\n\t * var v3 = cc.v2(10, 10).clampf(min_inclusive, max_inclusive); // Vec1 {x: 10, y: 10};\r\n\t */\r\n\tclampf (min_inclusive: Vec1, max_inclusive: Vec1): this {\r\n\t\tthis.x = misc.clampf(this.x, min_inclusive.x, max_inclusive.x);\r\n\t\tthis.y = misc.clampf(this.y, min_inclusive.y, max_inclusive.y);\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Adds this vector.\r\n\t * !#zh 向量加法。\r\n\t * @method add\r\n\t * @param {Vec1} vector\r\n\t * @param {Vec1} [out]\r\n\t * @return {Vec1} returns this\r\n\t * @chainable\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.add(cc.v2(5, 5));// return Vec1 {x: 15, y: 15};\r\n\t */\r\n\tadd (vector: Vec1, out?: Vec1): Vec1 {\r\n\t\tout = out || new Vec1();\r\n\t\tout.x = this.x + vector.x;\r\n\t\tout.y = this.y + vector.y;\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Adds this vector. If you want to save result to another vector, use add() instead.\r\n\t * !#zh 向量加法。如果你想保存结果到另一个向量，使用 add() 代替。\r\n\t * @method addSelf\r\n\t * @param {Vec1} vector\r\n\t * @return {Vec1} returns this\r\n\t * @chainable\r\n\t */\r\n\taddSelf (vector: Vec1): this {\r\n\t\tthis.x += vector.x;\r\n\t\tthis.y += vector.y;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Subtracts one vector from this.\r\n\t * !#zh 向量减法。\r\n\t * @method subtract\r\n\t * @param {Vec1} vector\r\n\t * @return {Vec1} returns this\r\n\t * @chainable\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.subSelf(cc.v2(5, 5));// return Vec1 {x: 5, y: 5};\r\n\t */\r\n\tsubtract (vector: Vec1): this {\r\n\t\tthis.x -= vector.x;\r\n\t\tthis.y -= vector.y;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Multiplies this by a number.\r\n\t * !#zh 缩放当前向量。\r\n\t * @method multiplyScalar\r\n\t * @param {number} num\r\n\t * @return {Vec1} returns this\r\n\t * @chainable\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.multiply(5);// return Vec1 {x: 50, y: 50};\r\n\t */\r\n\tmultiplyScalar (num: number): this {\r\n\t\tthis.x *= num;\r\n\t\tthis.y *= num;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Multiplies two vectors.\r\n\t * !#zh 分量相乘。\r\n\t * @method multiply\r\n\t * @param {Vec1} vector\r\n\t * @return {Vec1} returns this\r\n\t * @chainable\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.multiply(cc.v2(5, 5));// return Vec1 {x: 50, y: 50};\r\n\t */\r\n\tmultiply (vector: Vec1): this {\r\n\t\tthis.x *= vector.x;\r\n\t\tthis.y *= vector.y;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Divides by a number.\r\n\t * !#zh 向量除法。\r\n\t * @method divide\r\n\t * @param {number} num\r\n\t * @return {Vec1} returns this\r\n\t * @chainable\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.divide(5); // return Vec1 {x: 2, y: 2};\r\n\t */\r\n\tdivide (num: number): this {\r\n\t\tthis.x /= num;\r\n\t\tthis.y /= num;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Negates the components.\r\n\t * !#zh 向量取反。\r\n\t * @method negate\r\n\t * @return {Vec1} returns this\r\n\t * @chainable\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.negate(); // return Vec1 {x: -10, y: -10};\r\n\t */\r\n\tnegate (): this {\r\n\t\tthis.x = -this.x;\r\n\t\tthis.y = -this.y;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Dot product\r\n\t * !#zh 当前向量与指定向量进行点乘。\r\n\t * @method dot\r\n\t * @param {Vec1} [vector]\r\n\t * @return {number} the result\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.dot(cc.v2(5, 5)); // return 100;\r\n\t */\r\n\tdot (vector: Vec1): number {\r\n\t\treturn this.x * vector.x + this.y * vector.y;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Cross product\r\n\t * !#zh 当前向量与指定向量进行叉乘。\r\n\t * @method cross\r\n\t * @param {Vec1} [vector]\r\n\t * @return {number} the result\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.cross(cc.v2(5, 5)); // return 0;\r\n\t */\r\n\tcross (vector: Vec1): number {\r\n\t\treturn this.x * vector.y - this.y * vector.x;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Returns the length of this vector.\r\n\t * !#zh 返回该向量的长度。\r\n\t * @method len\r\n\t * @return {number} the result\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.len(); // return 14.142135623730951;\r\n\t */\r\n\tlen (): number {\r\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Returns the squared length of this vector.\r\n\t * !#zh 返回该向量的长度平方。\r\n\t * @method lengthSqr\r\n\t * @return {number} the result\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.lengthSqr(); // return 200;\r\n\t */\r\n\tlengthSqr (): number {\r\n\t\treturn this.x * this.x + this.y * this.y;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Make the length of this vector to 1.\r\n\t * !#zh 向量归一化，让这个向量的长度为 1。\r\n\t * @method normalizeSelf\r\n\t * @return {Vec1} returns this\r\n\t * @chainable\r\n\t * @example\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.normalizeSelf(); // return Vec1 {x: 0.7071067811865475, y: 0.7071067811865475};\r\n\t */\r\n\tnormalizeSelf (): Vec1 {\r\n\t\tvar magSqr = this.x * this.x + this.y * this.y;\r\n\t\tif (magSqr === 1.0)\r\n\t\t\treturn this;\r\n\r\n\t\tif (magSqr === 0.0) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tvar invsqrt = 1.0 / Math.sqrt(magSqr);\r\n\t\tthis.x *= invsqrt;\r\n\t\tthis.y *= invsqrt;\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en\r\n\t * Returns this vector with a magnitude of 1.<br/>\r\n\t * <br/>\r\n\t * Note that the current vector is unchanged and a new normalized vector is returned. If you want to normalize the current vector, use normalizeSelf function.\r\n\t * !#zh\r\n\t * 返回归一化后的向量。<br/>\r\n\t * <br/>\r\n\t * 注意，当前向量不变，并返回一个新的归一化向量。如果你想来归一化当前向量，可使用 normalizeSelf 函数。\r\n\t * @method normalize\r\n\t * @param {Vec1} [out] - optional, the receiving vector, you can pass the same Vec1 to save result to itself, if not provided, a new Vec1 will be created\r\n\t * @return {Vec1} result\r\n\t * var v = cc.v2(10, 10);\r\n\t * v.normalize();   // return Vec1 {x: 0.7071067811865475, y: 0.7071067811865475};\r\n\t */\r\n\tnormalize (out?: Vec1): Vec1 {\r\n\t\tout = out || new Vec1();\r\n\t\tout.x = this.x;\r\n\t\tout.y = this.y;\r\n\t\tout.normalizeSelf();\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Get angle in radian between this and vector.\r\n\t * !#zh 夹角的弧度。\r\n\t * @method angle\r\n\t * @param {Vec1} vector\r\n\t * @return {number} from 0 to Math.PI\r\n\t */\r\n\tangle (vector: Vec1): number {\r\n\t\tvar magSqr1 = this.magSqr();\r\n\t\tvar magSqr2 = vector.magSqr();\r\n\r\n\t\tif (magSqr1 === 0 || magSqr2 === 0) {\r\n\t\t\tconsole.warn(\"Can't get angle between zero vector\");\r\n\t\t\treturn 0.0;\r\n\t\t}\r\n\r\n\t\tvar dot = this.dot(vector);\r\n\t\tvar theta = dot / (Math.sqrt(magSqr1 * magSqr2));\r\n\t\ttheta = misc.clampf(theta, -1.0, 1.0);\r\n\t\treturn Math.acos(theta);\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Get angle in radian between this and vector with direction.\r\n\t * !#zh 带方向的夹角的弧度。\r\n\t * @method signAngle\r\n\t * @param {Vec1} vector\r\n\t * @return {number} from -MathPI to Math.PI\r\n\t */\r\n\tsignAngle (vector: Vec1): number {\r\n\t\tlet angle = this.angle(vector);\r\n\t\treturn this.cross(vector) < 0 ? -angle : angle;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en rotate\r\n\t * !#zh 返回旋转给定弧度后的新向量。\r\n\t * @method rotate\r\n\t * @param {number} radians\r\n\t * @param {Vec1} [out] - optional, the receiving vector, you can pass the same Vec1 to save result to itself, if not provided, a new Vec1 will be created\r\n\t * @return {Vec1} the result\r\n\t */\r\n\trotate (radians: number, out?: Vec1): Vec1 {\r\n\t\tout = out || new Vec1();\r\n\t\tout.x = this.x;\r\n\t\tout.y = this.y;\r\n\t\treturn out.rotateSelf(radians);\r\n\t}\r\n\r\n\t/**\r\n\t * !#en rotate self\r\n\t * !#zh 按指定弧度旋转向量。\r\n\t * @method rotateSelf\r\n\t * @param {number} radians\r\n\t * @return {Vec1} returns this\r\n\t * @chainable\r\n\t */\r\n\trotateSelf (radians: number): Vec1 {\r\n\t\tvar sin = Math.sin(radians);\r\n\t\tvar cos = Math.cos(radians);\r\n\t\tvar x = this.x;\r\n\t\tthis.x = cos * x - sin * this.y;\r\n\t\tthis.y = sin * x + cos * this.y;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * !#en Calculates the projection of the current vector over the given vector.\r\n\t * !#zh 返回当前向量在指定 vector 向量上的投影向量。\r\n\t * @method project\r\n\t * @param {Vec1} vector\r\n\t * @return {Vec1}\r\n\t * @example\r\n\t * var v1 = cc.v2(20, 20);\r\n\t * var v2 = cc.v2(5, 5);\r\n\t * v1.project(v2); // Vec1 {x: 20, y: 20};\r\n\t */\r\n\tproject (vector: Vec1): Vec1 {\r\n\t\treturn vector.multiplyScalar(this.dot(vector) / vector.dot(vector));\r\n\t}\r\n\r\n\t/**\r\n\t * Transforms the Vec1 with a mat4. 3rd vector component is implicitly '0', 4th vector component is implicitly '1'\r\n\t * @method transformMat4\r\n\t * @param {Mat4} m matrix to transform with\r\n\t * @param {Vec1} [out] the receiving vector, you can pass the same Vec1 to save result to itself, if not provided, a new Vec1 will be created\r\n\t * @returns {Vec1} out\r\n\t */\r\n\ttransformMat4 (m: Mat4, out?: Vec1): Vec1 {\r\n\t\tout = out || new Vec1();\r\n\t\tVec1.transformMat4(out, this, m);\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the maximum value in x, y.\r\n\t * @method maxAxis\r\n\t * @returns {number}\r\n\t */\r\n\tmaxAxis (): number {\r\n\t\treturn Math.max(this.x, this.y);\r\n\t}\r\n}\r\n","import requireComponent = cc._decorator.requireComponent;\r\nimport VideoPlayer = cc.VideoPlayer;\r\nimport menu = cc._decorator.menu;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\n@requireComponent(VideoPlayer)\r\n@menu(\"其他组件/视频自动播放\")\r\nexport default class VideoAutoPlay extends cc.Component {\r\n\r\n    player: VideoPlayer = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n        this.player = this.getComponent(VideoPlayer);\r\n\r\n        //自动开始播放\r\n\r\n        this.player.node.on('ready-to-play', this.play, this);\r\n\r\n        //监听视频是否播放完毕，如果播放完毕再次播放\r\n\r\n        this.player.node.on('completed', this.replay, this);\r\n\r\n    }\r\n\r\n    play() {\r\n        if (this.player) {\r\n            this.player.play();\r\n        }\r\n    }\r\n\r\n    replay() {\r\n        this.player.play();//再次播放\r\n    }\r\n\r\n    // onStopped () {\r\n    //\r\n    //     cc.Component.EventHandler.emitEvents(this.videoPlayerEvent, this, EventType.STOPPED);\r\n    //\r\n    //     this.node.emit('stopped', this);\r\n    //\r\n    // }\r\n\r\n    // update (dt) {}\r\n}\r\n","import {nftMgr} from \"../../../Modules/NFTModule/Managers/NFTManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class WalletController extends cc.Component {\r\n\r\n    @property(cc.Label)\r\n    USTD: cc.Label = null;\r\n\r\n    protected start() {\r\n        nftMgr().getUSTDBalance().then(res => {\r\n            this.USTD.string = res.toString();\r\n        })\r\n    }\r\n\r\n}\r\n","/*Copyrights for code authored by Yahoo Inc. is licensed under the following terms:\r\nMIT License\r\nCopyright  2017 Yahoo Inc.\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\r\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n*/\r\n;(function(window, document, navigator, undefined) {\r\n\"use strict\";\r\n\r\n/*\r\n  utils.js\r\n  ========\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\nvar utils = {\r\n    URL: window.URL || window.webkitURL || window.mozURL || window.msURL,\r\n    getUserMedia: function () {\r\n        var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\r\n\r\n        return getUserMedia ? getUserMedia.bind(navigator) : getUserMedia;\r\n    }(),\r\n    requestAnimFrame: window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame,\r\n    requestTimeout: function requestTimeout(callback, delay) {\r\n        callback = callback || utils.noop;\r\n        delay = delay || 0;\r\n\r\n        if (!utils.requestAnimFrame) {\r\n            return setTimeout(callback, delay);\r\n        }\r\n\r\n        var start = new Date().getTime();\r\n        var handle = new Object();\r\n        var requestAnimFrame = utils.requestAnimFrame;\r\n\r\n        var loop = function loop() {\r\n            var current = new Date().getTime();\r\n            var delta = current - start;\r\n\r\n            delta >= delay ? callback.call() : handle.value = requestAnimFrame(loop);\r\n        };\r\n\r\n        handle.value = requestAnimFrame(loop);\r\n\r\n        return handle;\r\n    },\r\n    Blob: window.Blob || window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder,\r\n    btoa: function () {\r\n        var btoa = window.btoa || function (input) {\r\n            var output = '';\r\n            var i = 0;\r\n            var l = input.length;\r\n            var key = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\r\n            var chr1 = void 0;\r\n            var chr2 = void 0;\r\n            var chr3 = void 0;\r\n            var enc1 = void 0;\r\n            var enc2 = void 0;\r\n            var enc3 = void 0;\r\n            var enc4 = void 0;\r\n\r\n            while (i < l) {\r\n                chr1 = input.charCodeAt(i++);\r\n                chr2 = input.charCodeAt(i++);\r\n                chr3 = input.charCodeAt(i++);\r\n                enc1 = chr1 >> 2;\r\n                enc2 = (chr1 & 3) << 4 | chr2 >> 4;\r\n                enc3 = (chr2 & 15) << 2 | chr3 >> 6;\r\n                enc4 = chr3 & 63;\r\n\r\n                if (isNaN(chr2)) {\r\n                    enc3 = enc4 = 64;\r\n                } else if (isNaN(chr3)) {\r\n                    enc4 = 64;\r\n                }\r\n\r\n                output = output + key.charAt(enc1) + key.charAt(enc2) + key.charAt(enc3) + key.charAt(enc4);\r\n            }\r\n\r\n            return output;\r\n        };\r\n\r\n        return btoa ? btoa.bind(window) : utils.noop;\r\n    }(),\r\n    isObject: function isObject(obj) {\r\n        return obj && Object.prototype.toString.call(obj) === '[object Object]';\r\n    },\r\n    isEmptyObject: function isEmptyObject(obj) {\r\n        return utils.isObject(obj) && !Object.keys(obj).length;\r\n    },\r\n    isArray: function isArray(arr) {\r\n        return arr && Array.isArray(arr);\r\n    },\r\n    isFunction: function isFunction(func) {\r\n        return func && typeof func === 'function';\r\n    },\r\n    isElement: function isElement(elem) {\r\n        return elem && elem.nodeType === 1;\r\n    },\r\n    isString: function isString(value) {\r\n        return typeof value === 'string' || Object.prototype.toString.call(value) === '[object String]';\r\n    },\r\n    isSupported: {\r\n        canvas: function canvas() {\r\n            var el = document.createElement('canvas');\r\n\r\n            return el && el.getContext && el.getContext('2d');\r\n        },\r\n        webworkers: function webworkers() {\r\n            return window.Worker;\r\n        },\r\n        blob: function blob() {\r\n            return utils.Blob;\r\n        },\r\n        Uint8Array: function Uint8Array() {\r\n            return window.Uint8Array;\r\n        },\r\n        Uint32Array: function Uint32Array() {\r\n            return window.Uint32Array;\r\n        },\r\n        videoCodecs: function () {\r\n            var testEl = document.createElement('video');\r\n            var supportObj = {\r\n                'mp4': false,\r\n                'h264': false,\r\n                'ogv': false,\r\n                'ogg': false,\r\n                'webm': false\r\n            };\r\n\r\n            try {\r\n                if (testEl && testEl.canPlayType) {\r\n                    // Check for MPEG-4 support\r\n                    supportObj.mp4 = testEl.canPlayType('video/mp4; codecs=\"mp4v.20.8\"') !== '';\r\n\r\n                    // Check for h264 support\r\n                    supportObj.h264 = (testEl.canPlayType('video/mp4; codecs=\"avc1.42E01E\"') || testEl.canPlayType('video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"')) !== '';\r\n\r\n                    // Check for Ogv support\r\n                    supportObj.ogv = testEl.canPlayType('video/ogg; codecs=\"theora\"') !== '';\r\n\r\n                    // Check for Ogg support\r\n                    supportObj.ogg = testEl.canPlayType('video/ogg; codecs=\"theora\"') !== '';\r\n\r\n                    // Check for Webm support\r\n                    supportObj.webm = testEl.canPlayType('video/webm; codecs=\"vp8, vorbis\"') !== -1;\r\n                }\r\n            } catch (e) {}\r\n\r\n            return supportObj;\r\n        }()\r\n    },\r\n    noop: function noop() {},\r\n    each: function each(collection, callback) {\r\n        var x = void 0;\r\n        var len = void 0;\r\n\r\n        if (utils.isArray(collection)) {\r\n            x = -1;\r\n            len = collection.length;\r\n\r\n            while (++x < len) {\r\n                if (callback(x, collection[x]) === false) {\r\n                    break;\r\n                }\r\n            }\r\n        } else if (utils.isObject(collection)) {\r\n            for (x in collection) {\r\n                if (collection.hasOwnProperty(x)) {\r\n                    if (callback(x, collection[x]) === false) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    mergeOptions: function mergeOptions(defaultOptions, userOptions) {\r\n        if (!utils.isObject(defaultOptions) || !utils.isObject(userOptions) || !Object.keys) {\r\n            return;\r\n        }\r\n\r\n        var newObj = {};\r\n\r\n        utils.each(defaultOptions, function (key, val) {\r\n            newObj[key] = defaultOptions[key];\r\n        });\r\n\r\n        utils.each(userOptions, function (key, val) {\r\n            var currentUserOption = userOptions[key];\r\n\r\n            if (!utils.isObject(currentUserOption)) {\r\n                newObj[key] = currentUserOption;\r\n            } else {\r\n                if (!defaultOptions[key]) {\r\n                    newObj[key] = currentUserOption;\r\n                } else {\r\n                    newObj[key] = utils.mergeOptions(defaultOptions[key], currentUserOption);\r\n                }\r\n            }\r\n        });\r\n\r\n        return newObj;\r\n    },\r\n    setCSSAttr: function setCSSAttr(elem, attr, val) {\r\n        if (!utils.isElement(elem)) {\r\n            return;\r\n        }\r\n\r\n        if (utils.isString(attr) && utils.isString(val)) {\r\n            elem.style[attr] = val;\r\n        } else if (utils.isObject(attr)) {\r\n            utils.each(attr, function (key, val) {\r\n                elem.style[key] = val;\r\n            });\r\n        }\r\n    },\r\n    removeElement: function removeElement(node) {\r\n        if (!utils.isElement(node)) {\r\n            return;\r\n        }\r\n        if (node.parentNode) {\r\n            node.parentNode.removeChild(node);\r\n        }\r\n    },\r\n    createWebWorker: function createWebWorker(content) {\r\n        if (!utils.isString(content)) {\r\n            return {};\r\n        }\r\n\r\n        try {\r\n            var blob = new utils.Blob([content], {\r\n                'type': 'text/javascript'\r\n            });\r\n            var objectUrl = utils.URL.createObjectURL(blob);\r\n            var worker = new Worker(objectUrl);\r\n\r\n            return {\r\n                'objectUrl': objectUrl,\r\n                'worker': worker\r\n            };\r\n        } catch (e) {\r\n            return '' + e;\r\n        }\r\n    },\r\n    getExtension: function getExtension(src) {\r\n        return src.substr(src.lastIndexOf('.') + 1, src.length);\r\n    },\r\n    getFontSize: function getFontSize() {\r\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n        if (!document.body || options.resizeFont === false) {\r\n            return options.fontSize;\r\n        }\r\n\r\n        var text = options.text;\r\n        var containerWidth = options.gifWidth;\r\n        var fontSize = parseInt(options.fontSize, 10);\r\n        var minFontSize = parseInt(options.minFontSize, 10);\r\n        var div = document.createElement('div');\r\n        var span = document.createElement('span');\r\n\r\n        div.setAttribute('width', containerWidth);\r\n        div.appendChild(span);\r\n\r\n        span.innerHTML = text;\r\n        span.style.fontSize = fontSize + 'px';\r\n        span.style.textIndent = '-9999px';\r\n        span.style.visibility = 'hidden';\r\n\r\n        document.body.appendChild(span);\r\n\r\n        while (span.offsetWidth > containerWidth && fontSize >= minFontSize) {\r\n            span.style.fontSize = --fontSize + 'px';\r\n        }\r\n\r\n        document.body.removeChild(span);\r\n\r\n        return fontSize + 'px';\r\n    },\r\n    webWorkerError: false\r\n};\r\n\r\n\r\n\r\nvar utils$2 = Object.freeze({\r\n\tdefault: utils\r\n});\r\n\r\n/*\r\n  error.js\r\n  ========\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\n// Dependencies\r\nvar error = {\r\n    validate: function validate(skipObj) {\r\n        skipObj = utils.isObject(skipObj) ? skipObj : {};\r\n\r\n        var errorObj = {};\r\n\r\n        utils.each(error.validators, function (indece, currentValidator) {\r\n            var errorCode = currentValidator.errorCode;\r\n\r\n            if (!skipObj[errorCode] && !currentValidator.condition) {\r\n                errorObj = currentValidator;\r\n                errorObj.error = true;\r\n\r\n                return false;\r\n            }\r\n        });\r\n\r\n        delete errorObj.condition;\r\n\r\n        return errorObj;\r\n    },\r\n    isValid: function isValid(skipObj) {\r\n        var errorObj = error.validate(skipObj);\r\n        var isValid = errorObj.error !== true ? true : false;\r\n\r\n        return isValid;\r\n    },\r\n    validators: [{\r\n        condition: utils.isFunction(utils.getUserMedia),\r\n        errorCode: 'getUserMedia',\r\n        errorMsg: 'The getUserMedia API is not supported in your browser'\r\n    }, {\r\n        condition: utils.isSupported.canvas(),\r\n        errorCode: 'canvas',\r\n        errorMsg: 'Canvas elements are not supported in your browser'\r\n    }, {\r\n        condition: utils.isSupported.webworkers(),\r\n        errorCode: 'webworkers',\r\n        errorMsg: 'The Web Workers API is not supported in your browser'\r\n    }, {\r\n        condition: utils.isFunction(utils.URL),\r\n        errorCode: 'window.URL',\r\n        errorMsg: 'The window.URL API is not supported in your browser'\r\n    }, {\r\n        condition: utils.isSupported.blob(),\r\n        errorCode: 'window.Blob',\r\n        errorMsg: 'The window.Blob File API is not supported in your browser'\r\n    }, {\r\n        condition: utils.isSupported.Uint8Array(),\r\n        errorCode: 'window.Uint8Array',\r\n        errorMsg: 'The window.Uint8Array function constructor is not supported in your browser'\r\n    }, {\r\n        condition: utils.isSupported.Uint32Array(),\r\n        errorCode: 'window.Uint32Array',\r\n        errorMsg: 'The window.Uint32Array function constructor is not supported in your browser'\r\n    }],\r\n    messages: {\r\n        videoCodecs: {\r\n            errorCode: 'videocodec',\r\n            errorMsg: 'The video codec you are trying to use is not supported in your browser'\r\n        }\r\n    }\r\n};\r\n\r\n\r\n\r\nvar error$2 = Object.freeze({\r\n\tdefault: error\r\n});\r\n\r\n/*\r\n  defaultOptions.js\r\n  =================\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\n// Helpers\r\nvar noop = function noop() {};\r\n\r\nvar defaultOptions = {\r\n    sampleInterval: 10,\r\n    numWorkers: 2,\r\n    filter: '',\r\n    gifWidth: 200,\r\n    gifHeight: 200,\r\n    interval: 0.1,\r\n    numFrames: 10,\r\n    frameDuration: 1,\r\n    keepCameraOn: false,\r\n    images: [],\r\n    video: null,\r\n    webcamVideoElement: null,\r\n    cameraStream: null,\r\n    text: '',\r\n    fontWeight: 'normal',\r\n    fontSize: '16px',\r\n    minFontSize: '10px',\r\n    resizeFont: false,\r\n    fontFamily: 'sans-serif',\r\n    fontColor: '#ffffff',\r\n    textAlign: 'center',\r\n    textBaseline: 'bottom',\r\n    textXCoordinate: null,\r\n    textYCoordinate: null,\r\n    progressCallback: noop,\r\n    completeCallback: noop,\r\n    saveRenderingContexts: false,\r\n    savedRenderingContexts: [],\r\n    showFrameText: true,\r\n    crossOrigin: 'Anonymous',\r\n    waterMark: null,\r\n    waterMarkHeight: null,\r\n    waterMarkWidth: null,\r\n    waterMarkXCoordinate: 1,\r\n    waterMarkYCoordinate: 1\r\n};\r\n\r\n\r\n\r\nvar defaultOptions$2 = Object.freeze({\r\n\tdefault: defaultOptions\r\n});\r\n\r\n/*\r\n  isSupported.js\r\n  ==============\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\n// Dependencies\r\nfunction isSupported() {\r\n  return error.isValid();\r\n}\r\n\r\n/*\r\n  isWebCamGIFSupported.js\r\n  =======================\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\nfunction isWebCamGIFSupported() {\r\n  return error.isValid();\r\n}\r\n\r\n/*\r\n  isSupported.js\r\n  ==============\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\n// Dependencies\r\nfunction isSupported$1() {\r\n    var options = {\r\n        getUserMedia: true\r\n    };\r\n\r\n    return error.isValid(options);\r\n}\r\n\r\n/*\r\n  isExistingVideoGIFSupported.js\r\n  ==============================\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\n// Dependencies\r\nfunction isExistingVideoGIFSupported(codecs) {\r\n    var hasValidCodec = false;\r\n\r\n    if (utils.isArray(codecs) && codecs.length) {\r\n        utils.each(codecs, function (indece, currentCodec) {\r\n            if (utils.isSupported.videoCodecs[currentCodec]) {\r\n                hasValidCodec = true;\r\n            }\r\n        });\r\n\r\n        if (!hasValidCodec) {\r\n            return false;\r\n        }\r\n    } else if (utils.isString(codecs) && codecs.length) {\r\n        if (!utils.isSupported.videoCodecs[codecs]) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return error.isValid({\r\n        'getUserMedia': true\r\n    });\r\n}\r\n\r\n/*\r\n  NeuQuant.js\r\n  ===========\r\n*/\r\n\r\n/*\r\n * NeuQuant Neural-Net Quantization Algorithm\r\n * ------------------------------------------\r\n *\r\n * Copyright (c) 1994 Anthony Dekker\r\n *\r\n * NEUQUANT Neural-Net quantization algorithm by Anthony Dekker, 1994. See\r\n * \"Kohonen neural networks for optimal colour quantization\" in \"Network:\r\n * Computation in Neural Systems\" Vol. 5 (1994) pp 351-367. for a discussion of\r\n * the algorithm.\r\n *\r\n * Any party obtaining a copy of these files from the author, directly or\r\n * indirectly, is granted, free of charge, a full and unrestricted irrevocable,\r\n * world-wide, paid up, royalty-free, nonexclusive right and license to deal in\r\n * this software and documentation files (the \"Software\"), including without\r\n * limitation the rights to use, copy, modify, merge, publish, distribute,\r\n * sublicense, and/or sell copies of the Software, and to permit persons who\r\n * receive copies from any such party to do so, with the only requirement being\r\n * that this copyright notice remain intact.\r\n */\r\n\r\n/*\r\n * This class handles Neural-Net quantization algorithm\r\n * @author Kevin Weiner (original Java version - kweiner@fmsware.com)\r\n * @author Thibault Imbert (AS3 version - bytearray.org)\r\n * @version 0.1 AS3 implementation\r\n * @version 0.2 JS->AS3 \"translation\" by antimatter15\r\n * @version 0.3 JS clean up + using modern JS idioms by sole - http://soledadpenades.com\r\n * Also implement fix in color conversion described at http://stackoverflow.com/questions/16371712/neuquant-js-javascript-color-quantization-hidden-bug-in-js-conversion\r\n */\r\n\r\nfunction NeuQuant() {\r\n  var netsize = 256; // number of colours used\r\n\r\n  // four primes near 500 - assume no image has a length so large\r\n  // that it is divisible by all four primes\r\n  var prime1 = 499;\r\n  var prime2 = 491;\r\n  var prime3 = 487;\r\n  var prime4 = 503;\r\n\r\n  // minimum size for input image\r\n  var minpicturebytes = 3 * prime4;\r\n\r\n  // Network Definitions\r\n\r\n  var maxnetpos = netsize - 1;\r\n  var netbiasshift = 4; // bias for colour values\r\n  var ncycles = 100; // no. of learning cycles\r\n\r\n  // defs for freq and bias\r\n  var intbiasshift = 16; // bias for fractions\r\n  var intbias = 1 << intbiasshift;\r\n  var gammashift = 10; // gamma = 1024\r\n  var gamma = 1 << gammashift;\r\n  var betashift = 10;\r\n  var beta = intbias >> betashift; // beta = 1/1024\r\n  var betagamma = intbias << gammashift - betashift;\r\n\r\n  // defs for decreasing radius factor\r\n  // For 256 colors, radius starts at 32.0 biased by 6 bits\r\n  // and decreases by a factor of 1/30 each cycle\r\n  var initrad = netsize >> 3;\r\n  var radiusbiasshift = 6;\r\n  var radiusbias = 1 << radiusbiasshift;\r\n  var initradius = initrad * radiusbias;\r\n  var radiusdec = 30;\r\n\r\n  // defs for decreasing alpha factor\r\n  // Alpha starts at 1.0 biased by 10 bits\r\n  var alphabiasshift = 10;\r\n  var initalpha = 1 << alphabiasshift;\r\n  var alphadec;\r\n\r\n  // radbias and alpharadbias used for radpower calculation\r\n  var radbiasshift = 8;\r\n  var radbias = 1 << radbiasshift;\r\n  var alpharadbshift = alphabiasshift + radbiasshift;\r\n  var alpharadbias = 1 << alpharadbshift;\r\n\r\n  // Input image\r\n  var thepicture;\r\n  // Height * Width * 3\r\n  var lengthcount;\r\n  // Sampling factor 1..30\r\n  var samplefac;\r\n\r\n  // The network itself\r\n  var network;\r\n  var netindex = [];\r\n\r\n  // for network lookup - really 256\r\n  var bias = [];\r\n\r\n  // bias and freq arrays for learning\r\n  var freq = [];\r\n  var radpower = [];\r\n\r\n  function NeuQuantConstructor(thepic, len, sample) {\r\n\r\n    var i;\r\n    var p;\r\n\r\n    thepicture = thepic;\r\n    lengthcount = len;\r\n    samplefac = sample;\r\n\r\n    network = new Array(netsize);\r\n\r\n    for (i = 0; i < netsize; i++) {\r\n      network[i] = new Array(4);\r\n      p = network[i];\r\n      p[0] = p[1] = p[2] = (i << netbiasshift + 8) / netsize | 0;\r\n      freq[i] = intbias / netsize | 0; // 1 / netsize\r\n      bias[i] = 0;\r\n    }\r\n  }\r\n\r\n  function colorMap() {\r\n    var map = [];\r\n    var index = new Array(netsize);\r\n    for (var i = 0; i < netsize; i++) {\r\n      index[network[i][3]] = i;\r\n    }var k = 0;\r\n    for (var l = 0; l < netsize; l++) {\r\n      var j = index[l];\r\n      map[k++] = network[j][0];\r\n      map[k++] = network[j][1];\r\n      map[k++] = network[j][2];\r\n    }\r\n    return map;\r\n  }\r\n\r\n  // Insertion sort of network and building of netindex[0..255]\r\n  // (to do after unbias)\r\n  function inxbuild() {\r\n    var i;\r\n    var j;\r\n    var smallpos;\r\n    var smallval;\r\n    var p;\r\n    var q;\r\n    var previouscol;\r\n    var startpos;\r\n\r\n    previouscol = 0;\r\n    startpos = 0;\r\n\r\n    for (i = 0; i < netsize; i++) {\r\n\r\n      p = network[i];\r\n      smallpos = i;\r\n      smallval = p[1]; // index on g\r\n      // find smallest in i..netsize-1\r\n      for (j = i + 1; j < netsize; j++) {\r\n\r\n        q = network[j];\r\n\r\n        if (q[1] < smallval) {\r\n          // index on g\r\n          smallpos = j;\r\n          smallval = q[1]; // index on g\r\n        }\r\n      }\r\n\r\n      q = network[smallpos];\r\n\r\n      // swap p (i) and q (smallpos) entries\r\n      if (i != smallpos) {\r\n        j = q[0];\r\n        q[0] = p[0];\r\n        p[0] = j;\r\n        j = q[1];\r\n        q[1] = p[1];\r\n        p[1] = j;\r\n        j = q[2];\r\n        q[2] = p[2];\r\n        p[2] = j;\r\n        j = q[3];\r\n        q[3] = p[3];\r\n        p[3] = j;\r\n      }\r\n\r\n      // smallval entry is now in position i\r\n      if (smallval != previouscol) {\r\n\r\n        netindex[previouscol] = startpos + i >> 1;\r\n\r\n        for (j = previouscol + 1; j < smallval; j++) {\r\n          netindex[j] = i;\r\n        }\r\n\r\n        previouscol = smallval;\r\n        startpos = i;\r\n      }\r\n    }\r\n\r\n    netindex[previouscol] = startpos + maxnetpos >> 1;\r\n    for (j = previouscol + 1; j < 256; j++) {\r\n      netindex[j] = maxnetpos; // really 256\r\n    }\r\n  }\r\n\r\n  // Main Learning Loop\r\n\r\n  function learn() {\r\n    var i;\r\n    var j;\r\n    var b;\r\n    var g;\r\n    var r;\r\n    var radius;\r\n    var rad;\r\n    var alpha;\r\n    var step;\r\n    var delta;\r\n    var samplepixels;\r\n    var p;\r\n    var pix;\r\n    var lim;\r\n\r\n    if (lengthcount < minpicturebytes) {\r\n      samplefac = 1;\r\n    }\r\n\r\n    alphadec = 30 + (samplefac - 1) / 3;\r\n    p = thepicture;\r\n    pix = 0;\r\n    lim = lengthcount;\r\n    samplepixels = lengthcount / (3 * samplefac);\r\n    delta = samplepixels / ncycles | 0;\r\n    alpha = initalpha;\r\n    radius = initradius;\r\n\r\n    rad = radius >> radiusbiasshift;\r\n    if (rad <= 1) {\r\n      rad = 0;\r\n    }\r\n\r\n    for (i = 0; i < rad; i++) {\r\n      radpower[i] = alpha * ((rad * rad - i * i) * radbias / (rad * rad));\r\n    }\r\n\r\n    if (lengthcount < minpicturebytes) {\r\n      step = 3;\r\n    } else if (lengthcount % prime1 !== 0) {\r\n      step = 3 * prime1;\r\n    } else {\r\n\r\n      if (lengthcount % prime2 !== 0) {\r\n        step = 3 * prime2;\r\n      } else {\r\n        if (lengthcount % prime3 !== 0) {\r\n          step = 3 * prime3;\r\n        } else {\r\n          step = 3 * prime4;\r\n        }\r\n      }\r\n    }\r\n\r\n    i = 0;\r\n\r\n    while (i < samplepixels) {\r\n\r\n      b = (p[pix + 0] & 0xff) << netbiasshift;\r\n      g = (p[pix + 1] & 0xff) << netbiasshift;\r\n      r = (p[pix + 2] & 0xff) << netbiasshift;\r\n      j = contest(b, g, r);\r\n\r\n      altersingle(alpha, j, b, g, r);\r\n\r\n      if (rad !== 0) {\r\n        // Alter neighbours\r\n        alterneigh(rad, j, b, g, r);\r\n      }\r\n\r\n      pix += step;\r\n\r\n      if (pix >= lim) {\r\n        pix -= lengthcount;\r\n      }\r\n\r\n      i++;\r\n\r\n      if (delta === 0) {\r\n        delta = 1;\r\n      }\r\n\r\n      if (i % delta === 0) {\r\n        alpha -= alpha / alphadec;\r\n        radius -= radius / radiusdec;\r\n        rad = radius >> radiusbiasshift;\r\n\r\n        if (rad <= 1) {\r\n          rad = 0;\r\n        }\r\n\r\n        for (j = 0; j < rad; j++) {\r\n          radpower[j] = alpha * ((rad * rad - j * j) * radbias / (rad * rad));\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Search for BGR values 0..255 (after net is unbiased) and return colour index\r\n  function map(b, g, r) {\r\n    var i;\r\n    var j;\r\n    var dist;\r\n    var a;\r\n    var bestd;\r\n    var p;\r\n    var best;\r\n\r\n    // Biggest possible distance is 256 * 3\r\n    bestd = 1000;\r\n    best = -1;\r\n    i = netindex[g]; // index on g\r\n    j = i - 1; // start at netindex[g] and work outwards\r\n\r\n    while (i < netsize || j >= 0) {\r\n\r\n      if (i < netsize) {\r\n\r\n        p = network[i];\r\n\r\n        dist = p[1] - g; // inx key\r\n\r\n        if (dist >= bestd) {\r\n          i = netsize; // stop iter\r\n        } else {\r\n\r\n          i++;\r\n\r\n          if (dist < 0) {\r\n            dist = -dist;\r\n          }\r\n\r\n          a = p[0] - b;\r\n\r\n          if (a < 0) {\r\n            a = -a;\r\n          }\r\n\r\n          dist += a;\r\n\r\n          if (dist < bestd) {\r\n            a = p[2] - r;\r\n\r\n            if (a < 0) {\r\n              a = -a;\r\n            }\r\n\r\n            dist += a;\r\n\r\n            if (dist < bestd) {\r\n              bestd = dist;\r\n              best = p[3];\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (j >= 0) {\r\n\r\n        p = network[j];\r\n\r\n        dist = g - p[1]; // inx key - reverse dif\r\n\r\n        if (dist >= bestd) {\r\n          j = -1; // stop iter\r\n        } else {\r\n\r\n          j--;\r\n          if (dist < 0) {\r\n            dist = -dist;\r\n          }\r\n          a = p[0] - b;\r\n          if (a < 0) {\r\n            a = -a;\r\n          }\r\n          dist += a;\r\n\r\n          if (dist < bestd) {\r\n            a = p[2] - r;\r\n            if (a < 0) {\r\n              a = -a;\r\n            }\r\n            dist += a;\r\n            if (dist < bestd) {\r\n              bestd = dist;\r\n              best = p[3];\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return best;\r\n  }\r\n\r\n  function process() {\r\n    learn();\r\n    unbiasnet();\r\n    inxbuild();\r\n    return colorMap();\r\n  }\r\n\r\n  // Unbias network to give byte values 0..255 and record position i\r\n  // to prepare for sort\r\n  function unbiasnet() {\r\n    var i;\r\n    var j;\r\n\r\n    for (i = 0; i < netsize; i++) {\r\n      network[i][0] >>= netbiasshift;\r\n      network[i][1] >>= netbiasshift;\r\n      network[i][2] >>= netbiasshift;\r\n      network[i][3] = i; // record colour no\r\n    }\r\n  }\r\n\r\n  // Move adjacent neurons by precomputed alpha*(1-((i-j)^2/[r]^2))\r\n  // in radpower[|i-j|]\r\n  function alterneigh(rad, i, b, g, r) {\r\n\r\n    var j;\r\n    var k;\r\n    var lo;\r\n    var hi;\r\n    var a;\r\n    var m;\r\n\r\n    var p;\r\n\r\n    lo = i - rad;\r\n    if (lo < -1) {\r\n      lo = -1;\r\n    }\r\n\r\n    hi = i + rad;\r\n\r\n    if (hi > netsize) {\r\n      hi = netsize;\r\n    }\r\n\r\n    j = i + 1;\r\n    k = i - 1;\r\n    m = 1;\r\n\r\n    while (j < hi || k > lo) {\r\n\r\n      a = radpower[m++];\r\n\r\n      if (j < hi) {\r\n\r\n        p = network[j++];\r\n\r\n        try {\r\n\r\n          p[0] -= a * (p[0] - b) / alpharadbias | 0;\r\n          p[1] -= a * (p[1] - g) / alpharadbias | 0;\r\n          p[2] -= a * (p[2] - r) / alpharadbias | 0;\r\n        } catch (e) {}\r\n      }\r\n\r\n      if (k > lo) {\r\n\r\n        p = network[k--];\r\n\r\n        try {\r\n\r\n          p[0] -= a * (p[0] - b) / alpharadbias | 0;\r\n          p[1] -= a * (p[1] - g) / alpharadbias | 0;\r\n          p[2] -= a * (p[2] - r) / alpharadbias | 0;\r\n        } catch (e) {}\r\n      }\r\n    }\r\n  }\r\n\r\n  // Move neuron i towards biased (b,g,r) by factor alpha\r\n  function altersingle(alpha, i, b, g, r) {\r\n\r\n    // alter hit neuron\r\n    var n = network[i];\r\n    var alphaMult = alpha / initalpha;\r\n    n[0] -= alphaMult * (n[0] - b) | 0;\r\n    n[1] -= alphaMult * (n[1] - g) | 0;\r\n    n[2] -= alphaMult * (n[2] - r) | 0;\r\n  }\r\n\r\n  // Search for biased BGR values\r\n  function contest(b, g, r) {\r\n\r\n    // finds closest neuron (min dist) and updates freq\r\n    // finds best neuron (min dist-bias) and returns position\r\n    // for frequently chosen neurons, freq[i] is high and bias[i] is negative\r\n    // bias[i] = gamma*((1/netsize)-freq[i])\r\n\r\n    var i;\r\n    var dist;\r\n    var a;\r\n    var biasdist;\r\n    var betafreq;\r\n    var bestpos;\r\n    var bestbiaspos;\r\n    var bestd;\r\n    var bestbiasd;\r\n    var n;\r\n\r\n    bestd = ~(1 << 31);\r\n    bestbiasd = bestd;\r\n    bestpos = -1;\r\n    bestbiaspos = bestpos;\r\n\r\n    for (i = 0; i < netsize; i++) {\r\n\r\n      n = network[i];\r\n      dist = n[0] - b;\r\n\r\n      if (dist < 0) {\r\n        dist = -dist;\r\n      }\r\n\r\n      a = n[1] - g;\r\n\r\n      if (a < 0) {\r\n        a = -a;\r\n      }\r\n\r\n      dist += a;\r\n\r\n      a = n[2] - r;\r\n\r\n      if (a < 0) {\r\n        a = -a;\r\n      }\r\n\r\n      dist += a;\r\n\r\n      if (dist < bestd) {\r\n        bestd = dist;\r\n        bestpos = i;\r\n      }\r\n\r\n      biasdist = dist - (bias[i] >> intbiasshift - netbiasshift);\r\n\r\n      if (biasdist < bestbiasd) {\r\n        bestbiasd = biasdist;\r\n        bestbiaspos = i;\r\n      }\r\n\r\n      betafreq = freq[i] >> betashift;\r\n      freq[i] -= betafreq;\r\n      bias[i] += betafreq << gammashift;\r\n    }\r\n\r\n    freq[bestpos] += beta;\r\n    bias[bestpos] -= betagamma;\r\n    return bestbiaspos;\r\n  }\r\n\r\n  NeuQuantConstructor.apply(this, arguments);\r\n\r\n  var exports = {};\r\n  exports.map = map;\r\n  exports.process = process;\r\n\r\n  return exports;\r\n}\r\n\r\n/*\r\n  processFrameWorker.js\r\n  =====================\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\nfunction workerCode() {\r\n    var self = this;\r\n\r\n    try {\r\n        self.onmessage = function (ev) {\r\n            var data = ev.data || {};\r\n            var response;\r\n\r\n            if (data.gifshot) {\r\n                response = workerMethods.run(data);\r\n                postMessage(response);\r\n            }\r\n        };\r\n    } catch (e) {}\r\n\r\n    var workerMethods = {\r\n        dataToRGB: function dataToRGB(data, width, height) {\r\n            var length = width * height * 4;\r\n            var i = 0;\r\n            var rgb = [];\r\n\r\n            while (i < length) {\r\n                rgb.push(data[i++]);\r\n                rgb.push(data[i++]);\r\n                rgb.push(data[i++]);\r\n                i++; // for the alpha channel which we don't care about\r\n            }\r\n\r\n            return rgb;\r\n        },\r\n        componentizedPaletteToArray: function componentizedPaletteToArray(paletteRGB) {\r\n            paletteRGB = paletteRGB || [];\r\n\r\n            var paletteArray = [];\r\n\r\n            for (var i = 0; i < paletteRGB.length; i += 3) {\r\n                var r = paletteRGB[i];\r\n                var g = paletteRGB[i + 1];\r\n                var b = paletteRGB[i + 2];\r\n\r\n                paletteArray.push(r << 16 | g << 8 | b);\r\n            }\r\n\r\n            return paletteArray;\r\n        },\r\n        // This is the \"traditional\" Animated_GIF style of going from RGBA to indexed color frames\r\n        'processFrameWithQuantizer': function processFrameWithQuantizer(imageData, width, height, sampleInterval) {\r\n            var rgbComponents = this.dataToRGB(imageData, width, height);\r\n            var nq = new NeuQuant(rgbComponents, rgbComponents.length, sampleInterval);\r\n            var paletteRGB = nq.process();\r\n            var paletteArray = new Uint32Array(this.componentizedPaletteToArray(paletteRGB));\r\n            var numberPixels = width * height;\r\n            var indexedPixels = new Uint8Array(numberPixels);\r\n            var k = 0;\r\n\r\n            for (var i = 0; i < numberPixels; i++) {\r\n                var r = rgbComponents[k++];\r\n                var g = rgbComponents[k++];\r\n                var b = rgbComponents[k++];\r\n\r\n                indexedPixels[i] = nq.map(r, g, b);\r\n            }\r\n\r\n            return {\r\n                pixels: indexedPixels,\r\n                palette: paletteArray\r\n            };\r\n        },\r\n        'run': function run(frame) {\r\n            frame = frame || {};\r\n\r\n            var _frame = frame,\r\n                height = _frame.height,\r\n                palette = _frame.palette,\r\n                sampleInterval = _frame.sampleInterval,\r\n                width = _frame.width;\r\n\r\n            var imageData = frame.data;\r\n\r\n            return this.processFrameWithQuantizer(imageData, width, height, sampleInterval);\r\n        }\r\n    };\r\n\r\n    return workerMethods;\r\n}\r\n\r\n/*\r\n  gifWriter.js\r\n  ============\r\n*/\r\n\r\n// (c) Dean McNamee <dean@gmail.com>, 2013.\r\n//\r\n// https://github.com/deanm/omggif\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the \"Software\"), to\r\n// deal in the Software without restriction, including without limitation the\r\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\r\n// sell copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\r\n// IN THE SOFTWARE.\r\n//\r\n// omggif is a JavaScript implementation of a GIF 89a encoder and decoder,\r\n// including animation and compression.  It does not rely on any specific\r\n// underlying system, so should run in the browser, Node, or Plask.\r\n\r\nfunction gifWriter(buf, width, height, gopts) {\r\n  var p = 0;\r\n\r\n  gopts = gopts === undefined ? {} : gopts;\r\n  var loop_count = gopts.loop === undefined ? null : gopts.loop;\r\n  var global_palette = gopts.palette === undefined ? null : gopts.palette;\r\n\r\n  if (width <= 0 || height <= 0 || width > 65535 || height > 65535) throw \"Width/Height invalid.\";\r\n\r\n  function check_palette_and_num_colors(palette) {\r\n    var num_colors = palette.length;\r\n\r\n    if (num_colors < 2 || num_colors > 256 || num_colors & num_colors - 1) throw \"Invalid code/color length, must be power of 2 and 2 .. 256.\";\r\n    return num_colors;\r\n  }\r\n\r\n  // - Header.\r\n  buf[p++] = 0x47;\r\n  buf[p++] = 0x49;\r\n  buf[p++] = 0x46; // GIF\r\n  buf[p++] = 0x38;\r\n  buf[p++] = 0x39;\r\n  buf[p++] = 0x61; // 89a\r\n\r\n  // Handling of Global Color Table (palette) and background index.\r\n  var gp_num_colors_pow2 = 0;\r\n  var background = 0;\r\n\r\n  // - Logical Screen Descriptor.\r\n  // NOTE(deanm): w/h apparently ignored by implementations, but set anyway.\r\n  buf[p++] = width & 0xff;\r\n  buf[p++] = width >> 8 & 0xff;\r\n  buf[p++] = height & 0xff;\r\n  buf[p++] = height >> 8 & 0xff;\r\n  // NOTE: Indicates 0-bpp original color resolution (unused?).\r\n  buf[p++] = (global_palette !== null ? 0x80 : 0) | // Global Color Table Flag.\r\n  gp_num_colors_pow2; // NOTE: No sort flag (unused?).\r\n  buf[p++] = background; // Background Color Index.\r\n  buf[p++] = 0; // Pixel aspect ratio (unused?).\r\n\r\n  if (loop_count !== null) {\r\n    // Netscape block for looping.\r\n    if (loop_count < 0 || loop_count > 65535) throw \"Loop count invalid.\";\r\n\r\n    // Extension code, label, and length.\r\n    buf[p++] = 0x21;\r\n    buf[p++] = 0xff;\r\n    buf[p++] = 0x0b;\r\n    // NETSCAPE2.0\r\n    buf[p++] = 0x4e;\r\n    buf[p++] = 0x45;\r\n    buf[p++] = 0x54;\r\n    buf[p++] = 0x53;\r\n    buf[p++] = 0x43;\r\n    buf[p++] = 0x41;\r\n    buf[p++] = 0x50;\r\n    buf[p++] = 0x45;\r\n    buf[p++] = 0x32;\r\n    buf[p++] = 0x2e;\r\n    buf[p++] = 0x30;\r\n    // Sub-block\r\n    buf[p++] = 0x03;\r\n    buf[p++] = 0x01;\r\n    buf[p++] = loop_count & 0xff;\r\n    buf[p++] = loop_count >> 8 & 0xff;\r\n    buf[p++] = 0x00; // Terminator.\r\n  }\r\n\r\n  var ended = false;\r\n\r\n  this.addFrame = function (x, y, w, h, indexed_pixels, opts) {\r\n    if (ended === true) {\r\n      --p;\r\n      ended = false;\r\n    } // Un-end.\r\n\r\n    opts = opts === undefined ? {} : opts;\r\n\r\n    // TODO(deanm): Bounds check x, y.  Do they need to be within the virtual\r\n    // canvas width/height, I imagine?\r\n    if (x < 0 || y < 0 || x > 65535 || y > 65535) throw \"x/y invalid.\";\r\n\r\n    if (w <= 0 || h <= 0 || w > 65535 || h > 65535) throw \"Width/Height invalid.\";\r\n\r\n    if (indexed_pixels.length < w * h) throw \"Not enough pixels for the frame size.\";\r\n\r\n    var using_local_palette = true;\r\n    var palette = opts.palette;\r\n    if (palette === undefined || palette === null) {\r\n      using_local_palette = false;\r\n      palette = global_palette;\r\n    }\r\n\r\n    if (palette === undefined || palette === null) throw \"Must supply either a local or global palette.\";\r\n\r\n    var num_colors = check_palette_and_num_colors(palette);\r\n\r\n    // Compute the min_code_size (power of 2), destroying num_colors.\r\n    var min_code_size = 0;\r\n    while (num_colors >>= 1) {\r\n      ++min_code_size;\r\n    }num_colors = 1 << min_code_size; // Now we can easily get it back.\r\n\r\n    var delay = opts.delay === undefined ? 0 : opts.delay;\r\n\r\n    // From the spec:\r\n    //     0 -   No disposal specified. The decoder is\r\n    //           not required to take any action.\r\n    //     1 -   Do not dispose. The graphic is to be left\r\n    //           in place.\r\n    //     2 -   Restore to background color. The area used by the\r\n    //           graphic must be restored to the background color.\r\n    //     3 -   Restore to previous. The decoder is required to\r\n    //           restore the area overwritten by the graphic with\r\n    //           what was there prior to rendering the graphic.\r\n    //  4-7 -    To be defined.\r\n    // NOTE(deanm): Dispose background doesn't really work, apparently most\r\n    // browsers ignore the background palette index and clear to transparency.\r\n    var disposal = opts.disposal === undefined ? 0 : opts.disposal;\r\n    if (disposal < 0 || disposal > 3) // 4-7 is reserved.\r\n      throw \"Disposal out of range.\";\r\n\r\n    var use_transparency = false;\r\n    var transparent_index = 0;\r\n    if (opts.transparent !== undefined && opts.transparent !== null) {\r\n      use_transparency = true;\r\n      transparent_index = opts.transparent;\r\n      if (transparent_index < 0 || transparent_index >= num_colors) throw \"Transparent color index.\";\r\n    }\r\n\r\n    if (disposal !== 0 || use_transparency || delay !== 0) {\r\n      // - Graphics Control Extension\r\n      buf[p++] = 0x21;\r\n      buf[p++] = 0xf9; // Extension / Label.\r\n      buf[p++] = 4; // Byte size.\r\n\r\n      buf[p++] = disposal << 2 | (use_transparency === true ? 1 : 0);\r\n      buf[p++] = delay & 0xff;\r\n      buf[p++] = delay >> 8 & 0xff;\r\n      buf[p++] = transparent_index; // Transparent color index.\r\n      buf[p++] = 0; // Block Terminator.\r\n    }\r\n\r\n    // - Image Descriptor\r\n    buf[p++] = 0x2c; // Image Seperator.\r\n    buf[p++] = x & 0xff;\r\n    buf[p++] = x >> 8 & 0xff; // Left.\r\n    buf[p++] = y & 0xff;\r\n    buf[p++] = y >> 8 & 0xff; // Top.\r\n    buf[p++] = w & 0xff;\r\n    buf[p++] = w >> 8 & 0xff;\r\n    buf[p++] = h & 0xff;\r\n    buf[p++] = h >> 8 & 0xff;\r\n    // NOTE: No sort flag (unused?).\r\n    // TODO(deanm): Support interlace.\r\n    buf[p++] = using_local_palette === true ? 0x80 | min_code_size - 1 : 0;\r\n\r\n    // - Local Color Table\r\n    if (using_local_palette === true) {\r\n      for (var i = 0, il = palette.length; i < il; ++i) {\r\n        var rgb = palette[i];\r\n        buf[p++] = rgb >> 16 & 0xff;\r\n        buf[p++] = rgb >> 8 & 0xff;\r\n        buf[p++] = rgb & 0xff;\r\n      }\r\n    }\r\n\r\n    p = GifWriterOutputLZWCodeStream(buf, p, min_code_size < 2 ? 2 : min_code_size, indexed_pixels);\r\n  };\r\n\r\n  this.end = function () {\r\n    if (ended === false) {\r\n      buf[p++] = 0x3b; // Trailer.\r\n      ended = true;\r\n    }\r\n    return p;\r\n  };\r\n\r\n  // Main compression routine, palette indexes -> LZW code stream.\r\n  // |index_stream| must have at least one entry.\r\n  function GifWriterOutputLZWCodeStream(buf, p, min_code_size, index_stream) {\r\n    buf[p++] = min_code_size;\r\n    var cur_subblock = p++; // Pointing at the length field.\r\n\r\n    var clear_code = 1 << min_code_size;\r\n    var code_mask = clear_code - 1;\r\n    var eoi_code = clear_code + 1;\r\n    var next_code = eoi_code + 1;\r\n\r\n    var cur_code_size = min_code_size + 1; // Number of bits per code.\r\n    var cur_shift = 0;\r\n    // We have at most 12-bit codes, so we should have to hold a max of 19\r\n    // bits here (and then we would write out).\r\n    var cur = 0;\r\n\r\n    function emit_bytes_to_buffer(bit_block_size) {\r\n      while (cur_shift >= bit_block_size) {\r\n        buf[p++] = cur & 0xff;\r\n        cur >>= 8;\r\n        cur_shift -= 8;\r\n        if (p === cur_subblock + 256) {\r\n          // Finished a subblock.\r\n          buf[cur_subblock] = 255;\r\n          cur_subblock = p++;\r\n        }\r\n      }\r\n    }\r\n\r\n    function emit_code(c) {\r\n      cur |= c << cur_shift;\r\n      cur_shift += cur_code_size;\r\n      emit_bytes_to_buffer(8);\r\n    }\r\n\r\n    // I am not an expert on the topic, and I don't want to write a thesis.\r\n    // However, it is good to outline here the basic algorithm and the few data\r\n    // structures and optimizations here that make this implementation fast.\r\n    // The basic idea behind LZW is to build a table of previously seen runs\r\n    // addressed by a short id (herein called output code).  All data is\r\n    // referenced by a code, which represents one or more values from the\r\n    // original input stream.  All input bytes can be referenced as the same\r\n    // value as an output code.  So if you didn't want any compression, you\r\n    // could more or less just output the original bytes as codes (there are\r\n    // some details to this, but it is the idea).  In order to achieve\r\n    // compression, values greater then the input range (codes can be up to\r\n    // 12-bit while input only 8-bit) represent a sequence of previously seen\r\n    // inputs.  The decompressor is able to build the same mapping while\r\n    // decoding, so there is always a shared common knowledge between the\r\n    // encoding and decoder, which is also important for \"timing\" aspects like\r\n    // how to handle variable bit width code encoding.\r\n    //\r\n    // One obvious but very important consequence of the table system is there\r\n    // is always a unique id (at most 12-bits) to map the runs.  'A' might be\r\n    // 4, then 'AA' might be 10, 'AAA' 11, 'AAAA' 12, etc.  This relationship\r\n    // can be used for an effecient lookup strategy for the code mapping.  We\r\n    // need to know if a run has been seen before, and be able to map that run\r\n    // to the output code.  Since we start with known unique ids (input bytes),\r\n    // and then from those build more unique ids (table entries), we can\r\n    // continue this chain (almost like a linked list) to always have small\r\n    // integer values that represent the current byte chains in the encoder.\r\n    // This means instead of tracking the input bytes (AAAABCD) to know our\r\n    // current state, we can track the table entry for AAAABC (it is guaranteed\r\n    // to exist by the nature of the algorithm) and the next character D.\r\n    // Therefor the tuple of (table_entry, byte) is guaranteed to also be\r\n    // unique.  This allows us to create a simple lookup key for mapping input\r\n    // sequences to codes (table indices) without having to store or search\r\n    // any of the code sequences.  So if 'AAAA' has a table entry of 12, the\r\n    // tuple of ('AAAA', K) for any input byte K will be unique, and can be our\r\n    // key.  This leads to a integer value at most 20-bits, which can always\r\n    // fit in an SMI value and be used as a fast sparse array / object key.\r\n\r\n    // Output code for the current contents of the index buffer.\r\n    var ib_code = index_stream[0] & code_mask; // Load first input index.\r\n    var code_table = {}; // Key'd on our 20-bit \"tuple\".\r\n\r\n    emit_code(clear_code); // Spec says first code should be a clear code.\r\n\r\n    // First index already loaded, process the rest of the stream.\r\n    for (var i = 1, il = index_stream.length; i < il; ++i) {\r\n      var k = index_stream[i] & code_mask;\r\n      var cur_key = ib_code << 8 | k; // (prev, k) unique tuple.\r\n      var cur_code = code_table[cur_key]; // buffer + k.\r\n\r\n      // Check if we have to create a new code table entry.\r\n      if (cur_code === undefined) {\r\n        // We don't have buffer + k.\r\n        // Emit index buffer (without k).\r\n        // This is an inline version of emit_code, because this is the core\r\n        // writing routine of the compressor (and V8 cannot inline emit_code\r\n        // because it is a closure here in a different context).  Additionally\r\n        // we can call emit_byte_to_buffer less often, because we can have\r\n        // 30-bits (from our 31-bit signed SMI), and we know our codes will only\r\n        // be 12-bits, so can safely have 18-bits there without overflow.\r\n        // emit_code(ib_code);\r\n        cur |= ib_code << cur_shift;\r\n        cur_shift += cur_code_size;\r\n        while (cur_shift >= 8) {\r\n          buf[p++] = cur & 0xff;\r\n          cur >>= 8;\r\n          cur_shift -= 8;\r\n          if (p === cur_subblock + 256) {\r\n            // Finished a subblock.\r\n            buf[cur_subblock] = 255;\r\n            cur_subblock = p++;\r\n          }\r\n        }\r\n\r\n        if (next_code === 4096) {\r\n          // Table full, need a clear.\r\n          emit_code(clear_code);\r\n          next_code = eoi_code + 1;\r\n          cur_code_size = min_code_size + 1;\r\n          code_table = {};\r\n        } else {\r\n          // Table not full, insert a new entry.\r\n          // Increase our variable bit code sizes if necessary.  This is a bit\r\n          // tricky as it is based on \"timing\" between the encoding and\r\n          // decoder.  From the encoders perspective this should happen after\r\n          // we've already emitted the index buffer and are about to create the\r\n          // first table entry that would overflow our current code bit size.\r\n          if (next_code >= 1 << cur_code_size) ++cur_code_size;\r\n          code_table[cur_key] = next_code++; // Insert into code table.\r\n        }\r\n\r\n        ib_code = k; // Index buffer to single input k.\r\n      } else {\r\n        ib_code = cur_code; // Index buffer to sequence in code table.\r\n      }\r\n    }\r\n\r\n    emit_code(ib_code); // There will still be something in the index buffer.\r\n    emit_code(eoi_code); // End Of Information.\r\n\r\n    // Flush / finalize the sub-blocks stream to the buffer.\r\n    emit_bytes_to_buffer(1);\r\n\r\n    // Finish the sub-blocks, writing out any unfinished lengths and\r\n    // terminating with a sub-block of length 0.  If we have already started\r\n    // but not yet used a sub-block it can just become the terminator.\r\n    if (cur_subblock + 1 === p) {\r\n      // Started but unused.\r\n      buf[cur_subblock] = 0;\r\n    } else {\r\n      // Started and used, write length and additional terminator block.\r\n      buf[cur_subblock] = p - cur_subblock - 1;\r\n      buf[p++] = 0;\r\n    }\r\n    return p;\r\n  }\r\n}\r\n\r\n/*\r\n  animatedGIF.js\r\n  ==============\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\n// Dependencies\r\n// Helpers\r\nvar noop$2 = function noop() {};\r\n\r\nvar AnimatedGIF = function AnimatedGIF(options) {\r\n    this.canvas = null;\r\n    this.ctx = null;\r\n    this.repeat = 0;\r\n    this.frames = [];\r\n    this.numRenderedFrames = 0;\r\n    this.onRenderCompleteCallback = noop$2;\r\n    this.onRenderProgressCallback = noop$2;\r\n    this.workers = [];\r\n    this.availableWorkers = [];\r\n    this.generatingGIF = false;\r\n    this.options = options;\r\n\r\n    // Constructs and initializes the the web workers appropriately\r\n    this.initializeWebWorkers(options);\r\n};\r\n\r\nAnimatedGIF.prototype = {\r\n    'workerMethods': workerCode(),\r\n    'initializeWebWorkers': function initializeWebWorkers(options) {\r\n        var self = this;\r\n        var processFrameWorkerCode = NeuQuant.toString() + '(' + workerCode.toString() + '());';\r\n        var webWorkerObj = void 0;\r\n        var objectUrl = void 0;\r\n        var webWorker = void 0;\r\n        var numWorkers = void 0;\r\n        var x = -1;\r\n        var workerError = '';\r\n\r\n        numWorkers = options.numWorkers;\r\n\r\n        while (++x < numWorkers) {\r\n            webWorkerObj = utils.createWebWorker(processFrameWorkerCode);\r\n\r\n            if (utils.isObject(webWorkerObj)) {\r\n                objectUrl = webWorkerObj.objectUrl;\r\n                webWorker = webWorkerObj.worker;\r\n\r\n                self.workers.push({\r\n                    worker: webWorker,\r\n                    objectUrl: objectUrl\r\n                });\r\n\r\n                self.availableWorkers.push(webWorker);\r\n            } else {\r\n                workerError = webWorkerObj;\r\n                utils.webWorkerError = !!webWorkerObj;\r\n            }\r\n        }\r\n\r\n        this.workerError = workerError;\r\n        this.canvas = document.createElement('canvas');\r\n        this.canvas.width = options.gifWidth;\r\n        this.canvas.height = options.gifHeight;\r\n        this.ctx = this.canvas.getContext('2d');\r\n        this.frames = [];\r\n    },\r\n    // Return a worker for processing a frame\r\n    getWorker: function getWorker() {\r\n        return this.availableWorkers.pop();\r\n    },\r\n    // Restores a worker to the pool\r\n    freeWorker: function freeWorker(worker) {\r\n        this.availableWorkers.push(worker);\r\n    },\r\n    byteMap: function () {\r\n        var byteMap = [];\r\n\r\n        for (var i = 0; i < 256; i++) {\r\n            byteMap[i] = String.fromCharCode(i);\r\n        }\r\n\r\n        return byteMap;\r\n    }(),\r\n    bufferToString: function bufferToString(buffer) {\r\n        var numberValues = buffer.length;\r\n        var str = '';\r\n        var x = -1;\r\n\r\n        while (++x < numberValues) {\r\n            str += this.byteMap[buffer[x]];\r\n        }\r\n\r\n        return str;\r\n    },\r\n    onFrameFinished: function onFrameFinished(progressCallback) {\r\n        // The GIF is not written until we're done with all the frames\r\n        // because they might not be processed in the same order\r\n        var self = this;\r\n        var frames = self.frames;\r\n        var options = self.options;\r\n        var hasExistingImages = !!(options.images || []).length;\r\n        var allDone = frames.every(function (frame) {\r\n            return !frame.beingProcessed && frame.done;\r\n        });\r\n\r\n        self.numRenderedFrames++;\r\n\r\n        if (hasExistingImages) {\r\n            progressCallback(self.numRenderedFrames / frames.length);\r\n        }\r\n\r\n        self.onRenderProgressCallback(self.numRenderedFrames * 0.75 / frames.length);\r\n\r\n        if (allDone) {\r\n            if (!self.generatingGIF) {\r\n                self.generateGIF(frames, self.onRenderCompleteCallback);\r\n            }\r\n        } else {\r\n            utils.requestTimeout(function () {\r\n                self.processNextFrame();\r\n            }, 1);\r\n        }\r\n    },\r\n    processFrame: function processFrame(position) {\r\n        var AnimatedGifContext = this;\r\n        var options = this.options;\r\n        var _options = this.options,\r\n            progressCallback = _options.progressCallback,\r\n            sampleInterval = _options.sampleInterval;\r\n\r\n        var frames = this.frames;\r\n        var frame = void 0;\r\n        var worker = void 0;\r\n        var done = function done() {\r\n            var ev = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n            var data = ev.data;\r\n\r\n            // Delete original data, and free memory\r\n            delete frame.data;\r\n\r\n            frame.pixels = Array.prototype.slice.call(data.pixels);\r\n            frame.palette = Array.prototype.slice.call(data.palette);\r\n            frame.done = true;\r\n            frame.beingProcessed = false;\r\n\r\n            AnimatedGifContext.freeWorker(worker);\r\n\r\n            AnimatedGifContext.onFrameFinished(progressCallback);\r\n        };\r\n\r\n        frame = frames[position];\r\n\r\n        if (frame.beingProcessed || frame.done) {\r\n            this.onFrameFinished();\r\n\r\n            return;\r\n        }\r\n\r\n        frame.sampleInterval = sampleInterval;\r\n        frame.beingProcessed = true;\r\n        frame.gifshot = true;\r\n\r\n        worker = this.getWorker();\r\n\r\n        if (worker) {\r\n            // Process the frame in a web worker\r\n            worker.onmessage = done;\r\n            worker.postMessage(frame);\r\n        } else {\r\n            // Process the frame in the current thread\r\n            done({\r\n                'data': AnimatedGifContext.workerMethods.run(frame)\r\n            });\r\n        }\r\n    },\r\n    startRendering: function startRendering(completeCallback) {\r\n        this.onRenderCompleteCallback = completeCallback;\r\n\r\n        for (var i = 0; i < this.options.numWorkers && i < this.frames.length; i++) {\r\n            this.processFrame(i);\r\n        }\r\n    },\r\n    processNextFrame: function processNextFrame() {\r\n        var position = -1;\r\n\r\n        for (var i = 0; i < this.frames.length; i++) {\r\n            var frame = this.frames[i];\r\n\r\n            if (!frame.done && !frame.beingProcessed) {\r\n                position = i;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (position >= 0) {\r\n            this.processFrame(position);\r\n        }\r\n    },\r\n    // Takes the already processed data in frames and feeds it to a new\r\n    // GifWriter instance in order to get the binary GIF file\r\n    generateGIF: function generateGIF(frames, callback) {\r\n        // TODO: Weird: using a simple JS array instead of a typed array,\r\n        // the files are WAY smaller o_o. Patches/explanations welcome!\r\n        var buffer = []; // new Uint8Array(width * height * frames.length * 5);\r\n        var gifOptions = {\r\n            loop: this.repeat\r\n        };\r\n        var options = this.options;\r\n        var interval = options.interval;\r\n\r\n        var frameDuration = options.frameDuration;\r\n        var existingImages = options.images;\r\n        var hasExistingImages = !!existingImages.length;\r\n        var height = options.gifHeight;\r\n        var width = options.gifWidth;\r\n        var gifWriter$$1 = new gifWriter(buffer, width, height, gifOptions);\r\n        var onRenderProgressCallback = this.onRenderProgressCallback;\r\n        var delay = hasExistingImages ? interval * 100 : 0;\r\n        var bufferToString = void 0;\r\n        var gif = void 0;\r\n\r\n        this.generatingGIF = true;\r\n\r\n        utils.each(frames, function (iterator, frame) {\r\n            var framePalette = frame.palette;\r\n\r\n            onRenderProgressCallback(0.75 + 0.25 * frame.position * 1.0 / frames.length);\r\n\r\n            for (var i = 0; i < frameDuration; i++) {\r\n                gifWriter$$1.addFrame(0, 0, width, height, frame.pixels, {\r\n                    palette: framePalette,\r\n                    delay: delay\r\n                });\r\n            }\r\n        });\r\n\r\n        gifWriter$$1.end();\r\n\r\n        onRenderProgressCallback(1.0);\r\n\r\n        this.frames = [];\r\n\r\n        this.generatingGIF = false;\r\n\r\n        if (utils.isFunction(callback)) {\r\n            bufferToString = this.bufferToString(buffer);\r\n            gif = 'data:image/gif;base64,' + utils.btoa(bufferToString);\r\n\r\n            callback(gif);\r\n        }\r\n    },\r\n    // From GIF: 0 = loop forever, null = not looping, n > 0 = loop n times and stop\r\n    setRepeat: function setRepeat(r) {\r\n        this.repeat = r;\r\n    },\r\n    addFrame: function addFrame(element, gifshotOptions, frameText) {\r\n        gifshotOptions = utils.isObject(gifshotOptions) ? gifshotOptions : {};\r\n\r\n        var self = this;\r\n        var ctx = self.ctx;\r\n        var options = self.options;\r\n        var width = options.gifWidth;\r\n        var height = options.gifHeight;\r\n        var fontSize = utils.getFontSize(gifshotOptions);\r\n        var _gifshotOptions = gifshotOptions,\r\n            filter = _gifshotOptions.filter,\r\n            fontColor = _gifshotOptions.fontColor,\r\n            fontFamily = _gifshotOptions.fontFamily,\r\n            fontWeight = _gifshotOptions.fontWeight,\r\n            gifHeight = _gifshotOptions.gifHeight,\r\n            gifWidth = _gifshotOptions.gifWidth,\r\n            text = _gifshotOptions.text,\r\n            textAlign = _gifshotOptions.textAlign,\r\n            textBaseline = _gifshotOptions.textBaseline,\r\n            waterMark = _gifshotOptions.waterMark,\r\n            waterMarkHeight = _gifshotOptions.waterMarkHeight,\r\n            waterMarkWidth = _gifshotOptions.waterMarkWidth,\r\n            waterMarkXCoordinate = _gifshotOptions.waterMarkXCoordinate,\r\n            waterMarkYCoordinate = _gifshotOptions.waterMarkYCoordinate;\r\n\r\n        var textXCoordinate = gifshotOptions.textXCoordinate ? gifshotOptions.textXCoordinate : textAlign === 'left' ? 1 : textAlign === 'right' ? width : width / 2;\r\n        var textYCoordinate = gifshotOptions.textYCoordinate ? gifshotOptions.textYCoordinate : textBaseline === 'top' ? 1 : textBaseline === 'center' ? height / 2 : height;\r\n        var font = fontWeight + ' ' + fontSize + ' ' + fontFamily;\r\n        var textToUse = frameText && gifshotOptions.showFrameText ? frameText : text;\r\n        var imageData = void 0;\r\n\r\n        try {\r\n            ctx.filter = filter;\r\n\r\n            ctx.drawImage(element, 0, 0, width, height);\r\n\r\n            if (textToUse) {\r\n                ctx.font = font;\r\n                ctx.fillStyle = fontColor;\r\n                ctx.textAlign = textAlign;\r\n                ctx.textBaseline = textBaseline;\r\n                ctx.fillText(textToUse, textXCoordinate, textYCoordinate);\r\n            }\r\n            if (waterMark) {\r\n                ctx.drawImage(waterMark, waterMarkXCoordinate, waterMarkYCoordinate, waterMarkWidth, waterMarkHeight);\r\n            }\r\n            imageData = ctx.getImageData(0, 0, width, height);\r\n\r\n            self.addFrameImageData(imageData);\r\n        } catch (e) {\r\n            return '' + e;\r\n        }\r\n    },\r\n    addFrameImageData: function addFrameImageData() {\r\n        var imageData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n        var frames = this.frames;\r\n        var imageDataArray = imageData.data;\r\n\r\n        this.frames.push({\r\n            'data': imageDataArray,\r\n            'width': imageData.width,\r\n            'height': imageData.height,\r\n            'palette': null,\r\n            'dithering': null,\r\n            'done': false,\r\n            'beingProcessed': false,\r\n            'position': frames.length\r\n        });\r\n    },\r\n    onRenderProgress: function onRenderProgress(callback) {\r\n        this.onRenderProgressCallback = callback;\r\n    },\r\n    isRendering: function isRendering() {\r\n        return this.generatingGIF;\r\n    },\r\n    getBase64GIF: function getBase64GIF(completeCallback) {\r\n        var self = this;\r\n        var onRenderComplete = function onRenderComplete(gif) {\r\n            self.destroyWorkers();\r\n\r\n            utils.requestTimeout(function () {\r\n                completeCallback(gif);\r\n            }, 0);\r\n        };\r\n\r\n        self.startRendering(onRenderComplete);\r\n    },\r\n    destroyWorkers: function destroyWorkers() {\r\n        if (this.workerError) {\r\n            return;\r\n        }\r\n\r\n        var workers = this.workers;\r\n\r\n        // Explicitly ask web workers to die so they are explicitly GC'ed\r\n        utils.each(workers, function (iterator, workerObj) {\r\n            var worker = workerObj.worker;\r\n            var objectUrl = workerObj.objectUrl;\r\n\r\n            worker.terminate();\r\n            utils.URL.revokeObjectURL(objectUrl);\r\n        });\r\n    }\r\n};\r\n\r\n/*\r\n  getBase64GIF.js\r\n  ===============\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\nfunction getBase64GIF(animatedGifInstance, callback) {\r\n    // This is asynchronous, rendered with WebWorkers\r\n    animatedGifInstance.getBase64GIF(function (image) {\r\n        callback({\r\n            error: false,\r\n            errorCode: '',\r\n            errorMsg: '',\r\n            image: image\r\n        });\r\n    });\r\n}\r\n\r\n/*\r\n  existingImages.js\r\n  =================\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\nfunction existingImages() {\r\n    var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n    var self = this;\r\n    var callback = obj.callback,\r\n        images = obj.images,\r\n        options = obj.options;\r\n\r\n    var imagesLength = obj.imagesLength;\r\n    var skipObj = {\r\n        'getUserMedia': true,\r\n        'window.URL': true\r\n    };\r\n    var errorObj = error.validate(skipObj);\r\n    var loadedImages = [];\r\n    var loadedImagesLength = 0;\r\n    var tempImage = void 0;\r\n    var ag = void 0;\r\n\r\n    if (errorObj.error) {\r\n        return callback(errorObj);\r\n    }\r\n\r\n    // change workerPath to point to where Animated_GIF.worker.js is\r\n    ag = new AnimatedGIF(options);\r\n\r\n    utils.each(images, function (index, image) {\r\n        var currentImage = image;\r\n\r\n        if (image.src) {\r\n            currentImage = currentImage.src;\r\n        }\r\n        if (utils.isElement(currentImage)) {\r\n            if (options.crossOrigin) {\r\n                currentImage.crossOrigin = options.crossOrigin;\r\n            }\r\n\r\n            loadedImages[index] = currentImage;\r\n            loadedImagesLength += 1;\r\n\r\n            if (loadedImagesLength === imagesLength) {\r\n                addLoadedImagesToGif();\r\n            }\r\n        } else if (utils.isString(currentImage)) {\r\n            tempImage = new Image();\r\n\r\n            if (options.crossOrigin) {\r\n                tempImage.crossOrigin = options.crossOrigin;\r\n            }\r\n\r\n            (function (tempImage) {\r\n                if (image.text) {\r\n                    tempImage.text = image.text;\r\n                }\r\n\r\n                tempImage.onerror = function (e) {\r\n                    var obj = void 0;\r\n\r\n                    --imagesLength; // skips over images that error out\r\n\r\n                    if (imagesLength === 0) {\r\n                        obj = {};\r\n                        obj.error = 'None of the requested images was capable of being retrieved';\r\n\r\n                        return callback(obj);\r\n                    }\r\n                };\r\n\r\n                tempImage.onload = function (e) {\r\n                    if (image.text) {\r\n                        loadedImages[index] = {\r\n                            img: tempImage,\r\n                            text: tempImage.text\r\n                        };\r\n                    } else {\r\n                        loadedImages[index] = tempImage;\r\n                    }\r\n\r\n                    loadedImagesLength += 1;\r\n\r\n                    if (loadedImagesLength === imagesLength) {\r\n                        addLoadedImagesToGif();\r\n                    }\r\n\r\n                    utils.removeElement(tempImage);\r\n                };\r\n\r\n                tempImage.src = currentImage;\r\n            })(tempImage);\r\n\r\n            utils.setCSSAttr(tempImage, {\r\n                position: 'fixed',\r\n                opacity: '0'\r\n            });\r\n\r\n            document.body.appendChild(tempImage);\r\n        }\r\n    });\r\n\r\n    function addLoadedImagesToGif() {\r\n        utils.each(loadedImages, function (index, loadedImage) {\r\n            if (loadedImage) {\r\n                if (loadedImage.text) {\r\n                    ag.addFrame(loadedImage.img, options, loadedImage.text);\r\n                } else {\r\n                    ag.addFrame(loadedImage, options);\r\n                }\r\n            }\r\n        });\r\n\r\n        getBase64GIF(ag, callback);\r\n    }\r\n}\r\n\r\n/*\r\n  screenShot.js\r\n  =============\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\n// Dependencies\r\n// Helpers\r\nvar noop$3 = function noop() {};\r\n\r\nvar screenShot = {\r\n    getGIF: function getGIF() {\r\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n        var callback = arguments[1];\r\n\r\n        callback = utils.isFunction(callback) ? callback : noop$3;\r\n\r\n        var canvas = document.createElement('canvas');\r\n        var context = void 0;\r\n        var existingImages = options.images;\r\n        var hasExistingImages = !!existingImages.length;\r\n        var cameraStream = options.cameraStream,\r\n            crop = options.crop,\r\n            filter = options.filter,\r\n            fontColor = options.fontColor,\r\n            fontFamily = options.fontFamily,\r\n            fontWeight = options.fontWeight,\r\n            keepCameraOn = options.keepCameraOn,\r\n            numWorkers = options.numWorkers,\r\n            progressCallback = options.progressCallback,\r\n            saveRenderingContexts = options.saveRenderingContexts,\r\n            savedRenderingContexts = options.savedRenderingContexts,\r\n            text = options.text,\r\n            textAlign = options.textAlign,\r\n            textBaseline = options.textBaseline,\r\n            videoElement = options.videoElement,\r\n            videoHeight = options.videoHeight,\r\n            videoWidth = options.videoWidth,\r\n            webcamVideoElement = options.webcamVideoElement,\r\n            waterMark = options.waterMark,\r\n            waterMarkHeight = options.waterMarkHeight,\r\n            waterMarkWidth = options.waterMarkWidth,\r\n            waterMarkXCoordinate = options.waterMarkXCoordinate,\r\n            waterMarkYCoordinate = options.waterMarkYCoordinate;\r\n\r\n        var gifWidth = Number(options.gifWidth);\r\n        var gifHeight = Number(options.gifHeight);\r\n        var interval = Number(options.interval);\r\n        var sampleInterval = Number(options.sampleInterval);\r\n        var waitBetweenFrames = hasExistingImages ? 0 : interval * 1000;\r\n        var renderingContextsToSave = [];\r\n        var numFrames = savedRenderingContexts.length ? savedRenderingContexts.length : options.numFrames;\r\n        var pendingFrames = numFrames;\r\n        var ag = new AnimatedGIF(options);\r\n        var fontSize = utils.getFontSize(options);\r\n        var textXCoordinate = options.textXCoordinate ? options.textXCoordinate : textAlign === 'left' ? 1 : textAlign === 'right' ? gifWidth : gifWidth / 2;\r\n        var textYCoordinate = options.textYCoordinate ? options.textYCoordinate : textBaseline === 'top' ? 1 : textBaseline === 'center' ? gifHeight / 2 : gifHeight;\r\n        var font = fontWeight + ' ' + fontSize + ' ' + fontFamily;\r\n        var sourceX = crop ? Math.floor(crop.scaledWidth / 2) : 0;\r\n        var sourceWidth = crop ? videoWidth - crop.scaledWidth : 0;\r\n        var sourceY = crop ? Math.floor(crop.scaledHeight / 2) : 0;\r\n        var sourceHeight = crop ? videoHeight - crop.scaledHeight : 0;\r\n        var captureFrames = function captureSingleFrame() {\r\n            var framesLeft = pendingFrames - 1;\r\n\r\n            if (savedRenderingContexts.length) {\r\n                context.putImageData(savedRenderingContexts[numFrames - pendingFrames], 0, 0);\r\n\r\n                finishCapture();\r\n            } else {\r\n                drawVideo();\r\n            }\r\n\r\n            function drawVideo() {\r\n                try {\r\n                    // Makes sure the canvas video heights/widths are in bounds\r\n                    if (sourceWidth > videoWidth) {\r\n                        sourceWidth = videoWidth;\r\n                    }\r\n\r\n                    if (sourceHeight > videoHeight) {\r\n                        sourceHeight = videoHeight;\r\n                    }\r\n\r\n                    if (sourceX < 0) {\r\n                        sourceX = 0;\r\n                    }\r\n\r\n                    if (sourceY < 0) {\r\n                        sourceY = 0;\r\n                    }\r\n\r\n                    context.filter = filter;\r\n\r\n                    context.drawImage(videoElement, sourceX, sourceY, sourceWidth, sourceHeight, 0, 0, gifWidth, gifHeight);\r\n\r\n                    finishCapture();\r\n                } catch (e) {\r\n                    // There is a Firefox bug that sometimes throws NS_ERROR_NOT_AVAILABLE and\r\n                    // and IndexSizeError errors when drawing a video element to the canvas\r\n                    if (e.name === 'NS_ERROR_NOT_AVAILABLE') {\r\n                        // Wait 100ms before trying again\r\n                        utils.requestTimeout(drawVideo, 100);\r\n                    } else {\r\n                        throw e;\r\n                    }\r\n                }\r\n            }\r\n\r\n            function finishCapture() {\r\n                var imageData = void 0;\r\n\r\n                if (saveRenderingContexts) {\r\n                    renderingContextsToSave.push(context.getImageData(0, 0, gifWidth, gifHeight));\r\n                }\r\n                if (waterMark) {\r\n                    context.drawImage(waterMark, waterMarkXCoordinate, waterMarkYCoordinate, waterMarkWidth, waterMarkHeight);\r\n                }\r\n                // If there is text to display, make sure to display it on the canvas after the image is drawn\r\n                if (text) {\r\n                    context.font = font;\r\n                    context.fillStyle = fontColor;\r\n                    context.textAlign = textAlign;\r\n                    context.textBaseline = textBaseline;\r\n                    context.fillText(text, textXCoordinate, textYCoordinate);\r\n                }\r\n\r\n                imageData = context.getImageData(0, 0, gifWidth, gifHeight);\r\n\r\n                ag.addFrameImageData(imageData);\r\n\r\n                pendingFrames = framesLeft;\r\n\r\n                // Call back with an r value indicating how far along we are in capture\r\n                progressCallback((numFrames - pendingFrames) / numFrames);\r\n\r\n                if (framesLeft > 0) {\r\n                    // test\r\n                    utils.requestTimeout(captureSingleFrame, waitBetweenFrames);\r\n                }\r\n\r\n                if (!pendingFrames) {\r\n                    ag.getBase64GIF(function (image) {\r\n                        callback({\r\n                            'error': false,\r\n                            'errorCode': '',\r\n                            'errorMsg': '',\r\n                            'image': image,\r\n                            'cameraStream': cameraStream,\r\n                            'videoElement': videoElement,\r\n                            'webcamVideoElement': webcamVideoElement,\r\n                            'savedRenderingContexts': renderingContextsToSave,\r\n                            'keepCameraOn': keepCameraOn\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n        };\r\n\r\n        numFrames = numFrames !== undefined ? numFrames : 10;\r\n        interval = interval !== undefined ? interval : 0.1; // In seconds\r\n\r\n        canvas.width = gifWidth;\r\n        canvas.height = gifHeight;\r\n        context = canvas.getContext('2d');\r\n\r\n        (function capture() {\r\n            if (!savedRenderingContexts.length && videoElement.currentTime === 0) {\r\n                utils.requestTimeout(capture, 100);\r\n\r\n                return;\r\n            }\r\n\r\n            captureFrames();\r\n        })();\r\n    },\r\n    getCropDimensions: function getCropDimensions() {\r\n        var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n        var width = obj.videoWidth;\r\n        var height = obj.videoHeight;\r\n        var gifWidth = obj.gifWidth;\r\n        var gifHeight = obj.gifHeight;\r\n        var result = {\r\n            width: 0,\r\n            height: 0,\r\n            scaledWidth: 0,\r\n            scaledHeight: 0\r\n        };\r\n\r\n        if (width > height) {\r\n            result.width = Math.round(width * (gifHeight / height)) - gifWidth;\r\n            result.scaledWidth = Math.round(result.width * (height / gifHeight));\r\n        } else {\r\n            result.height = Math.round(height * (gifWidth / width)) - gifHeight;\r\n            result.scaledHeight = Math.round(result.height * (width / gifWidth));\r\n        }\r\n\r\n        return result;\r\n    }\r\n};\r\n\r\n/*\r\n  videoStream.js\r\n  ==============\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\n// Dependencies\r\nvar videoStream = {\r\n    loadedData: false,\r\n    defaultVideoDimensions: {\r\n        width: 640,\r\n        height: 480\r\n    },\r\n    findVideoSize: function findVideoSizeMethod(obj) {\r\n        findVideoSizeMethod.attempts = findVideoSizeMethod.attempts || 0;\r\n\r\n        var cameraStream = obj.cameraStream,\r\n            completedCallback = obj.completedCallback,\r\n            videoElement = obj.videoElement;\r\n\r\n\r\n        if (!videoElement) {\r\n            return;\r\n        }\r\n\r\n        if (videoElement.videoWidth > 0 && videoElement.videoHeight > 0) {\r\n            videoElement.removeEventListener('loadeddata', videoStream.findVideoSize);\r\n\r\n            completedCallback({\r\n                videoElement: videoElement,\r\n                cameraStream: cameraStream,\r\n                videoWidth: videoElement.videoWidth,\r\n                videoHeight: videoElement.videoHeight\r\n            });\r\n        } else {\r\n            if (findVideoSizeMethod.attempts < 10) {\r\n                findVideoSizeMethod.attempts += 1;\r\n\r\n                utils.requestTimeout(function () {\r\n                    videoStream.findVideoSize(obj);\r\n                }, 400);\r\n            } else {\r\n                completedCallback({\r\n                    videoElement: videoElement,\r\n                    cameraStream: cameraStream,\r\n                    videoWidth: videoStream.defaultVideoDimensions.width,\r\n                    videoHeight: videoStream.defaultVideoDimensions.height\r\n                });\r\n            }\r\n        }\r\n    },\r\n    onStreamingTimeout: function onStreamingTimeout(callback) {\r\n        if (utils.isFunction(callback)) {\r\n            callback({\r\n                error: true,\r\n                errorCode: 'getUserMedia',\r\n                errorMsg: 'There was an issue with the getUserMedia API - Timed out while trying to start streaming',\r\n                image: null,\r\n                cameraStream: {}\r\n            });\r\n        }\r\n    },\r\n    stream: function stream(obj) {\r\n        var existingVideo = utils.isArray(obj.existingVideo) ? obj.existingVideo[0] : obj.existingVideo;\r\n        var cameraStream = obj.cameraStream,\r\n            completedCallback = obj.completedCallback,\r\n            streamedCallback = obj.streamedCallback,\r\n            videoElement = obj.videoElement;\r\n\r\n\r\n        if (utils.isFunction(streamedCallback)) {\r\n            streamedCallback();\r\n        }\r\n\r\n        if (existingVideo) {\r\n            if (utils.isString(existingVideo)) {\r\n                videoElement.src = existingVideo;\r\n                videoElement.innerHTML = '<source src=\"' + existingVideo + '\" type=\"video/' + utils.getExtension(existingVideo) + '\" />';\r\n            } else if (existingVideo instanceof Blob) {\r\n                try {\r\n                    videoElement.src = utils.URL.createObjectURL(existingVideo);\r\n                } catch (e) {}\r\n\r\n                videoElement.innerHTML = '<source src=\"' + existingVideo + '\" type=\"' + existingVideo.type + '\" />';\r\n            }\r\n        } else if (videoElement.mozSrcObject) {\r\n            videoElement.mozSrcObject = cameraStream;\r\n        } else if (utils.URL) {\r\n            try {\r\n                videoElement.srcObject = cameraStream;\r\n                videoElement.src = utils.URL.createObjectURL(cameraStream);\r\n            } catch (e) {\r\n                videoElement.srcObject = cameraStream;\r\n            }\r\n        }\r\n\r\n        videoElement.play();\r\n\r\n        utils.requestTimeout(function checkLoadedData() {\r\n            checkLoadedData.count = checkLoadedData.count || 0;\r\n\r\n            if (videoStream.loadedData === true) {\r\n                videoStream.findVideoSize({\r\n                    videoElement: videoElement,\r\n                    cameraStream: cameraStream,\r\n                    completedCallback: completedCallback\r\n                });\r\n\r\n                videoStream.loadedData = false;\r\n            } else {\r\n                checkLoadedData.count += 1;\r\n\r\n                if (checkLoadedData.count > 10) {\r\n                    videoStream.findVideoSize({\r\n                        videoElement: videoElement,\r\n                        cameraStream: cameraStream,\r\n                        completedCallback: completedCallback\r\n                    });\r\n                } else {\r\n                    checkLoadedData();\r\n                }\r\n            }\r\n        }, 0);\r\n    },\r\n    startStreaming: function startStreaming(obj) {\r\n        var errorCallback = utils.isFunction(obj.error) ? obj.error : utils.noop;\r\n        var streamedCallback = utils.isFunction(obj.streamed) ? obj.streamed : utils.noop;\r\n        var completedCallback = utils.isFunction(obj.completed) ? obj.completed : utils.noop;\r\n        var crossOrigin = obj.crossOrigin,\r\n            existingVideo = obj.existingVideo,\r\n            lastCameraStream = obj.lastCameraStream,\r\n            options = obj.options,\r\n            webcamVideoElement = obj.webcamVideoElement;\r\n\r\n        var videoElement = utils.isElement(existingVideo) ? existingVideo : webcamVideoElement ? webcamVideoElement : document.createElement('video');\r\n        var cameraStream = void 0;\r\n\r\n        if (crossOrigin) {\r\n            videoElement.crossOrigin = options.crossOrigin;\r\n        }\r\n\r\n        videoElement.autoplay = true;\r\n        videoElement.loop = true;\r\n        videoElement.muted = true;\r\n        videoElement.addEventListener('loadeddata', function (event) {\r\n            videoStream.loadedData = true;\r\n            if (options.offset) {\r\n                videoElement.currentTime = options.offset;\r\n            }\r\n        });\r\n\r\n        if (existingVideo) {\r\n            videoStream.stream({\r\n                videoElement: videoElement,\r\n                existingVideo: existingVideo,\r\n                completedCallback: completedCallback\r\n            });\r\n        } else if (lastCameraStream) {\r\n            videoStream.stream({\r\n                videoElement: videoElement,\r\n                cameraStream: lastCameraStream,\r\n                streamedCallback: streamedCallback,\r\n                completedCallback: completedCallback\r\n            });\r\n        } else {\r\n            utils.getUserMedia({\r\n                video: true\r\n            }, function (stream) {\r\n                videoStream.stream({\r\n                    videoElement: videoElement,\r\n                    cameraStream: stream,\r\n                    streamedCallback: streamedCallback,\r\n                    completedCallback: completedCallback\r\n                });\r\n            }, errorCallback);\r\n        }\r\n    },\r\n    startVideoStreaming: function startVideoStreaming(callback) {\r\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n\r\n        var timeoutLength = options.timeout !== undefined ? options.timeout : 0;\r\n        var originalCallback = options.callback;\r\n        var webcamVideoElement = options.webcamVideoElement;\r\n        var noGetUserMediaSupportTimeout = void 0;\r\n\r\n        // Some browsers apparently have support for video streaming because of the\r\n        // presence of the getUserMedia function, but then do not answer our\r\n        // calls for streaming.\r\n        // So we'll set up this timeout and if nothing happens after a while, we'll\r\n        // conclude that there's no actual getUserMedia support.\r\n        if (timeoutLength > 0) {\r\n            noGetUserMediaSupportTimeout = utils.requestTimeout(function () {\r\n                videoStream.onStreamingTimeout(originalCallback);\r\n            }, 10000);\r\n        }\r\n\r\n        videoStream.startStreaming({\r\n            error: function error() {\r\n                originalCallback({\r\n                    error: true,\r\n                    errorCode: 'getUserMedia',\r\n                    errorMsg: 'There was an issue with the getUserMedia API - the user probably denied permission',\r\n                    image: null,\r\n                    cameraStream: {}\r\n                });\r\n            },\r\n            streamed: function streamed() {\r\n                // The streaming started somehow, so we can assume there is getUserMedia support\r\n                clearTimeout(noGetUserMediaSupportTimeout);\r\n            },\r\n            completed: function completed() {\r\n                var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n                var cameraStream = obj.cameraStream,\r\n                    videoElement = obj.videoElement,\r\n                    videoHeight = obj.videoHeight,\r\n                    videoWidth = obj.videoWidth;\r\n\r\n\r\n                callback({\r\n                    cameraStream: cameraStream,\r\n                    videoElement: videoElement,\r\n                    videoHeight: videoHeight,\r\n                    videoWidth: videoWidth\r\n                });\r\n            },\r\n            lastCameraStream: options.lastCameraStream,\r\n            webcamVideoElement: webcamVideoElement,\r\n            crossOrigin: options.crossOrigin,\r\n            options: options\r\n        });\r\n    },\r\n    stopVideoStreaming: function stopVideoStreaming(obj) {\r\n        obj = utils.isObject(obj) ? obj : {};\r\n\r\n        var _obj = obj,\r\n            keepCameraOn = _obj.keepCameraOn,\r\n            videoElement = _obj.videoElement,\r\n            webcamVideoElement = _obj.webcamVideoElement;\r\n\r\n        var cameraStream = obj.cameraStream || {};\r\n        var cameraStreamTracks = cameraStream.getTracks ? cameraStream.getTracks() || [] : [];\r\n        var hasCameraStreamTracks = !!cameraStreamTracks.length;\r\n        var firstCameraStreamTrack = cameraStreamTracks[0];\r\n\r\n        if (!keepCameraOn && hasCameraStreamTracks) {\r\n            if (utils.isFunction(firstCameraStreamTrack.stop)) {\r\n                // Stops the camera stream\r\n                firstCameraStreamTrack.stop();\r\n            }\r\n        }\r\n\r\n        if (utils.isElement(videoElement) && !webcamVideoElement) {\r\n            // Pauses the video, revokes the object URL (freeing up memory), and remove the video element\r\n            videoElement.pause();\r\n\r\n            // Destroys the object url\r\n            if (utils.isFunction(utils.URL.revokeObjectURL) && !utils.webWorkerError) {\r\n                if (videoElement.src) {\r\n                    utils.URL.revokeObjectURL(videoElement.src);\r\n                }\r\n            }\r\n\r\n            // Removes the video element from the DOM\r\n            utils.removeElement(videoElement);\r\n        }\r\n    }\r\n};\r\n\r\n/*\r\n  stopVideoStreaming.js\r\n  =====================\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\nfunction stopVideoStreaming(options) {\r\n  options = utils.isObject(options) ? options : {};\r\n\r\n  videoStream.stopVideoStreaming(options);\r\n}\r\n\r\n/*\r\n  createAndGetGIF.js\r\n  ==================\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\n// Dependencies\r\nfunction createAndGetGIF(obj, callback) {\r\n    var options = obj.options || {};\r\n\r\n    var images = options.images,\r\n        video = options.video;\r\n\r\n    var gifWidth = Number(options.gifWidth);\r\n    var gifHeight = Number(options.gifHeight);\r\n    var numFrames = Number(options.numFrames);\r\n    var cameraStream = obj.cameraStream,\r\n        videoElement = obj.videoElement,\r\n        videoWidth = obj.videoWidth,\r\n        videoHeight = obj.videoHeight;\r\n\r\n    var cropDimensions = screenShot.getCropDimensions({\r\n        videoWidth: videoWidth,\r\n        videoHeight: videoHeight,\r\n        gifHeight: gifHeight,\r\n        gifWidth: gifWidth\r\n    });\r\n    var completeCallback = callback;\r\n\r\n    options.crop = cropDimensions;\r\n    options.videoElement = videoElement;\r\n    options.videoWidth = videoWidth;\r\n    options.videoHeight = videoHeight;\r\n    options.cameraStream = cameraStream;\r\n\r\n    if (!utils.isElement(videoElement)) {\r\n        return;\r\n    }\r\n\r\n    videoElement.width = gifWidth + cropDimensions.width;\r\n    videoElement.height = gifHeight + cropDimensions.height;\r\n\r\n    if (!options.webcamVideoElement) {\r\n        utils.setCSSAttr(videoElement, {\r\n            position: 'fixed',\r\n            opacity: '0'\r\n        });\r\n\r\n        document.body.appendChild(videoElement);\r\n    }\r\n\r\n    // Firefox doesn't seem to obey autoplay if the element is not in the DOM when the content\r\n    // is loaded, so we must manually trigger play after adding it, or the video will be frozen\r\n    videoElement.play();\r\n\r\n    screenShot.getGIF(options, function (obj) {\r\n        if ((!images || !images.length) && (!video || !video.length)) {\r\n            stopVideoStreaming(obj);\r\n        }\r\n\r\n        completeCallback(obj);\r\n    });\r\n}\r\n\r\n/*\r\n  existingVideo.js\r\n  ================\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\n// Dependencies\r\nfunction existingVideo() {\r\n    var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n    var callback = obj.callback,\r\n        existingVideo = obj.existingVideo,\r\n        options = obj.options;\r\n\r\n    var skipObj = {\r\n        getUserMedia: true,\r\n        'window.URL': true\r\n    };\r\n    var errorObj = error.validate(skipObj);\r\n    var loadedImages = 0;\r\n    var videoType = void 0;\r\n    var videoSrc = void 0;\r\n    var tempImage = void 0;\r\n    var ag = void 0;\r\n\r\n    if (errorObj.error) {\r\n        return callback(errorObj);\r\n    }\r\n\r\n    if (utils.isElement(existingVideo) && existingVideo.src) {\r\n        videoSrc = existingVideo.src;\r\n        videoType = utils.getExtension(videoSrc);\r\n\r\n        if (!utils.isSupported.videoCodecs[videoType]) {\r\n            return callback(error.messages.videoCodecs);\r\n        }\r\n    } else if (utils.isArray(existingVideo)) {\r\n        utils.each(existingVideo, function (iterator, videoSrc) {\r\n            if (videoSrc instanceof Blob) {\r\n                videoType = videoSrc.type.substr(videoSrc.type.lastIndexOf('/') + 1, videoSrc.length);\r\n            } else {\r\n                videoType = videoSrc.substr(videoSrc.lastIndexOf('.') + 1, videoSrc.length);\r\n            }\r\n\r\n            if (utils.isSupported.videoCodecs[videoType]) {\r\n                existingVideo = videoSrc;\r\n\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n\r\n    videoStream.startStreaming({\r\n        completed: function completed(obj) {\r\n            obj.options = options || {};\r\n\r\n            createAndGetGIF(obj, callback);\r\n        },\r\n        existingVideo: existingVideo,\r\n        crossOrigin: options.crossOrigin,\r\n        options: options\r\n    });\r\n}\r\n\r\n/*\r\n  existingWebcam.js\r\n  =================\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\n// Dependencies\r\nfunction existingWebcam() {\r\n    var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n    var callback = obj.callback,\r\n        lastCameraStream = obj.lastCameraStream,\r\n        options = obj.options,\r\n        webcamVideoElement = obj.webcamVideoElement;\r\n\r\n\r\n    if (!isWebCamGIFSupported()) {\r\n        return callback(error.validate());\r\n    }\r\n\r\n    if (options.savedRenderingContexts.length) {\r\n        screenShot.getGIF(options, function (obj) {\r\n            callback(obj);\r\n        });\r\n\r\n        return;\r\n    }\r\n\r\n    videoStream.startVideoStreaming(function () {\r\n        var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n        obj.options = options || {};\r\n\r\n        createAndGetGIF(obj, callback);\r\n    }, {\r\n        lastCameraStream: lastCameraStream,\r\n        callback: callback,\r\n        webcamVideoElement: webcamVideoElement,\r\n        crossOrigin: options.crossOrigin\r\n    });\r\n}\r\n\r\n/*\r\n  createGIF.js\r\n  ============\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\n// Dependencies\r\nfunction createGIF(userOptions, callback) {\r\n  callback = utils.isFunction(userOptions) ? userOptions : callback;\r\n  userOptions = utils.isObject(userOptions) ? userOptions : {};\r\n\r\n  if (!utils.isFunction(callback)) {\r\n    return;\r\n  }\r\n\r\n  var options = utils.mergeOptions(defaultOptions, userOptions) || {};\r\n  var lastCameraStream = userOptions.cameraStream;\r\n  var images = options.images;\r\n  var imagesLength = images ? images.length : 0;\r\n  var video = options.video;\r\n  var webcamVideoElement = options.webcamVideoElement;\r\n\r\n  options = utils.mergeOptions(options, {\r\n    'gifWidth': Math.floor(options.gifWidth),\r\n    'gifHeight': Math.floor(options.gifHeight)\r\n  });\r\n\r\n  // If the user would like to create a GIF from an existing image(s)\r\n  if (imagesLength) {\r\n    existingImages({\r\n      'images': images,\r\n      'imagesLength': imagesLength,\r\n      'callback': callback,\r\n      'options': options\r\n    });\r\n  } else if (video) {\r\n    // If the user would like to create a GIF from an existing HTML5 video\r\n    existingVideo({\r\n      'existingVideo': video,\r\n      callback: callback,\r\n      options: options\r\n    });\r\n  } else {\r\n    // If the user would like to create a GIF from a webcam stream\r\n    existingWebcam({\r\n      lastCameraStream: lastCameraStream,\r\n      callback: callback,\r\n      webcamVideoElement: webcamVideoElement,\r\n      options: options\r\n    });\r\n  }\r\n}\r\n\r\n/*\r\n  takeSnapShot.js\r\n  ===============\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\nfunction takeSnapShot(userOptions, callback) {\r\n    callback = utils.isFunction(userOptions) ? userOptions : callback;\r\n    userOptions = utils.isObject(userOptions) ? userOptions : {};\r\n\r\n    if (!utils.isFunction(callback)) {\r\n        return;\r\n    }\r\n\r\n    var mergedOptions = utils.mergeOptions(defaultOptions, userOptions);\r\n    var options = utils.mergeOptions(mergedOptions, {\r\n        'interval': .1,\r\n        'numFrames': 1,\r\n        'gifWidth': Math.floor(mergedOptions.gifWidth),\r\n        'gifHeight': Math.floor(mergedOptions.gifHeight)\r\n    });\r\n\r\n    createGIF(options, callback);\r\n}\r\n\r\n/*\r\n  API.js\r\n  ======\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n*/\r\n\r\n// Dependencies\r\nvar API = {\r\n  'utils': utils$2,\r\n  'error': error$2,\r\n  'defaultOptions': defaultOptions$2,\r\n  'createGIF': createGIF,\r\n  'takeSnapShot': takeSnapShot,\r\n  'stopVideoStreaming': stopVideoStreaming,\r\n  'isSupported': isSupported,\r\n  'isWebCamGIFSupported': isWebCamGIFSupported,\r\n  'isExistingVideoGIFSupported': isExistingVideoGIFSupported,\r\n  'isExistingImagesGIFSupported': isSupported$1,\r\n  'VERSION': '0.4.5'\r\n};\r\n\r\n/*\r\n  index.js\r\n  ========\r\n*/\r\n\r\n/* Copyright  2017 Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n */\r\n\r\n// Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, and plain browser loading\r\nif (typeof define === 'function' && define.amd) {\r\n    define([], function () {\r\n        return API;\r\n    });\r\n} else if (typeof exports !== 'undefined') {\r\n    module.exports = API;\r\n} else {\r\n    window.gifshot = API;\r\n}\r\n}(typeof window !== \"undefined\" ? window : {}, typeof document !== \"undefined\" ? document : { createElement: function() {} }, typeof window !== \"undefined\" ? window.navigator : {}));\r\n"],"file":"index.js"}